{"ast":null,"code":"import axios from 'axios';\nimport async from 'async';\nimport { BASE_URL_DEV } from '../utils';\nexport async function fetchAndSetFileHighlights(dispatch, state, file, setIsLoading) {\n  try {\n    console.log(\"Starting to fetch and set file highlights for file:\", file);\n    const result = await axios.get(`${BASE_URL_DEV}/highlights-json/${state.auth.userPublicId}/${file.name}`, {\n      headers: {\n        'x-access-token': state.auth && state.auth.authToken\n      }\n    });\n    console.log(\"Received highlights for file:\", file.name, result.data);\n    dispatch({\n      type: \"SET_CURR_FILE\",\n      payload: file\n    });\n    console.log(\"Dispatched SET_CURR_FILE with payload:\", file);\n    if (result.data && result.data.highlights) {\n      dispatch({\n        type: \"SET_FILE_HIGHLIGHTS\",\n        payload: {\n          name: file.name,\n          highlights: result.data.highlights\n        }\n      });\n      console.log(\"Dispatched SET_FILE_HIGHLIGHTS with highlights for file:\", file.name);\n    } else {\n      dispatch({\n        type: \"SET_FILE_HIGHLIGHTS\",\n        payload: {\n          name: file.name,\n          highlights: []\n        }\n      });\n      console.log(\"Dispatched SET_FILE_HIGHLIGHTS with empty highlights for file:\", file.name);\n    }\n    const filesResponse = await axios(`${BASE_URL_DEV}/get/files`, {\n      headers: {\n        \"x-access-token\": state.auth && state.auth.authToken\n      }\n    });\n    console.log(\"Fetched files response:\", filesResponse.data);\n    const allgraphs = await axios(`${BASE_URL_DEV}/get-graphdata`, {\n      headers: {\n        \"x-access-token\": state.auth && state.auth.authToken\n      }\n    });\n    console.log(\"Fetched graph data:\", allgraphs.data);\n    const Obj = {};\n    allgraphs.data.graphdata.forEach(x => {\n      Obj[x.fileName] = x.links.filter(e => e.source === \"CITATION\" || e.source === \"PROVISION\");\n    });\n    const fileNew = filesResponse.data.files.map(element => {\n      return {\n        ...element,\n        CITATION: Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source === \"CITATION\") : [\"N/A\"],\n        PROVISION: Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source === \"PROVISION\") : [\"N/A\"]\n      };\n    });\n    console.log(\"New file data with citations and provisions:\", fileNew);\n    dispatch({\n      type: \"ADD_FILE\",\n      payload: fileNew\n    });\n    dispatch({\n      type: \"SET_MODAL\",\n      payload: true\n    });\n    if (setIsLoading) {\n      setIsLoading(false);\n    }\n  } catch (error) {\n    console.log(\"Error fetching and setting file highlights:\", error);\n    if (setIsLoading) {\n      setIsLoading(false);\n    }\n  }\n}","map":{"version":3,"names":["axios","async","BASE_URL_DEV","fetchAndSetFileHighlights","dispatch","state","file","setIsLoading","console","log","result","get","auth","userPublicId","name","headers","authToken","data","type","payload","highlights","filesResponse","allgraphs","Obj","graphdata","forEach","x","fileName","links","filter","e","source","fileNew","files","map","element","CITATION","length","PROVISION","error"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/utils/setPdfHighlights.js"],"sourcesContent":["import axios from 'axios';\nimport async from 'async';\nimport { BASE_URL_DEV } from '../utils';\n\nexport async function fetchAndSetFileHighlights(dispatch, state, file, setIsLoading) {\n    try {\n        console.log(\"Starting to fetch and set file highlights for file:\", file);\n\n        const result = await axios.get(`${BASE_URL_DEV}/highlights-json/${state.auth.userPublicId}/${file.name}`, {\n            headers: {\n                'x-access-token': state.auth && state.auth.authToken,\n            }\n        });\n\n        console.log(\"Received highlights for file:\", file.name, result.data);\n        \n        dispatch({ type: \"SET_CURR_FILE\", payload: file });\n        console.log(\"Dispatched SET_CURR_FILE with payload:\", file);\n            \n        if (result.data && result.data.highlights) {\n            dispatch({\n                type: \"SET_FILE_HIGHLIGHTS\",\n                payload: {\n                    name: file.name,\n                    highlights: result.data.highlights\n                }\n            });\n            console.log(\"Dispatched SET_FILE_HIGHLIGHTS with highlights for file:\", file.name);\n        } else {\n            dispatch({\n                type: \"SET_FILE_HIGHLIGHTS\",\n                payload: {\n                    name: file.name,\n                    highlights: []\n                }\n            });\n            console.log(\"Dispatched SET_FILE_HIGHLIGHTS with empty highlights for file:\", file.name);\n        }\n\n        const filesResponse = await axios(`${BASE_URL_DEV}/get/files`, {\n            headers: {\n                \"x-access-token\": state.auth && state.auth.authToken,\n            },\n        });\n        console.log(\"Fetched files response:\", filesResponse.data);\n\n        const allgraphs = await axios(`${BASE_URL_DEV}/get-graphdata`, {\n            headers: {\n                \"x-access-token\": state.auth && state.auth.authToken,\n            },\n        });\n        console.log(\"Fetched graph data:\", allgraphs.data);\n\n        const Obj = {};\n        allgraphs.data.graphdata.forEach(x => {\n            Obj[x.fileName] = x.links.filter(e => e.source === \"CITATION\" || e.source === \"PROVISION\");\n        });\n\n        const fileNew = filesResponse.data.files.map(element => {\n            return {\n                ...element,\n                CITATION: Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source === \"CITATION\") : [\"N/A\"],\n                PROVISION: Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source === \"PROVISION\") : [\"N/A\"]\n            };\n        });\n        console.log(\"New file data with citations and provisions:\", fileNew);\n\n        dispatch({ type: \"ADD_FILE\", payload: fileNew });\n        dispatch({ type: \"SET_MODAL\", payload: true });\n\n        if (setIsLoading) {\n            setIsLoading(false);\n        }\n    } catch (error) {\n        console.log(\"Error fetching and setting file highlights:\", error);\n        if (setIsLoading) {\n            setIsLoading(false);\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}