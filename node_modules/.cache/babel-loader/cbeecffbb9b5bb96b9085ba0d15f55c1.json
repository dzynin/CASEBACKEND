{"ast":null,"code":"import { createElement, L10n, isNullOrUndefined, select, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { TextElementBox, ElementBox, ImageElementBox, FieldElementBox, TextFormField, DropDownFormField, ParagraphWidget, HeaderFooterWidget, ChartElementBox } from '../viewer/page';\nimport { WRowFormat, WCharacterFormat } from '../index';\nimport { HelperMethods } from '../editor/editor-helper';\nimport { Dictionary } from '../../base/index';\n/**\n * Track changes pane\n */\nvar TrackChangesPane = /** @class */function () {\n  function TrackChangesPane(owner, commentReviewPane) {\n    this.users = [];\n    this.enableButtons = true;\n    this.viewTypeitems = [];\n    this.sortedRevisions = [];\n    this.noChangesVisibleInternal = true;\n    this.isTrackingPageBreak = false;\n    /***\n     * @private\n     */\n    this.tableRevisions = new Dictionary();\n    this.owner = owner;\n    this.commentReviewPane = commentReviewPane;\n    this.locale = new L10n('documenteditor', this.owner.defaultLocale);\n    this.locale.setLocale(this.owner.locale);\n    this.selectedUser = this.locale.getConstant('All');\n    this.selectedType = this.locale.getConstant('All');\n    this.initTrackChangePane();\n    this.commentReviewPane.reviewTab.items[1].content = this.trackChangeDiv;\n    if (!Browser.isIE) {\n      this.commentReviewPane.reviewTab.refresh();\n    }\n    if (this.owner.enableRtl) {\n      this.closeButton = createElement('button', {\n        className: 'e-de-close-icon e-btn e-flat e-icon-btn',\n        id: 'close',\n        attrs: {\n          type: 'button',\n          style: 'position:absolute;top:6px;left:1px'\n        }\n      });\n    } else {\n      this.closeButton = createElement('button', {\n        className: 'e-de-close-icon e-btn e-flat e-icon-btn',\n        id: 'close',\n        attrs: {\n          type: 'button',\n          style: 'position:absolute;top:6px;right:1px'\n        }\n      });\n    }\n    this.closeButton.title = this.locale.getConstant('Close');\n    this.closeButton.setAttribute('aria-label', this.locale.getConstant('Close'));\n    var closeSpan = createElement('span', {\n      className: 'e-de-op-close-icon e-de-close-icon e-btn-icon e-icons'\n    });\n    this.closeButton.appendChild(closeSpan);\n    this.commentReviewPane.reviewTab.element.appendChild(this.closeButton);\n    this.closeButton.addEventListener('click', this.commentReviewPane.closePane.bind(this.commentReviewPane));\n  }\n  Object.defineProperty(TrackChangesPane.prototype, \"setNoChangesVisibility\", {\n    get: function () {\n      return this.noChangesVisibleInternal;\n    },\n    set: function (visible) {\n      this.isChangesTabVisible = !visible;\n      this.noChangeDivElement.style.display = visible ? 'block' : 'none';\n      this.noChangesVisibleInternal = visible;\n      this.enableDisableToolbarItem(!visible);\n      this.commentReviewPane.reviewTab.hideTab(1, visible);\n      this.owner.notify('reviewPane', {\n        changes: !visible,\n        comment: this.commentReviewPane.isCommentTabVisible\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TrackChangesPane.prototype, \"currentSelectedRevision\", {\n    get: function () {\n      return this.currentSelectedRevisionInternal;\n    },\n    set: function (value) {\n      var selectedElement = select('.e-de-trckchanges-inner-select', this.changesInfoDiv);\n      if (isNullOrUndefined(value)) {\n        if (!isNullOrUndefined(selectedElement)) {\n          selectedElement.classList.remove('e-de-trckchanges-inner-select');\n        }\n      } else if (value !== this.currentSelectedRevisionInternal || isNullOrUndefined(selectedElement)) {\n        if (selectedElement) {\n          selectedElement.classList.remove('e-de-trckchanges-inner-select');\n        }\n        if (this.changes.length > 0 && this.changes.containsKey(value)) {\n          var currentChangeView = this.changes.get(value);\n          currentChangeView.singleInnerDiv.classList.add('e-de-trckchanges-inner-select');\n        }\n      }\n      this.currentSelectedRevisionInternal = value;\n      selectedElement = select('.e-de-trckchanges-inner-select', this.changesInfoDiv);\n      if (!isNullOrUndefined(selectedElement)) {\n        selectedElement.parentElement.scrollIntoView({\n          block: 'nearest'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TrackChangesPane.prototype.initTrackChangePane = function () {\n    this.changes = new Dictionary();\n    this.renderedChanges = new Dictionary();\n    this.trackChangeDiv = createElement('div', {\n      className: 'e-de-tc-pane'\n    });\n    this.trackChangeDiv.appendChild(this.initPaneHeader());\n    this.changesInfoDiv = createElement('div', {\n      id: 'e-de-tc-pane-revision',\n      styles: 'overflow:auto'\n    });\n    this.trackChangeDiv.appendChild(this.changesInfoDiv);\n    this.noChangeDivElement = createElement('div', {\n      styles: 'display:none;',\n      className: 'e-de-tc-no-chng'\n    });\n    this.noChangeDivElement.textContent = this.locale.getConstant('No changes');\n    this.changesInfoDiv.appendChild(this.noChangeDivElement);\n    this.updateTrackChanges();\n  };\n  TrackChangesPane.prototype.initPaneHeader = function () {\n    var _this = this;\n    this.toolbarElement = createElement('div', {\n      className: 'e-de-track-toolbar'\n    });\n    this.toolbar = new Toolbar({\n      enableRtl: this.owner.enableRtl,\n      items: [{\n        text: this.locale.getConstant('User') + ':',\n        cssClass: 'e-de-track-toolbar-overlay',\n        disabled: true\n      }, {\n        template: createElement('div', {\n          id: 'e-de-user-list',\n          attrs: {\n            'role': 'button'\n          }\n        })\n      }, {\n        type: 'Separator'\n      }, {\n        text: this.locale.getConstant('View') + ':',\n        cssClass: 'e-de-track-toolbar-overlay',\n        disabled: true\n      }, {\n        template: createElement('div', {\n          id: 'e-de-revision-list',\n          attrs: {\n            'role': 'button'\n          }\n        })\n      }, {\n        prefixIcon: 'e-de-nav-left-arrow e-de-tc-tbr',\n        align: 'Right',\n        cssClass: 'e-de-nvgte-left',\n        tooltipText: this.locale.getConstant('Previous Changes'),\n        click: this.navigatePreviousChanges.bind(this)\n      }, {\n        prefixIcon: 'e-de-nav-right-arrow e-de-tc-tbr',\n        align: 'Right',\n        cssClass: 'e-de-nvgte-right',\n        tooltipText: this.locale.getConstant('Next Changes'),\n        click: this.navigateNextChanges.bind(this)\n      }, {\n        template: createElement('div', {\n          id: 'e-de-menu-option',\n          attrs: {\n            'role': 'button'\n          }\n        }),\n        align: 'Right',\n        cssClass: 'e-de-tc-tbr',\n        tooltipText: this.locale.getConstant('More Options') + '...'\n      }]\n    });\n    this.toolbar.appendTo(this.toolbarElement);\n    var navigateLeftButton = select('.e-de-nvgte-left', this.toolbarElement);\n    navigateLeftButton.firstChild.classList.add('e-tc-nvgte');\n    var navigateRightButton = select('.e-de-nvgte-right', this.toolbarElement);\n    navigateRightButton.firstChild.classList.add('e-tc-nvgte');\n    //User list drop down button\n    var userButtonEle = select('#e-de-user-list', this.toolbarElement);\n    this.userDropDownitems = [{\n      text: this.locale.getConstant('All')\n    }];\n    this.userDropDown = {\n      items: this.userDropDownitems,\n      cssClass: 'e-de-track-pane-drop-btn e-tc-btn-bg-clr',\n      select: this.onUserSelect.bind(this),\n      beforeOpen: this.onUserOpen.bind(this),\n      beforeItemRender: function (args) {\n        _this.beforeDropDownItemRender(args, _this.selectedUser);\n      }\n    };\n    this.userDropDownButton = new DropDownButton(this.userDropDown);\n    this.userDropDownButton.appendTo(userButtonEle);\n    this.userDropDownButton.content = this.getSpanView(this.userDropDown.items[0].text, 0);\n    //Revision view type drop down button\n    var viewTypeEle = select('#e-de-revision-list', this.toolbarElement);\n    this.viewTypeitems = [{\n      text: this.locale.getConstant('All')\n    }, {\n      text: this.locale.getConstant('Inserted')\n    }, {\n      text: this.locale.getConstant('Deleted')\n    }];\n    this.viewTypeDropDownButton = new DropDownButton({\n      items: this.viewTypeitems,\n      cssClass: 'e-de-track-pane-drop-btn e-tc-btn-bg-clr',\n      select: this.onTypeSelect.bind(this),\n      beforeItemRender: function (args) {\n        _this.beforeDropDownItemRender(args, _this.selectedType);\n      }\n    });\n    this.viewTypeDropDownButton.content = this.getSpanView(this.viewTypeitems[0].text, 1);\n    this.viewTypeDropDownButton.appendTo(viewTypeEle);\n    //More menu option drop down button\n    this.menuoptionEle = select('#e-de-menu-option', this.toolbarElement);\n    var menuOptions = [{\n      text: this.locale.getConstant('Accept all')\n    }, {\n      text: this.locale.getConstant('Reject all')\n    }];\n    var menuDropDown = {\n      items: menuOptions,\n      select: this.onMenuSelect.bind(this),\n      iconCss: 'e-de-menu-icon',\n      cssClass: 'e-caret-hide e-tc-btn-bg-clr'\n    };\n    this.menuDropDownButton = new DropDownButton(menuDropDown);\n    this.menuDropDownButton.appendTo(this.menuoptionEle);\n    return this.toolbarElement;\n  };\n  TrackChangesPane.prototype.beforeDropDownItemRender = function (args, content) {\n    args.element.innerHTML = '<span></span>' + args.item.text;\n    var span = args.element.children[0];\n    if (args.item.text === content) {\n      span.style.marginRight = '10px';\n      span.style.alignSelf = 'center';\n      span.setAttribute('class', 'e-de-selected-item e-icons');\n    } else {\n      args.element.children[0].style.marginRight = '25px';\n      args.element.children[0].classList.remove('e-de-selected-item');\n    }\n  };\n  TrackChangesPane.prototype.onUserOpen = function (arg) {\n    var ele = arg.element;\n    ele.style.maxHeight = '200px';\n    ele.style.overflowY = 'auto';\n  };\n  TrackChangesPane.prototype.enableDisableToolbarItem = function (enable) {\n    var elements = this.toolbar.element.querySelectorAll('.e-de-tc-tbr');\n    if (this.owner && this.owner.viewer) {\n      this.toolbar.enableItems(elements[0].parentElement.parentElement, enable);\n      this.toolbar.enableItems(elements[1].parentElement.parentElement, enable);\n      this.toolbar.enableItems(elements[2], enable);\n    }\n  };\n  TrackChangesPane.prototype.getSpanView = function (value, type) {\n    return (type === 0 ? '<span class=\"e-de-track-span-user\">' : '<span class=\"e-de-track-span-view\">') + value + '</span>';\n  };\n  TrackChangesPane.prototype.onMenuSelect = function (arg) {\n    var _this = this;\n    var selectedText = arg.item.text;\n    if (selectedText.match(this.locale.getConstant('Accept all'))) {\n      setTimeout(function () {\n        _this.owner.revisionsInternal.handleRevisionCollection(true, _this.sortedRevisions);\n      }, 0);\n    } else if (selectedText.match(this.locale.getConstant('Reject all'))) {\n      setTimeout(function () {\n        _this.owner.revisionsInternal.handleRevisionCollection(false, _this.sortedRevisions);\n        /* eslint-disable */\n      }, 0);\n    }\n    this.updateUsers();\n  };\n  TrackChangesPane.prototype.onSelection = function (revision) {\n    this.currentSelectedRevision = revision;\n  };\n  TrackChangesPane.prototype.onUserSelect = function (arg) {\n    var selectedText = arg.item.text;\n    this.selectedUser = selectedText;\n    this.userDropDownButton.content = this.getSpanView(selectedText, 0);\n    this.sortCollectionToDisplay();\n  };\n  TrackChangesPane.prototype.onTypeSelect = function (arg) {\n    var selectedText = arg.item.text;\n    this.selectedType = selectedText;\n    this.viewTypeDropDownButton.content = this.getSpanView(selectedText, 1);\n    this.sortCollectionToDisplay();\n  };\n  TrackChangesPane.prototype.updateMenuOptions = function () {\n    var revisionType;\n    if (this.selectedType !== this.locale.getConstant('All')) {\n      revisionType = this.selectedType === this.locale.getConstant('Inserted') ? this.locale.getConstant('Insertion') : this.locale.getConstant('Deletion');\n    }\n    if (this.selectedUser === this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n      this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + this.locale.getConstant('Changes');\n      this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + this.locale.getConstant('Changes');\n    } else if (this.selectedUser === this.locale.getConstant('All') && this.selectedType !== this.locale.getConstant('All')) {\n      this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + revisionType;\n      this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + revisionType;\n    } else if (this.selectedUser !== this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n      this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + this.locale.getConstant('Changes') + ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n      this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + this.locale.getConstant('Changes') + ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n    } else {\n      this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + revisionType + ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n      this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + revisionType + ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n    }\n    if (this.owner.documentHelper.isDocumentProtected || this.owner.isReadOnly) {\n      this.menuDropDownButton.disabled = true;\n    } else {\n      this.menuDropDownButton.disabled = false;\n    }\n  };\n  TrackChangesPane.prototype.sortCollectionToDisplay = function () {\n    var isRevisionVisible = false;\n    this.sortedRevisions = [];\n    this.updateMenuOptions();\n    for (var i = 0; i < this.changes.length; i++) {\n      var changes = this.changes.get(this.revisions[i]);\n      var singleChangesDiv = changes.outerSingleDiv;\n      if (this.selectedUser === this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n        singleChangesDiv.style.display = 'block';\n      } else if (this.selectedUser === this.locale.getConstant('All') && this.selectedType !== this.locale.getConstant('All')) {\n        if (this.locale.getConstant(changes.revisionType) === this.selectedType) {\n          singleChangesDiv.style.display = 'block';\n        } else {\n          singleChangesDiv.style.display = 'none';\n        }\n      } else if (this.selectedUser !== this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n        if (changes.user === this.selectedUser) {\n          singleChangesDiv.style.display = 'block';\n        } else {\n          singleChangesDiv.style.display = 'none';\n        }\n      } else {\n        if (changes.user === this.selectedUser && this.locale.getConstant(changes.revisionType) === this.selectedType) {\n          singleChangesDiv.style.display = 'block';\n        } else {\n          singleChangesDiv.style.display = 'none';\n        }\n      }\n      if (singleChangesDiv.style.display === 'block') {\n        this.sortedRevisions.push(this.revisions[i]);\n      }\n      isRevisionVisible = true;\n    }\n    this.setNoChangesVisibility = !isRevisionVisible;\n  };\n  TrackChangesPane.prototype.enableDisableButton = function (enableButton) {\n    this.enableButtons = enableButton;\n    this.updateTrackChanges();\n  };\n  TrackChangesPane.prototype.isUpdateTrackChanges = function (revisionCount) {\n    var isUpdate = false;\n    var isNoChangeDiv = false;\n    if (!isNullOrUndefined(this.changesInfoDiv)) {\n      if (this.changesInfoDiv.childNodes.length === 1 && this.changesInfoDiv.childNodes[0].className == 'e-de-tc-no-chng') {\n        isNoChangeDiv = true;\n      } else {\n        if (revisionCount !== this.changesInfoDiv.childNodes.length) {\n          isUpdate = true;\n        }\n      }\n    }\n    if (isNoChangeDiv || revisionCount > 0) {\n      isUpdate = true;\n    }\n    return isUpdate;\n  };\n  TrackChangesPane.prototype.updateCurrentTrackChanges = function (revision) {\n    var currentChangeView;\n    if (!isNullOrUndefined(revision)) {\n      currentChangeView = this.owner.trackChangesPane.changes.get(revision);\n    }\n    if (!isNullOrUndefined(currentChangeView) && revision.range.length > 0) {\n      var changesDiv = currentChangeView.singleInnerDiv.querySelector(\"#textDiv\");\n      while (changesDiv.firstChild) {\n        changesDiv.removeChild(changesDiv.firstChild);\n      }\n      currentChangeView.layoutElementText(revision.range, changesDiv);\n    }\n    if (!isNullOrUndefined(revision) && revision.range.length === 0) {\n      this.owner.revisions.remove(revision);\n    }\n  };\n  TrackChangesPane.prototype.updateTrackChanges = function (show) {\n    if (show || isNullOrUndefined(show)) {\n      if (this.owner.documentHelper.layout.isInitialLoad) {\n        this.tableRevisions.clear();\n        this.renderedChanges.clear();\n        this.removeAllChanges();\n      } else {\n        for (var i = 0; i < this.tableRevisions.keys.length; i++) {\n          var revision = this.tableRevisions.keys[i];\n          var index = this.revisions.indexOf(revision);\n          var removeChild = this.tableRevisions.get(revision)[this.tableRevisions.get(revision).length - 1] === revision;\n          if (!isNullOrUndefined(this.changes)) {\n            var changesSingleView = this.changes.get(revision);\n            if (removeChild && !isNullOrUndefined(this.changesInfoDiv)) {\n              var changesSingleView_1 = this.changes.get(revision);\n              this.changesInfoDiv.removeChild(changesSingleView_1.outerSingleDiv);\n            }\n          }\n          if (this.renderedChanges.containsKey(revision)) {\n            this.renderedChanges.remove(revision);\n          }\n          if (this.changes.containsKey(revision)) {\n            this.changes.remove(revision);\n          }\n          this.revisions.splice(index, 1);\n        }\n        this.tableRevisions.clear();\n      }\n      if (!this.enableButtons && !this.menuoptionEle.classList.contains('e-de-overlay')) {\n        this.menuoptionEle.classList.add('e-de-overlay');\n      } else if (this.menuoptionEle.classList.contains('e-de-overlay') && !this.owner.documentHelper.isDocumentProtected && !this.owner.isReadOnly) {\n        this.menuoptionEle.classList.remove('e-de-overlay');\n      }\n      this.isChangesTabVisible = true;\n      this.owner.notify('reviewPane', {\n        comment: this.commentReviewPane.isCommentTabVisible,\n        changes: this.isChangesTabVisible\n      });\n      if (this.owner.documentHelper.layout.isInitialLoad) {\n        for (var i = 0; i < this.owner.revisions.changes.length; i++) {\n          var revision = this.owner.revisions.changes[i];\n          var ranges = this.owner.revisions.changes[i].range[0];\n          if ((ranges instanceof TextElementBox || ranges instanceof FieldElementBox) && ranges.paragraph.containerWidget instanceof HeaderFooterWidget && isNullOrUndefined(ranges.paragraph.containerWidget.sectionFormat)) {\n            continue;\n          }\n          if (ranges instanceof TextElementBox && ranges.paragraph.containerWidget instanceof HeaderFooterWidget) {\n            var headerFooterType = ranges.paragraph.containerWidget.headerFooterType;\n            var sectionFormat = this.owner.selectionModule.sectionFormat;\n            if ((headerFooterType === 'EvenFooter' || headerFooterType === 'EvenHeader' || headerFooterType === 'OddFooter' || headerFooterType === 'OddHeader') && !sectionFormat.differentOddAndEvenPages) {\n              continue;\n            } else if ((headerFooterType === 'FirstPageHeader' || headerFooterType === 'FirstPageFooter') && !sectionFormat.differentFirstPage) {\n              continue;\n            }\n          }\n          if (this.changes.containsKey(revision)) {\n            continue;\n          }\n          if (ranges instanceof WRowFormat) {\n            var groupedRevision = this.groupTableRevisions(this.owner.revisions.changes, i);\n            if (groupedRevision.length > 1) {\n              var changeView = void 0;\n              for (var j = 0; j < groupedRevision.length; j++) {\n                var nextRevision = groupedRevision[j];\n                if (j === 0) {\n                  this.addChanges(nextRevision);\n                  changeView = this.changes.get(revision);\n                } else {\n                  var nextRowFormat = nextRevision.range[0];\n                  changeView.appendRowToTable(nextRowFormat, j);\n                  this.revisions.push(nextRevision);\n                  this.changes.add(nextRevision, changeView);\n                }\n                this.tableRevisions.add(nextRevision, groupedRevision);\n              }\n            } else {\n              this.addChanges(revision);\n            }\n          } else {\n            this.addChanges(revision);\n          }\n        }\n        for (var i = 0; i < this.renderedChanges.keys.length; i++) {\n          var changeView = this.renderedChanges.get(this.renderedChanges.keys[i]);\n          changeView.updateRevisionIndexAndCount(i + 1, this.renderedChanges.keys.length);\n        }\n      } else {\n        // Use this property to insert revision order wise in pane(revision order collapsed when using i value because total 10 revision, 2nd revision is table and table contain 5 row and each row preserved as a separate revision, so after table iteration i value is 6, so next revision inserted 6th position instead of 3).\n        var insertIndex = 0;\n        for (var i = 0; i < this.owner.revisions.changes.length; i++) {\n          var revision = this.owner.revisions.changes[i];\n          var ranges = this.owner.revisions.changes[i].range[0];\n          if (this.changes.containsKey(revision)) {\n            var currentChangeView = this.renderedChanges.get(revision);\n            if (isNullOrUndefined(currentChangeView)) {\n              continue;\n            }\n            if (!this.enableButtons) {\n              if (!currentChangeView.acceptButtonElement.classList.contains('e-de-overlay')) {\n                currentChangeView.acceptButtonElement.classList.add('e-de-overlay');\n                currentChangeView.rejectButtonElement.classList.add('e-de-overlay');\n              }\n            } else if (currentChangeView.acceptButtonElement.classList.contains('e-de-overlay') && !this.owner.documentHelper.isTrackedOnlyMode) {\n              currentChangeView.acceptButtonElement.classList.remove('e-de-overlay');\n              currentChangeView.rejectButtonElement.classList.remove('e-de-overlay');\n            }\n            insertIndex++;\n            continue;\n          }\n          if (ranges instanceof WRowFormat) {\n            var groupedRevision = this.groupTableRevisions(this.owner.revisions.changes, i);\n            if (groupedRevision.length > 1) {\n              if (insertIndex === 0) {\n                insertIndex = i;\n              }\n              var changeView = void 0;\n              for (var j = 0; j < groupedRevision.length; j++) {\n                var nextRevision = groupedRevision[j];\n                if (j === 0) {\n                  var currentChangeView = new ChangesSingleView(this.owner, this);\n                  this.changesInfoDiv.insertBefore(currentChangeView.createSingleChangesDiv(nextRevision), this.changesInfoDiv.children[insertIndex + 1]);\n                  this.revisions.splice(i, 0, nextRevision);\n                  this.changes.add(nextRevision, currentChangeView);\n                  this.renderedChanges.add(nextRevision, currentChangeView);\n                  changeView = this.changes.get(revision);\n                } else {\n                  var nextRowFormat = nextRevision.range[0];\n                  changeView.appendRowToTable(nextRowFormat, j);\n                  this.revisions.splice(i + j, 0, nextRevision);\n                  this.changes.add(nextRevision, changeView);\n                }\n                this.tableRevisions.add(nextRevision, groupedRevision);\n              }\n              insertIndex++;\n            } else {\n              var currentChangeView = new ChangesSingleView(this.owner, this);\n              this.changesInfoDiv.insertBefore(currentChangeView.createSingleChangesDiv(revision), this.changesInfoDiv.children[i + 1]);\n              this.revisions.splice(i, 0, revision);\n              this.changes.add(revision, currentChangeView);\n              this.renderedChanges.add(revision, currentChangeView);\n            }\n          }\n        }\n        var totalCount = document.getElementsByClassName('e-de-track-chngs-count').length;\n        for (var i = 0; i < totalCount; i++) {\n          var div = document.getElementsByClassName('e-de-track-chngs-count')[i];\n          div.innerHTML = this.locale.getConstant('Changes') + ' ' + (i + 1).toString() + ' ' + this.locale.getConstant('of') + ' ' + totalCount.toString();\n        }\n      }\n      this.sortCollectionToDisplay();\n      this.updateUsers();\n      if (show) {\n        this.currentSelectedRevision = this.currentSelectedRevisionInternal;\n        this.updateHeight();\n        this.owner.resize();\n      }\n    } else {\n      this.currentSelectedRevision = undefined;\n    }\n  };\n  /**\n   * @private\n   */\n  TrackChangesPane.prototype.groupTableRevisions = function (revisions, startIndex) {\n    var startRevision = revisions[startIndex];\n    var groupedRevision = [startRevision];\n    var currentRevisionType = startRevision.revisionType;\n    var startRow = startRevision.range[0].ownerBase;\n    var startTable = startRow.ownerTable;\n    var rowIndex = startRow.index;\n    var startParentTable = this.owner.documentHelper.layout.getParentTable(startTable);\n    for (var i = startIndex + 1; i < revisions.length; i++) {\n      var nextRevision = revisions[i];\n      var nextRevisionType = nextRevision.revisionType;\n      var change = nextRevision.range[0];\n      if (change instanceof WRowFormat) {\n        var nextRow = change.ownerBase;\n        var nextTable = nextRow.ownerTable;\n        var nextRowIndex = nextRow.index;\n        if (!startTable.equals(nextTable) && !isNullOrUndefined(startParentTable) && startParentTable.equals(this.owner.documentHelper.layout.getParentTable(nextTable))) {\n          continue;\n        }\n        if (currentRevisionType === nextRevisionType && startRevision.author === nextRevision.author && startTable.equals(nextTable) && rowIndex + 1 === nextRowIndex) {\n          groupedRevision.push(nextRevision);\n          rowIndex = nextRowIndex;\n        } else {\n          break;\n        }\n      } else {\n        var block = void 0;\n        if (change instanceof WCharacterFormat) {\n          block = change.ownerBase;\n        } else if (change instanceof ElementBox) {\n          block = change.line.paragraph;\n        }\n        if (block instanceof ParagraphWidget && block.isInsideTable) {\n          var nextTable = block.associatedCell.ownerTable;\n          var parentTable = this.owner.documentHelper.layout.getParentTable(nextTable);\n          if (startTable.equals(nextTable) || !startTable.equals(nextTable) && !isNullOrUndefined(startParentTable) && startParentTable.equals(parentTable)) {\n            continue;\n          }\n        }\n        break;\n      }\n    }\n    return groupedRevision;\n  };\n  TrackChangesPane.prototype.updateUsers = function () {\n    if (this.users.length > 0) {\n      this.userDropDownButton.removeItems(this.users);\n      this.users = [];\n    }\n    for (var i = 0; i < this.revisions.length; i++) {\n      if (this.users.indexOf(this.revisions[i].author) === -1) {\n        this.users.push(this.revisions[i].author);\n        this.userDropDownButton.items.push({\n          text: this.revisions[i].author\n        });\n      }\n    }\n  };\n  TrackChangesPane.prototype.updateHeight = function () {\n    var tabHeaderHeight = this.commentReviewPane.reviewTab.getRootElement().getElementsByClassName('e-tab-header')[0].getBoundingClientRect().height;\n    this.changesInfoDiv.style.height = this.commentReviewPane.parentPaneElement.clientHeight - this.toolbarElement.clientHeight - tabHeaderHeight - 2 + 'px';\n  };\n  TrackChangesPane.prototype.removeAllChanges = function () {\n    while (this.changesInfoDiv.childNodes.length > 1) {\n      this.changesInfoDiv.removeChild(this.changesInfoDiv.lastChild);\n    }\n    this.revisions = [];\n    if (this.changes && this.changes.length > 0) {\n      for (var i = 0; i < this.changes.length; i++) {\n        var revision = this.changes.keys[i];\n        var changesSingleView = this.changes.get(revision);\n        changesSingleView.clear();\n      }\n      this.changes.clear();\n    }\n  };\n  /**\n   * @private\n   */\n  TrackChangesPane.prototype.clear = function () {\n    this.removeAllChanges();\n    this.selectedUser = this.locale.getConstant('All');\n    this.userDropDownButton.content = this.getSpanView(this.selectedUser, 0);\n    this.selectedType = this.locale.getConstant('All');\n    this.viewTypeDropDownButton.content = this.getSpanView(this.selectedType, 1);\n    this.currentSelectedRevision = undefined;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  TrackChangesPane.prototype.destroy = function () {\n    if (this.changes && this.changes.length > 0) {\n      for (var i = 0; i < this.changes.length; i++) {\n        var revision = this.changes.keys[i];\n        var changesSingleView = this.changes.get(revision);\n        changesSingleView.destroy();\n      }\n      this.changes.clear();\n    }\n    this.changes = undefined;\n    if (this.toolbar) {\n      this.toolbar.destroy();\n      this.toolbar = undefined;\n    }\n    if (this.closeButton && this.closeButton.parentElement) {\n      this.closeButton.parentElement.removeChild(this.closeButton);\n    }\n    this.closeButton = undefined;\n    if (this.userDropDownButton) {\n      this.userDropDownButton.destroy();\n      this.userDropDownButton = undefined;\n    }\n    if (this.menuDropDownButton) {\n      this.menuDropDownButton.destroy();\n      this.menuDropDownButton = undefined;\n    }\n    if (this.viewTypeDropDownButton) {\n      this.viewTypeDropDownButton.destroy();\n      this.viewTypeDropDownButton = undefined;\n    }\n    if (this.userDropDown) {\n      this.userDropDown = undefined;\n    }\n    if (this.users.length > 0) {\n      this.users = [];\n      this.users = undefined;\n    }\n    if (this.trackChangeDiv) {\n      this.trackChangeDiv.innerHTML = '';\n      if (this.trackChangeDiv.parentElement) {\n        this.trackChangeDiv.parentElement.removeChild(this.trackChangeDiv);\n      }\n    }\n    this.trackChangeDiv = undefined;\n    if (this.changesInfoDiv) {\n      this.changesInfoDiv.innerHTML = '';\n      if (this.changesInfoDiv.parentElement) {\n        this.changesInfoDiv.parentElement.removeChild(this.changesInfoDiv);\n      }\n    }\n    this.changesInfoDiv = undefined;\n    if (this.commentReviewPane) {\n      this.commentReviewPane = undefined;\n    }\n    if (this.tableRevisions) {\n      this.tableRevisions.destroy();\n      this.tableRevisions = undefined;\n    }\n    if (this.renderedChanges) {\n      this.renderedChanges.destroy();\n      this.renderedChanges = undefined;\n    }\n    this.currentSelectedRevisionInternal = undefined;\n    this.selectedUser = undefined;\n    this.selectedType = undefined;\n    this.sortedRevisions = [];\n    this.sortedRevisions = undefined;\n    this.viewTypeitems = [];\n    this.viewTypeitems = undefined;\n    this.userDropDownitems = [];\n    this.userDropDownitems = undefined;\n    this.revisions = [];\n    this.revisions = undefined;\n    this.owner = undefined;\n  };\n  TrackChangesPane.prototype.addChanges = function (revision) {\n    var currentChangeView = new ChangesSingleView(this.owner, this);\n    this.changesInfoDiv.appendChild(currentChangeView.createSingleChangesDiv(revision));\n    if (!this.enableButtons) {\n      if (!currentChangeView.acceptButtonElement.classList.contains('e-de-overlay')) {\n        currentChangeView.acceptButtonElement.classList.add('e-de-overlay');\n        currentChangeView.rejectButtonElement.classList.add('e-de-overlay');\n      }\n    } else if (currentChangeView.acceptButtonElement.classList.contains('e-de-overlay') && !this.owner.documentHelper.isTrackedOnlyMode) {\n      currentChangeView.acceptButtonElement.classList.remove('e-de-overlay');\n      currentChangeView.rejectButtonElement.classList.remove('e-de-overlay');\n    }\n    this.revisions.push(revision);\n    this.changes.add(revision, currentChangeView);\n    this.renderedChanges.add(revision, currentChangeView);\n  };\n  /**\n       * @private\n       * @returns {void}\n       */\n  TrackChangesPane.prototype.navigatePreviousChanges = function () {\n    this.revisionNavigateInternal(false);\n  };\n  /**\n       * @private\n       * @returns {void}\n       */\n  TrackChangesPane.prototype.navigateNextChanges = function () {\n    this.revisionNavigateInternal(true);\n  };\n  TrackChangesPane.prototype.revisionNavigateInternal = function (next) {\n    var changes = this.renderedChanges.keys;\n    if (!this.currentSelectedRevisionInternal) {\n      if (changes.length === 0) {\n        return;\n      }\n      this.currentSelectedRevision = changes[0];\n    }\n    if (this.currentSelectedRevision) {\n      var revisions = changes;\n      var revision = this.currentSelectedRevision;\n      var index = revisions.indexOf(revision);\n      if (next) {\n        revision = index === revisions.length - 1 ? revisions[0] : revisions[index + 1];\n      } else {\n        revision = index === 0 ? revisions[revisions.length - 1] : revisions[index - 1];\n      }\n      this.owner.documentHelper.currentSelectedRevision = revision;\n      var ranges = revision.range[0];\n      if (ranges instanceof WRowFormat) {\n        var groupingAccept = this.groupTableRevisions(this.owner.revisions.changes, this.owner.revisions.changes.indexOf(revision));\n        this.owner.selectionModule.selectTableRevision(groupingAccept);\n      } else {\n        this.owner.selectionModule.selectRevision(revision);\n      }\n    }\n    this.currentSelectedRevision = this.owner.documentHelper.currentSelectedRevision;\n  };\n  return TrackChangesPane;\n}();\nexport { TrackChangesPane };\nvar ChangesSingleView = /** @class */function () {\n  function ChangesSingleView(owner, trackChangesPane) {\n    this.owner = owner;\n    this.locale = new L10n('documenteditor', this.owner.defaultLocale);\n    this.locale.setLocale(this.owner.locale);\n    this.trackChangesPane = trackChangesPane;\n  }\n  ChangesSingleView.prototype.updateRevisionIndexAndCount = function (currentIndex, totalCount) {\n    this.changesCount.innerHTML = this.locale.getConstant('Changes') + ' ' + currentIndex.toString() + ' ' + this.locale.getConstant('of') + ' ' + totalCount.toString();\n  };\n  ChangesSingleView.prototype.createSingleChangesDiv = function (revision) {\n    this.revision = revision;\n    this.user = revision.author;\n    this.outerSingleDiv = createElement('div', {\n      className: 'e-de-tc-outer'\n    });\n    this.singleInnerDiv = createElement('div', {\n      className: 'e-de-trckchanges-inner'\n    });\n    this.singleInnerDiv.addEventListener('click', this.selectRevision.bind(this));\n    this.outerSingleDiv.appendChild(this.singleInnerDiv);\n    var userNameTotalDiv = createElement('div', {\n      className: 'e-de-track-usernme-div'\n    });\n    var userNameLabel = createElement('div', {\n      innerHTML: revision.author,\n      className: 'e-de-track-user-nme'\n    });\n    if (!isNullOrUndefined(revision.author)) {\n      userNameTotalDiv.style.display = 'flex';\n      this.owner.documentHelper.getAvatar(userNameTotalDiv, userNameLabel, undefined, revision);\n    }\n    var revisionTypeLabel = createElement('div');\n    if (revision.revisionType === 'Insertion') {\n      this.revisionType = 'Inserted';\n      revisionTypeLabel.innerHTML = this.locale.getConstant('Inserted').toUpperCase();\n      revisionTypeLabel.classList.add('e-de-track-insert');\n    } else if (revision.revisionType === 'Deletion') {\n      this.revisionType = 'Deleted';\n      revisionTypeLabel.innerHTML = this.locale.getConstant('Deleted').toUpperCase();\n      revisionTypeLabel.classList.add('e-de-track-delete');\n    } else if (revision.revisionType === 'MoveFrom') {\n      this.revisionType = 'MoveFrom';\n      revisionTypeLabel.innerHTML = this.locale.getConstant('Move From').toUpperCase();\n      revisionTypeLabel.classList.add('e-de-track-delete');\n      revisionTypeLabel.style.whiteSpace = 'nowrap';\n    } else if (revision.revisionType === 'MoveTo') {\n      this.revisionType = 'MoveTo';\n      revisionTypeLabel.innerHTML = this.locale.getConstant('Move To').toUpperCase();\n      revisionTypeLabel.classList.add('e-de-track-insert');\n      revisionTypeLabel.style.whiteSpace = 'nowrap';\n    }\n    userNameTotalDiv.appendChild(revisionTypeLabel);\n    this.singleInnerDiv.appendChild(userNameTotalDiv);\n    var dateView = createElement('div', {\n      className: 'e-de-track-date',\n      innerHTML: HelperMethods.getModifiedDate(revision.date)\n    });\n    this.singleInnerDiv.appendChild(dateView);\n    var changesTextDiv = createElement('div', {\n      id: 'textDiv',\n      className: 'e-de-track-chngs-text'\n    });\n    this.layoutElementText(revision.range, changesTextDiv);\n    this.singleInnerDiv.appendChild(changesTextDiv);\n    var buttonTotalDiv = createElement('div', {\n      styles: 'display:inline-block;width:100%'\n    });\n    this.singleInnerDiv.appendChild(buttonTotalDiv);\n    var buttonDiv = createElement('div', {\n      styles: 'float:left;'\n    });\n    this.acceptButtonElement = createElement('button', {\n      className: 'e-de-track-accept-button'\n    });\n    this.acceptButton = new Button({\n      cssClass: 'e-outline e-success',\n      content: this.locale.getConstant('Accept')\n    });\n    this.acceptButtonElement.setAttribute('aria-label', this.locale.getConstant('Accept'));\n    buttonDiv.appendChild(this.acceptButtonElement);\n    buttonTotalDiv.appendChild(buttonDiv);\n    this.acceptButton.appendTo(this.acceptButtonElement);\n    if (this.owner.documentHelper.isTrackedOnlyMode) {\n      this.acceptButtonElement.classList.add('e-de-overlay');\n    }\n    this.acceptButtonElement.addEventListener('click', this.acceptButtonClick.bind(this));\n    buttonDiv = createElement('div', {\n      styles: 'float:left;'\n    });\n    this.rejectButtonElement = createElement('button', {\n      className: 'e-de-track-reject-button'\n    });\n    this.rejectButton = new Button({\n      cssClass: 'e-outline e-danger',\n      content: this.locale.getConstant('Reject')\n    });\n    this.rejectButtonElement.setAttribute('aria-label', this.locale.getConstant('Reject'));\n    buttonDiv.appendChild(this.rejectButtonElement);\n    buttonTotalDiv.appendChild(buttonDiv);\n    this.rejectButton.appendTo(this.rejectButtonElement);\n    if (this.owner.documentHelper.isTrackedOnlyMode) {\n      this.rejectButtonElement.classList.add('e-de-overlay');\n    }\n    this.rejectButtonElement.addEventListener('click', this.rejectButtonClick.bind(this));\n    this.changesCount = createElement('div', {\n      className: 'e-de-track-chngs-count',\n      styles: 'float:right;'\n    });\n    var currentCount = this.owner.revisions.changes.indexOf(revision) + 1;\n    var totalCount = this.owner.revisions.changes.length;\n    this.changesCount.innerHTML = this.locale.getConstant('Changes') + ' ' + currentCount.toString() + ' ' + this.locale.getConstant('of') + ' ' + totalCount.toString();\n    buttonTotalDiv.appendChild(this.changesCount);\n    return this.outerSingleDiv;\n  };\n  /**\n   * @private\n   */\n  ChangesSingleView.prototype.appendRowToTable = function (rowFormat, insertIndex) {\n    this.tableElement.insertRow();\n    for (var k = 0; k < rowFormat.ownerBase.childWidgets.length; k++) {\n      this.tableElement.rows[insertIndex].insertCell();\n      this.tableElement.rows[insertIndex].cells[k].classList.add('e-de-tc-tble-cell');\n    }\n  };\n  ChangesSingleView.prototype.selectRevision = function () {\n    var ranges = this.revision.range[0];\n    if (ranges instanceof WRowFormat) {\n      var groupingAccept = this.trackChangesPane.groupTableRevisions(this.owner.revisions.changes, this.owner.revisions.changes.indexOf(this.revision));\n      this.owner.selectionModule.selectTableRevision(groupingAccept);\n    } else {\n      this.owner.selectionModule.selectRevision(this.revision);\n      this.trackChangesPane.onSelection(this.revision);\n    }\n  };\n  ChangesSingleView.prototype.layoutElementText = function (range, changesText) {\n    changesText.style.width = '100%';\n    var text = '';\n    var toSkip = false;\n    for (var i = 0; i < range.length; i++) {\n      var element = range[i];\n      if (element instanceof FieldElementBox && element.fieldType === 1) {\n        toSkip = false;\n        continue;\n      }\n      if (toSkip || element instanceof ChartElementBox) {\n        continue;\n      }\n      if (element instanceof FieldElementBox && element.fieldType === 0) {\n        toSkip = true;\n      }\n      if (element instanceof TextElementBox) {\n        text += element.text;\n      } else if (element instanceof FieldElementBox && element.fieldType === 0) {\n        var fieldCode = this.owner.selectionModule.getFieldCode(element);\n        if (fieldCode.match('TOC ') || fieldCode.match('Toc')) {\n          text += '<Table of Content>';\n          changesText.appendChild(this.addSpan(text));\n          return;\n        } else if (fieldCode.match('HYPERLINK ') || fieldCode.match('MERGEFIELD') || fieldCode.match('FORMTEXT') || fieldCode.match('PAGE ')) {\n          text += this.owner.editorModule.retrieveFieldResultantText(element.fieldEnd);\n        } else if (element.formFieldData) {\n          var emptyChar = this.owner.documentHelper.textHelper.repeatChar(this.owner.documentHelper.textHelper.getEnSpaceCharacter(), 5);\n          if (text !== '') {\n            changesText.appendChild(this.addSpan(text));\n            text = '';\n          }\n          if (element.formFieldData instanceof TextFormField) {\n            changesText.appendChild(this.addSpan(element.formFieldData.defaultValue === '' ? emptyChar : element.formFieldData.defaultValue, 'e-de-tc-field'));\n          } else if (element.formFieldData instanceof DropDownFormField) {\n            changesText.appendChild(this.addSpan(element.formFieldData.dropdownItems.length > 0 ? element.formFieldData.dropdownItems[0] : emptyChar, 'e-de-tc-field'));\n          } else {\n            changesText.appendChild(this.addSpan(element.formFieldData.checked ? String.fromCharCode(9745) : String.fromCharCode(9744), 'e-de-tc-field'));\n          }\n        }\n      } else if (element instanceof ImageElementBox) {\n        if (text !== '') {\n          changesText.appendChild(this.addSpan(text));\n          text = '';\n        }\n        var imageEle = createElement('img');\n        imageEle.setAttribute('src', this.owner.documentHelper.getImageString(element));\n        imageEle.classList.add('e-de-tc-shrink-img');\n        changesText.appendChild(imageEle);\n      } else if (element instanceof WRowFormat) {\n        this.tableElement = createElement('table');\n        this.tableElement.classList.add('e-de-track-chng-table');\n        this.tableElement.insertRow();\n        for (var i_1 = 0; i_1 < element.ownerBase.childWidgets.length; i_1++) {\n          this.tableElement.rows[0].insertCell();\n          this.tableElement.rows[0].cells[i_1].classList.add('e-de-tc-tble-cell');\n        }\n        changesText.appendChild(this.tableElement);\n        return;\n      } else if (element instanceof WCharacterFormat) {\n        if (text !== '') {\n          changesText.appendChild(this.addSpan(text));\n          text = '';\n        }\n        var paraMark = '¶';\n        if (element.ownerBase instanceof ParagraphWidget && element.ownerBase.isEndsWithPageBreak) {\n          paraMark = '............Page Break............' + paraMark;\n        }\n        changesText.appendChild(this.addSpan(paraMark, 'e-de-tc-pmark'));\n        changesText.appendChild(createElement('br'));\n      }\n    }\n    changesText.appendChild(this.addSpan(text));\n  };\n  ChangesSingleView.prototype.addSpan = function (text, cssClass) {\n    var span = createElement('span');\n    span.textContent = text;\n    if (cssClass) {\n      span.classList.add(cssClass);\n    }\n    return span;\n  };\n  ChangesSingleView.prototype.acceptButtonClick = function () {\n    this.revision.accept();\n    if (this.owner.enableHeaderAndFooter) {\n      this.owner.editorModule.updateHeaderFooterWidget();\n    }\n  };\n  ChangesSingleView.prototype.rejectButtonClick = function () {\n    this.revision.reject();\n    if (this.owner.enableHeaderAndFooter) {\n      this.owner.editorModule.updateHeaderFooterWidget();\n    }\n  };\n  ChangesSingleView.prototype.removeFromParentCollec = function () {\n    if (this.trackChangesPane.changes.containsKey(this.revision)) {\n      this.trackChangesPane.changes.remove(this.revision);\n    }\n    if (this.trackChangesPane.revisions.indexOf(this.revision) !== -1) {\n      this.trackChangesPane.revisions.splice(this.trackChangesPane.revisions.indexOf(this.revision), 1);\n    }\n    if (this.trackChangesPane.changes.length === 0) {\n      this.trackChangesPane.setNoChangesVisibility = true;\n    }\n    this.trackChangesPane.updateUsers();\n  };\n  /**\n   *\n   * @private\n   */\n  ChangesSingleView.prototype.clear = function () {\n    this.removeFromParentCollec();\n    if (this.acceptButton) {\n      this.acceptButton.destroy();\n      this.acceptButton = undefined;\n    }\n    if (this.rejectButton) {\n      this.rejectButton.destroy();\n      this.rejectButton = undefined;\n    }\n    if (this.acceptButtonElement) {\n      this.acceptButtonElement.innerHTML = '';\n      if (this.acceptButtonElement.parentElement) {\n        this.acceptButtonElement.parentElement.removeChild(this.acceptButtonElement);\n      }\n      this.acceptButtonElement = undefined;\n    }\n    if (this.rejectButtonElement) {\n      this.rejectButtonElement.innerHTML = '';\n      if (this.rejectButtonElement.parentElement) {\n        this.rejectButtonElement.parentElement.removeChild(this.rejectButtonElement);\n      }\n      this.rejectButtonElement = undefined;\n    }\n    if (this.tableElement) {\n      this.tableElement.innerHTML = '';\n      if (this.tableElement.parentElement) {\n        this.tableElement.parentElement.removeChild(this.tableElement);\n      }\n      this.tableElement = undefined;\n    }\n    if (this.singleInnerDiv) {\n      this.singleInnerDiv.innerHTML = '';\n      if (this.singleInnerDiv.parentElement) {\n        this.singleInnerDiv.parentElement.removeChild(this.singleInnerDiv);\n      }\n      this.singleInnerDiv = undefined;\n    }\n    if (this.outerSingleDiv) {\n      this.outerSingleDiv.innerHTML = '';\n      if (this.outerSingleDiv.parentElement) {\n        this.outerSingleDiv.parentElement.removeChild(this.outerSingleDiv);\n      }\n      this.outerSingleDiv = undefined;\n    }\n  };\n  /**\n   * Disposes the internal objects which are maintained.\n   * @private\n   */\n  ChangesSingleView.prototype.destroy = function () {\n    if (this.acceptButton) {\n      this.acceptButton.destroy();\n      this.acceptButton = undefined;\n    }\n    if (this.rejectButton) {\n      this.rejectButton.destroy();\n      this.rejectButton = undefined;\n    }\n    if (this.acceptButtonElement) {\n      this.acceptButtonElement.innerHTML = '';\n      if (this.acceptButtonElement.parentElement) {\n        this.acceptButtonElement.parentElement.removeChild(this.acceptButtonElement);\n      }\n      this.acceptButtonElement = undefined;\n    }\n    if (this.rejectButtonElement) {\n      this.rejectButtonElement.innerHTML = '';\n      if (this.rejectButtonElement.parentElement) {\n        this.rejectButtonElement.parentElement.removeChild(this.rejectButtonElement);\n      }\n      this.rejectButtonElement = undefined;\n    }\n    if (this.tableElement) {\n      this.tableElement.innerHTML = '';\n      if (this.tableElement.parentElement) {\n        this.tableElement.parentElement.removeChild(this.tableElement);\n      }\n      this.tableElement = undefined;\n    }\n    if (this.singleInnerDiv) {\n      this.singleInnerDiv.innerHTML = '';\n      if (this.singleInnerDiv.parentElement) {\n        this.singleInnerDiv.parentElement.removeChild(this.singleInnerDiv);\n      }\n      this.singleInnerDiv = undefined;\n    }\n    if (this.outerSingleDiv) {\n      this.outerSingleDiv.innerHTML = '';\n      if (this.outerSingleDiv.parentElement) {\n        this.outerSingleDiv.parentElement.removeChild(this.outerSingleDiv);\n      }\n      this.outerSingleDiv = undefined;\n    }\n    this.revision = undefined;\n    this.user = undefined;\n    this.revisionType = undefined;\n    this.trackChangesPane = undefined;\n    this.owner = undefined;\n  };\n  return ChangesSingleView;\n}();\nexport { ChangesSingleView };","map":{"version":3,"names":["createElement","L10n","isNullOrUndefined","select","Browser","Toolbar","Button","DropDownButton","TextElementBox","ElementBox","ImageElementBox","FieldElementBox","TextFormField","DropDownFormField","ParagraphWidget","HeaderFooterWidget","ChartElementBox","WRowFormat","WCharacterFormat","HelperMethods","Dictionary","TrackChangesPane","owner","commentReviewPane","users","enableButtons","viewTypeitems","sortedRevisions","noChangesVisibleInternal","isTrackingPageBreak","tableRevisions","locale","defaultLocale","setLocale","selectedUser","getConstant","selectedType","initTrackChangePane","reviewTab","items","content","trackChangeDiv","isIE","refresh","enableRtl","closeButton","className","id","attrs","type","style","title","setAttribute","closeSpan","appendChild","element","addEventListener","closePane","bind","Object","defineProperty","prototype","get","set","visible","isChangesTabVisible","noChangeDivElement","display","enableDisableToolbarItem","hideTab","notify","changes","comment","isCommentTabVisible","enumerable","configurable","currentSelectedRevisionInternal","value","selectedElement","changesInfoDiv","classList","remove","length","containsKey","currentChangeView","singleInnerDiv","add","parentElement","scrollIntoView","block","renderedChanges","initPaneHeader","styles","textContent","updateTrackChanges","_this","toolbarElement","toolbar","text","cssClass","disabled","template","prefixIcon","align","tooltipText","click","navigatePreviousChanges","navigateNextChanges","appendTo","navigateLeftButton","firstChild","navigateRightButton","userButtonEle","userDropDownitems","userDropDown","onUserSelect","beforeOpen","onUserOpen","beforeItemRender","args","beforeDropDownItemRender","userDropDownButton","getSpanView","viewTypeEle","viewTypeDropDownButton","onTypeSelect","menuoptionEle","menuOptions","menuDropDown","onMenuSelect","iconCss","menuDropDownButton","innerHTML","item","span","children","marginRight","alignSelf","arg","ele","maxHeight","overflowY","enable","elements","querySelectorAll","viewer","enableItems","selectedText","match","setTimeout","revisionsInternal","handleRevisionCollection","updateUsers","onSelection","revision","currentSelectedRevision","sortCollectionToDisplay","updateMenuOptions","revisionType","toLowerCase","documentHelper","isDocumentProtected","isReadOnly","isRevisionVisible","i","revisions","singleChangesDiv","outerSingleDiv","user","push","setNoChangesVisibility","enableDisableButton","enableButton","isUpdateTrackChanges","revisionCount","isUpdate","isNoChangeDiv","childNodes","updateCurrentTrackChanges","trackChangesPane","range","changesDiv","querySelector","removeChild","layoutElementText","show","layout","isInitialLoad","clear","removeAllChanges","keys","index","indexOf","changesSingleView","changesSingleView_1","splice","contains","ranges","paragraph","containerWidget","sectionFormat","headerFooterType","selectionModule","differentOddAndEvenPages","differentFirstPage","groupedRevision","groupTableRevisions","changeView","j","nextRevision","addChanges","nextRowFormat","appendRowToTable","updateRevisionIndexAndCount","insertIndex","acceptButtonElement","rejectButtonElement","isTrackedOnlyMode","ChangesSingleView","insertBefore","createSingleChangesDiv","totalCount","document","getElementsByClassName","div","toString","updateHeight","resize","undefined","startIndex","startRevision","currentRevisionType","startRow","ownerBase","startTable","ownerTable","rowIndex","startParentTable","getParentTable","nextRevisionType","change","nextRow","nextTable","nextRowIndex","equals","author","line","isInsideTable","associatedCell","parentTable","removeItems","tabHeaderHeight","getRootElement","getBoundingClientRect","height","parentPaneElement","clientHeight","lastChild","destroy","revisionNavigateInternal","next","groupingAccept","selectTableRevision","selectRevision","currentIndex","changesCount","userNameTotalDiv","userNameLabel","getAvatar","revisionTypeLabel","toUpperCase","whiteSpace","dateView","getModifiedDate","date","changesTextDiv","buttonTotalDiv","buttonDiv","acceptButton","acceptButtonClick","rejectButton","rejectButtonClick","currentCount","rowFormat","tableElement","insertRow","k","childWidgets","rows","insertCell","cells","changesText","width","toSkip","fieldType","fieldCode","getFieldCode","addSpan","editorModule","retrieveFieldResultantText","fieldEnd","formFieldData","emptyChar","textHelper","repeatChar","getEnSpaceCharacter","defaultValue","dropdownItems","checked","String","fromCharCode","imageEle","getImageString","i_1","paraMark","isEndsWithPageBreak","accept","enableHeaderAndFooter","updateHeaderFooterWidget","reject","removeFromParentCollec"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/node_modules/@syncfusion/ej2-documenteditor/src/document-editor/implementation/track-changes/track-changes-pane.js"],"sourcesContent":["import { createElement, L10n, isNullOrUndefined, select, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { TextElementBox, ElementBox, ImageElementBox, FieldElementBox, TextFormField, DropDownFormField, ParagraphWidget, HeaderFooterWidget, ChartElementBox } from '../viewer/page';\nimport { WRowFormat, WCharacterFormat } from '../index';\nimport { HelperMethods } from '../editor/editor-helper';\nimport { Dictionary } from '../../base/index';\n/**\n * Track changes pane\n */\nvar TrackChangesPane = /** @class */ (function () {\n    function TrackChangesPane(owner, commentReviewPane) {\n        this.users = [];\n        this.enableButtons = true;\n        this.viewTypeitems = [];\n        this.sortedRevisions = [];\n        this.noChangesVisibleInternal = true;\n        this.isTrackingPageBreak = false;\n        /***\n         * @private\n         */\n        this.tableRevisions = new Dictionary();\n        this.owner = owner;\n        this.commentReviewPane = commentReviewPane;\n        this.locale = new L10n('documenteditor', this.owner.defaultLocale);\n        this.locale.setLocale(this.owner.locale);\n        this.selectedUser = this.locale.getConstant('All');\n        this.selectedType = this.locale.getConstant('All');\n        this.initTrackChangePane();\n        this.commentReviewPane.reviewTab.items[1].content = this.trackChangeDiv;\n        if (!Browser.isIE) {\n            this.commentReviewPane.reviewTab.refresh();\n        }\n        if (this.owner.enableRtl) {\n            this.closeButton = createElement('button', {\n                className: 'e-de-close-icon e-btn e-flat e-icon-btn', id: 'close',\n                attrs: { type: 'button', style: 'position:absolute;top:6px;left:1px' }\n            });\n        }\n        else {\n            this.closeButton = createElement('button', {\n                className: 'e-de-close-icon e-btn e-flat e-icon-btn', id: 'close',\n                attrs: { type: 'button', style: 'position:absolute;top:6px;right:1px' }\n            });\n        }\n        this.closeButton.title = this.locale.getConstant('Close');\n        this.closeButton.setAttribute('aria-label', this.locale.getConstant('Close'));\n        var closeSpan = createElement('span', { className: 'e-de-op-close-icon e-de-close-icon e-btn-icon e-icons' });\n        this.closeButton.appendChild(closeSpan);\n        this.commentReviewPane.reviewTab.element.appendChild(this.closeButton);\n        this.closeButton.addEventListener('click', this.commentReviewPane.closePane.bind(this.commentReviewPane));\n    }\n    Object.defineProperty(TrackChangesPane.prototype, \"setNoChangesVisibility\", {\n        get: function () {\n            return this.noChangesVisibleInternal;\n        },\n        set: function (visible) {\n            this.isChangesTabVisible = !visible;\n            this.noChangeDivElement.style.display = visible ? 'block' : 'none';\n            this.noChangesVisibleInternal = visible;\n            this.enableDisableToolbarItem(!visible);\n            this.commentReviewPane.reviewTab.hideTab(1, visible);\n            this.owner.notify('reviewPane', { changes: !visible, comment: this.commentReviewPane.isCommentTabVisible });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TrackChangesPane.prototype, \"currentSelectedRevision\", {\n        get: function () {\n            return this.currentSelectedRevisionInternal;\n        },\n        set: function (value) {\n            var selectedElement = select('.e-de-trckchanges-inner-select', this.changesInfoDiv);\n            if (isNullOrUndefined(value)) {\n                if (!isNullOrUndefined(selectedElement)) {\n                    selectedElement.classList.remove('e-de-trckchanges-inner-select');\n                }\n            }\n            else if (value !== this.currentSelectedRevisionInternal || isNullOrUndefined(selectedElement)) {\n                if (selectedElement) {\n                    selectedElement.classList.remove('e-de-trckchanges-inner-select');\n                }\n                if (this.changes.length > 0 && this.changes.containsKey(value)) {\n                    var currentChangeView = this.changes.get(value);\n                    currentChangeView.singleInnerDiv.classList.add('e-de-trckchanges-inner-select');\n                }\n            }\n            this.currentSelectedRevisionInternal = value;\n            selectedElement = select('.e-de-trckchanges-inner-select', this.changesInfoDiv);\n            if (!isNullOrUndefined(selectedElement)) {\n                selectedElement.parentElement.scrollIntoView({ block: 'nearest' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TrackChangesPane.prototype.initTrackChangePane = function () {\n        this.changes = new Dictionary();\n        this.renderedChanges = new Dictionary();\n        this.trackChangeDiv = createElement('div', { className: 'e-de-tc-pane' });\n        this.trackChangeDiv.appendChild(this.initPaneHeader());\n        this.changesInfoDiv = createElement('div', { id: 'e-de-tc-pane-revision', styles: 'overflow:auto' });\n        this.trackChangeDiv.appendChild(this.changesInfoDiv);\n        this.noChangeDivElement = createElement('div', { styles: 'display:none;', className: 'e-de-tc-no-chng' });\n        this.noChangeDivElement.textContent = this.locale.getConstant('No changes');\n        this.changesInfoDiv.appendChild(this.noChangeDivElement);\n        this.updateTrackChanges();\n    };\n    TrackChangesPane.prototype.initPaneHeader = function () {\n        var _this = this;\n        this.toolbarElement = createElement('div', { className: 'e-de-track-toolbar' });\n        this.toolbar = new Toolbar({\n            enableRtl: this.owner.enableRtl,\n            items: [\n                {\n                    text: this.locale.getConstant('User') + ':', cssClass: 'e-de-track-toolbar-overlay', disabled: true\n                },\n                {\n                    template: createElement('div', { id: 'e-de-user-list', attrs: { 'role': 'button' } })\n                },\n                {\n                    type: 'Separator'\n                },\n                {\n                    text: this.locale.getConstant('View') + ':', cssClass: 'e-de-track-toolbar-overlay', disabled: true\n                },\n                {\n                    template: createElement('div', { id: 'e-de-revision-list', attrs: { 'role': 'button' } })\n                },\n                {\n                    prefixIcon: 'e-de-nav-left-arrow e-de-tc-tbr', align: 'Right', cssClass: 'e-de-nvgte-left',\n                    tooltipText: this.locale.getConstant('Previous Changes'), click: this.navigatePreviousChanges.bind(this)\n                },\n                {\n                    prefixIcon: 'e-de-nav-right-arrow e-de-tc-tbr', align: 'Right', cssClass: 'e-de-nvgte-right',\n                    tooltipText: this.locale.getConstant('Next Changes'), click: this.navigateNextChanges.bind(this)\n                },\n                {\n                    template: createElement('div', { id: 'e-de-menu-option', attrs: { 'role': 'button' } }), align: 'Right', cssClass: 'e-de-tc-tbr',\n                    tooltipText: this.locale.getConstant('More Options') + '...'\n                }\n            ]\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        var navigateLeftButton = select('.e-de-nvgte-left', this.toolbarElement);\n        navigateLeftButton.firstChild.classList.add('e-tc-nvgte');\n        var navigateRightButton = select('.e-de-nvgte-right', this.toolbarElement);\n        navigateRightButton.firstChild.classList.add('e-tc-nvgte');\n        //User list drop down button\n        var userButtonEle = select('#e-de-user-list', this.toolbarElement);\n        this.userDropDownitems = [{ text: this.locale.getConstant('All') }];\n        this.userDropDown = {\n            items: this.userDropDownitems,\n            cssClass: 'e-de-track-pane-drop-btn e-tc-btn-bg-clr',\n            select: this.onUserSelect.bind(this),\n            beforeOpen: this.onUserOpen.bind(this),\n            beforeItemRender: function (args) {\n                _this.beforeDropDownItemRender(args, _this.selectedUser);\n            }\n        };\n        this.userDropDownButton = new DropDownButton(this.userDropDown);\n        this.userDropDownButton.appendTo(userButtonEle);\n        this.userDropDownButton.content = this.getSpanView(this.userDropDown.items[0].text, 0);\n        //Revision view type drop down button\n        var viewTypeEle = select('#e-de-revision-list', this.toolbarElement);\n        this.viewTypeitems = [{ text: this.locale.getConstant('All') }, { text: this.locale.getConstant('Inserted') }, { text: this.locale.getConstant('Deleted') }];\n        this.viewTypeDropDownButton = new DropDownButton({\n            items: this.viewTypeitems,\n            cssClass: 'e-de-track-pane-drop-btn e-tc-btn-bg-clr',\n            select: this.onTypeSelect.bind(this),\n            beforeItemRender: function (args) {\n                _this.beforeDropDownItemRender(args, _this.selectedType);\n            }\n        });\n        this.viewTypeDropDownButton.content = this.getSpanView(this.viewTypeitems[0].text, 1);\n        this.viewTypeDropDownButton.appendTo(viewTypeEle);\n        //More menu option drop down button\n        this.menuoptionEle = select('#e-de-menu-option', this.toolbarElement);\n        var menuOptions = [{ text: this.locale.getConstant('Accept all') }, { text: this.locale.getConstant('Reject all') }];\n        var menuDropDown = {\n            items: menuOptions,\n            select: this.onMenuSelect.bind(this),\n            iconCss: 'e-de-menu-icon',\n            cssClass: 'e-caret-hide e-tc-btn-bg-clr'\n        };\n        this.menuDropDownButton = new DropDownButton(menuDropDown);\n        this.menuDropDownButton.appendTo(this.menuoptionEle);\n        return this.toolbarElement;\n    };\n    TrackChangesPane.prototype.beforeDropDownItemRender = function (args, content) {\n        args.element.innerHTML = '<span></span>' + args.item.text;\n        var span = args.element.children[0];\n        if (args.item.text === content) {\n            span.style.marginRight = '10px';\n            span.style.alignSelf = 'center';\n            span.setAttribute('class', 'e-de-selected-item e-icons');\n        }\n        else {\n            args.element.children[0].style.marginRight = '25px';\n            args.element.children[0].classList.remove('e-de-selected-item');\n        }\n    };\n    TrackChangesPane.prototype.onUserOpen = function (arg) {\n        var ele = arg.element;\n        ele.style.maxHeight = '200px';\n        ele.style.overflowY = 'auto';\n    };\n    TrackChangesPane.prototype.enableDisableToolbarItem = function (enable) {\n        var elements = this.toolbar.element.querySelectorAll('.e-de-tc-tbr');\n        if (this.owner && this.owner.viewer) {\n            this.toolbar.enableItems(elements[0].parentElement.parentElement, enable);\n            this.toolbar.enableItems(elements[1].parentElement.parentElement, enable);\n            this.toolbar.enableItems(elements[2], enable);\n        }\n    };\n    TrackChangesPane.prototype.getSpanView = function (value, type) {\n        return (type === 0 ? '<span class=\"e-de-track-span-user\">' : '<span class=\"e-de-track-span-view\">') + value + '</span>';\n    };\n    TrackChangesPane.prototype.onMenuSelect = function (arg) {\n        var _this = this;\n        var selectedText = arg.item.text;\n        if (selectedText.match(this.locale.getConstant('Accept all'))) {\n            setTimeout(function () {\n                _this.owner.revisionsInternal.handleRevisionCollection(true, _this.sortedRevisions);\n            }, 0);\n        }\n        else if (selectedText.match(this.locale.getConstant('Reject all'))) {\n            setTimeout(function () {\n                _this.owner.revisionsInternal.handleRevisionCollection(false, _this.sortedRevisions);\n                /* eslint-disable */\n            }, 0);\n        }\n        this.updateUsers();\n    };\n    TrackChangesPane.prototype.onSelection = function (revision) {\n        this.currentSelectedRevision = revision;\n    };\n    TrackChangesPane.prototype.onUserSelect = function (arg) {\n        var selectedText = arg.item.text;\n        this.selectedUser = selectedText;\n        this.userDropDownButton.content = this.getSpanView(selectedText, 0);\n        this.sortCollectionToDisplay();\n    };\n    TrackChangesPane.prototype.onTypeSelect = function (arg) {\n        var selectedText = arg.item.text;\n        this.selectedType = selectedText;\n        this.viewTypeDropDownButton.content = this.getSpanView(selectedText, 1);\n        this.sortCollectionToDisplay();\n    };\n    TrackChangesPane.prototype.updateMenuOptions = function () {\n        var revisionType;\n        if (this.selectedType !== this.locale.getConstant('All')) {\n            revisionType = this.selectedType === this.locale.getConstant('Inserted') ? this.locale.getConstant('Insertion')\n                : this.locale.getConstant('Deletion');\n        }\n        if (this.selectedUser === this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n            this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + this.locale.getConstant('Changes');\n            this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + this.locale.getConstant('Changes');\n        }\n        else if (this.selectedUser === this.locale.getConstant('All') && this.selectedType !== this.locale.getConstant('All')) {\n            this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + revisionType;\n            this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + revisionType;\n        }\n        else if (this.selectedUser !== this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n            this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + this.locale.getConstant('Changes') +\n                ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n            this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + this.locale.getConstant('Changes') +\n                ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n        }\n        else {\n            this.menuDropDownButton.items[0].text = this.locale.getConstant('Accept all') + ' ' + revisionType +\n                ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n            this.menuDropDownButton.items[1].text = this.locale.getConstant('Reject all') + ' ' + revisionType +\n                ' ' + this.locale.getConstant('By').toLowerCase() + ' ' + this.selectedUser;\n        }\n        if (this.owner.documentHelper.isDocumentProtected || this.owner.isReadOnly) {\n            this.menuDropDownButton.disabled = true;\n        }\n        else {\n            this.menuDropDownButton.disabled = false;\n        }\n    };\n    TrackChangesPane.prototype.sortCollectionToDisplay = function () {\n        var isRevisionVisible = false;\n        this.sortedRevisions = [];\n        this.updateMenuOptions();\n        for (var i = 0; i < this.changes.length; i++) {\n            var changes = this.changes.get(this.revisions[i]);\n            var singleChangesDiv = changes.outerSingleDiv;\n            if (this.selectedUser === this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n                singleChangesDiv.style.display = 'block';\n            }\n            else if (this.selectedUser === this.locale.getConstant('All') && this.selectedType !== this.locale.getConstant('All')) {\n                if (this.locale.getConstant(changes.revisionType) === this.selectedType) {\n                    singleChangesDiv.style.display = 'block';\n                }\n                else {\n                    singleChangesDiv.style.display = 'none';\n                }\n            }\n            else if (this.selectedUser !== this.locale.getConstant('All') && this.selectedType === this.locale.getConstant('All')) {\n                if (changes.user === this.selectedUser) {\n                    singleChangesDiv.style.display = 'block';\n                }\n                else {\n                    singleChangesDiv.style.display = 'none';\n                }\n            }\n            else {\n                if (changes.user === this.selectedUser && this.locale.getConstant(changes.revisionType) === this.selectedType) {\n                    singleChangesDiv.style.display = 'block';\n                }\n                else {\n                    singleChangesDiv.style.display = 'none';\n                }\n            }\n            if (singleChangesDiv.style.display === 'block') {\n                this.sortedRevisions.push(this.revisions[i]);\n            }\n            isRevisionVisible = true;\n        }\n        this.setNoChangesVisibility = !isRevisionVisible;\n    };\n    TrackChangesPane.prototype.enableDisableButton = function (enableButton) {\n        this.enableButtons = enableButton;\n        this.updateTrackChanges();\n    };\n    TrackChangesPane.prototype.isUpdateTrackChanges = function (revisionCount) {\n        var isUpdate = false;\n        var isNoChangeDiv = false;\n        if (!isNullOrUndefined(this.changesInfoDiv)) {\n            if (this.changesInfoDiv.childNodes.length === 1 && this.changesInfoDiv.childNodes[0].className == 'e-de-tc-no-chng') {\n                isNoChangeDiv = true;\n            }\n            else {\n                if (revisionCount !== this.changesInfoDiv.childNodes.length) {\n                    isUpdate = true;\n                }\n            }\n        }\n        if (isNoChangeDiv || revisionCount > 0) {\n            isUpdate = true;\n        }\n        return isUpdate;\n    };\n    TrackChangesPane.prototype.updateCurrentTrackChanges = function (revision) {\n        var currentChangeView;\n        if (!isNullOrUndefined(revision)) {\n            currentChangeView = this.owner.trackChangesPane.changes.get(revision);\n        }\n        if (!isNullOrUndefined(currentChangeView) && revision.range.length > 0) {\n            var changesDiv = currentChangeView.singleInnerDiv.querySelector(\"#textDiv\");\n            while (changesDiv.firstChild) {\n                changesDiv.removeChild(changesDiv.firstChild);\n            }\n            currentChangeView.layoutElementText(revision.range, changesDiv);\n        }\n        if (!isNullOrUndefined(revision) && revision.range.length === 0) {\n            this.owner.revisions.remove(revision);\n        }\n    };\n    TrackChangesPane.prototype.updateTrackChanges = function (show) {\n        if (show || isNullOrUndefined(show)) {\n            if (this.owner.documentHelper.layout.isInitialLoad) {\n                this.tableRevisions.clear();\n                this.renderedChanges.clear();\n                this.removeAllChanges();\n            }\n            else {\n                for (var i = 0; i < this.tableRevisions.keys.length; i++) {\n                    var revision = this.tableRevisions.keys[i];\n                    var index = this.revisions.indexOf(revision);\n                    var removeChild = (this.tableRevisions.get(revision))[(this.tableRevisions.get(revision)).length - 1] === revision;\n                    if (!isNullOrUndefined(this.changes)) {\n                        var changesSingleView = this.changes.get(revision);\n                        if (removeChild && !isNullOrUndefined(this.changesInfoDiv)) {\n                            var changesSingleView_1 = this.changes.get(revision);\n                            this.changesInfoDiv.removeChild(changesSingleView_1.outerSingleDiv);\n                        }\n                    }\n                    if (this.renderedChanges.containsKey(revision)) {\n                        this.renderedChanges.remove(revision);\n                    }\n                    if (this.changes.containsKey(revision)) {\n                        this.changes.remove(revision);\n                    }\n                    this.revisions.splice(index, 1);\n                }\n                this.tableRevisions.clear();\n            }\n            if (!this.enableButtons && !this.menuoptionEle.classList.contains('e-de-overlay')) {\n                this.menuoptionEle.classList.add('e-de-overlay');\n            }\n            else if (this.menuoptionEle.classList.contains('e-de-overlay') && !this.owner.documentHelper.isDocumentProtected && !this.owner.isReadOnly) {\n                this.menuoptionEle.classList.remove('e-de-overlay');\n            }\n            this.isChangesTabVisible = true;\n            this.owner.notify('reviewPane', { comment: this.commentReviewPane.isCommentTabVisible, changes: this.isChangesTabVisible });\n            if (this.owner.documentHelper.layout.isInitialLoad) {\n                for (var i = 0; i < this.owner.revisions.changes.length; i++) {\n                    var revision = this.owner.revisions.changes[i];\n                    var ranges = this.owner.revisions.changes[i].range[0];\n                    if ((ranges instanceof TextElementBox || ranges instanceof FieldElementBox) &&\n                        ranges.paragraph.containerWidget instanceof HeaderFooterWidget && isNullOrUndefined(ranges.paragraph.containerWidget.sectionFormat)) {\n                        continue;\n                    }\n                    if (ranges instanceof TextElementBox &&\n                        ranges.paragraph.containerWidget instanceof HeaderFooterWidget) {\n                        var headerFooterType = ranges.paragraph.containerWidget.headerFooterType;\n                        var sectionFormat = this.owner.selectionModule.sectionFormat;\n                        if ((headerFooterType === 'EvenFooter' || headerFooterType === 'EvenHeader' || headerFooterType === 'OddFooter' || headerFooterType === 'OddHeader') && !sectionFormat.differentOddAndEvenPages) {\n                            continue;\n                        }\n                        else if ((headerFooterType === 'FirstPageHeader' || headerFooterType === 'FirstPageFooter') && !sectionFormat.differentFirstPage) {\n                            continue;\n                        }\n                    }\n                    if (this.changes.containsKey(revision)) {\n                        continue;\n                    }\n                    if (ranges instanceof WRowFormat) {\n                        var groupedRevision = this.groupTableRevisions(this.owner.revisions.changes, i);\n                        if (groupedRevision.length > 1) {\n                            var changeView = void 0;\n                            for (var j = 0; j < groupedRevision.length; j++) {\n                                var nextRevision = groupedRevision[j];\n                                if (j === 0) {\n                                    this.addChanges(nextRevision);\n                                    changeView = this.changes.get(revision);\n                                }\n                                else {\n                                    var nextRowFormat = nextRevision.range[0];\n                                    changeView.appendRowToTable(nextRowFormat, j);\n                                    this.revisions.push(nextRevision);\n                                    this.changes.add(nextRevision, changeView);\n                                }\n                                this.tableRevisions.add(nextRevision, groupedRevision);\n                            }\n                        }\n                        else {\n                            this.addChanges(revision);\n                        }\n                    }\n                    else {\n                        this.addChanges(revision);\n                    }\n                }\n                for (var i = 0; i < this.renderedChanges.keys.length; i++) {\n                    var changeView = this.renderedChanges.get(this.renderedChanges.keys[i]);\n                    changeView.updateRevisionIndexAndCount(i + 1, this.renderedChanges.keys.length);\n                }\n            }\n            else {\n                // Use this property to insert revision order wise in pane(revision order collapsed when using i value because total 10 revision, 2nd revision is table and table contain 5 row and each row preserved as a separate revision, so after table iteration i value is 6, so next revision inserted 6th position instead of 3).\n                var insertIndex = 0;\n                for (var i = 0; i < this.owner.revisions.changes.length; i++) {\n                    var revision = this.owner.revisions.changes[i];\n                    var ranges = this.owner.revisions.changes[i].range[0];\n                    if (this.changes.containsKey(revision)) {\n                        var currentChangeView = this.renderedChanges.get(revision);\n                        if (isNullOrUndefined(currentChangeView)) {\n                            continue;\n                        }\n                        if (!this.enableButtons) {\n                            if (!(currentChangeView.acceptButtonElement.classList.contains('e-de-overlay'))) {\n                                currentChangeView.acceptButtonElement.classList.add('e-de-overlay');\n                                currentChangeView.rejectButtonElement.classList.add('e-de-overlay');\n                            }\n                        }\n                        else if (currentChangeView.acceptButtonElement.classList.contains('e-de-overlay') && !this.owner.documentHelper.isTrackedOnlyMode) {\n                            currentChangeView.acceptButtonElement.classList.remove('e-de-overlay');\n                            currentChangeView.rejectButtonElement.classList.remove('e-de-overlay');\n                        }\n                        insertIndex++;\n                        continue;\n                    }\n                    if (ranges instanceof WRowFormat) {\n                        var groupedRevision = this.groupTableRevisions(this.owner.revisions.changes, i);\n                        if (groupedRevision.length > 1) {\n                            if (insertIndex === 0) {\n                                insertIndex = i;\n                            }\n                            var changeView = void 0;\n                            for (var j = 0; j < groupedRevision.length; j++) {\n                                var nextRevision = groupedRevision[j];\n                                if (j === 0) {\n                                    var currentChangeView = new ChangesSingleView(this.owner, this);\n                                    this.changesInfoDiv.insertBefore(currentChangeView.createSingleChangesDiv(nextRevision), this.changesInfoDiv.children[insertIndex + 1]);\n                                    this.revisions.splice(i, 0, nextRevision);\n                                    this.changes.add(nextRevision, currentChangeView);\n                                    this.renderedChanges.add(nextRevision, currentChangeView);\n                                    changeView = this.changes.get(revision);\n                                }\n                                else {\n                                    var nextRowFormat = nextRevision.range[0];\n                                    changeView.appendRowToTable(nextRowFormat, j);\n                                    this.revisions.splice(i + j, 0, nextRevision);\n                                    this.changes.add(nextRevision, changeView);\n                                }\n                                this.tableRevisions.add(nextRevision, groupedRevision);\n                            }\n                            insertIndex++;\n                        }\n                        else {\n                            var currentChangeView = new ChangesSingleView(this.owner, this);\n                            this.changesInfoDiv.insertBefore(currentChangeView.createSingleChangesDiv(revision), this.changesInfoDiv.children[i + 1]);\n                            this.revisions.splice(i, 0, revision);\n                            this.changes.add(revision, currentChangeView);\n                            this.renderedChanges.add(revision, currentChangeView);\n                        }\n                    }\n                }\n                var totalCount = document.getElementsByClassName('e-de-track-chngs-count').length;\n                for (var i = 0; i < totalCount; i++) {\n                    var div = document.getElementsByClassName('e-de-track-chngs-count')[i];\n                    div.innerHTML = this.locale.getConstant('Changes') + ' ' + (i + 1).toString() +\n                        ' ' + this.locale.getConstant('of') + ' ' + totalCount.toString();\n                }\n            }\n            this.sortCollectionToDisplay();\n            this.updateUsers();\n            if (show) {\n                this.currentSelectedRevision = this.currentSelectedRevisionInternal;\n                this.updateHeight();\n                this.owner.resize();\n            }\n        }\n        else {\n            this.currentSelectedRevision = undefined;\n        }\n    };\n    /**\n     * @private\n     */\n    TrackChangesPane.prototype.groupTableRevisions = function (revisions, startIndex) {\n        var startRevision = revisions[startIndex];\n        var groupedRevision = [startRevision];\n        var currentRevisionType = startRevision.revisionType;\n        var startRow = startRevision.range[0].ownerBase;\n        var startTable = startRow.ownerTable;\n        var rowIndex = startRow.index;\n        var startParentTable = this.owner.documentHelper.layout.getParentTable(startTable);\n        for (var i = startIndex + 1; i < revisions.length; i++) {\n            var nextRevision = revisions[i];\n            var nextRevisionType = nextRevision.revisionType;\n            var change = nextRevision.range[0];\n            if (change instanceof WRowFormat) {\n                var nextRow = change.ownerBase;\n                var nextTable = nextRow.ownerTable;\n                var nextRowIndex = nextRow.index;\n                if (!startTable.equals(nextTable) &&\n                    (!isNullOrUndefined(startParentTable) && startParentTable.equals(this.owner.documentHelper.layout.getParentTable(nextTable)))) {\n                    continue;\n                }\n                if (currentRevisionType === nextRevisionType && startRevision.author === nextRevision.author\n                    && startTable.equals(nextTable) && (rowIndex + 1 === nextRowIndex)) {\n                    groupedRevision.push(nextRevision);\n                    rowIndex = nextRowIndex;\n                }\n                else {\n                    break;\n                }\n            }\n            else {\n                var block = void 0;\n                if (change instanceof WCharacterFormat) {\n                    block = change.ownerBase;\n                }\n                else if (change instanceof ElementBox) {\n                    block = change.line.paragraph;\n                }\n                if (block instanceof ParagraphWidget && block.isInsideTable) {\n                    var nextTable = block.associatedCell.ownerTable;\n                    var parentTable = this.owner.documentHelper.layout.getParentTable(nextTable);\n                    if (startTable.equals(nextTable) || (!startTable.equals(nextTable) &&\n                        (!isNullOrUndefined(startParentTable) && startParentTable.equals(parentTable)))) {\n                        continue;\n                    }\n                }\n                break;\n            }\n        }\n        return groupedRevision;\n    };\n    TrackChangesPane.prototype.updateUsers = function () {\n        if (this.users.length > 0) {\n            this.userDropDownButton.removeItems(this.users);\n            this.users = [];\n        }\n        for (var i = 0; i < this.revisions.length; i++) {\n            if (this.users.indexOf(this.revisions[i].author) === -1) {\n                this.users.push(this.revisions[i].author);\n                this.userDropDownButton.items.push({ text: this.revisions[i].author });\n            }\n        }\n    };\n    TrackChangesPane.prototype.updateHeight = function () {\n        var tabHeaderHeight = this.commentReviewPane.reviewTab.getRootElement().getElementsByClassName('e-tab-header')[0].getBoundingClientRect().height;\n        this.changesInfoDiv.style.height = this.commentReviewPane.parentPaneElement.clientHeight - this.toolbarElement.clientHeight\n            - tabHeaderHeight - 2 + 'px';\n    };\n    TrackChangesPane.prototype.removeAllChanges = function () {\n        while (this.changesInfoDiv.childNodes.length > 1) {\n            this.changesInfoDiv.removeChild(this.changesInfoDiv.lastChild);\n        }\n        this.revisions = [];\n        if (this.changes && this.changes.length > 0) {\n            for (var i = 0; i < this.changes.length; i++) {\n                var revision = this.changes.keys[i];\n                var changesSingleView = this.changes.get(revision);\n                changesSingleView.clear();\n            }\n            this.changes.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    TrackChangesPane.prototype.clear = function () {\n        this.removeAllChanges();\n        this.selectedUser = this.locale.getConstant('All');\n        this.userDropDownButton.content = this.getSpanView(this.selectedUser, 0);\n        this.selectedType = this.locale.getConstant('All');\n        this.viewTypeDropDownButton.content = this.getSpanView(this.selectedType, 1);\n        this.currentSelectedRevision = undefined;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    TrackChangesPane.prototype.destroy = function () {\n        if (this.changes && this.changes.length > 0) {\n            for (var i = 0; i < this.changes.length; i++) {\n                var revision = this.changes.keys[i];\n                var changesSingleView = this.changes.get(revision);\n                changesSingleView.destroy();\n            }\n            this.changes.clear();\n        }\n        this.changes = undefined;\n        if (this.toolbar) {\n            this.toolbar.destroy();\n            this.toolbar = undefined;\n        }\n        if (this.closeButton && this.closeButton.parentElement) {\n            this.closeButton.parentElement.removeChild(this.closeButton);\n        }\n        this.closeButton = undefined;\n        if (this.userDropDownButton) {\n            this.userDropDownButton.destroy();\n            this.userDropDownButton = undefined;\n        }\n        if (this.menuDropDownButton) {\n            this.menuDropDownButton.destroy();\n            this.menuDropDownButton = undefined;\n        }\n        if (this.viewTypeDropDownButton) {\n            this.viewTypeDropDownButton.destroy();\n            this.viewTypeDropDownButton = undefined;\n        }\n        if (this.userDropDown) {\n            this.userDropDown = undefined;\n        }\n        if (this.users.length > 0) {\n            this.users = [];\n            this.users = undefined;\n        }\n        if (this.trackChangeDiv) {\n            this.trackChangeDiv.innerHTML = '';\n            if (this.trackChangeDiv.parentElement) {\n                this.trackChangeDiv.parentElement.removeChild(this.trackChangeDiv);\n            }\n        }\n        this.trackChangeDiv = undefined;\n        if (this.changesInfoDiv) {\n            this.changesInfoDiv.innerHTML = '';\n            if (this.changesInfoDiv.parentElement) {\n                this.changesInfoDiv.parentElement.removeChild(this.changesInfoDiv);\n            }\n        }\n        this.changesInfoDiv = undefined;\n        if (this.commentReviewPane) {\n            this.commentReviewPane = undefined;\n        }\n        if (this.tableRevisions) {\n            this.tableRevisions.destroy();\n            this.tableRevisions = undefined;\n        }\n        if (this.renderedChanges) {\n            this.renderedChanges.destroy();\n            this.renderedChanges = undefined;\n        }\n        this.currentSelectedRevisionInternal = undefined;\n        this.selectedUser = undefined;\n        this.selectedType = undefined;\n        this.sortedRevisions = [];\n        this.sortedRevisions = undefined;\n        this.viewTypeitems = [];\n        this.viewTypeitems = undefined;\n        this.userDropDownitems = [];\n        this.userDropDownitems = undefined;\n        this.revisions = [];\n        this.revisions = undefined;\n        this.owner = undefined;\n    };\n    TrackChangesPane.prototype.addChanges = function (revision) {\n        var currentChangeView = new ChangesSingleView(this.owner, this);\n        this.changesInfoDiv.appendChild(currentChangeView.createSingleChangesDiv(revision));\n        if (!this.enableButtons) {\n            if (!(currentChangeView.acceptButtonElement.classList.contains('e-de-overlay'))) {\n                currentChangeView.acceptButtonElement.classList.add('e-de-overlay');\n                currentChangeView.rejectButtonElement.classList.add('e-de-overlay');\n            }\n        }\n        else if (currentChangeView.acceptButtonElement.classList.contains('e-de-overlay') && !this.owner.documentHelper.isTrackedOnlyMode) {\n            currentChangeView.acceptButtonElement.classList.remove('e-de-overlay');\n            currentChangeView.rejectButtonElement.classList.remove('e-de-overlay');\n        }\n        this.revisions.push(revision);\n        this.changes.add(revision, currentChangeView);\n        this.renderedChanges.add(revision, currentChangeView);\n    };\n    /**\n         * @private\n         * @returns {void}\n         */\n    TrackChangesPane.prototype.navigatePreviousChanges = function () {\n        this.revisionNavigateInternal(false);\n    };\n    /**\n         * @private\n         * @returns {void}\n         */\n    TrackChangesPane.prototype.navigateNextChanges = function () {\n        this.revisionNavigateInternal(true);\n    };\n    TrackChangesPane.prototype.revisionNavigateInternal = function (next) {\n        var changes = this.renderedChanges.keys;\n        if (!this.currentSelectedRevisionInternal) {\n            if (changes.length === 0) {\n                return;\n            }\n            this.currentSelectedRevision = changes[0];\n        }\n        if (this.currentSelectedRevision) {\n            var revisions = changes;\n            var revision = this.currentSelectedRevision;\n            var index = revisions.indexOf(revision);\n            if (next) {\n                revision = (index === (revisions.length - 1)) ? revisions[0] : revisions[index + 1];\n            }\n            else {\n                revision = index === 0 ? revisions[revisions.length - 1] : revisions[index - 1];\n            }\n            this.owner.documentHelper.currentSelectedRevision = revision;\n            var ranges = revision.range[0];\n            if (ranges instanceof WRowFormat) {\n                var groupingAccept = this.groupTableRevisions(this.owner.revisions.changes, this.owner.revisions.changes.indexOf(revision));\n                this.owner.selectionModule.selectTableRevision(groupingAccept);\n            }\n            else {\n                this.owner.selectionModule.selectRevision(revision);\n            }\n        }\n        this.currentSelectedRevision = this.owner.documentHelper.currentSelectedRevision;\n    };\n    return TrackChangesPane;\n}());\nexport { TrackChangesPane };\nvar ChangesSingleView = /** @class */ (function () {\n    function ChangesSingleView(owner, trackChangesPane) {\n        this.owner = owner;\n        this.locale = new L10n('documenteditor', this.owner.defaultLocale);\n        this.locale.setLocale(this.owner.locale);\n        this.trackChangesPane = trackChangesPane;\n    }\n    ChangesSingleView.prototype.updateRevisionIndexAndCount = function (currentIndex, totalCount) {\n        this.changesCount.innerHTML = this.locale.getConstant('Changes') + ' ' + currentIndex.toString() +\n            ' ' + this.locale.getConstant('of') + ' ' + totalCount.toString();\n    };\n    ChangesSingleView.prototype.createSingleChangesDiv = function (revision) {\n        this.revision = revision;\n        this.user = revision.author;\n        this.outerSingleDiv = createElement('div', { className: 'e-de-tc-outer' });\n        this.singleInnerDiv = createElement('div', { className: 'e-de-trckchanges-inner' });\n        this.singleInnerDiv.addEventListener('click', this.selectRevision.bind(this));\n        this.outerSingleDiv.appendChild(this.singleInnerDiv);\n        var userNameTotalDiv = createElement('div', { className: 'e-de-track-usernme-div' });\n        var userNameLabel = createElement('div', { innerHTML: revision.author, className: 'e-de-track-user-nme' });\n        if (!isNullOrUndefined(revision.author)) {\n            userNameTotalDiv.style.display = 'flex';\n            this.owner.documentHelper.getAvatar(userNameTotalDiv, userNameLabel, undefined, revision);\n        }\n        var revisionTypeLabel = createElement('div');\n        if (revision.revisionType === 'Insertion') {\n            this.revisionType = 'Inserted';\n            revisionTypeLabel.innerHTML = this.locale.getConstant('Inserted').toUpperCase();\n            revisionTypeLabel.classList.add('e-de-track-insert');\n        }\n        else if (revision.revisionType === 'Deletion') {\n            this.revisionType = 'Deleted';\n            revisionTypeLabel.innerHTML = this.locale.getConstant('Deleted').toUpperCase();\n            revisionTypeLabel.classList.add('e-de-track-delete');\n        }\n        else if (revision.revisionType === 'MoveFrom') {\n            this.revisionType = 'MoveFrom';\n            revisionTypeLabel.innerHTML = this.locale.getConstant('Move From').toUpperCase();\n            revisionTypeLabel.classList.add('e-de-track-delete');\n            revisionTypeLabel.style.whiteSpace = 'nowrap';\n        }\n        else if (revision.revisionType === 'MoveTo') {\n            this.revisionType = 'MoveTo';\n            revisionTypeLabel.innerHTML = this.locale.getConstant('Move To').toUpperCase();\n            revisionTypeLabel.classList.add('e-de-track-insert');\n            revisionTypeLabel.style.whiteSpace = 'nowrap';\n        }\n        userNameTotalDiv.appendChild(revisionTypeLabel);\n        this.singleInnerDiv.appendChild(userNameTotalDiv);\n        var dateView = createElement('div', {\n            className: 'e-de-track-date',\n            innerHTML: HelperMethods.getModifiedDate(revision.date)\n        });\n        this.singleInnerDiv.appendChild(dateView);\n        var changesTextDiv = createElement('div', { id: 'textDiv',\n            className: 'e-de-track-chngs-text'\n        });\n        this.layoutElementText(revision.range, changesTextDiv);\n        this.singleInnerDiv.appendChild(changesTextDiv);\n        var buttonTotalDiv = createElement('div', {\n            styles: 'display:inline-block;width:100%'\n        });\n        this.singleInnerDiv.appendChild(buttonTotalDiv);\n        var buttonDiv = createElement('div', {\n            styles: 'float:left;'\n        });\n        this.acceptButtonElement = createElement('button', { className: 'e-de-track-accept-button' });\n        this.acceptButton = new Button({ cssClass: 'e-outline e-success', content: this.locale.getConstant('Accept') });\n        this.acceptButtonElement.setAttribute('aria-label', this.locale.getConstant('Accept'));\n        buttonDiv.appendChild(this.acceptButtonElement);\n        buttonTotalDiv.appendChild(buttonDiv);\n        this.acceptButton.appendTo(this.acceptButtonElement);\n        if (this.owner.documentHelper.isTrackedOnlyMode) {\n            this.acceptButtonElement.classList.add('e-de-overlay');\n        }\n        this.acceptButtonElement.addEventListener('click', this.acceptButtonClick.bind(this));\n        buttonDiv = createElement('div', {\n            styles: 'float:left;'\n        });\n        this.rejectButtonElement = createElement('button', { className: 'e-de-track-reject-button' });\n        this.rejectButton = new Button({ cssClass: 'e-outline e-danger', content: this.locale.getConstant('Reject') });\n        this.rejectButtonElement.setAttribute('aria-label', this.locale.getConstant('Reject'));\n        buttonDiv.appendChild(this.rejectButtonElement);\n        buttonTotalDiv.appendChild(buttonDiv);\n        this.rejectButton.appendTo(this.rejectButtonElement);\n        if (this.owner.documentHelper.isTrackedOnlyMode) {\n            this.rejectButtonElement.classList.add('e-de-overlay');\n        }\n        this.rejectButtonElement.addEventListener('click', this.rejectButtonClick.bind(this));\n        this.changesCount = createElement('div', { className: 'e-de-track-chngs-count', styles: 'float:right;' });\n        var currentCount = this.owner.revisions.changes.indexOf(revision) + 1;\n        var totalCount = this.owner.revisions.changes.length;\n        this.changesCount.innerHTML = this.locale.getConstant('Changes') + ' ' + currentCount.toString() +\n            ' ' + this.locale.getConstant('of') + ' ' + totalCount.toString();\n        buttonTotalDiv.appendChild(this.changesCount);\n        return this.outerSingleDiv;\n    };\n    /**\n     * @private\n     */\n    ChangesSingleView.prototype.appendRowToTable = function (rowFormat, insertIndex) {\n        this.tableElement.insertRow();\n        for (var k = 0; k < rowFormat.ownerBase.childWidgets.length; k++) {\n            this.tableElement.rows[insertIndex].insertCell();\n            this.tableElement.rows[insertIndex].cells[k].classList.add('e-de-tc-tble-cell');\n        }\n    };\n    ChangesSingleView.prototype.selectRevision = function () {\n        var ranges = this.revision.range[0];\n        if (ranges instanceof WRowFormat) {\n            var groupingAccept = this.trackChangesPane.groupTableRevisions(this.owner.revisions.changes, this.owner.revisions.changes.indexOf(this.revision));\n            this.owner.selectionModule.selectTableRevision(groupingAccept);\n        }\n        else {\n            this.owner.selectionModule.selectRevision(this.revision);\n            this.trackChangesPane.onSelection(this.revision);\n        }\n    };\n    ChangesSingleView.prototype.layoutElementText = function (range, changesText) {\n        changesText.style.width = '100%';\n        var text = '';\n        var toSkip = false;\n        for (var i = 0; i < range.length; i++) {\n            var element = range[i];\n            if (element instanceof FieldElementBox && element.fieldType === 1) {\n                toSkip = false;\n                continue;\n            }\n            if (toSkip || element instanceof ChartElementBox) {\n                continue;\n            }\n            if (element instanceof FieldElementBox && element.fieldType === 0) {\n                toSkip = true;\n            }\n            if (element instanceof TextElementBox) {\n                text += element.text;\n            }\n            else if (element instanceof FieldElementBox && element.fieldType === 0) {\n                var fieldCode = this.owner.selectionModule.getFieldCode(element);\n                if (fieldCode.match('TOC ') || fieldCode.match('Toc')) {\n                    text += '<Table of Content>';\n                    changesText.appendChild(this.addSpan(text));\n                    return;\n                }\n                else if (fieldCode.match('HYPERLINK ') || fieldCode.match('MERGEFIELD') || fieldCode.match('FORMTEXT') || fieldCode.match('PAGE ')) {\n                    text += this.owner.editorModule.retrieveFieldResultantText(element.fieldEnd);\n                }\n                else if (element.formFieldData) {\n                    var emptyChar = this.owner.documentHelper.textHelper.repeatChar(this.owner.documentHelper.textHelper.getEnSpaceCharacter(), 5);\n                    if (text !== '') {\n                        changesText.appendChild(this.addSpan(text));\n                        text = '';\n                    }\n                    if (element.formFieldData instanceof TextFormField) {\n                        changesText.appendChild(this.addSpan(element.formFieldData.defaultValue === '' ? emptyChar : element.formFieldData.defaultValue, 'e-de-tc-field'));\n                    }\n                    else if (element.formFieldData instanceof DropDownFormField) {\n                        changesText.appendChild(this.addSpan(element.formFieldData.dropdownItems.length > 0 ? element.formFieldData.dropdownItems[0] : emptyChar, 'e-de-tc-field'));\n                    }\n                    else {\n                        changesText.appendChild(this.addSpan(element.formFieldData.checked ? String.fromCharCode(9745) : String.fromCharCode(9744), 'e-de-tc-field'));\n                    }\n                }\n            }\n            else if (element instanceof ImageElementBox) {\n                if (text !== '') {\n                    changesText.appendChild(this.addSpan(text));\n                    text = '';\n                }\n                var imageEle = createElement('img');\n                imageEle.setAttribute('src', this.owner.documentHelper.getImageString(element));\n                imageEle.classList.add('e-de-tc-shrink-img');\n                changesText.appendChild(imageEle);\n            }\n            else if (element instanceof WRowFormat) {\n                this.tableElement = createElement('table');\n                this.tableElement.classList.add('e-de-track-chng-table');\n                this.tableElement.insertRow();\n                for (var i_1 = 0; i_1 < element.ownerBase.childWidgets.length; i_1++) {\n                    this.tableElement.rows[0].insertCell();\n                    this.tableElement.rows[0].cells[i_1].classList.add('e-de-tc-tble-cell');\n                }\n                changesText.appendChild(this.tableElement);\n                return;\n            }\n            else if (element instanceof WCharacterFormat) {\n                if (text !== '') {\n                    changesText.appendChild(this.addSpan(text));\n                    text = '';\n                }\n                var paraMark = '¶';\n                if (element.ownerBase instanceof ParagraphWidget && element.ownerBase.isEndsWithPageBreak) {\n                    paraMark = '............Page Break............' + paraMark;\n                }\n                changesText.appendChild(this.addSpan(paraMark, 'e-de-tc-pmark'));\n                changesText.appendChild(createElement('br'));\n            }\n        }\n        changesText.appendChild(this.addSpan(text));\n    };\n    ChangesSingleView.prototype.addSpan = function (text, cssClass) {\n        var span = createElement('span');\n        span.textContent = text;\n        if (cssClass) {\n            span.classList.add(cssClass);\n        }\n        return span;\n    };\n    ChangesSingleView.prototype.acceptButtonClick = function () {\n        this.revision.accept();\n        if (this.owner.enableHeaderAndFooter) {\n            this.owner.editorModule.updateHeaderFooterWidget();\n        }\n    };\n    ChangesSingleView.prototype.rejectButtonClick = function () {\n        this.revision.reject();\n        if (this.owner.enableHeaderAndFooter) {\n            this.owner.editorModule.updateHeaderFooterWidget();\n        }\n    };\n    ChangesSingleView.prototype.removeFromParentCollec = function () {\n        if (this.trackChangesPane.changes.containsKey(this.revision)) {\n            this.trackChangesPane.changes.remove(this.revision);\n        }\n        if (this.trackChangesPane.revisions.indexOf(this.revision) !== -1) {\n            this.trackChangesPane.revisions.splice(this.trackChangesPane.revisions.indexOf(this.revision), 1);\n        }\n        if (this.trackChangesPane.changes.length === 0) {\n            this.trackChangesPane.setNoChangesVisibility = true;\n        }\n        this.trackChangesPane.updateUsers();\n    };\n    /**\n     *\n     * @private\n     */\n    ChangesSingleView.prototype.clear = function () {\n        this.removeFromParentCollec();\n        if (this.acceptButton) {\n            this.acceptButton.destroy();\n            this.acceptButton = undefined;\n        }\n        if (this.rejectButton) {\n            this.rejectButton.destroy();\n            this.rejectButton = undefined;\n        }\n        if (this.acceptButtonElement) {\n            this.acceptButtonElement.innerHTML = '';\n            if (this.acceptButtonElement.parentElement) {\n                this.acceptButtonElement.parentElement.removeChild(this.acceptButtonElement);\n            }\n            this.acceptButtonElement = undefined;\n        }\n        if (this.rejectButtonElement) {\n            this.rejectButtonElement.innerHTML = '';\n            if (this.rejectButtonElement.parentElement) {\n                this.rejectButtonElement.parentElement.removeChild(this.rejectButtonElement);\n            }\n            this.rejectButtonElement = undefined;\n        }\n        if (this.tableElement) {\n            this.tableElement.innerHTML = '';\n            if (this.tableElement.parentElement) {\n                this.tableElement.parentElement.removeChild(this.tableElement);\n            }\n            this.tableElement = undefined;\n        }\n        if (this.singleInnerDiv) {\n            this.singleInnerDiv.innerHTML = '';\n            if (this.singleInnerDiv.parentElement) {\n                this.singleInnerDiv.parentElement.removeChild(this.singleInnerDiv);\n            }\n            this.singleInnerDiv = undefined;\n        }\n        if (this.outerSingleDiv) {\n            this.outerSingleDiv.innerHTML = '';\n            if (this.outerSingleDiv.parentElement) {\n                this.outerSingleDiv.parentElement.removeChild(this.outerSingleDiv);\n            }\n            this.outerSingleDiv = undefined;\n        }\n    };\n    /**\n     * Disposes the internal objects which are maintained.\n     * @private\n     */\n    ChangesSingleView.prototype.destroy = function () {\n        if (this.acceptButton) {\n            this.acceptButton.destroy();\n            this.acceptButton = undefined;\n        }\n        if (this.rejectButton) {\n            this.rejectButton.destroy();\n            this.rejectButton = undefined;\n        }\n        if (this.acceptButtonElement) {\n            this.acceptButtonElement.innerHTML = '';\n            if (this.acceptButtonElement.parentElement) {\n                this.acceptButtonElement.parentElement.removeChild(this.acceptButtonElement);\n            }\n            this.acceptButtonElement = undefined;\n        }\n        if (this.rejectButtonElement) {\n            this.rejectButtonElement.innerHTML = '';\n            if (this.rejectButtonElement.parentElement) {\n                this.rejectButtonElement.parentElement.removeChild(this.rejectButtonElement);\n            }\n            this.rejectButtonElement = undefined;\n        }\n        if (this.tableElement) {\n            this.tableElement.innerHTML = '';\n            if (this.tableElement.parentElement) {\n                this.tableElement.parentElement.removeChild(this.tableElement);\n            }\n            this.tableElement = undefined;\n        }\n        if (this.singleInnerDiv) {\n            this.singleInnerDiv.innerHTML = '';\n            if (this.singleInnerDiv.parentElement) {\n                this.singleInnerDiv.parentElement.removeChild(this.singleInnerDiv);\n            }\n            this.singleInnerDiv = undefined;\n        }\n        if (this.outerSingleDiv) {\n            this.outerSingleDiv.innerHTML = '';\n            if (this.outerSingleDiv.parentElement) {\n                this.outerSingleDiv.parentElement.removeChild(this.outerSingleDiv);\n            }\n            this.outerSingleDiv = undefined;\n        }\n        this.revision = undefined;\n        this.user = undefined;\n        this.revisionType = undefined;\n        this.trackChangesPane = undefined;\n        this.owner = undefined;\n    };\n    return ChangesSingleView;\n}());\nexport { ChangesSingleView };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}