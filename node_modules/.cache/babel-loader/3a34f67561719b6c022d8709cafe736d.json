{"ast":null,"code":"import React, { useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport { fetchAuth } from \"../utils\";\nimport { UserContext } from \"../App\"; // import React, { useContext, useEffect } from 'react';\n\nconst ENDPOINT_URL = \"http://localhost:5000/generate\";\n\nconst useAsyncEndpoint = fn => {\n  const [res, setRes] = React.useState({\n    data: null,\n    complete: false,\n    pending: false,\n    error: false\n  });\n  const [req, setReq] = React.useState();\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  React.useEffect(() => {\n    if (!req) return;\n    setRes({\n      data: null,\n      pending: true,\n      error: false,\n      complete: false\n    });\n\n    if (state && state.auth) {\n      const auth = state.auth;\n      console.log(req.data);\n      axios.post(req.url, req.data, {\n        headers: {\n          \"x-access-token\": auth.authToken\n        }\n      }).then(res => setRes({\n        data: res.data.result,\n        pending: false,\n        error: false,\n        complete: true\n      })).catch(() => setRes({\n        data: null,\n        pending: false,\n        error: true,\n        complete: true\n      }));\n    }\n  }, [req]);\n  return [res, (...args) => setReq(fn(...args))];\n};\n\nexport const postGenerateTextEndpoint = () => {\n  /* eslint-disable react-hooks/rules-of-hooks */\n  return useAsyncEndpoint(data => ({\n    url: ENDPOINT_URL,\n    method: \"POST\",\n    data\n  }));\n};","map":{"version":3,"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/shared/GptUtil.js"],"names":["React","useContext","useEffect","axios","fetchAuth","UserContext","ENDPOINT_URL","useAsyncEndpoint","fn","res","setRes","useState","data","complete","pending","error","req","setReq","state","dispatch","auth","console","log","post","url","headers","authToken","then","result","catch","args","postGenerateTextEndpoint","method"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,SAASC,WAAT,QAA4B,QAA5B,C,CACA;;AAEA,MAAMC,YAAY,GAAG,gCAArB;;AAEA,MAAMC,gBAAgB,GAAGC,EAAE,IAAI;AAC3B,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBV,KAAK,CAACW,QAAN,CAAe;AAAEC,IAAAA,IAAI,EAAE,IAAR;AAAcC,IAAAA,QAAQ,EAAE,KAAxB;AAA+BC,IAAAA,OAAO,EAAE,KAAxC;AAA+CC,IAAAA,KAAK,EAAE;AAAtD,GAAf,CAAtB;AACA,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBjB,KAAK,CAACW,QAAN,EAAtB;AACA,QAAM;AAAEO,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBlB,UAAU,CAACI,WAAD,CAAtC;AAEAL,EAAAA,KAAK,CAACE,SAAN,CAAgB,MAAM;AAClB,QAAI,CAACc,GAAL,EAAU;AACVN,IAAAA,MAAM,CAAC;AAAEE,MAAAA,IAAI,EAAE,IAAR;AAAcE,MAAAA,OAAO,EAAE,IAAvB;AAA6BC,MAAAA,KAAK,EAAE,KAApC;AAA2CF,MAAAA,QAAQ,EAAE;AAArD,KAAD,CAAN;;AACA,QAAIK,KAAK,IAAIA,KAAK,CAACE,IAAnB,EAAyB;AAC9B,YAAMA,IAAI,GAAGF,KAAK,CAACE,IAAnB;AACSC,MAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACJ,IAAhB;AACAT,MAAAA,KAAK,CAACoB,IAAN,CAAWP,GAAG,CAACQ,GAAf,EAAoBR,GAAG,CAACJ,IAAxB,EAA8B;AAC1Ba,QAAAA,OAAO,EAAE;AACL,4BAAkBL,IAAI,CAACM;AADlB;AADiB,OAA9B,EAKKC,IALL,CAKUlB,GAAG,IACLC,MAAM,CAAC;AAAEE,QAAAA,IAAI,EAAEH,GAAG,CAACG,IAAJ,CAASgB,MAAjB;AAAyBd,QAAAA,OAAO,EAAE,KAAlC;AAAyCC,QAAAA,KAAK,EAAE,KAAhD;AAAuDF,QAAAA,QAAQ,EAAE;AAAjE,OAAD,CANd,EAQKgB,KARL,CAQW,MACHnB,MAAM,CAAC;AAAEE,QAAAA,IAAI,EAAE,IAAR;AAAcE,QAAAA,OAAO,EAAE,KAAvB;AAA8BC,QAAAA,KAAK,EAAE,IAArC;AAA2CF,QAAAA,QAAQ,EAAE;AAArD,OAAD,CATd;AAWH;AAAC,GAjBN,EAiBQ,CAACG,GAAD,CAjBR;AAmBA,SAAO,CAACP,GAAD,EAAM,CAAC,GAAGqB,IAAJ,KAAab,MAAM,CAACT,EAAE,CAAC,GAAGsB,IAAJ,CAAH,CAAzB,CAAP;AACH,CAzBD;;AA2BA,OAAO,MAAMC,wBAAwB,GAAG,MAAM;AAC1C;AACA,SAAOxB,gBAAgB,CAACK,IAAI,KAAK;AAAEY,IAAAA,GAAG,EAAElB,YAAP;AAAqB0B,IAAAA,MAAM,EAAE,MAA7B;AAAqCpB,IAAAA;AAArC,GAAL,CAAL,CAAvB;AACH,CAHM","sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport { fetchAuth } from \"../utils\";\nimport { UserContext } from \"../App\";\n// import React, { useContext, useEffect } from 'react';\n\nconst ENDPOINT_URL = \"http://localhost:5000/generate\";\n\nconst useAsyncEndpoint = fn => {\n    const [res, setRes] = React.useState({ data: null, complete: false, pending: false, error: false });\n    const [req, setReq] = React.useState();\n    const { state, dispatch } = useContext(UserContext);\n\n    React.useEffect(() => {\n        if (!req) return;\n        setRes({ data: null, pending: true, error: false, complete: false });\n        if (state && state.auth) {\n\t\t\tconst auth = state.auth;\n            console.log(req.data)\n            axios.post(req.url, req.data, {\n                headers: {\n                    \"x-access-token\": auth.authToken,\n                },\n            })\n                .then(res =>\n                    setRes({ data: res.data.result, pending: false, error: false, complete: true })\n                )\n                .catch(() =>\n                    setRes({ data: null, pending: false, error: true, complete: true })\n                );\n        }}, [req]);\n\n    return [res, (...args) => setReq(fn(...args))];\n}\n\nexport const postGenerateTextEndpoint = () => {\n    /* eslint-disable react-hooks/rules-of-hooks */\n    return useAsyncEndpoint(data => ({ url: ENDPOINT_URL, method: \"POST\", data }));\n}"]},"metadata":{},"sourceType":"module"}