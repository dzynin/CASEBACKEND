{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport React, { PureComponent } from \"react\";\nimport ReactDom from \"react-dom\";\nimport Pointable from \"react-pointable\";\nimport _ from \"lodash/fp\";\nimport { PDFViewer, PDFLinkService, getGlobalEventBus } from \"pdfjs-dist/web/pdf_viewer\";\nimport \"pdfjs-dist/web/pdf_viewer.css\";\nimport \"../style/pdf_viewer.css\";\nimport \"../style/PdfHighlighter.css\";\nimport getBoundingRect from \"../lib/get-bounding-rect\";\nimport getClientRects from \"../lib/get-client-rects\";\nimport getAreaAsPng from \"../lib/get-area-as-png\";\nimport { getPageFromRange, getPageFromElement, findOrCreateContainerLayer } from \"../lib/pdfjs-dom\";\nimport TipContainer from \"./TipContainer\";\nimport MouseSelection from \"./MouseSelection\";\nimport { scaledToViewport, viewportToScaled } from \"../lib/coordinates\";\nconst EMPTY_ID = \"empty-id\";\nclass PdfHighlighter extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"state\", {\n      ghostHighlight: null,\n      isCollapsed: true,\n      range: null,\n      scrolledToHighlightId: EMPTY_ID,\n      isAreaSelectionInProgress: false,\n      tip: null\n    });\n    _defineProperty(this, \"viewer\", void 0);\n    _defineProperty(this, \"linkService\", void 0);\n    _defineProperty(this, \"containerNode\", null);\n    _defineProperty(this, \"debouncedAfterSelection\", void 0);\n    _defineProperty(this, \"hideTipAndSelection\", () => {\n      const tipNode = findOrCreateContainerLayer(this.viewer.viewer, \"PdfHighlighter__tip-layer\");\n      ReactDom.unmountComponentAtNode(tipNode);\n      this.setState({\n        ghostHighlight: null,\n        tip: null\n      }, () => this.renderHighlights());\n    });\n    _defineProperty(this, \"onTextLayerRendered\", () => {\n      this.renderHighlights();\n    });\n    _defineProperty(this, \"scrollTo\", highlight => {\n      const {\n        pageNumber,\n        boundingRect,\n        usePdfCoordinates\n      } = highlight.position;\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n      const pageViewport = this.viewer.getPageView(pageNumber - 1).viewport;\n      const scrollMargin = 10;\n      this.viewer.scrollPageIntoView({\n        pageNumber,\n        destArray: [null, {\n          name: \"XYZ\"\n        }, ...pageViewport.convertToPdfPoint(0, scaledToViewport(boundingRect, pageViewport, usePdfCoordinates).top - scrollMargin), 0]\n      });\n      this.setState({\n        scrolledToHighlightId: highlight.id\n      }, () => this.renderHighlights()); // wait for scrolling to finish\n\n      setTimeout(() => {\n        this.viewer.container.addEventListener(\"scroll\", this.onScroll);\n      }, 100);\n    });\n    _defineProperty(this, \"onDocumentReady\", () => {\n      const {\n        scrollRef\n      } = this.props;\n      this.viewer.currentScaleValue = \"auto\";\n      scrollRef(this.scrollTo);\n    });\n    _defineProperty(this, \"onSelectionChange\", () => {\n      const selection = window.getSelection();\n      if (selection.isCollapsed) {\n        this.setState({\n          isCollapsed: true\n        });\n        return;\n      }\n      const range = selection.getRangeAt(0);\n      if (!range) {\n        return;\n      }\n      this.setState({\n        isCollapsed: false,\n        range\n      });\n      this.debouncedAfterSelection();\n    });\n    _defineProperty(this, \"onScroll\", () => {\n      const {\n        onScrollChange\n      } = this.props;\n      onScrollChange();\n      this.setState({\n        scrolledToHighlightId: EMPTY_ID\n      }, () => this.renderHighlights());\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n    });\n    _defineProperty(this, \"onMouseDown\", event => {\n      if (!(event.target instanceof HTMLElement)) {\n        return;\n      }\n      if (event.target.closest(\".PdfHighlighter__tip-container\")) {\n        return;\n      }\n      this.hideTipAndSelection();\n    });\n    _defineProperty(this, \"handleKeyDown\", event => {\n      if (event.code === \"Escape\") {\n        this.hideTipAndSelection();\n      }\n    });\n    _defineProperty(this, \"afterSelection\", () => {\n      const {\n        onSelectionFinished\n      } = this.props;\n      const {\n        isCollapsed,\n        range\n      } = this.state;\n      if (!range || isCollapsed) {\n        return;\n      }\n      const page = getPageFromRange(range);\n      if (!page) {\n        return;\n      }\n      const rects = getClientRects(range, page.node);\n      if (rects.length === 0) {\n        return;\n      }\n      const boundingRect = getBoundingRect(rects);\n      const viewportPosition = {\n        boundingRect,\n        rects,\n        pageNumber: page.number\n      };\n      const content = {\n        text: range.toString()\n      };\n      const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n      this.renderTipAtPosition(viewportPosition, onSelectionFinished(scaledPosition, content, () => this.hideTipAndSelection(), () => this.setState({\n        ghostHighlight: {\n          position: scaledPosition\n        }\n      }, () => this.renderHighlights())));\n    });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.highlights !== this.props.highlights) {\n      this.renderHighlights(this.props);\n    }\n  }\n  componentDidMount() {\n    const {\n      pdfDocument\n    } = this.props;\n    this.debouncedAfterSelection = _.debounce(500, this.afterSelection);\n    this.linkService = new PDFLinkService();\n    this.viewer = new PDFViewer({\n      container: this.containerNode,\n      enhanceTextSelection: true,\n      removePageBorders: true,\n      linkService: this.linkService\n    });\n    this.viewer.setDocument(pdfDocument);\n    this.linkService.setDocument(pdfDocument);\n    this.linkService.setViewer(this.viewer); // debug\n\n    window.PdfViewer = this;\n    document.addEventListener(\"selectionchange\", this.onSelectionChange);\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    document.addEventListener(\"pagesinit\", () => {\n      this.onDocumentReady();\n    });\n    document.addEventListener(\"textlayerrendered\", this.onTextLayerRendered);\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"selectionchange\", this.onSelectionChange);\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n    document.removeEventListener(\"textlayerrendered\", this.onTextLayerRendered);\n  }\n  findOrCreateHighlightLayer(page) {\n    const textLayer = this.viewer.getPageView(page - 1).textLayer;\n    if (!textLayer) {\n      return null;\n    }\n    return findOrCreateContainerLayer(textLayer.textLayerDiv, \"PdfHighlighter__highlight-layer\");\n  }\n  groupHighlightsByPage(highlights) {\n    const {\n      ghostHighlight\n    } = this.state;\n    return [...highlights, ghostHighlight].filter(Boolean).reduce((res, highlight) => {\n      const {\n        pageNumber\n      } = highlight.position;\n      res[pageNumber] = res[pageNumber] || [];\n      res[pageNumber].push(highlight);\n      return res;\n    }, {});\n  }\n  showTip(highlight, content) {\n    const {\n      isCollapsed,\n      ghostHighlight,\n      isAreaSelectionInProgress\n    } = this.state;\n    const highlightInProgress = !isCollapsed || ghostHighlight;\n    if (highlightInProgress || isAreaSelectionInProgress) {\n      return;\n    }\n    this.renderTipAtPosition(highlight.position, content);\n  }\n  scaledPositionToViewport({\n    pageNumber,\n    boundingRect,\n    rects,\n    usePdfCoordinates\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: scaledToViewport(boundingRect, viewport, usePdfCoordinates),\n      rects: (rects || []).map(rect => scaledToViewport(rect, viewport, usePdfCoordinates)),\n      pageNumber\n    };\n  }\n  viewportPositionToScaled({\n    pageNumber,\n    boundingRect,\n    rects\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: viewportToScaled(boundingRect, viewport),\n      rects: (rects || []).map(rect => viewportToScaled(rect, viewport)),\n      pageNumber\n    };\n  }\n  screenshot(position, pageNumber) {\n    const canvas = this.viewer.getPageView(pageNumber - 1).canvas;\n    return getAreaAsPng(canvas, position);\n  }\n  renderHighlights(nextProps) {\n    const {\n      highlightTransform,\n      highlights\n    } = nextProps || this.props;\n    const {\n      pdfDocument\n    } = this.props;\n    const {\n      tip,\n      scrolledToHighlightId\n    } = this.state;\n    const highlightsByPage = this.groupHighlightsByPage(highlights);\n    for (let pageNumber = 1; pageNumber <= pdfDocument.numPages; pageNumber++) {\n      const highlightLayer = this.findOrCreateHighlightLayer(pageNumber);\n      if (highlightLayer) {\n        ReactDom.render(React.createElement(\"div\", null, (highlightsByPage[String(pageNumber)] || []).map((highlight, index) => {\n          const {\n            position,\n            ...rest\n          } = highlight;\n          const viewportHighlight = {\n            position: this.scaledPositionToViewport(position),\n            ...rest\n          };\n          if (tip && tip.highlight.id === String(highlight.id)) {\n            this.showTip(tip.highlight, tip.callback(viewportHighlight));\n          }\n          const isScrolledTo = Boolean(scrolledToHighlightId === highlight.id);\n          return highlightTransform(viewportHighlight, index, (highlight, callback) => {\n            this.setState({\n              tip: {\n                highlight,\n                callback\n              }\n            });\n            this.showTip(highlight, callback(highlight));\n          }, this.hideTipAndSelection, rect => {\n            const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n            return viewportToScaled(rect, viewport);\n          }, boundingRect => this.screenshot(boundingRect, pageNumber), isScrolledTo);\n        })), highlightLayer);\n      }\n    }\n  }\n  renderTipAtPosition(position, inner) {\n    const {\n      boundingRect,\n      pageNumber\n    } = position;\n    const page = {\n      node: this.viewer.getPageView(pageNumber - 1).div\n    };\n    const pageBoundingRect = page.node.getBoundingClientRect();\n    const tipNode = findOrCreateContainerLayer(this.viewer.viewer, \"PdfHighlighter__tip-layer\");\n    ReactDom.render(React.createElement(TipContainer, {\n      scrollTop: this.viewer.container.scrollTop,\n      pageBoundingRect: pageBoundingRect,\n      style: {\n        left: page.node.offsetLeft + boundingRect.left + boundingRect.width / 2,\n        top: boundingRect.top + page.node.offsetTop,\n        bottom: boundingRect.top + page.node.offsetTop + boundingRect.height\n      },\n      children: inner\n    }), tipNode);\n  }\n  toggleTextSelection(flag) {\n    this.viewer.viewer.classList.toggle(\"PdfHighlighter--disable-selection\", flag);\n  }\n  render() {\n    const {\n      onSelectionFinished,\n      enableAreaSelection\n    } = this.props;\n    return React.createElement(Pointable, {\n      onPointerDown: this.onMouseDown\n    }, React.createElement(\"div\", {\n      ref: node => this.containerNode = node,\n      className: \"PdfHighlighter\",\n      onContextMenu: e => e.preventDefault()\n    }, React.createElement(\"div\", {\n      className: \"pdfViewer\"\n    }), typeof enableAreaSelection === \"function\" ? React.createElement(MouseSelection, {\n      onDragStart: () => this.toggleTextSelection(true),\n      onDragEnd: () => this.toggleTextSelection(false),\n      onChange: isVisible => this.setState({\n        isAreaSelectionInProgress: isVisible\n      }),\n      shouldStart: event => enableAreaSelection(event) && event.target instanceof HTMLElement && Boolean(event.target.closest(\".page\")),\n      onSelection: (startTarget, boundingRect, resetSelection) => {\n        const page = getPageFromElement(startTarget);\n        if (!page) {\n          return;\n        }\n        const pageBoundingRect = {\n          ...boundingRect,\n          top: boundingRect.top - page.node.offsetTop,\n          left: boundingRect.left - page.node.offsetLeft\n        };\n        const viewportPosition = {\n          boundingRect: pageBoundingRect,\n          rects: [],\n          pageNumber: page.number\n        };\n        const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n        const image = this.screenshot(pageBoundingRect, page.number);\n        this.renderTipAtPosition(viewportPosition, onSelectionFinished(scaledPosition, {\n          image\n        }, () => this.hideTipAndSelection(), () => this.setState({\n          ghostHighlight: {\n            position: scaledPosition,\n            content: {\n              image\n            }\n          }\n        }, () => {\n          resetSelection();\n          this.renderHighlights();\n        })));\n      }\n    }) : null));\n  }\n}\nexport default PdfHighlighter;","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","React","PureComponent","ReactDom","Pointable","_","PDFViewer","PDFLinkService","getGlobalEventBus","getBoundingRect","getClientRects","getAreaAsPng","getPageFromRange","getPageFromElement","findOrCreateContainerLayer","TipContainer","MouseSelection","scaledToViewport","viewportToScaled","EMPTY_ID","PdfHighlighter","constructor","args","ghostHighlight","isCollapsed","range","scrolledToHighlightId","isAreaSelectionInProgress","tip","tipNode","viewer","unmountComponentAtNode","setState","renderHighlights","highlight","pageNumber","boundingRect","usePdfCoordinates","position","container","removeEventListener","onScroll","pageViewport","getPageView","viewport","scrollMargin","scrollPageIntoView","destArray","name","convertToPdfPoint","top","id","setTimeout","addEventListener","scrollRef","props","currentScaleValue","scrollTo","selection","window","getSelection","getRangeAt","debouncedAfterSelection","onScrollChange","event","target","HTMLElement","closest","hideTipAndSelection","code","onSelectionFinished","state","page","rects","node","length","viewportPosition","number","content","text","toString","scaledPosition","viewportPositionToScaled","renderTipAtPosition","componentDidUpdate","prevProps","highlights","componentDidMount","pdfDocument","debounce","afterSelection","linkService","containerNode","enhanceTextSelection","removePageBorders","setDocument","setViewer","PdfViewer","document","onSelectionChange","handleKeyDown","onDocumentReady","onTextLayerRendered","componentWillUnmount","findOrCreateHighlightLayer","textLayer","textLayerDiv","groupHighlightsByPage","filter","Boolean","reduce","res","push","showTip","highlightInProgress","scaledPositionToViewport","map","rect","screenshot","canvas","nextProps","highlightTransform","highlightsByPage","numPages","highlightLayer","render","createElement","String","index","rest","viewportHighlight","callback","isScrolledTo","inner","div","pageBoundingRect","getBoundingClientRect","scrollTop","style","left","offsetLeft","width","offsetTop","bottom","height","children","toggleTextSelection","flag","classList","toggle","enableAreaSelection","onPointerDown","onMouseDown","ref","className","onContextMenu","e","preventDefault","onDragStart","onDragEnd","onChange","isVisible","shouldStart","onSelection","startTarget","resetSelection","image"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/node_modules/react-pdf-highlighter/build/components/PdfHighlighter.js"],"sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { PureComponent } from \"react\";\nimport ReactDom from \"react-dom\";\nimport Pointable from \"react-pointable\";\nimport _ from \"lodash/fp\";\nimport { PDFViewer, PDFLinkService, getGlobalEventBus } from \"pdfjs-dist/web/pdf_viewer\";\nimport \"pdfjs-dist/web/pdf_viewer.css\";\nimport \"../style/pdf_viewer.css\";\nimport \"../style/PdfHighlighter.css\";\nimport getBoundingRect from \"../lib/get-bounding-rect\";\nimport getClientRects from \"../lib/get-client-rects\";\nimport getAreaAsPng from \"../lib/get-area-as-png\";\nimport { getPageFromRange, getPageFromElement, findOrCreateContainerLayer } from \"../lib/pdfjs-dom\";\nimport TipContainer from \"./TipContainer\";\nimport MouseSelection from \"./MouseSelection\";\nimport { scaledToViewport, viewportToScaled } from \"../lib/coordinates\";\nconst EMPTY_ID = \"empty-id\";\n\nclass PdfHighlighter extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      ghostHighlight: null,\n      isCollapsed: true,\n      range: null,\n      scrolledToHighlightId: EMPTY_ID,\n      isAreaSelectionInProgress: false,\n      tip: null\n    });\n\n    _defineProperty(this, \"viewer\", void 0);\n\n    _defineProperty(this, \"linkService\", void 0);\n\n    _defineProperty(this, \"containerNode\", null);\n\n    _defineProperty(this, \"debouncedAfterSelection\", void 0);\n\n    _defineProperty(this, \"hideTipAndSelection\", () => {\n      const tipNode = findOrCreateContainerLayer(this.viewer.viewer, \"PdfHighlighter__tip-layer\");\n      ReactDom.unmountComponentAtNode(tipNode);\n      this.setState({\n        ghostHighlight: null,\n        tip: null\n      }, () => this.renderHighlights());\n    });\n\n    _defineProperty(this, \"onTextLayerRendered\", () => {\n      this.renderHighlights();\n    });\n\n    _defineProperty(this, \"scrollTo\", highlight => {\n      const {\n        pageNumber,\n        boundingRect,\n        usePdfCoordinates\n      } = highlight.position;\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n      const pageViewport = this.viewer.getPageView(pageNumber - 1).viewport;\n      const scrollMargin = 10;\n      this.viewer.scrollPageIntoView({\n        pageNumber,\n        destArray: [null, {\n          name: \"XYZ\"\n        }, ...pageViewport.convertToPdfPoint(0, scaledToViewport(boundingRect, pageViewport, usePdfCoordinates).top - scrollMargin), 0]\n      });\n      this.setState({\n        scrolledToHighlightId: highlight.id\n      }, () => this.renderHighlights()); // wait for scrolling to finish\n\n      setTimeout(() => {\n        this.viewer.container.addEventListener(\"scroll\", this.onScroll);\n      }, 100);\n    });\n\n    _defineProperty(this, \"onDocumentReady\", () => {\n      const {\n        scrollRef\n      } = this.props;\n      this.viewer.currentScaleValue = \"auto\";\n      scrollRef(this.scrollTo);\n    });\n\n    _defineProperty(this, \"onSelectionChange\", () => {\n      const selection = window.getSelection();\n\n      if (selection.isCollapsed) {\n        this.setState({\n          isCollapsed: true\n        });\n        return;\n      }\n\n      const range = selection.getRangeAt(0);\n\n      if (!range) {\n        return;\n      }\n\n      this.setState({\n        isCollapsed: false,\n        range\n      });\n      this.debouncedAfterSelection();\n    });\n\n    _defineProperty(this, \"onScroll\", () => {\n      const {\n        onScrollChange\n      } = this.props;\n      onScrollChange();\n      this.setState({\n        scrolledToHighlightId: EMPTY_ID\n      }, () => this.renderHighlights());\n      this.viewer.container.removeEventListener(\"scroll\", this.onScroll);\n    });\n\n    _defineProperty(this, \"onMouseDown\", event => {\n      if (!(event.target instanceof HTMLElement)) {\n        return;\n      }\n\n      if (event.target.closest(\".PdfHighlighter__tip-container\")) {\n        return;\n      }\n\n      this.hideTipAndSelection();\n    });\n\n    _defineProperty(this, \"handleKeyDown\", event => {\n      if (event.code === \"Escape\") {\n        this.hideTipAndSelection();\n      }\n    });\n\n    _defineProperty(this, \"afterSelection\", () => {\n      const {\n        onSelectionFinished\n      } = this.props;\n      const {\n        isCollapsed,\n        range\n      } = this.state;\n\n      if (!range || isCollapsed) {\n        return;\n      }\n\n      const page = getPageFromRange(range);\n\n      if (!page) {\n        return;\n      }\n\n      const rects = getClientRects(range, page.node);\n\n      if (rects.length === 0) {\n        return;\n      }\n\n      const boundingRect = getBoundingRect(rects);\n      const viewportPosition = {\n        boundingRect,\n        rects,\n        pageNumber: page.number\n      };\n      const content = {\n        text: range.toString()\n      };\n      const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n      this.renderTipAtPosition(viewportPosition, onSelectionFinished(scaledPosition, content, () => this.hideTipAndSelection(), () => this.setState({\n        ghostHighlight: {\n          position: scaledPosition\n        }\n      }, () => this.renderHighlights())));\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.highlights !== this.props.highlights) {\n      this.renderHighlights(this.props);\n    }\n  }\n\n  componentDidMount() {\n    const {\n      pdfDocument\n    } = this.props;\n    this.debouncedAfterSelection = _.debounce(500, this.afterSelection);\n    this.linkService = new PDFLinkService();\n    this.viewer = new PDFViewer({\n      container: this.containerNode,\n      enhanceTextSelection: true,\n      removePageBorders: true,\n      linkService: this.linkService\n    });\n    this.viewer.setDocument(pdfDocument);\n    this.linkService.setDocument(pdfDocument);\n    this.linkService.setViewer(this.viewer); // debug\n\n    window.PdfViewer = this;\n    document.addEventListener(\"selectionchange\", this.onSelectionChange);\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    document.addEventListener(\"pagesinit\", () => {\n      this.onDocumentReady();\n    });\n    document.addEventListener(\"textlayerrendered\", this.onTextLayerRendered);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"selectionchange\", this.onSelectionChange);\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n    document.removeEventListener(\"textlayerrendered\", this.onTextLayerRendered);\n  }\n\n  findOrCreateHighlightLayer(page) {\n    const textLayer = this.viewer.getPageView(page - 1).textLayer;\n\n    if (!textLayer) {\n      return null;\n    }\n\n    return findOrCreateContainerLayer(textLayer.textLayerDiv, \"PdfHighlighter__highlight-layer\");\n  }\n\n  groupHighlightsByPage(highlights) {\n    const {\n      ghostHighlight\n    } = this.state;\n    return [...highlights, ghostHighlight].filter(Boolean).reduce((res, highlight) => {\n      const {\n        pageNumber\n      } = highlight.position;\n      res[pageNumber] = res[pageNumber] || [];\n      res[pageNumber].push(highlight);\n      return res;\n    }, {});\n  }\n\n  showTip(highlight, content) {\n    const {\n      isCollapsed,\n      ghostHighlight,\n      isAreaSelectionInProgress\n    } = this.state;\n    const highlightInProgress = !isCollapsed || ghostHighlight;\n\n    if (highlightInProgress || isAreaSelectionInProgress) {\n      return;\n    }\n\n    this.renderTipAtPosition(highlight.position, content);\n  }\n\n  scaledPositionToViewport({\n    pageNumber,\n    boundingRect,\n    rects,\n    usePdfCoordinates\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: scaledToViewport(boundingRect, viewport, usePdfCoordinates),\n      rects: (rects || []).map(rect => scaledToViewport(rect, viewport, usePdfCoordinates)),\n      pageNumber\n    };\n  }\n\n  viewportPositionToScaled({\n    pageNumber,\n    boundingRect,\n    rects\n  }) {\n    const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n    return {\n      boundingRect: viewportToScaled(boundingRect, viewport),\n      rects: (rects || []).map(rect => viewportToScaled(rect, viewport)),\n      pageNumber\n    };\n  }\n\n  screenshot(position, pageNumber) {\n    const canvas = this.viewer.getPageView(pageNumber - 1).canvas;\n    return getAreaAsPng(canvas, position);\n  }\n\n  renderHighlights(nextProps) {\n    const {\n      highlightTransform,\n      highlights\n    } = nextProps || this.props;\n    const {\n      pdfDocument\n    } = this.props;\n    const {\n      tip,\n      scrolledToHighlightId\n    } = this.state;\n    const highlightsByPage = this.groupHighlightsByPage(highlights);\n\n    for (let pageNumber = 1; pageNumber <= pdfDocument.numPages; pageNumber++) {\n      const highlightLayer = this.findOrCreateHighlightLayer(pageNumber);\n\n      if (highlightLayer) {\n        ReactDom.render(React.createElement(\"div\", null, (highlightsByPage[String(pageNumber)] || []).map((highlight, index) => {\n          const {\n            position,\n            ...rest\n          } = highlight;\n          const viewportHighlight = {\n            position: this.scaledPositionToViewport(position),\n            ...rest\n          };\n\n          if (tip && tip.highlight.id === String(highlight.id)) {\n            this.showTip(tip.highlight, tip.callback(viewportHighlight));\n          }\n\n          const isScrolledTo = Boolean(scrolledToHighlightId === highlight.id);\n          return highlightTransform(viewportHighlight, index, (highlight, callback) => {\n            this.setState({\n              tip: {\n                highlight,\n                callback\n              }\n            });\n            this.showTip(highlight, callback(highlight));\n          }, this.hideTipAndSelection, rect => {\n            const viewport = this.viewer.getPageView(pageNumber - 1).viewport;\n            return viewportToScaled(rect, viewport);\n          }, boundingRect => this.screenshot(boundingRect, pageNumber), isScrolledTo);\n        })), highlightLayer);\n      }\n    }\n  }\n\n  renderTipAtPosition(position, inner) {\n    const {\n      boundingRect,\n      pageNumber\n    } = position;\n    const page = {\n      node: this.viewer.getPageView(pageNumber - 1).div\n    };\n    const pageBoundingRect = page.node.getBoundingClientRect();\n    const tipNode = findOrCreateContainerLayer(this.viewer.viewer, \"PdfHighlighter__tip-layer\");\n    ReactDom.render(React.createElement(TipContainer, {\n      scrollTop: this.viewer.container.scrollTop,\n      pageBoundingRect: pageBoundingRect,\n      style: {\n        left: page.node.offsetLeft + boundingRect.left + boundingRect.width / 2,\n        top: boundingRect.top + page.node.offsetTop,\n        bottom: boundingRect.top + page.node.offsetTop + boundingRect.height\n      },\n      children: inner\n    }), tipNode);\n  }\n\n  toggleTextSelection(flag) {\n    this.viewer.viewer.classList.toggle(\"PdfHighlighter--disable-selection\", flag);\n  }\n\n  render() {\n    const {\n      onSelectionFinished,\n      enableAreaSelection\n    } = this.props;\n    return React.createElement(Pointable, {\n      onPointerDown: this.onMouseDown\n    }, React.createElement(\"div\", {\n      ref: node => this.containerNode = node,\n      className: \"PdfHighlighter\",\n      onContextMenu: e => e.preventDefault()\n    }, React.createElement(\"div\", {\n      className: \"pdfViewer\"\n    }), typeof enableAreaSelection === \"function\" ? React.createElement(MouseSelection, {\n      onDragStart: () => this.toggleTextSelection(true),\n      onDragEnd: () => this.toggleTextSelection(false),\n      onChange: isVisible => this.setState({\n        isAreaSelectionInProgress: isVisible\n      }),\n      shouldStart: event => enableAreaSelection(event) && event.target instanceof HTMLElement && Boolean(event.target.closest(\".page\")),\n      onSelection: (startTarget, boundingRect, resetSelection) => {\n        const page = getPageFromElement(startTarget);\n\n        if (!page) {\n          return;\n        }\n\n        const pageBoundingRect = { ...boundingRect,\n          top: boundingRect.top - page.node.offsetTop,\n          left: boundingRect.left - page.node.offsetLeft\n        };\n        const viewportPosition = {\n          boundingRect: pageBoundingRect,\n          rects: [],\n          pageNumber: page.number\n        };\n        const scaledPosition = this.viewportPositionToScaled(viewportPosition);\n        const image = this.screenshot(pageBoundingRect, page.number);\n        this.renderTipAtPosition(viewportPosition, onSelectionFinished(scaledPosition, {\n          image\n        }, () => this.hideTipAndSelection(), () => this.setState({\n          ghostHighlight: {\n            position: scaledPosition,\n            content: {\n              image\n            }\n          }\n        }, () => {\n          resetSelection();\n          this.renderHighlights();\n        })));\n      }\n    }) : null));\n  }\n\n}\n\nexport default PdfHighlighter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}