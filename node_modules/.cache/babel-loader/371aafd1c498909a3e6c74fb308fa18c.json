{"ast":null,"code":"import { Dictionary } from '../../base/dictionary';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { TextPosition } from '../selection/selection-helper';\nimport { LineWidget, TextElementBox, ParagraphWidget, ListTextElementBox, FieldElementBox, ShapeElementBox } from '../viewer/page';\nimport { searchResultsChangeEvent } from '../../base/index';\n/**\n * @private\n */\nvar TextSearch = /** @class */function () {\n  function TextSearch(owner) {\n    this.wordBefore = '\\\\b';\n    this.wordAfter = '\\\\b';\n    this.owner = owner;\n    this.documentHelper = this.owner.documentHelper;\n  }\n  TextSearch.prototype.find = function (pattern, findOption) {\n    return this.findNext(pattern, findOption, '0;0;0');\n  };\n  TextSearch.prototype.findNext = function (pattern, findOption, hierarchicalPosition) {\n    if (typeof pattern === 'string') {\n      pattern = this.stringToRegex(pattern, findOption);\n    }\n    if (hierarchicalPosition === undefined) {\n      hierarchicalPosition = '0;0;0';\n    }\n    this.owner.searchModule.textSearchResults.clearResults();\n    var results = this.owner.searchModule.textSearchResults;\n    this.findDocument(results, pattern, true, findOption, hierarchicalPosition);\n    return results.length > 0, results.currentSearchResult;\n  };\n  TextSearch.prototype.stringToRegex = function (textToFind, option) {\n    if (textToFind.indexOf('\\\\') > -1) {\n      textToFind = textToFind.split('\\\\').join('\\\\\\\\');\n    }\n    if (textToFind.indexOf('(') > -1 || textToFind.indexOf(')') > -1 || textToFind.indexOf('.') > -1 || textToFind.indexOf('[') > -1 || textToFind.indexOf(']') > -1 || textToFind.indexOf('$') > -1 || textToFind.indexOf('{') > -1 || textToFind.indexOf('}') > -1 || textToFind.indexOf('*') > -1 || textToFind.indexOf('|') > -1 || textToFind.indexOf('^') > -1 || textToFind.indexOf('?') > -1 || textToFind.indexOf('+') > -1) {\n      var text = '';\n      for (var i = 0; i < textToFind.length; i++) {\n        if (textToFind[parseInt(i.toString(), 10)] === '(' || textToFind[parseInt(i.toString(), 10)] === ')' || textToFind[parseInt(i.toString(), 10)] === '.' || textToFind[parseInt(i.toString(), 10)] === '[' || textToFind[parseInt(i.toString(), 10)] === ']' || textToFind[parseInt(i.toString(), 10)] === '$' || textToFind[parseInt(i.toString(), 10)] === '{' || textToFind[parseInt(i.toString(), 10)] === '}' || textToFind[parseInt(i.toString(), 10)] === '*' || textToFind[parseInt(i.toString(), 10)] === '|' || textToFind[parseInt(i.toString(), 10)] === '^' || textToFind[parseInt(i.toString(), 10)] === '?' || textToFind[parseInt(i.toString(), 10)] === '+') {\n          text += '\\\\' + textToFind[parseInt(i.toString(), 10)];\n        } else {\n          text += textToFind[parseInt(i.toString(), 10)];\n        }\n      }\n      textToFind = text;\n    }\n    if (option === 'WholeWord' || option === 'CaseSensitiveWholeWord') {\n      textToFind = this.wordBefore + textToFind + this.wordAfter;\n    }\n    return RegExp(textToFind, option === 'CaseSensitive' || option === 'CaseSensitiveWholeWord' ? 'g' : 'ig');\n  };\n  TextSearch.prototype.isPatternEmpty = function (pattern) {\n    var wordEmpty = this.wordBefore + this.wordAfter;\n    var patternRegExp = pattern.toString();\n    return patternRegExp.length === 0 || patternRegExp === wordEmpty;\n  };\n  TextSearch.prototype.findAll = function (pattern, findOption, hierarchicalPosition) {\n    if (typeof pattern === 'string') {\n      pattern = this.stringToRegex(pattern, findOption);\n    }\n    if (hierarchicalPosition === undefined) {\n      hierarchicalPosition = '0;0;0';\n    }\n    this.owner.searchModule.textSearchResults.clearResults();\n    var results = this.owner.searchModule.textSearchResults;\n    this.findDocument(results, pattern, false, findOption, hierarchicalPosition);\n    if (results.length > 0 && results.currentIndex < 0) {\n      results.currentIndex = 0;\n    }\n    if (!isNullOrUndefined(results.currentSearchResult)) {\n      var eventArgs = {\n        source: this.documentHelper.owner\n      };\n      this.documentHelper.owner.trigger(searchResultsChangeEvent, eventArgs);\n      return results;\n    }\n    return undefined;\n  };\n  TextSearch.prototype.getElementInfo = function (inlineElement, indexInInline, includeNextLine, pattern, findOption, isFirstMatch, results, selectionEnd, isSpellCheck) {\n    var inlines = inlineElement;\n    var stringBuilder = '';\n    var spans = new Dictionary();\n    // eslint-disable  no-constant-condition\n    var previousElementCount = 0;\n    do {\n      if (inlineElement instanceof TextElementBox && !isNullOrUndefined(inlineElement.text) && inlineElement.text !== '') {\n        spans.add(inlineElement, isSpellCheck ? stringBuilder.length + previousElementCount : stringBuilder.length);\n        previousElementCount = 0;\n        // IndexInInline Handled specifically for simple find operation to start from starting point\n        if (inlineElement === inlines) {\n          stringBuilder = stringBuilder + inlineElement.text.substring(indexInInline);\n        } else {\n          stringBuilder = stringBuilder + inlineElement.text;\n        }\n      } else if (inlineElement instanceof FieldElementBox) {\n        var fieldBegin = inlineElement;\n        if (!isNullOrUndefined(fieldBegin.fieldEnd)) {\n          /* eslint-disable-next-line max-len */\n          inlineElement = isNullOrUndefined(fieldBegin.fieldSeparator) ? fieldBegin.fieldEnd : fieldBegin.fieldSeparator;\n        }\n      } else if (inlineElement instanceof ShapeElementBox && !isNullOrUndefined(inlineElement.textFrame) && inlineElement.textFrame.childWidgets.length > 0) {\n        this.findInlineText(inlineElement.textFrame, pattern, findOption, isFirstMatch, results, selectionEnd);\n      }\n      if (!(inlineElement instanceof TextElementBox)) {\n        previousElementCount += inlineElement.length;\n      }\n      if (!isNullOrUndefined(inlineElement) && isNullOrUndefined(inlineElement.nextNode)) {\n        var splittedParagraph = inlineElement.paragraph.nextSplitWidget;\n        if (!isSpellCheck && !isNullOrUndefined(splittedParagraph) && splittedParagraph !== inlineElement.paragraph && splittedParagraph.childWidgets.length > 0 && splittedParagraph.childWidgets[0] instanceof LineWidget && splittedParagraph.childWidgets[0].children.length > 0) {\n          inlineElement = splittedParagraph.childWidgets[0].children[0];\n          continue;\n        } else {\n          break;\n        }\n      }\n      if (!isNullOrUndefined(inlineElement)) {\n        if (!isNullOrUndefined(includeNextLine) && !includeNextLine) {\n          var elementBoxes = inlineElement.line.children;\n          var length_1 = inlineElement.line.children.length;\n          if (elementBoxes.indexOf(inlineElement) < length_1 - 1) {\n            inlineElement = inlineElement.nextNode;\n          } else {\n            inlineElement = undefined;\n            break;\n          }\n        } else {\n          inlineElement = inlineElement.nextNode;\n        }\n      }\n      // eslint-disable-next-line no-constant-condition\n    } while (true);\n    var text = stringBuilder.toString();\n    return {\n      elementsWithOffset: spans,\n      fullText: text\n    };\n  };\n  /* eslint-disable-next-line max-len */\n  TextSearch.prototype.updateMatchedTextLocation = function (matches, results, textInfo, indexInInline, inlines, isFirstMatch, selectionEnd, startPosition) {\n    for (var i = 0; i < matches.length; i++) {\n      var match = matches[parseInt(i.toString(), 10)];\n      var isMatched = void 0;\n      if (!isNullOrUndefined(startPosition) && match.index < startPosition) {\n        continue;\n      }\n      var result = results.addResult();\n      var spanKeys = textInfo.keys;\n      for (var j = 0; j < spanKeys.length; j++) {\n        var span = spanKeys[parseInt(j.toString(), 10)];\n        var startIndex = textInfo.get(span);\n        var spanLength = span.length;\n        // IndexInInline Handled specifically for simple find operation to start from starting point\n        if (span === inlines) {\n          spanLength -= indexInInline;\n        }\n        if (isNullOrUndefined(result.start) && match.index < startIndex + spanLength) {\n          var index = match.index - startIndex;\n          // IndexInInline Handled specifically for simple find operation to start from starting point\n          if (span === inlines) {\n            index += indexInInline;\n          }\n          var offset = span.line.getOffset(span, index);\n          result.start = this.getTextPosition(span.line, offset.toString());\n          result.start.location = this.owner.selectionModule.getPhysicalPositionInternal(span.line, offset, true);\n          result.start.setPositionParagraph(span.line, offset);\n        }\n        if (match.index + match[0].length <= startIndex + spanLength) {\n          var index = match.index + match[0].length - startIndex;\n          // IndexInInline Handled specifically for simple find operation to start from starting point\n          if (span === inlines) {\n            index += indexInInline;\n          }\n          var offset = span.line.getOffset(span, index);\n          result.end = this.getTextPosition(span.line, offset.toString());\n          result.end.location = this.owner.selectionModule.getPhysicalPositionInternal(span.line, offset, true);\n          result.end.setPositionParagraph(span.line, offset);\n          isMatched = true;\n          break;\n        }\n      }\n      if (isFirstMatch) {\n        results.currentIndex = 0;\n        break;\n      } else if (results.currentIndex < 0 && !isNullOrUndefined(selectionEnd) && (selectionEnd.isExistBefore(result.start) || selectionEnd.isAtSamePosition(result.start))) {\n        results.currentIndex = results.indexOf(result);\n      }\n      if (!isNullOrUndefined(startPosition) && isMatched) {\n        break;\n      }\n    }\n  };\n  /* eslint-disable-next-line max-len */\n  TextSearch.prototype.findDocument = function (results, pattern, isFirstMatch, findOption, hierachicalPosition) {\n    if (this.isPatternEmpty(pattern)) {\n      return;\n    }\n    if (findOption === undefined) {\n      findOption = 'None';\n    }\n    var inline = undefined;\n    var selectionEnd = undefined;\n    if (hierachicalPosition !== undefined) {\n      selectionEnd = this.owner.selectionModule.end;\n    }\n    if (hierachicalPosition !== undefined && isFirstMatch && selectionEnd !== undefined && selectionEnd.paragraph !== undefined) {\n      if (selectionEnd.paragraph instanceof ParagraphWidget) {\n        var indexInInline = 0;\n        // IndexInInline Handled specifically for simple find operation to start from starting point\n        /* eslint-disable-next-line max-len */\n        var inlineElement = selectionEnd.currentWidget.getInline(this.owner.selectionModule.start.offset, indexInInline);\n        inline = inlineElement.element;\n        indexInInline = inlineElement.index;\n        if (!isNullOrUndefined(inline)) {\n          var nextParagraphWidget = undefined;\n          nextParagraphWidget = this.findInline(inline, pattern, findOption, indexInInline, isFirstMatch, results, selectionEnd);\n          while (results.length === 0 && !isNullOrUndefined(nextParagraphWidget)) {\n            while (!isNullOrUndefined(nextParagraphWidget) && nextParagraphWidget.childWidgets.length === 0) {\n              /* eslint-disable-next-line max-len */\n              nextParagraphWidget = this.owner.selectionModule.getNextParagraph(nextParagraphWidget.containerWidget);\n            }\n            if (isNullOrUndefined(nextParagraphWidget)) {\n              break;\n            }\n            var lineWidget = nextParagraphWidget.childWidgets[0];\n            if (lineWidget.children[0] instanceof ListTextElementBox) {\n              inline = lineWidget.children[2] instanceof TextElementBox ? lineWidget.children[2] : undefined;\n            } else {\n              inline = lineWidget.children[0];\n            }\n            if (isNullOrUndefined(inline)) {\n              break;\n            }\n            nextParagraphWidget = this.findInline(inline, pattern, findOption, 0, isFirstMatch, results, selectionEnd);\n          }\n          if (results.length > 0) {\n            return;\n          }\n        }\n      }\n    }\n    var section;\n    section = this.documentHelper.pages[0].bodyWidgets[0];\n    while (!isNullOrUndefined(section) && section.childWidgets.length === 0) {\n      section = section.nextWidget;\n    }\n    if (isNullOrUndefined(section) || section.childWidgets.length === 0) {\n      return;\n    }\n    this.findInlineText(section, pattern, findOption, isFirstMatch, results, selectionEnd);\n    var headerFootersColletion = this.documentHelper.headersFooters;\n    for (var i = 0; i < headerFootersColletion.length; i++) {\n      var headerFooters = headerFootersColletion[parseInt(i.toString(), 10)];\n      if (headerFooters) {\n        for (var index in headerFooters) {\n          var headerFooter = headerFooters[parseInt(index.toString(), 10)];\n          if (!isNullOrUndefined(headerFooter) && !isNullOrUndefined(headerFooter.page)) {\n            this.findInlineText(headerFooter, pattern, findOption, isFirstMatch, results, selectionEnd);\n          }\n        }\n      }\n    }\n    // (EJ2-854069) - Added below code to add the search results of the endnote and footnote in the results.\n    var endNoteCollection = this.documentHelper.endnoteCollection;\n    for (var i = 0; i < endNoteCollection.length; i++) {\n      var endNote = endNoteCollection[parseInt(i.toString(), 10)];\n      if (endNote) {\n        if (!isNullOrUndefined(endNote) && !isNullOrUndefined(endNote.bodyWidget.page)) {\n          this.findInlineText(endNote.bodyWidget, pattern, findOption, isFirstMatch, results, selectionEnd);\n        }\n      }\n    }\n    var footNoteCollection = this.documentHelper.footnoteCollection;\n    for (var i = 0; i < footNoteCollection.length; i++) {\n      var footNote = footNoteCollection[parseInt(i.toString(), 10)];\n      if (footNote) {\n        if (!isNullOrUndefined(footNote) && !isNullOrUndefined(footNote.bodyWidget.page)) {\n          this.findInlineText(footNote.bodyWidget, pattern, findOption, isFirstMatch, results, selectionEnd);\n        }\n      }\n    }\n    if (isFirstMatch && !isNullOrUndefined(results) && results.length > 0) {\n      return;\n    }\n  };\n  /* eslint-disable-next-line max-len */\n  TextSearch.prototype.findInlineText = function (section, pattern, findOption, isFirstMatch, results, selectionEnd) {\n    var paragraphWidget = this.owner.documentHelper.getFirstParagraphBlock(section.childWidgets[0]);\n    /* eslint-disable-next-line max-len */\n    while (!isNullOrUndefined(paragraphWidget) && paragraphWidget.childWidgets.length === 1 && paragraphWidget.childWidgets[0].children.length === 0) {\n      paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(paragraphWidget);\n    }\n    while (!isNullOrUndefined(paragraphWidget) && paragraphWidget.childWidgets.length > 0) {\n      var inlineElement = paragraphWidget.childWidgets[0];\n      var inlineEle = inlineElement.children[0];\n      if (isNullOrUndefined(inlineEle)) {\n        break;\n      }\n      this.findInline(inlineEle, pattern, findOption, 0, isFirstMatch, results, selectionEnd);\n      paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(paragraphWidget);\n      /* eslint-disable-next-line max-len */\n      while (!isNullOrUndefined(paragraphWidget) && (paragraphWidget.childWidgets.length === 1 && paragraphWidget.childWidgets[0].children.length === 0 || !isNullOrUndefined(paragraphWidget.previousSplitWidget))) {\n        paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(paragraphWidget);\n      }\n    }\n    if (isFirstMatch && !isNullOrUndefined(results) && results.length > 0) {\n      return;\n    }\n  };\n  /* eslint-disable-next-line max-len */\n  TextSearch.prototype.findInline = function (inlineElement, pattern, option, indexInInline, isFirstMatch, results, selectionEnd) {\n    var inlines = inlineElement;\n    var textInfo = this.getElementInfo(inlineElement, indexInInline, undefined, pattern, option, isFirstMatch, results, selectionEnd);\n    var text = textInfo.fullText;\n    var matches = [];\n    var spans = textInfo.elementsWithOffset;\n    var matchObject;\n    // eslint-disable-next-line no-cond-assign\n    while (!isNullOrUndefined(matchObject = pattern.exec(text))) {\n      matches.push(matchObject);\n    }\n    this.updateMatchedTextLocation(matches, results, spans, indexInInline, inlines, isFirstMatch, selectionEnd);\n    if (isFirstMatch) {\n      return undefined;\n    }\n    /* eslint-disable-next-line max-len */\n    var paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(inlineElement.line.paragraph);\n    return paragraphWidget;\n  };\n  TextSearch.prototype.getTextPosition = function (lineWidget, hierarchicalIndex) {\n    var textPosition = new TextPosition(this.owner);\n    var index = textPosition.getHierarchicalIndex(lineWidget, hierarchicalIndex);\n    textPosition.setPositionForCurrentIndex(index);\n    return textPosition;\n  };\n  return TextSearch;\n}();\nexport { TextSearch };\n/**\n * @private\n */\nvar SearchWidgetInfo = /** @class */function () {\n  function SearchWidgetInfo(left, width) {\n    this.leftInternal = 0;\n    this.widthInternal = 0;\n    this.leftInternal = left;\n    this.widthInternal = width;\n  }\n  Object.defineProperty(SearchWidgetInfo.prototype, \"left\", {\n    get: function () {\n      return this.leftInternal;\n    },\n    set: function (value) {\n      this.leftInternal = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SearchWidgetInfo.prototype, \"width\", {\n    get: function () {\n      return this.widthInternal;\n    },\n    set: function (value) {\n      this.widthInternal = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return SearchWidgetInfo;\n}();\nexport { SearchWidgetInfo };","map":{"version":3,"names":["Dictionary","isNullOrUndefined","TextPosition","LineWidget","TextElementBox","ParagraphWidget","ListTextElementBox","FieldElementBox","ShapeElementBox","searchResultsChangeEvent","TextSearch","owner","wordBefore","wordAfter","documentHelper","prototype","find","pattern","findOption","findNext","hierarchicalPosition","stringToRegex","undefined","searchModule","textSearchResults","clearResults","results","findDocument","length","currentSearchResult","textToFind","option","indexOf","split","join","text","i","parseInt","toString","RegExp","isPatternEmpty","wordEmpty","patternRegExp","findAll","currentIndex","eventArgs","source","trigger","getElementInfo","inlineElement","indexInInline","includeNextLine","isFirstMatch","selectionEnd","isSpellCheck","inlines","stringBuilder","spans","previousElementCount","add","substring","fieldBegin","fieldEnd","fieldSeparator","textFrame","childWidgets","findInlineText","nextNode","splittedParagraph","paragraph","nextSplitWidget","children","elementBoxes","line","length_1","elementsWithOffset","fullText","updateMatchedTextLocation","matches","textInfo","startPosition","match","isMatched","index","result","addResult","spanKeys","keys","j","span","startIndex","get","spanLength","start","offset","getOffset","getTextPosition","location","selectionModule","getPhysicalPositionInternal","setPositionParagraph","end","isExistBefore","isAtSamePosition","hierachicalPosition","inline","currentWidget","getInline","element","nextParagraphWidget","findInline","getNextParagraph","containerWidget","lineWidget","section","pages","bodyWidgets","nextWidget","headerFootersColletion","headersFooters","headerFooters","headerFooter","page","endNoteCollection","endnoteCollection","endNote","bodyWidget","footNoteCollection","footnoteCollection","footNote","paragraphWidget","getFirstParagraphBlock","getNextParagraphBlock","inlineEle","previousSplitWidget","matchObject","exec","push","hierarchicalIndex","textPosition","getHierarchicalIndex","setPositionForCurrentIndex","SearchWidgetInfo","left","width","leftInternal","widthInternal","Object","defineProperty","set","value","enumerable","configurable"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/node_modules/@syncfusion/ej2-documenteditor/src/document-editor/implementation/search/text-search.js"],"sourcesContent":["import { Dictionary } from '../../base/dictionary';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { TextPosition } from '../selection/selection-helper';\nimport { LineWidget, TextElementBox, ParagraphWidget, ListTextElementBox, FieldElementBox, ShapeElementBox } from '../viewer/page';\nimport { searchResultsChangeEvent } from '../../base/index';\n/**\n * @private\n */\nvar TextSearch = /** @class */ (function () {\n    function TextSearch(owner) {\n        this.wordBefore = '\\\\b';\n        this.wordAfter = '\\\\b';\n        this.owner = owner;\n        this.documentHelper = this.owner.documentHelper;\n    }\n    TextSearch.prototype.find = function (pattern, findOption) {\n        return this.findNext(pattern, findOption, '0;0;0');\n    };\n    TextSearch.prototype.findNext = function (pattern, findOption, hierarchicalPosition) {\n        if (typeof pattern === 'string') {\n            pattern = this.stringToRegex(pattern, findOption);\n        }\n        if (hierarchicalPosition === undefined) {\n            hierarchicalPosition = '0;0;0';\n        }\n        this.owner.searchModule.textSearchResults.clearResults();\n        var results = this.owner.searchModule.textSearchResults;\n        this.findDocument(results, pattern, true, findOption, hierarchicalPosition);\n        return results.length > 0, results.currentSearchResult;\n    };\n    TextSearch.prototype.stringToRegex = function (textToFind, option) {\n        if (textToFind.indexOf('\\\\') > -1) {\n            textToFind = textToFind.split('\\\\').join('\\\\\\\\');\n        }\n        if (textToFind.indexOf('(') > -1 || textToFind.indexOf(')') > -1 || textToFind.indexOf('.') > -1 || textToFind.indexOf('[') > -1\n            || textToFind.indexOf(']') > -1 || textToFind.indexOf('$') > -1 || textToFind.indexOf('{') > -1\n            || textToFind.indexOf('}') > -1 || textToFind.indexOf('*') > -1 || textToFind.indexOf('|') > -1\n            || textToFind.indexOf('^') > -1 || textToFind.indexOf('?') > -1 || textToFind.indexOf('+') > -1) {\n            var text = '';\n            for (var i = 0; i < textToFind.length; i++) {\n                if (textToFind[parseInt(i.toString(), 10)] === '(' || textToFind[parseInt(i.toString(), 10)] === ')' || textToFind[parseInt(i.toString(), 10)] === '.' || textToFind[parseInt(i.toString(), 10)] === '['\n                    || textToFind[parseInt(i.toString(), 10)] === ']' || textToFind[parseInt(i.toString(), 10)] === '$' || textToFind[parseInt(i.toString(), 10)] === '{' || textToFind[parseInt(i.toString(), 10)] === '}'\n                    || textToFind[parseInt(i.toString(), 10)] === '*' || textToFind[parseInt(i.toString(), 10)] === '|' || textToFind[parseInt(i.toString(), 10)] === '^' || textToFind[parseInt(i.toString(), 10)] === '?'\n                    || textToFind[parseInt(i.toString(), 10)] === '+') {\n                    text += '\\\\' + textToFind[parseInt(i.toString(), 10)];\n                }\n                else {\n                    text += textToFind[parseInt(i.toString(), 10)];\n                }\n            }\n            textToFind = text;\n        }\n        if (option === 'WholeWord' || option === 'CaseSensitiveWholeWord') {\n            textToFind = this.wordBefore + textToFind + this.wordAfter;\n        }\n        return RegExp(textToFind, (option === 'CaseSensitive' || option === 'CaseSensitiveWholeWord') ? 'g' : 'ig');\n    };\n    TextSearch.prototype.isPatternEmpty = function (pattern) {\n        var wordEmpty = this.wordBefore + this.wordAfter;\n        var patternRegExp = pattern.toString();\n        return (patternRegExp.length === 0 || patternRegExp === wordEmpty);\n    };\n    TextSearch.prototype.findAll = function (pattern, findOption, hierarchicalPosition) {\n        if (typeof pattern === 'string') {\n            pattern = this.stringToRegex(pattern, findOption);\n        }\n        if (hierarchicalPosition === undefined) {\n            hierarchicalPosition = '0;0;0';\n        }\n        this.owner.searchModule.textSearchResults.clearResults();\n        var results = this.owner.searchModule.textSearchResults;\n        this.findDocument(results, pattern, false, findOption, hierarchicalPosition);\n        if (results.length > 0 && results.currentIndex < 0) {\n            results.currentIndex = 0;\n        }\n        if (!isNullOrUndefined(results.currentSearchResult)) {\n            var eventArgs = { source: this.documentHelper.owner };\n            this.documentHelper.owner.trigger(searchResultsChangeEvent, eventArgs);\n            return results;\n        }\n        return undefined;\n    };\n    TextSearch.prototype.getElementInfo = function (inlineElement, indexInInline, includeNextLine, pattern, findOption, isFirstMatch, results, selectionEnd, isSpellCheck) {\n        var inlines = inlineElement;\n        var stringBuilder = '';\n        var spans = new Dictionary();\n        // eslint-disable  no-constant-condition\n        var previousElementCount = 0;\n        do {\n            if (inlineElement instanceof TextElementBox && (!isNullOrUndefined(inlineElement.text) && inlineElement.text !== '')) {\n                spans.add(inlineElement, isSpellCheck ? stringBuilder.length + previousElementCount : stringBuilder.length);\n                previousElementCount = 0;\n                // IndexInInline Handled specifically for simple find operation to start from starting point\n                if (inlineElement === inlines) {\n                    stringBuilder = stringBuilder + (inlineElement.text.substring(indexInInline));\n                }\n                else {\n                    stringBuilder = stringBuilder + (inlineElement.text);\n                }\n            }\n            else if (inlineElement instanceof FieldElementBox) {\n                var fieldBegin = inlineElement;\n                if (!isNullOrUndefined(fieldBegin.fieldEnd)) {\n                    /* eslint-disable-next-line max-len */\n                    inlineElement = isNullOrUndefined(fieldBegin.fieldSeparator) ? fieldBegin.fieldEnd : fieldBegin.fieldSeparator;\n                }\n            }\n            else if (inlineElement instanceof ShapeElementBox && !isNullOrUndefined(inlineElement.textFrame) && inlineElement.textFrame.childWidgets.length > 0) {\n                this.findInlineText(inlineElement.textFrame, pattern, findOption, isFirstMatch, results, selectionEnd);\n            }\n            if (!(inlineElement instanceof TextElementBox)) {\n                previousElementCount += inlineElement.length;\n            }\n            if (!isNullOrUndefined(inlineElement) && isNullOrUndefined(inlineElement.nextNode)) {\n                var splittedParagraph = inlineElement.paragraph.nextSplitWidget;\n                if (!isSpellCheck && !isNullOrUndefined(splittedParagraph) && splittedParagraph !== inlineElement.paragraph && splittedParagraph.childWidgets.length > 0 &&\n                    splittedParagraph.childWidgets[0] instanceof LineWidget && splittedParagraph.childWidgets[0].children.length > 0) {\n                    inlineElement = splittedParagraph.childWidgets[0].children[0];\n                    continue;\n                }\n                else {\n                    break;\n                }\n            }\n            if (!isNullOrUndefined(inlineElement)) {\n                if ((!isNullOrUndefined(includeNextLine) && !includeNextLine)) {\n                    var elementBoxes = inlineElement.line.children;\n                    var length_1 = inlineElement.line.children.length;\n                    if (elementBoxes.indexOf(inlineElement) < length_1 - 1) {\n                        inlineElement = inlineElement.nextNode;\n                    }\n                    else {\n                        inlineElement = undefined;\n                        break;\n                    }\n                }\n                else {\n                    inlineElement = inlineElement.nextNode;\n                }\n            }\n            // eslint-disable-next-line no-constant-condition\n        } while (true);\n        var text = stringBuilder.toString();\n        return { elementsWithOffset: spans, fullText: text };\n    };\n    /* eslint-disable-next-line max-len */\n    TextSearch.prototype.updateMatchedTextLocation = function (matches, results, textInfo, indexInInline, inlines, isFirstMatch, selectionEnd, startPosition) {\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[parseInt(i.toString(), 10)];\n            var isMatched = void 0;\n            if (!(isNullOrUndefined(startPosition)) && match.index < startPosition) {\n                continue;\n            }\n            var result = results.addResult();\n            var spanKeys = textInfo.keys;\n            for (var j = 0; j < spanKeys.length; j++) {\n                var span = spanKeys[parseInt(j.toString(), 10)];\n                var startIndex = textInfo.get(span);\n                var spanLength = span.length;\n                // IndexInInline Handled specifically for simple find operation to start from starting point\n                if (span === inlines) {\n                    spanLength -= indexInInline;\n                }\n                if (isNullOrUndefined(result.start) && match.index < startIndex + spanLength) {\n                    var index = match.index - startIndex;\n                    // IndexInInline Handled specifically for simple find operation to start from starting point\n                    if (span === inlines) {\n                        index += indexInInline;\n                    }\n                    var offset = (span.line).getOffset(span, index);\n                    result.start = this.getTextPosition(span.line, offset.toString());\n                    result.start.location = this.owner.selectionModule.getPhysicalPositionInternal(span.line, offset, true);\n                    result.start.setPositionParagraph(span.line, offset);\n                }\n                if (match.index + match[0].length <= startIndex + spanLength) {\n                    var index = (match.index + match[0].length) - startIndex;\n                    // IndexInInline Handled specifically for simple find operation to start from starting point\n                    if (span === inlines) {\n                        index += indexInInline;\n                    }\n                    var offset = (span.line).getOffset(span, index);\n                    result.end = this.getTextPosition(span.line, offset.toString());\n                    result.end.location = this.owner.selectionModule.getPhysicalPositionInternal(span.line, offset, true);\n                    result.end.setPositionParagraph(span.line, offset);\n                    isMatched = true;\n                    break;\n                }\n            }\n            if (isFirstMatch) {\n                results.currentIndex = 0;\n                break;\n            }\n            else if (results.currentIndex < 0 && !isNullOrUndefined(selectionEnd) && (selectionEnd.isExistBefore(result.start) ||\n                selectionEnd.isAtSamePosition(result.start))) {\n                results.currentIndex = results.indexOf(result);\n            }\n            if (!isNullOrUndefined(startPosition) && isMatched) {\n                break;\n            }\n        }\n    };\n    /* eslint-disable-next-line max-len */\n    TextSearch.prototype.findDocument = function (results, pattern, isFirstMatch, findOption, hierachicalPosition) {\n        if (this.isPatternEmpty(pattern)) {\n            return;\n        }\n        if (findOption === undefined) {\n            findOption = 'None';\n        }\n        var inline = undefined;\n        var selectionEnd = undefined;\n        if (hierachicalPosition !== undefined) {\n            selectionEnd = this.owner.selectionModule.end;\n        }\n        if (hierachicalPosition !== undefined && isFirstMatch && selectionEnd !== undefined && selectionEnd.paragraph !== undefined) {\n            if (selectionEnd.paragraph instanceof ParagraphWidget) {\n                var indexInInline = 0;\n                // IndexInInline Handled specifically for simple find operation to start from starting point\n                /* eslint-disable-next-line max-len */\n                var inlineElement = selectionEnd.currentWidget.getInline(this.owner.selectionModule.start.offset, indexInInline);\n                inline = inlineElement.element;\n                indexInInline = inlineElement.index;\n                if (!isNullOrUndefined(inline)) {\n                    var nextParagraphWidget = undefined;\n                    nextParagraphWidget = this.findInline(inline, pattern, findOption, indexInInline, isFirstMatch, results, selectionEnd);\n                    while (results.length === 0 && !isNullOrUndefined(nextParagraphWidget)) {\n                        while (!isNullOrUndefined(nextParagraphWidget) && nextParagraphWidget.childWidgets.length === 0) {\n                            /* eslint-disable-next-line max-len */\n                            nextParagraphWidget = this.owner.selectionModule.getNextParagraph(nextParagraphWidget.containerWidget);\n                        }\n                        if (isNullOrUndefined(nextParagraphWidget)) {\n                            break;\n                        }\n                        var lineWidget = nextParagraphWidget.childWidgets[0];\n                        if (lineWidget.children[0] instanceof ListTextElementBox) {\n                            inline = (lineWidget.children[2] instanceof TextElementBox) ? lineWidget.children[2] : undefined;\n                        }\n                        else {\n                            inline = lineWidget.children[0];\n                        }\n                        if (isNullOrUndefined(inline)) {\n                            break;\n                        }\n                        nextParagraphWidget = this.findInline(inline, pattern, findOption, 0, isFirstMatch, results, selectionEnd);\n                    }\n                    if (results.length > 0) {\n                        return;\n                    }\n                }\n            }\n        }\n        var section;\n        section = this.documentHelper.pages[0].bodyWidgets[0];\n        while (!isNullOrUndefined(section) && section.childWidgets.length === 0) {\n            section = section.nextWidget;\n        }\n        if (isNullOrUndefined(section) || section.childWidgets.length === 0) {\n            return;\n        }\n        this.findInlineText(section, pattern, findOption, isFirstMatch, results, selectionEnd);\n        var headerFootersColletion = this.documentHelper.headersFooters;\n        for (var i = 0; i < headerFootersColletion.length; i++) {\n            var headerFooters = headerFootersColletion[parseInt(i.toString(), 10)];\n            if (headerFooters) {\n                for (var index in headerFooters) {\n                    var headerFooter = headerFooters[parseInt(index.toString(), 10)];\n                    if (!isNullOrUndefined(headerFooter) && !isNullOrUndefined(headerFooter.page)) {\n                        this.findInlineText(headerFooter, pattern, findOption, isFirstMatch, results, selectionEnd);\n                    }\n                }\n            }\n        }\n        // (EJ2-854069) - Added below code to add the search results of the endnote and footnote in the results.\n        var endNoteCollection = this.documentHelper.endnoteCollection;\n        for (var i = 0; i < endNoteCollection.length; i++) {\n            var endNote = endNoteCollection[parseInt(i.toString(), 10)];\n            if (endNote) {\n                if (!isNullOrUndefined(endNote) && !isNullOrUndefined(endNote.bodyWidget.page)) {\n                    this.findInlineText(endNote.bodyWidget, pattern, findOption, isFirstMatch, results, selectionEnd);\n                }\n            }\n        }\n        var footNoteCollection = this.documentHelper.footnoteCollection;\n        for (var i = 0; i < footNoteCollection.length; i++) {\n            var footNote = footNoteCollection[parseInt(i.toString(), 10)];\n            if (footNote) {\n                if (!isNullOrUndefined(footNote) && !isNullOrUndefined(footNote.bodyWidget.page)) {\n                    this.findInlineText(footNote.bodyWidget, pattern, findOption, isFirstMatch, results, selectionEnd);\n                }\n            }\n        }\n        if (isFirstMatch && !isNullOrUndefined(results) && results.length > 0) {\n            return;\n        }\n    };\n    /* eslint-disable-next-line max-len */\n    TextSearch.prototype.findInlineText = function (section, pattern, findOption, isFirstMatch, results, selectionEnd) {\n        var paragraphWidget = this.owner.documentHelper.getFirstParagraphBlock(section.childWidgets[0]);\n        /* eslint-disable-next-line max-len */\n        while (!isNullOrUndefined(paragraphWidget) && paragraphWidget.childWidgets.length === 1 && paragraphWidget.childWidgets[0].children.length === 0) {\n            paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(paragraphWidget);\n        }\n        while (!isNullOrUndefined(paragraphWidget) && paragraphWidget.childWidgets.length > 0) {\n            var inlineElement = paragraphWidget.childWidgets[0];\n            var inlineEle = inlineElement.children[0];\n            if (isNullOrUndefined(inlineEle)) {\n                break;\n            }\n            this.findInline(inlineEle, pattern, findOption, 0, isFirstMatch, results, selectionEnd);\n            paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(paragraphWidget);\n            /* eslint-disable-next-line max-len */\n            while (!isNullOrUndefined(paragraphWidget) && (((paragraphWidget.childWidgets.length === 1) && paragraphWidget.childWidgets[0].children.length === 0) || !isNullOrUndefined(paragraphWidget.previousSplitWidget))) {\n                paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(paragraphWidget);\n            }\n        }\n        if (isFirstMatch && !isNullOrUndefined(results) && results.length > 0) {\n            return;\n        }\n    };\n    /* eslint-disable-next-line max-len */\n    TextSearch.prototype.findInline = function (inlineElement, pattern, option, indexInInline, isFirstMatch, results, selectionEnd) {\n        var inlines = inlineElement;\n        var textInfo = this.getElementInfo(inlineElement, indexInInline, undefined, pattern, option, isFirstMatch, results, selectionEnd);\n        var text = textInfo.fullText;\n        var matches = [];\n        var spans = textInfo.elementsWithOffset;\n        var matchObject;\n        // eslint-disable-next-line no-cond-assign\n        while (!isNullOrUndefined(matchObject = pattern.exec(text))) {\n            matches.push(matchObject);\n        }\n        this.updateMatchedTextLocation(matches, results, spans, indexInInline, inlines, isFirstMatch, selectionEnd);\n        if (isFirstMatch) {\n            return undefined;\n        }\n        /* eslint-disable-next-line max-len */\n        var paragraphWidget = this.owner.selectionModule.getNextParagraphBlock(inlineElement.line.paragraph);\n        return paragraphWidget;\n    };\n    TextSearch.prototype.getTextPosition = function (lineWidget, hierarchicalIndex) {\n        var textPosition = new TextPosition(this.owner);\n        var index = textPosition.getHierarchicalIndex(lineWidget, hierarchicalIndex);\n        textPosition.setPositionForCurrentIndex(index);\n        return textPosition;\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n/**\n * @private\n */\nvar SearchWidgetInfo = /** @class */ (function () {\n    function SearchWidgetInfo(left, width) {\n        this.leftInternal = 0;\n        this.widthInternal = 0;\n        this.leftInternal = left;\n        this.widthInternal = width;\n    }\n    Object.defineProperty(SearchWidgetInfo.prototype, \"left\", {\n        get: function () {\n            return this.leftInternal;\n        },\n        set: function (value) {\n            this.leftInternal = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SearchWidgetInfo.prototype, \"width\", {\n        get: function () {\n            return this.widthInternal;\n        },\n        set: function (value) {\n            this.widthInternal = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SearchWidgetInfo;\n}());\nexport { SearchWidgetInfo };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}