{"ast":null,"code":"var _jsxFileName = \"/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/shared/Navbar.js\";\nimport React, { useRef, useContext, useEffect } from 'react';\nimport { Link, useHistory } from \"react-router-dom\";\nimport HighlightButton from '../Dashboard/HighlightButton';\nimport FileUploadComponent from '../Dashboard/FileUploadComponent';\nimport Search from '../Dashboard/Search';\nimport { Col, Row } from 'reactstrap';\nimport { UserContext } from \"../App\";\nimport { fetchAuth } from '../utils';\n\nconst Navbar = () => {\n  const history = useHistory();\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const toggleButtonRef = useRef(null); // Add this line\n\n  useEffect(() => {\n    setInterval(function () {\n      authChe();\n    }, 60000); //console.log(\"___________\", new Date(counter).getMinutes())\n\n    if (state && state.auth) {\n      const auth = state.auth;\n      console.log('Auth Expiry Time', new Date(auth.expiry));\n\n      if (!auth.authToken || !auth.userPublicId || !auth.username || !auth.email) {\n        const savedAuth = fetchAuth();\n\n        if (!savedAuth) {\n          history.push(\"/login\");\n        } else {\n          dispatch({\n            type: \"AUTH\",\n            payload: savedAuth\n          });\n        }\n      }\n    }\n\n    const timer = setTimeout(() => {\n      if (toggleButtonRef.current) {\n        toggleButtonRef.current.click();\n      }\n    }, 6000); // Cleanup the timer if the component unmounts\n\n    return () => clearTimeout(timer);\n  }, [state.auth]);\n\n  const authChe = () => {\n    var d = new Date();\n    var datestring = d.getDate() + \"-\" + d.getHours() + \"-\" + d.getMinutes();\n    let beforFiveTime = state.auth.expiry - 60000 * 5;\n    var beforeFiveDateString = new Date(beforFiveTime).getDate() + \"-\" + new Date(beforFiveTime).getHours() + \"-\" + new Date(beforFiveTime).getMinutes();\n\n    if (beforeFiveDateString === datestring) {\n      alert(\"Auth Signature about to expire in 5 minutes\");\n    }\n\n    var authExpiry = new Date(state.auth.expiry).getDate() + \"-\" + new Date(state.auth.expiry).getHours() + \"-\" + new Date(state.auth.expiry).getMinutes();\n\n    if (authExpiry === datestring) {\n      history.push(\"/login\");\n    }\n  };\n\n  const toggleOffcanvas = () => {\n    document.querySelector('.sidebar-offcanvas').classList.toggle('active');\n  };\n\n  return /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar p-0 fixed-top d-flex flex-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"navbar-brand brand-logo-mini\",\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: require(\"../images/logo-mini.svg\"),\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 6\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar-menu-wrapper flex-grow d-flex align-items-stretch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    ref: toggleButtonRef // Assign the ref here\n    ,\n    className: \"navbar-toggler align-self-center\",\n    type: \"button\",\n    onClick: () => document.body.classList.toggle(\"sidebar-icon-only\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mdi mdi-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      alignItems: \"center\",\n      width: \"100%\"\n    },\n    className: \"nav_items_upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    md: 4,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 6,\n    md: 6,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(FileUploadComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    md: 2,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(HighlightButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"navbar-toggler navbar-toggler-right d-lg-none align-self-center\",\n    type: \"button\",\n    onClick: toggleOffcanvas,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mdi mdi-format-line-spacing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      height: '35px'\n    },\n    className: \"navbar-toggler bg-danger align-self-center text-white btn btn-danger\",\n    type: \"button\",\n    onClick: () => dispatch({\n      type: \"LOG_OUT\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, \"LogOut\")));\n};\n\nexport default Navbar;","map":{"version":3,"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/shared/Navbar.js"],"names":["React","useRef","useContext","useEffect","Link","useHistory","HighlightButton","FileUploadComponent","Search","Col","Row","UserContext","fetchAuth","Navbar","history","state","dispatch","toggleButtonRef","setInterval","authChe","auth","console","log","Date","expiry","authToken","userPublicId","username","email","savedAuth","push","type","payload","timer","setTimeout","current","click","clearTimeout","d","datestring","getDate","getHours","getMinutes","beforFiveTime","beforeFiveDateString","alert","authExpiry","toggleOffcanvas","document","querySelector","classList","toggle","require","body","alignItems","width","height"],"mappings":"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","sourcesContent":["import React, { useRef,useContext, useEffect } from 'react';\nimport { Link, useHistory } from \"react-router-dom\";\nimport HighlightButton from '../Dashboard/HighlightButton';\nimport FileUploadComponent from '../Dashboard/FileUploadComponent';\nimport Search from '../Dashboard/Search';\nimport { Col, Row } from 'reactstrap';\n\nimport { UserContext } from \"../App\";\nimport { fetchAuth } from '../utils';\n\nconst Navbar = () => {\n\n\tconst history = useHistory();\n\tconst { state, dispatch } = useContext(UserContext);\n    const toggleButtonRef = useRef(null); // Add this line\n\n\tuseEffect(() => {\n\t\tsetInterval(function () { authChe(); }, 60000);\n\n\t\t//console.log(\"___________\", new Date(counter).getMinutes())\n\t\tif (state && state.auth) {\n\t\t\tconst auth = state.auth;\n\t\t\tconsole.log('Auth Expiry Time', new Date(auth.expiry));\n\t\t\tif (!auth.authToken || !auth.userPublicId || !auth.username || !auth.email) {\n\t\t\t\tconst savedAuth = fetchAuth();\n\t\t\t\tif (!savedAuth) {\n\t\t\t\t\thistory.push(\"/login\");\n\t\t\t\t} else {\n\t\t\t\t\tdispatch({ type: \"AUTH\", payload: savedAuth });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst timer = setTimeout(() => {\n            if (toggleButtonRef.current) {\n                toggleButtonRef.current.click();\n            }\n        }, 6000);\n        // Cleanup the timer if the component unmounts\n        return () => clearTimeout(timer);\n\n\n\t}, [state.auth]);\n\n\n\tconst authChe = () => {\n\t\tvar d = new Date();\n\n\t\tvar datestring = d.getDate() + \"-\" +\n\t\t\td.getHours() + \"-\" + d.getMinutes();\n\n\t\tlet beforFiveTime = state.auth.expiry - 60000 * 5\n\t\tvar beforeFiveDateString = new Date(beforFiveTime).getDate() + \"-\" +\n\t\t\tnew Date(beforFiveTime).getHours() + \"-\" + new Date(beforFiveTime).getMinutes();\n\n\t\tif (beforeFiveDateString === datestring) {\n\t\t\talert(\"Auth Signature about to expire in 5 minutes\")\n\t\t}\n\t\tvar authExpiry = new Date(state.auth.expiry).getDate() + \"-\" +\n\t\t\tnew Date(state.auth.expiry).getHours() + \"-\" + new Date(state.auth.expiry).getMinutes();\n\t\tif (authExpiry === datestring) {\n\t\t\thistory.push(\"/login\");\n\t\t}\n\t}\n\tconst toggleOffcanvas = () => {\n\t\tdocument.querySelector('.sidebar-offcanvas').classList.toggle('active');\n\t}\n\n\treturn (\n\t\t<nav className=\"navbar p-0 fixed-top d-flex flex-row\">\n\t\t\t<div className=\"navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center\">\n\t\t\t\t<Link className=\"navbar-brand brand-logo-mini\" to=\"/\">\n\t\t\t\t\t<img src={require(\"../images/logo-mini.svg\")} alt=\"logo\" />\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t\t<div className=\"navbar-menu-wrapper flex-grow d-flex align-items-stretch\">\n\t\t\t\t<button\n\t\t\t\t\tref={toggleButtonRef} // Assign the ref here\n\t\t\t\t\tclassName=\"navbar-toggler align-self-center\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => document.body.classList.toggle(\"sidebar-icon-only\")}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"mdi mdi-menu\"></span>\n\t\t\t\t</button>\n\t\t\t\t<Row\n\t\t\t\t\tstyle={{ alignItems: \"center\", width: \"100%\" }}\n\t\t\t\t\tclassName=\"nav_items_upload\"\n\t\t\t\t>\n\t\t\t\t\t<Col lg={3} md={4} xs={12} sm={12}>\n\t\t\t\t\t\t<Search />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col lg={6} md={6} xs={12} sm={12}>\n\t\t\t\t\t\t<FileUploadComponent />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col lg={3} md={2} xs={12} sm={12}>\n\t\t\t\t\t\t<HighlightButton />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"navbar-toggler navbar-toggler-right d-lg-none align-self-center\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={toggleOffcanvas}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"mdi mdi-format-line-spacing\"></span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tstyle={{ height: '35px' }}\n\t\t\t\t\tclassName=\"navbar-toggler bg-danger align-self-center text-white btn btn-danger\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={() => dispatch({ type: \"LOG_OUT\" })}\n\t\t\t\t>\n\t\t\t\t\tLogOut\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</nav>\n\t);\n}\n\nexport default Navbar;\n"]},"metadata":{},"sourceType":"module"}