{"ast":null,"code":"import { isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { Rect, ImageElementBox, LineWidget, ParagraphWidget, BodyWidget, TextElementBox, HeaderFooterWidget, ListTextElementBox, TableRowWidget, TableWidget, TableCellWidget, FieldElementBox, TabElementBox, BlockWidget, CommentCharacterElementBox, ShapeElementBox, EditRangeStartElementBox, ShapeBase, TextFrame, BookmarkElementBox, EditRangeEndElementBox } from './page';\nimport { Layout } from './layout';\nimport { PageLayoutViewer, WebLayoutViewer } from './viewer';\nimport { HelperMethods, Point } from '../editor/editor-helper';\nimport { CharacterRangeType } from '../../index';\nimport { FontScriptType } from '../../index';\nimport { DocumentCanvasElement } from './document-canvas';\nimport { Dictionary } from '../../base/dictionary';\n/**\n * @private\n */\nvar Renderer = /** @class */function () {\n  function Renderer(documentHelper) {\n    /**\n     * @private\n     */\n    this.commentMarkDictionary = new Dictionary();\n    this.isPrinting = false;\n    this.isExporting = false;\n    this.pageLeft = 0;\n    this.pageTop = 0;\n    this.pageIndex = -1;\n    this.isFieldCode = false;\n    this.isRenderHeader = false;\n    this.leftPosition = 0;\n    this.topPosition = 0;\n    this.height = 0;\n    this.fieldStacks = [];\n    this.documentHelper = documentHelper;\n  }\n  Object.defineProperty(Renderer.prototype, \"pageCanvas\", {\n    get: function () {\n      if (this.isPrinting) {\n        if (isNullOrUndefined(this.pageCanvasIn)) {\n          this.pageCanvasIn = document.createElement('canvas');\n          this.pageCanvasIn.getContext('2d').save();\n        }\n        return this.pageCanvasIn;\n      }\n      if (this.isExporting) {\n        if (isNullOrUndefined(this.exportPageCanvas)) {\n          this.exportPageCanvas = new DocumentCanvasElement();\n        }\n        return this.exportPageCanvas;\n      } else {\n        return isNullOrUndefined(this.viewer) ? undefined : this.documentHelper.containerCanvas;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Renderer.prototype, \"spellChecker\", {\n    get: function () {\n      return this.documentHelper.owner.spellCheckerModule;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Renderer.prototype, \"selectionCanvas\", {\n    get: function () {\n      return isNullOrUndefined(this.viewer) ? undefined : this.documentHelper.selectionCanvas;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Renderer.prototype, \"pageContext\", {\n    get: function () {\n      return this.pageCanvas.getContext('2d');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Renderer.prototype, \"selectionContext\", {\n    get: function () {\n      return this.selectionCanvas.getContext('2d');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Renderer.prototype, \"viewer\", {\n    get: function () {\n      return this.documentHelper.owner.viewer;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Renderer.prototype.renderWidgets = function (page, left, top, width, height) {\n    if (isNullOrUndefined(this.pageCanvas) || isNullOrUndefined(page)) {\n      return;\n    }\n    this.pageContext.fillStyle = HelperMethods.getColor(this.documentHelper.backgroundColor);\n    this.pageContext.beginPath();\n    if (this.viewer instanceof WebLayoutViewer) {\n      height = height > this.documentHelper.visibleBounds.height ? height : this.documentHelper.visibleBounds.height;\n      var marginTop = top;\n      if (page.index === 0) {\n        marginTop = top - this.viewer.padding.top;\n      }\n      /* eslint-disable-next-line max-len */\n      this.pageContext.fillRect(left - this.viewer.padding.left, marginTop, width + this.viewer.padding.left, height + this.viewer.padding.top);\n    } else {\n      this.pageContext.fillRect(left, top, width, height);\n    }\n    this.pageContext.closePath();\n    if (this.viewer instanceof PageLayoutViewer) {\n      this.pageContext.strokeStyle = this.documentHelper.owner.pageOutline;\n      this.pageContext.strokeRect(left, top, width, height);\n    }\n    this.pageLeft = left;\n    this.pageTop = top;\n    this.pageIndex = page.index;\n    if (this.isPrinting) {\n      this.setPageSize(page);\n    } else {\n      this.pageContext.beginPath();\n      this.pageContext.save();\n      this.pageContext.rect(left, top, width, height);\n      this.pageContext.clip();\n    }\n    this.height = height;\n    if (page.headerWidget) {\n      this.renderHFWidgets(page, page.headerWidgetIn, width, true);\n    }\n    if (page.footerWidget) {\n      this.renderHFWidgets(page, page.footerWidgetIn, width, false);\n    }\n    for (var i = 0; i < page.bodyWidgets.length; i++) {\n      this.render(page, page.bodyWidgets[parseInt(i.toString(), 10)]);\n      if (page.footnoteWidget && this.documentHelper.owner.layoutType === 'Pages') {\n        this.renderfootNoteWidget(page, page.footnoteWidget, width);\n      }\n    }\n    if (page.endnoteWidget && this.documentHelper.owner.layoutType === 'Pages') {\n      this.renderfootNoteWidget(page, page.endnoteWidget, width);\n    }\n    if (this.documentHelper.owner.enableHeaderAndFooter && !this.isPrinting) {\n      this.renderHeaderSeparator(page, this.pageLeft, this.pageTop, page.headerWidgetIn);\n    }\n    this.pageLeft = 0;\n    this.pageTop = 0;\n    this.pageContext.restore();\n  };\n  Renderer.prototype.setPageSize = function (page) {\n    this.pageContext.clearRect(0, 0, this.pageCanvas.width, this.pageCanvas.height);\n    this.selectionContext.clearRect(0, 0, this.selectionCanvas.width, this.selectionCanvas.height);\n    this.pageContext.restore();\n    this.selectionContext.restore();\n    var width = page.boundingRectangle.width;\n    var height = page.boundingRectangle.height;\n    var dpr = Math.max(window.devicePixelRatio, this.documentHelper.owner.documentEditorSettings.printDevicePixelRatio);\n    if (this.pageCanvas.width !== width * dpr || this.pageCanvas.height !== height * dpr) {\n      this.pageCanvas.height = height * dpr;\n      this.pageCanvas.width = width * dpr;\n      this.pageCanvas.style.height = height + 'px';\n      this.pageCanvas.style.width = width + 'px';\n      this.pageContext.globalAlpha = 1;\n      this.pageContext.scale(dpr, dpr);\n    }\n    this.pageContext.fillStyle = '#FFFFFF';\n    this.pageContext.fillRect(0, 0, this.pageCanvas.width, this.pageCanvas.height);\n    this.pageContext.fillStyle = '#000000';\n  };\n  Renderer.prototype.renderHFWidgets = function (page, widget, width, isHeader) {\n    if (this.isFieldCode) {\n      this.isFieldCode = false;\n    }\n    if (!this.isPrinting) {\n      this.pageContext.globalAlpha = this.documentHelper.owner.enableHeaderAndFooter ? 1 : 0.65;\n    }\n    var cliped = false;\n    var height = 0;\n    var pageHt = 0;\n    var headerFooterHeight = page.boundingRectangle.height / 100 * 40;\n    if (isHeader) {\n      var topMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.topMargin);\n      var widgetHeight = Math.max(widget.y + widget.height, topMargin);\n      if (widgetHeight > headerFooterHeight) {\n        cliped = true;\n        this.pageContext.beginPath();\n        this.pageContext.save();\n        this.pageContext.rect(this.pageLeft, this.pageTop, width, this.getScaledValue(headerFooterHeight));\n        this.pageContext.clip();\n      }\n    } else {\n      var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n      var footerHeight = void 0;\n      if (isNullOrUndefined(page.footerWidgetIn.sectionFormat)) {\n        footerHeight = page.boundingRectangle.height - /* eslint-disable-next-line max-len */\n        Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin));\n      } else {\n        footerHeight = page.boundingRectangle.height - /* eslint-disable-next-line max-len */\n        Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin));\n      }\n      height = Math.max(page.boundingRectangle.height - headerFooterHeight, footerHeight);\n      pageHt = page.boundingRectangle.height - footerDistance;\n    }\n    this.renderFloatingItems(page, widget.floatingElements, 'Behind');\n    for (var i = 0; i < widget.childWidgets.length; i++) {\n      var block = widget.childWidgets[parseInt(i.toString(), 10)];\n      if (!isHeader) {\n        height += block.height;\n      }\n      // if (isHeader || !isHeader && this.getScaledValue(Math.round(height)) <= this.getScaledValue(Math.round(pageHt))) {\n      this.renderWidget(page, block);\n      // }\n    }\n    this.renderFloatingItems(page, widget.floatingElements, 'InFrontOfText');\n    if (cliped) {\n      this.pageContext.restore();\n    }\n    if (!this.isPrinting) {\n      this.pageContext.globalAlpha = this.documentHelper.owner.enableHeaderAndFooter ? 0.50 : 1;\n    }\n  };\n  Renderer.prototype.renderHeaderSeparator = function (page, left, top, widget) {\n    //Header Widget\n    var topMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.topMargin);\n    var y = this.getScaledValue(Math.max(widget.y + widget.height, Math.abs(topMargin)));\n    var pageWidth = this.getScaledValue(page.boundingRectangle.width);\n    var ctx = this.pageContext;\n    ctx.save();\n    ctx.globalAlpha = 0.85;\n    var headerFooterHeight = this.getScaledValue(page.boundingRectangle.height) / 100 * 40;\n    //Maximum header height limit\n    y = Math.min(y, headerFooterHeight);\n    //Dash line Separator\n    this.renderDashLine(ctx, left, top + y, pageWidth, '#000000', false);\n    var type = this.getHeaderFooterType(page, true);\n    var index = this.viewer.getHeaderFooter(widget.headerFooterType);\n    var sectionIndex = page.sectionIndex;\n    var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n    l10n.setLocale(this.documentHelper.owner.locale);\n    if (this.documentHelper.headersFooters.length > 1) {\n      var sectionMarkIndex = sectionIndex + 1;\n      type = type + \" -\" + l10n.getConstant('Section') + \" \" + sectionMarkIndex + \"-\";\n    }\n    ctx.font = '9pt Arial';\n    var width = ctx.measureText(type).width;\n    this.renderHeaderFooterMark(ctx, left + 5, top + y, width + 10, 20);\n    this.renderHeaderFooterMarkText(ctx, type, left + 10, y + top + 15);\n    var headerFooterWidget;\n    if (this.documentHelper.headersFooters[parseInt(sectionIndex.toString(), 10)]) {\n      headerFooterWidget = this.documentHelper.headersFooters[parseInt(sectionIndex.toString(), 10)][parseInt(index.toString(), 10)];\n    }\n    if (sectionIndex != 0 && !headerFooterWidget) {\n      var content = l10n.getConstant('Same as Previous');\n      var width_1 = ctx.measureText(content).width;\n      var right = this.viewer.containerWidth - width_1 - 75 + left;\n      this.renderHeaderFooterMark(ctx, right, top + y, width_1 + 10, 20);\n      this.renderHeaderFooterMarkText(ctx, content, right + 5, y + top + 15);\n    }\n    if (page.footerWidget) {\n      //Footer Widget\n      var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n      var footerHeight = this.getScaledValue(page.boundingRectangle.height) - /* eslint-disable-next-line max-len */\n      this.getScaledValue(Math.max(page.footerWidgetIn.height + footerDistance, Math.abs(HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin))));\n      //Maximum footer height limit\n      footerHeight = Math.max(this.getScaledValue(page.boundingRectangle.height) - headerFooterHeight, footerHeight);\n      this.renderDashLine(ctx, left, top + footerHeight, pageWidth, '#000000', false);\n      var type_1 = this.getHeaderFooterType(page, false);\n      var sectionIndex_1 = page.sectionIndex;\n      if (this.documentHelper.headersFooters.length > 1) {\n        var sectionMarkIndex = sectionIndex_1 + 1;\n        type_1 = type_1 + \" -\" + l10n.getConstant('Section') + \" \" + sectionMarkIndex + \"-\";\n      }\n      width = ctx.measureText(type_1).width;\n      this.renderHeaderFooterMark(ctx, left + 5, top + footerHeight - 20, width + 10, 20);\n      this.renderHeaderFooterMarkText(ctx, type_1, left + 10, top + footerHeight - 5);\n      var index_1 = this.viewer.getHeaderFooter(page.footerWidget.headerFooterType);\n      var headerFooterWidget_1;\n      if (this.documentHelper.headersFooters[parseInt(sectionIndex_1.toString(), 10)]) {\n        headerFooterWidget_1 = this.documentHelper.headersFooters[parseInt(sectionIndex_1.toString(), 10)][parseInt(index_1.toString(), 10)];\n      }\n      if (sectionIndex_1 != 0 && !headerFooterWidget_1) {\n        var content = l10n.getConstant('Same as Previous');\n        var width_2 = ctx.measureText(content).width;\n        var right = this.viewer.containerWidth - width_2 - 75 + left;\n        this.renderHeaderFooterMark(ctx, right, top + footerHeight - 20, width_2 + 10, 20);\n        this.renderHeaderFooterMarkText(ctx, content, right + 5, top + footerHeight - 5);\n      }\n      ctx.restore();\n    }\n  };\n  Renderer.prototype.getFooterHeight = function (page) {\n    var footerWidgetHeight = page.boundingRectangle.height / 100 * 40;\n    var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n    var actualHeight = page.boundingRectangle.height - Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin));\n    return Math.max(page.boundingRectangle.height - footerWidgetHeight, actualHeight);\n  };\n  Renderer.prototype.getHeaderFooterType = function (page, isHeader) {\n    var type;\n    var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n    l10n.setLocale(this.documentHelper.owner.locale);\n    type = isHeader ? l10n.getConstant('Header') : l10n.getConstant('Footer');\n    if (page.bodyWidgets[0].sectionFormat.differentFirstPage && (isNullOrUndefined(page.previousPage) || page.sectionIndex !== page.previousPage.sectionIndex)) {\n      type = isHeader ? l10n.getConstant('First Page Header') : l10n.getConstant('First Page Footer');\n    } else if (page.bodyWidgets[0].sectionFormat.differentOddAndEvenPages) {\n      if ((this.documentHelper.pages.indexOf(page) + 1) % 2 === 0) {\n        type = isHeader ? l10n.getConstant('Even Page Header') : l10n.getConstant('Even Page Footer');\n      } else {\n        type = isHeader ? l10n.getConstant('Odd Page Header') : l10n.getConstant('Odd Page Footer');\n      }\n    }\n    return type;\n  };\n  /* eslint-disable-next-line max-len */\n  Renderer.prototype.renderDashLine = function (context, x, y, width, fillStyle, isSmallDash) {\n    context.beginPath();\n    context.strokeStyle = fillStyle;\n    context.lineWidth = 1;\n    if (isSmallDash) {\n      context.setLineDash([3, 2]);\n    } else {\n      context.setLineDash([6, 4]);\n    }\n    context.moveTo(x, y);\n    context.lineTo(x + width, y);\n    context.stroke();\n    context.setLineDash([]);\n    context.closePath();\n  };\n  Renderer.prototype.renderSolidLine = function (context, x, y, width, fillStyle) {\n    context.beginPath();\n    context.strokeStyle = fillStyle;\n    context.lineWidth = 0.5;\n    context.moveTo(x, y);\n    context.lineTo(x + width, y);\n    context.stroke();\n    context.closePath();\n  };\n  Renderer.prototype.renderHeaderFooterMark = function (ctx, x, y, w, h) {\n    ctx.beginPath();\n    ctx.fillStyle = 'lightgray';\n    ctx.fillRect(x, y, w, h);\n    ctx.strokeStyle = 'black';\n    ctx.strokeRect(x, y, w, h);\n    ctx.closePath();\n  };\n  Renderer.prototype.renderHeaderFooterMarkText = function (ctx, content, x, y) {\n    ctx.beginPath();\n    ctx.fillStyle = '#000000';\n    ctx.textBaseline = 'alphabetic';\n    ctx.fillText(content, x, y);\n    ctx.closePath();\n  };\n  Renderer.prototype.render = function (page, bodyWidget) {\n    if (this.isFieldCode) {\n      this.isFieldCode = false;\n    }\n    /* eslint-disable */\n    for (var i = 0; i < page.bodyWidgets.length; i++) {\n      if (!isNullOrUndefined(page.bodyWidgets[i].floatingElements)) {\n        this.renderFloatingItems(page, page.bodyWidgets[i].floatingElements, 'Behind');\n      }\n    }\n    /* eslint-enable */\n    var isClipped = false;\n    var nextColumnBody;\n    if (!isNullOrUndefined(bodyWidget.nextRenderedWidget) && bodyWidget.columnIndex + 1 === bodyWidget.nextRenderedWidget.columnIndex) {\n      nextColumnBody = bodyWidget.nextRenderedWidget;\n    }\n    if (!(this.viewer instanceof WebLayoutViewer) && bodyWidget.sectionFormat.columns.length > 1 && !isNullOrUndefined(nextColumnBody)) {\n      var colIndex = page.bodyWidgets.indexOf(bodyWidget);\n      var xPos = void 0;\n      var width = void 0;\n      if (bodyWidget.columnIndex === 0) {\n        /* eslint-disable */\n        xPos = page.bodyWidgets[colIndex].x - HelperMethods.convertPointToPixel(page.bodyWidgets[colIndex].sectionFormat.leftMargin);\n        width = HelperMethods.convertPointToPixel(page.bodyWidgets[colIndex].sectionFormat.leftMargin) + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].width + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].space / 2;\n        /* eslint-enable */\n      } else if (colIndex === bodyWidget.sectionFormat.columns.length - 1) {\n        /* eslint-disable */\n        xPos = page.bodyWidgets[colIndex].x - bodyWidget.sectionFormat.columns[bodyWidget.columnIndex - 1].space / 2;\n        width = HelperMethods.convertPointToPixel(page.bodyWidgets[colIndex].sectionFormat.rightMargin) + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].width + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex - 1].space / 2;\n        /* eslint-enable */\n      } else {\n        /* eslint-disable */\n        xPos = page.bodyWidgets[colIndex].x - bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].space / 2;\n        width = bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].width + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].space;\n        /* eslint-enable */\n      }\n      /* eslint-disable */\n      this.clipRect(xPos, page.bodyWidgets[colIndex].y, this.getScaledValue(width), this.getScaledValue(page.boundingRectangle.height));\n      /* eslint-enable */\n      isClipped = true;\n    }\n    for (var i = 0; i < bodyWidget.childWidgets.length; i++) {\n      var widget = bodyWidget.childWidgets[parseInt(i.toString(), 10)];\n      if (i === 0 && bodyWidget.childWidgets[0] instanceof TableWidget && bodyWidget.childWidgets[0].childWidgets.length > 0 && page.repeatHeaderRowTableWidget) {\n        /* eslint-disable-next-line max-len */\n        this.renderHeader(page, widget, this.documentHelper.layout.getHeader(bodyWidget.childWidgets[0]));\n      }\n      this.renderWidget(page, widget);\n    }\n    if (isClipped) {\n      this.pageContext.restore();\n    }\n    /* eslint-disable */\n    for (var i = 0; i < page.bodyWidgets.length; i++) {\n      if (!isNullOrUndefined(page.bodyWidgets[i].floatingElements)) {\n        this.renderFloatingItems(page, page.bodyWidgets[i].floatingElements, 'InFrontOfText');\n      }\n    }\n    /* eslint-enable */\n    for (var i = 0; i < page.bodyWidgets.length; i++) {\n      if (page.bodyWidgets[parseInt(i.toString(), 10)].sectionFormat.lineBetweenColumns === true) {\n        if (page.bodyWidgets[parseInt(i.toString(), 10)].columnIndex !== 0 && page.bodyWidgets.length > 1) {\n          var topMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.topMargin);\n          var linestartY = this.getScaledValue(Math.max(page.headerWidgetIn.y + page.headerWidgetIn.height, topMargin));\n          var headerFooterHeight = this.getScaledValue(page.boundingRectangle.height) / 100 * 40;\n          var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n          var footerHeight = this.getScaledValue(page.boundingRectangle.height) - /* eslint-disable-next-line max-len */\n          this.getScaledValue(Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin)));\n          footerHeight = Math.max(this.getScaledValue(page.boundingRectangle.height) - headerFooterHeight, footerHeight);\n          var inBetweenSpace = (page.bodyWidgets[parseInt(i.toString(), 10)].x - (page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.x + page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.width)) / 2;\n          var startX = inBetweenSpace + (page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.x + page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.width);\n          var startY = linestartY / this.documentHelper.zoomFactor;\n          var endX = startX;\n          var endY = void 0;\n          if (page.footnoteWidget) {\n            endY = (footerHeight - page.footerWidgetIn.height / 2 - page.footnoteWidget.height * this.documentHelper.zoomFactor) / this.documentHelper.zoomFactor;\n          } else {\n            endY = (footerHeight - page.footerWidgetIn.height / 2) / this.documentHelper.zoomFactor;\n          }\n          var firstBody = this.documentHelper.layout.getBodyWidget(page.bodyWidgets[parseInt(i.toString(), 10)], true);\n          var height = this.documentHelper.layout.getNextWidgetHeight(firstBody);\n          startY = page.bodyWidgets[parseInt(i.toString(), 10)].y;\n          endY = height;\n          var color = '#000000';\n          this.renderSingleBorder(color, startX, startY, endX, endY, 0.5, \"Single\");\n        }\n      }\n    }\n  };\n  Renderer.prototype.renderFloatingItems = function (page, floatingElements, wrappingType) {\n    if (!isNullOrUndefined(floatingElements) && floatingElements.length > 0) {\n      var overLappedShapeWidgets = new Dictionary();\n      /* eslint-disable */\n      floatingElements.sort(function (a, b) {\n        if (a instanceof TableWidget || b instanceof TableWidget) {\n          return 0;\n        } else {\n          return a.zOrderPosition - b.zOrderPosition;\n        }\n      });\n      for (var i = 0; i < floatingElements.length; i++) {\n        if (floatingElements[i] instanceof TableWidget) {\n          continue;\n        }\n        var shape = floatingElements[i];\n        if (wrappingType === \"Behind\" && shape.textWrappingStyle !== \"Behind\" || wrappingType !== \"Behind\" && shape.textWrappingStyle === \"Behind\") {\n          continue;\n        }\n        if (!this.isOverLappedShapeWidget(shape) || overLappedShapeWidgets.containsKey(shape.zOrderPosition)) {\n          if (shape instanceof ImageElementBox) {\n            this.renderImageElementBox(shape, shape.x, shape.y, 0);\n          } else if (shape instanceof ShapeElementBox) {\n            var shapeLeft = this.getScaledValue(shape.x, 1);\n            var shapeTop = this.getScaledValue(shape.y, 2);\n            this.renderShapeElementBox(shape, shapeLeft, shapeTop, page);\n          }\n        } else if (!overLappedShapeWidgets.containsKey(shape.zOrderPosition)) {\n          overLappedShapeWidgets.add(shape.zOrderPosition, shape);\n        }\n      }\n      if (overLappedShapeWidgets.length > 0) {\n        var sortedOverLappedShapeWidgets = overLappedShapeWidgets.keys.sort();\n        for (var j = 0; j < sortedOverLappedShapeWidgets.length; j++) {\n          var shape = overLappedShapeWidgets.get(sortedOverLappedShapeWidgets[j]);\n          if (shape instanceof ImageElementBox) {\n            this.renderImageElementBox(shape, shape.x, shape.y, 0);\n          } else if (shape instanceof ShapeElementBox) {\n            var shapeLeft = this.getScaledValue(shape.x, 1);\n            var shapeTop = this.getScaledValue(shape.y, 2);\n            this.renderShapeElementBox(shape, shapeLeft, shapeTop, page);\n          }\n        }\n      }\n    }\n  };\n  Renderer.prototype.isOverLappedShapeWidget = function (floatingElement) {\n    return floatingElement instanceof ImageElementBox && floatingElement.textWrappingStyle !== 'Inline' && floatingElement.textWrappingStyle !== 'Behind' && !(this.documentHelper.compatibilityMode !== 'Word2013' && floatingElement.isBelowText && floatingElement.textWrappingStyle !== 'InFrontOfText') || floatingElement instanceof ShapeElementBox && floatingElement.textWrappingStyle !== 'Inline' && floatingElement.textWrappingStyle !== 'Behind' && !(this.documentHelper.compatibilityMode !== 'Word2013' && floatingElement.isBelowText && floatingElement.textWrappingStyle !== 'InFrontOfText');\n  };\n  Renderer.prototype.renderShapeElementBox = function (shape, shapeLeft, shapeTop, page) {\n    if (shape.isHorizontalRule) {\n      return;\n    }\n    var isZeroShapeHeight = shape.height === 0 ? true : false;\n    var shapeType = shape.autoShapeType;\n    var blocks = shape.textFrame.childWidgets;\n    shapeTop += shape.margin.top;\n    this.pageContext.beginPath();\n    if (shape.fillFormat && shape.fillFormat.color && shape.fillFormat.fill && shapeType !== 'StraightConnector') {\n      this.pageContext.fillStyle = shape.fillFormat.color;\n      this.pageContext.fillRect(shapeLeft, shapeTop, this.getScaledValue(shape.width), this.getScaledValue(shape.height));\n    }\n    if (!isNullOrUndefined(shapeType)) {\n      if (shape.lineFormat.line && shape.lineFormat.lineFormatType !== 'None') {\n        this.pageContext.lineWidth = shape.lineFormat.weight;\n        this.pageContext.strokeStyle = HelperMethods.getColor(shape.lineFormat.color);\n        if (shapeType !== 'StraightConnector') {\n          this.pageContext.strokeRect(shapeLeft, shapeTop, this.getScaledValue(shape.width), this.getScaledValue(shape.height));\n        } else {\n          this.pageContext.moveTo(shapeLeft, shapeTop);\n          this.pageContext.lineTo(shapeLeft + this.getScaledValue(shape.width), shapeTop + this.getScaledValue(shape.height));\n          this.pageContext.stroke();\n        }\n      }\n    }\n    this.pageContext.closePath();\n    var isClipped = false;\n    if (shape.width != 0 && shape.height != 0) {\n      isClipped = true;\n      this.clipRect(shape.x, shape.y, this.getScaledValue(shape.width), this.getScaledValue(shape.height));\n    }\n    for (var i = 0; i < blocks.length; i++) {\n      this.renderWidget(page, blocks[i]);\n      if (isZeroShapeHeight && shapeType !== 'StraightConnector') {\n        shape.height = HelperMethods.round(shape.height + blocks[i].height, 5);\n      }\n    }\n    if (isZeroShapeHeight) {\n      isZeroShapeHeight = false;\n    }\n    if (isClipped) {\n      this.pageContext.restore();\n    }\n  };\n  Renderer.prototype.renderWidget = function (page, widget) {\n    if (this.documentHelper.owner.enableLockAndEdit) {\n      this.renderLockRegionBorder(page, widget);\n    }\n    if (widget instanceof ParagraphWidget) {\n      this.renderParagraphWidget(page, widget);\n    } else {\n      this.renderTableWidget(page, widget);\n    }\n  };\n  Renderer.prototype.renderLockRegionBorder = function (page, widget) {\n    if (!widget.isInsideTable && widget instanceof BlockWidget && widget.locked) {\n      var settinsModel = this.documentHelper.owner.documentEditorSettings.collaborativeEditingSettings;\n      var sectionFormat = page.bodyWidgets[0].sectionFormat;\n      var leftPosition = HelperMethods.convertPointToPixel(sectionFormat.leftMargin) - 5;\n      var pageWidth = sectionFormat.pageWidth - sectionFormat.leftMargin - sectionFormat.rightMargin;\n      pageWidth = HelperMethods.convertPointToPixel(pageWidth) + 10;\n      if (this.viewer instanceof WebLayoutViewer) {\n        leftPosition = widget.x - 5;\n        pageWidth = (this.documentHelper.visibleBounds.width - this.viewer.padding.right * 5) / this.documentHelper.zoomFactor;\n      }\n      var previousWidget = widget.previousRenderedWidget;\n      var nextWidget = widget.nextRenderedWidget;\n      var color = widget.lockedBy === this.documentHelper.owner.currentUser ? settinsModel.editableRegionColor : settinsModel.lockedRegionColor;\n      var topPosition = widget.y;\n      var height = widget.y + widget.height;\n      //Left border\n      this.renderSingleBorder(color, leftPosition, topPosition, leftPosition, height, 1, \"Single\");\n      //Top border\n      if (isNullOrUndefined(previousWidget) || !previousWidget.locked || widget.lockedBy !== previousWidget.lockedBy) {\n        this.renderSingleBorder(color, leftPosition, topPosition, leftPosition + pageWidth, topPosition, 1, \"Single\");\n      }\n      //Right border\n      this.renderSingleBorder(color, leftPosition + pageWidth, topPosition, leftPosition + pageWidth, height, 1, \"Single\");\n      if (isNullOrUndefined(nextWidget) || !nextWidget.locked || widget.lockedBy !== nextWidget.lockedBy) {\n        // Bottom border\n        this.renderSingleBorder(color, leftPosition, height, leftPosition + pageWidth, height, 1, \"Single\");\n      }\n    }\n  };\n  Renderer.prototype.renderHeader = function (page, widget, header) {\n    if (isNullOrUndefined(header)) {\n      return;\n    }\n    //Updated client area for current page\n    page.viewer.updateClientArea(page.bodyWidgets[0], page);\n    var top = page.viewer.clientArea.y;\n    var parentTable = header.ownerTable.getSplitWidgets()[0];\n    if (parentTable.childWidgets.length === 0) {\n      return;\n    }\n    if (widget.childWidgets.indexOf(header) !== -1) {\n      return;\n    }\n    var table = parentTable.clone();\n    table.childWidgets = [];\n    page.viewer.updateClientAreaLocation(table, new Rect(page.viewer.clientArea.x, top, table.width, table.height));\n    this.updateTableHeaderRows(header, table, page, top);\n    this.isRenderHeader = true;\n    for (var j = 0; j < table.childWidgets.length; j++) {\n      var headerWidget = table.childWidgets[j];\n      var cell = undefined;\n      //Renders table cell outline rectangle - Border and background color.\n      for (var j_1 = 0; j_1 < headerWidget.childWidgets.length; j_1++) {\n        cell = headerWidget.childWidgets[j_1];\n        this.renderTableCellWidget(page, cell);\n      }\n      top += headerWidget.height;\n    }\n    this.isRenderHeader = false;\n    if (widget.y !== top) {\n      //this.Location.Y = top;\n      page.documentHelper.layout.updateChildLocationForTable(top, widget);\n    }\n  };\n  Renderer.prototype.updateTableHeaderRows = function (headerRow, clonedTable, page, top) {\n    var table = headerRow.ownerTable;\n    var rowSpan = 1;\n    for (var i = 0; i < table.childWidgets.length; i++) {\n      var row = table.childWidgets[i];\n      if (row.rowFormat.isHeader) {\n        var clonedRow = row.clone();\n        clonedTable.childWidgets.push(clonedRow);\n        clonedRow.containerWidget = clonedTable;\n        page.viewer.updateClientAreaLocation(clonedRow, new Rect(page.viewer.clientArea.x, top, clonedRow.width, clonedRow.height));\n        page.documentHelper.layout.updateChildLocationForRow(top, clonedRow);\n        top += clonedRow.height;\n        if (row == headerRow) {\n          for (var j = 0; j < headerRow.childWidgets.length; j++) {\n            var cell = headerRow.childWidgets[j];\n            rowSpan = Math.max(rowSpan, cell.cellFormat.rowSpan);\n          }\n          if (rowSpan > 1 && i + rowSpan < table.childWidgets.length) {\n            for (var k = 1; k < rowSpan; k++) {\n              var nextRow = table.childWidgets[i + k];\n              if (!isNullOrUndefined(nextRow)) {\n                var clonedRow_1 = nextRow.clone();\n                clonedTable.childWidgets.push(clonedRow_1);\n                clonedRow_1.containerWidget = clonedTable;\n                page.viewer.updateClientAreaLocation(clonedRow_1, new Rect(page.viewer.clientArea.x, top, clonedRow_1.width, clonedRow_1.height));\n                page.documentHelper.layout.updateChildLocationForRow(top, clonedRow_1);\n                top += clonedRow_1.height;\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  Renderer.prototype.renderParagraphWidget = function (page, paraWidget) {\n    if (this.isFieldCode && paraWidget.isFieldCodeBlock) {\n      return;\n    }\n    var top = paraWidget.y;\n    var left = paraWidget.x;\n    var isClipped = false;\n    var firstLine = paraWidget.firstChild;\n    var paddingLeft = 0;\n    if (!isNullOrUndefined(firstLine)) {\n      for (var i = 0; i < firstLine.children.length; i++) {\n        var element = firstLine.children[i];\n        if (element instanceof TextElementBox) {\n          paddingLeft = element.padding.left;\n          break;\n        }\n      }\n    }\n    if (paddingLeft > 0) {\n      this.clipRect(paraWidget.x + paddingLeft, this.getScaledValue(page.boundingRectangle.y), this.getScaledValue(page.boundingRectangle.width), this.getScaledValue(page.boundingRectangle.height));\n      isClipped = true;\n    }\n    if (!(paraWidget.containerWidget instanceof HeaderFooterWidget && paraWidget.containerWidget.isEmpty && !isNullOrUndefined(this.documentHelper.owner.selectionModule) && !isNullOrUndefined(this.documentHelper.selection.start.paragraph) && !this.documentHelper.selection.start.paragraph.isInHeaderFooter)) {\n      this.renderParagraphBorder(page, paraWidget);\n    }\n    if (isClipped) {\n      this.pageContext.restore();\n    }\n    for (var i = 0; i < paraWidget.childWidgets.length; i++) {\n      var widget = paraWidget.childWidgets[i];\n      top += widget.marginTop;\n      this.renderLine(widget, page, left, top);\n      top += widget.height;\n    }\n  };\n  Renderer.prototype.renderParagraphBorder = function (page, paragraphWidet) {\n    var leftBorder = paragraphWidet.paragraphFormat.borders.left;\n    var topBorder = paragraphWidet.paragraphFormat.borders.top;\n    var rightBorder = paragraphWidet.paragraphFormat.borders.right;\n    var bottomBorder = paragraphWidet.paragraphFormat.borders.bottom;\n    var startX = 0;\n    var startY = 0;\n    var endX = 0;\n    var endY = 0;\n    var lineWidth = 0;\n    var firstLine = paragraphWidet.firstChild;\n    var lastLine = paragraphWidet.lastChild;\n    var canRenderParagraphBorders = this.documentHelper.canRenderBorder(paragraphWidet);\n    if (!isNullOrUndefined(leftBorder) && leftBorder.lineStyle !== 'None') {\n      startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet) - HelperMethods.convertPointToPixel(leftBorder.space);\n      endX = startX;\n      endY = startY + paragraphWidet.height;\n      if (topBorder.lineStyle !== 'None' && firstLine.isFirstLine() && !canRenderParagraphBorders.skipTopBorder) {\n        startY = paragraphWidet.y + this.getTopMargin(paragraphWidet) - HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space);\n        endY = startY + paragraphWidet.height - (this.getTopMargin(paragraphWidet) - HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space));\n      } else {\n        startY = paragraphWidet.y;\n        endY = startY + paragraphWidet.height;\n      }\n      if (bottomBorder.lineStyle !== 'None' && lastLine.isLastLine() && !canRenderParagraphBorders.skipBottomBorder) {\n        endY = endY + HelperMethods.convertPointToPixel(bottomBorder.lineWidth + bottomBorder.space) - this.getBottomMargin(paragraphWidet);\n      }\n      lineWidth = HelperMethods.convertPointToPixel(leftBorder.lineWidth);\n      this.renderSingleBorder(leftBorder.color, startX, startY, endX, endY, lineWidth, leftBorder.lineStyle);\n    }\n    if (!isNullOrUndefined(topBorder) && topBorder.lineStyle !== 'None' && firstLine.isFirstLine() && !canRenderParagraphBorders.skipTopBorder) {\n      startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet);\n      endX = startX + this.getContainerWidth(paragraphWidet, page);\n      startY = paragraphWidet.y + this.getTopMargin(paragraphWidet) - HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space);\n      endY = startY;\n      if (leftBorder.lineStyle !== 'None') {\n        startX -= HelperMethods.convertPointToPixel(leftBorder.space);\n      }\n      if (rightBorder.lineStyle !== 'None') {\n        endX += HelperMethods.convertPointToPixel(rightBorder.space);\n      }\n      lineWidth = HelperMethods.convertPointToPixel(topBorder.lineWidth);\n      this.renderSingleBorder(topBorder.color, startX, startY, endX, endY, lineWidth, topBorder.lineStyle);\n    }\n    if (!isNullOrUndefined(rightBorder) && rightBorder.lineStyle !== 'None') {\n      startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet) + this.getContainerWidth(paragraphWidet, page) + HelperMethods.convertPointToPixel(rightBorder.space);\n      startY = endY;\n      endX = startX;\n      endY = startY + paragraphWidet.height;\n      if (topBorder.lineStyle !== 'None' && firstLine.isFirstLine() && !canRenderParagraphBorders.skipTopBorder) {\n        startY = paragraphWidet.y + this.getTopMargin(paragraphWidet) - HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space);\n        endY = startY + paragraphWidet.height - (this.getTopMargin(paragraphWidet) - HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space));\n      } else {\n        startY = paragraphWidet.y;\n        endY = startY + paragraphWidet.height;\n      }\n      if (bottomBorder.lineStyle !== 'None' && lastLine.isLastLine() && !canRenderParagraphBorders.skipBottomBorder) {\n        endY = endY + HelperMethods.convertPointToPixel(bottomBorder.lineWidth + bottomBorder.space) - this.getBottomMargin(paragraphWidet);\n      }\n      lineWidth = HelperMethods.convertPointToPixel(rightBorder.lineWidth);\n      this.renderSingleBorder(rightBorder.color, startX, startY, endX, endY, lineWidth, rightBorder.lineStyle);\n    }\n    if (!isNullOrUndefined(bottomBorder) && bottomBorder.lineStyle !== 'None' && lastLine.isLastLine() && !canRenderParagraphBorders.skipBottomBorder) {\n      startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet);\n      endX = startX + this.getContainerWidth(paragraphWidet, page);\n      startY = paragraphWidet.y + paragraphWidet.height + HelperMethods.convertPointToPixel(bottomBorder.lineWidth + bottomBorder.space) - this.getBottomMargin(paragraphWidet);\n      endY = startY;\n      if (leftBorder.lineStyle !== 'None') {\n        startX -= HelperMethods.convertPointToPixel(leftBorder.space);\n      }\n      if (rightBorder.lineStyle !== 'None') {\n        endX += HelperMethods.convertPointToPixel(rightBorder.space);\n      }\n      lineWidth = HelperMethods.convertPointToPixel(bottomBorder.lineWidth);\n      this.renderSingleBorder(bottomBorder.color, startX, startY, endX, endY, lineWidth, bottomBorder.lineStyle);\n    }\n  };\n  Renderer.prototype.getContainerWidth = function (paraWidget, page) {\n    var hangingIndent = 0;\n    if (paraWidget.paragraphFormat.firstLineIndent < 0) {\n      hangingIndent = Math.abs(paraWidget.paragraphFormat.firstLineIndent);\n    }\n    if (paraWidget.isInsideTable) {\n      var cell = paraWidget.associatedCell;\n      return cell.width + cell.margin.left + cell.margin.right - cell.leftBorderWidth;\n    } else {\n      if (this.viewer instanceof WebLayoutViewer) {\n        var indent = HelperMethods.convertPointToPixel(paraWidget.leftIndent + paraWidget.rightIndent);\n        return (this.documentHelper.visibleBounds.width - indent - this.viewer.padding.right * 4 - this.viewer.padding.left * 2) / this.documentHelper.zoomFactor;\n      } else {\n        var section = paraWidget.bodyWidget;\n        if (section instanceof BodyWidget && section.sectionFormat.columns.length > 1) {\n          var colIndex = section.columnIndex;\n          return section.sectionFormat.columns[colIndex].width + HelperMethods.convertPointToPixel(hangingIndent - (paraWidget.rightIndent + paraWidget.leftIndent));\n        } else {\n          var width = section.sectionFormat.pageWidth - section.sectionFormat.leftMargin - section.sectionFormat.rightMargin;\n          return HelperMethods.convertPointToPixel(width + hangingIndent - (paraWidget.rightIndent + paraWidget.leftIndent));\n        }\n      }\n    }\n  };\n  Renderer.prototype.getTopMargin = function (paragraph) {\n    if (paragraph.isEmpty()) {\n      return paragraph.childWidgets[0].margin.top;\n    } else {\n      var widget = paragraph.childWidgets[0];\n      var topMargin = 0;\n      if (!isNullOrUndefined(widget.margin)) {\n        topMargin = widget.margin.top;\n      }\n      return topMargin;\n    }\n  };\n  Renderer.prototype.getBottomMargin = function (paragarph) {\n    if (paragarph.isEmpty()) {\n      return paragarph.childWidgets[paragarph.childWidgets.length - 1].margin.bottom;\n    } else {\n      var widget = paragarph.childWidgets[paragarph.childWidgets.length - 1];\n      var bottomMargin = 0;\n      if (!isNullOrUndefined(widget.margin)) {\n        bottomMargin = widget.margin.bottom;\n      }\n      return bottomMargin;\n    }\n  };\n  Renderer.prototype.renderfootNoteWidget = function (page, footnote, width) {\n    var isEmptyPage = footnote.page.bodyWidgets.length === 1 && (footnote.page.bodyWidgets[0].childWidgets.length === 1 && footnote.page.bodyWidgets[0].childWidgets[0].isEmpty != undefined && footnote.page.bodyWidgets[0].childWidgets[0].isEmpty() || footnote.page.bodyWidgets[0].childWidgets.length === 0);\n    var footerY = this.getFooterHeight(page);\n    var height = footnote.y + footnote.height;\n    if (height > footerY) {\n      height = footerY - footnote.y;\n    }\n    this.pageContext.beginPath();\n    this.pageContext.save();\n    this.pageContext.rect(this.pageLeft, this.getScaledValue(footnote.y, 2), this.getScaledValue(width), this.getScaledValue(height));\n    this.pageContext.clip();\n    for (var i = 0; i < footnote.bodyWidgets.length; i++) {\n      var bodyWidget = footnote.bodyWidgets[i];\n      var footNoteReference = bodyWidget.footNoteReference;\n      for (var j = 0; j < bodyWidget.childWidgets.length; j++) {\n        var widget = bodyWidget.childWidgets[j];\n        if (i === 0 && j === 0) {\n          var ctx = this.pageContext;\n          var xPos = page.bodyWidgets[0].x;\n          if (page.bodyWidgets.length > 1 && !isNullOrUndefined(bodyWidget.nextWidget) && !(bodyWidget.nextWidget.sectionFormat.breakCode === 'NoBreak')) {\n            var footWidth = page.bodyWidgets[0].width;\n            this.renderSolidLine(ctx, this.getScaledValue(xPos, 1), this.getScaledValue(footnote.y + footnote.margin.top / 2 + 1, 2), footWidth * this.documentHelper.zoomFactor, '#000000');\n          } else {\n            this.renderSolidLine(ctx, this.getScaledValue(xPos, 1), this.getScaledValue(footnote.y + footnote.margin.top / 2 + 1, 2), 210 * this.documentHelper.zoomFactor, '#000000');\n          }\n        }\n        if (j === 0 && !isNullOrUndefined(footNoteReference) && widget.childWidgets[0].children[0] instanceof TextElementBox && !this.documentHelper.owner.editorModule.isFootNoteInsert) {\n          //if (j < 1 || (j > 0 && widget.footNoteReference !== (bodyWidget.childWidgets[j - 1] as BlockWidget).footNoteReference)) {\n          var footNoteElement = widget.childWidgets[0].children[0];\n          if (footNoteElement.text === '\\u0002') {\n            footNoteElement.text = footNoteElement.text.replace(footNoteElement.text, footNoteReference.text);\n          }\n          footNoteElement.width = footNoteReference.width;\n          //}\n        }\n        this.renderWidget(page, widget);\n      }\n    }\n    this.pageContext.restore();\n  };\n  Renderer.prototype.renderTableWidget = function (page, tableWidget) {\n    if (this.isFieldCode) {\n      return;\n    }\n    for (var i = 0; i < tableWidget.childWidgets.length; i++) {\n      var widget = tableWidget.childWidgets[i];\n      this.renderTableRowWidget(page, widget);\n      if (tableWidget.tableFormat.cellSpacing > 0) {\n        this.renderTableOutline(tableWidget);\n      }\n      if (widget.isRenderBookmarkEnd && this.documentHelper.owner.documentEditorSettings.showBookmarks) {\n        var cellWidget = widget.lastChild;\n        var border = cellWidget.ownerTable.isBidiTable ? TableCellWidget.getCellLeftBorder(cellWidget) : TableCellWidget.getCellRightBorder(cellWidget);\n        var lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n        var lastPara = this.documentHelper.selection.getLastParagraph(widget.lastChild);\n        var height = lastPara.lastChild.height - lastPara.lastChild.margin.bottom;\n        this.renderBookmark(this.getScaledValue(cellWidget.x + cellWidget.width + cellWidget.margin.right - lineWidth / 2 + this.documentHelper.textHelper.getParagraphMarkWidth(lastPara.characterFormat), 1), this.getScaledValue(cellWidget.y - cellWidget.margin.top, 2), this.getScaledValue(height), 1);\n      }\n    }\n  };\n  Renderer.prototype.renderTableRowWidget = function (page, rowWidget) {\n    for (var i = 0; i < rowWidget.childWidgets.length; i++) {\n      var widget = rowWidget.childWidgets[i];\n      this.renderTableCellWidget(page, widget);\n      if (widget.isRenderBookmarkEnd && this.documentHelper.owner.documentEditorSettings.showBookmarks) {\n        var lastPara = this.documentHelper.selection.getLastParagraph(widget);\n        var lastLine = lastPara.lastChild;\n        var position = this.documentHelper.selection.getEndPosition(lastPara);\n        this.renderBookmark(this.getScaledValue(position.x, 1), this.getScaledValue(position.y, 2), this.getScaledValue(lastLine.height - lastLine.margin.bottom), 1);\n      }\n    }\n  };\n  Renderer.prototype.renderTableCellWidget = function (page, cellWidget) {\n    if (!this.isPrinting) {\n      var cellTopMargin = 0;\n      var cellBottomMargin = 0;\n      cellTopMargin = cellWidget.margin.top - cellWidget.containerWidget.topBorderWidth;\n      cellBottomMargin = cellWidget.margin.bottom - cellWidget.containerWidget.bottomBorderWidth;\n      if (this.getScaledValue(cellWidget.y, 2) + cellWidget.height + cellBottomMargin * this.documentHelper.zoomFactor < 0 || this.getScaledValue(cellWidget.y, 2) - cellTopMargin > this.documentHelper.visibleBounds.height) {\n        return;\n      }\n    }\n    var widgetHeight = 0;\n    this.renderSelectionHighlightOnTable(page, cellWidget);\n    this.renderTableCellOutline(page.documentHelper, cellWidget);\n    for (var i = 0; i < cellWidget.childWidgets.length; i++) {\n      var widget = cellWidget.childWidgets[i];\n      // MS word render the content in right margin also.\n      // So, we need to add right margin value while cliping the content\n      var width = cellWidget.width + cellWidget.margin.left + cellWidget.margin.right - cellWidget.leftBorderWidth;\n      if (!this.isPrinting) {\n        this.clipRect(cellWidget.x - cellWidget.margin.left, cellWidget.y, this.getScaledValue(width), this.getScaledValue(this.height));\n      }\n      this.renderWidget(page, widget);\n      this.pageContext.restore();\n    }\n    if (cellWidget.isRenderEditRangeStart) {\n      var firstPara = this.documentHelper.selection.getFirstParagraph(cellWidget);\n      var firstLine = firstPara.firstChild;\n      var xLeft = firstLine.paragraph.x;\n      var ytop = firstLine.paragraph.y;\n      if (this.documentHelper.owner.documentEditorSettings.highlightEditableRanges) {\n        var highlighters = this.documentHelper.selection.editRegionHighlighters;\n        var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(firstLine) : [];\n        var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n        this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(ytop, 2), this.getScaledValue(firstLine.height - firstLine.margin.bottom), 0, color);\n      }\n    }\n    if (cellWidget.isRenderEditRangeEnd) {\n      var lastPara = this.documentHelper.selection.getLastParagraph(cellWidget);\n      var lastLine = lastPara.lastChild;\n      var position = this.documentHelper.selection.getEndPosition(lastPara);\n      var xLeft = this.documentHelper.textHelper.getWidth(String.fromCharCode(164), lastLine.paragraph.characterFormat) + position.x;\n      if (this.documentHelper.owner.documentEditorSettings.highlightEditableRanges) {\n        var highlighters = this.documentHelper.selection.editRegionHighlighters;\n        var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(lastLine) : [];\n        var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n        this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(position.y, 2), this.getScaledValue(lastLine.height - lastLine.margin.bottom), 0, color);\n      }\n    }\n  };\n  Renderer.prototype.checkHeaderFooterLineWidget = function (widget, keys) {\n    var headerFooter;\n    if (widget instanceof LineWidget) {\n      headerFooter = widget.paragraph.bodyWidget;\n    } else if (widget instanceof TableCellWidget) {\n      headerFooter = widget.bodyWidget;\n    }\n    if (!isNullOrUndefined(headerFooter.parentHeaderFooter)) {\n      headerFooter = headerFooter.parentHeaderFooter;\n      for (var j = 0; j < keys.length; j++) {\n        var selectedWidget = keys[j];\n        if (selectedWidget instanceof LineWidget && widget instanceof LineWidget) {\n          var parentIndex = selectedWidget.getHierarchicalIndex('');\n          var currentLineIndex = widget.getHierarchicalIndex('');\n          if (selectedWidget.paragraph.isInHeaderFooter && headerFooter === selectedWidget.paragraph.bodyWidget && parentIndex.substring(parentIndex.indexOf(';')) === currentLineIndex.substring(currentLineIndex.indexOf(';'))) {\n            return selectedWidget;\n          }\n        } else if (selectedWidget instanceof TableCellWidget && widget instanceof TableCellWidget) {\n          var parentIndex = selectedWidget.getHierarchicalIndex('');\n          var currentLineIndex = widget.getHierarchicalIndex('');\n          if (selectedWidget.ownerTable.isInHeaderFooter && headerFooter === selectedWidget.ownerTable.bodyWidget && parentIndex.substring(parentIndex.indexOf(';')) === currentLineIndex.substring(currentLineIndex.indexOf(';'))) {\n            return selectedWidget;\n          }\n        }\n      }\n    }\n    return undefined;\n  };\n  Renderer.prototype.renderEditRegionHighlight = function (page, lineWidget, top) {\n    if (page.documentHelper.selection && !isNullOrUndefined(page.documentHelper.selection.editRegionHighlighters)) {\n      var renderHighlight = this.documentHelper.selection.editRegionHighlighters.containsKey(lineWidget);\n      if (!renderHighlight && lineWidget.paragraph.isInHeaderFooter) {\n        var keys = this.documentHelper.selection.editRegionHighlighters.keys;\n        lineWidget = this.checkHeaderFooterLineWidget(lineWidget, keys);\n        if (!isNullOrUndefined(lineWidget)) {\n          renderHighlight = true;\n        }\n      }\n      if (renderHighlight) {\n        var widgetInfo = this.documentHelper.selection.editRegionHighlighters.get(lineWidget);\n        for (var i = 0; i < widgetInfo.length; i++) {\n          this.pageContext.fillStyle = widgetInfo[i].color !== '' ? widgetInfo[i].color : '#add8e6';\n          this.pageContext.fillRect(this.getScaledValue(widgetInfo[i].left, 1), this.getScaledValue(top, 2), this.getScaledValue(widgetInfo[i].width), this.getScaledValue(lineWidget.height));\n        }\n      }\n    }\n  };\n  Renderer.prototype.renderSearchHighlight = function (page, lineWidget, top) {\n    if (this.documentHelper.owner.searchModule && !isNullOrUndefined(page.documentHelper.owner.searchModule.searchHighlighters)) {\n      var renderHighlight = page.documentHelper.owner.searchModule.searchHighlighters.containsKey(lineWidget);\n      if (!renderHighlight && lineWidget.paragraph.isInHeaderFooter) {\n        var keys = page.documentHelper.owner.searchModule.searchHighlighters.keys;\n        lineWidget = this.checkHeaderFooterLineWidget(lineWidget, keys);\n        if (!isNullOrUndefined(lineWidget)) {\n          renderHighlight = true;\n        }\n      }\n      if (renderHighlight) {\n        var widgetInfo = page.documentHelper.owner.searchModule.searchHighlighters.get(lineWidget);\n        for (var i = 0; i < widgetInfo.length; i++) {\n          this.pageContext.fillStyle = this.viewer.owner.documentEditorSettings.searchHighlightColor;\n          this.pageContext.fillRect(this.getScaledValue(widgetInfo[i].left, 1), this.getScaledValue(top, 2), this.getScaledValue(widgetInfo[i].width), this.getScaledValue(lineWidget.height));\n        }\n      }\n    }\n  };\n  Renderer.prototype.renderSelectionHighlight = function (page, lineWidget, top) {\n    if (!this.isPrinting && page.documentHelper.owner.selectionModule && !this.documentHelper.isScrollToSpellCheck && page.documentHelper.owner.selectionModule.selectedWidgets.length > 0) {\n      var renderHighlight = page.documentHelper.owner.selectionModule.selectedWidgets.containsKey(lineWidget);\n      if (!renderHighlight && lineWidget.paragraph.isInHeaderFooter) {\n        var keys = page.documentHelper.owner.selectionModule.selectedWidgets.keys;\n        lineWidget = this.checkHeaderFooterLineWidget(lineWidget, keys);\n        if (!isNullOrUndefined(lineWidget)) {\n          renderHighlight = true;\n        }\n      }\n      if (renderHighlight) {\n        page.documentHelper.owner.selectionModule.addSelectionHighlight(this.selectionContext, lineWidget, top, page);\n      }\n    }\n  };\n  Renderer.prototype.renderSelectionHighlightOnTable = function (page, cellWidget) {\n    if (!this.isPrinting && page.documentHelper.owner.selectionModule && page.documentHelper.owner.selectionModule.selectedWidgets.length > 0) {\n      var renderHighlight = page.documentHelper.owner.selectionModule.selectedWidgets.containsKey(cellWidget);\n      if (!renderHighlight && cellWidget.ownerTable.isInHeaderFooter) {\n        var keys = page.documentHelper.owner.selectionModule.selectedWidgets.keys;\n        cellWidget = this.checkHeaderFooterLineWidget(cellWidget, keys);\n        if (!isNullOrUndefined(cellWidget)) {\n          renderHighlight = true;\n        }\n      }\n      if (renderHighlight) {\n        page.documentHelper.owner.selectionModule.addSelectionHighlightTable(this.selectionContext, cellWidget, page);\n      }\n    }\n  };\n  Renderer.prototype.renderLine = function (lineWidget, page, left, top) {\n    this.renderSelectionHighlight(page, lineWidget, top);\n    var paraFormat = lineWidget.paragraph.paragraphFormat;\n    var x = left;\n    if (lineWidget.isFirstLine() && !paraFormat.bidi) {\n      left += HelperMethods.convertPointToPixel(paraFormat.firstLineIndent);\n    }\n    if (this.documentHelper && this.documentHelper.selection && !isNullOrUndefined(this.documentHelper.selection.formFieldHighlighters) && this.documentHelper.selection.formFieldHighlighters.containsKey(lineWidget)) {\n      if (this.documentHelper.owner.documentEditorSettings && this.documentHelper.owner.documentEditorSettings.formFieldSettings.applyShading) {\n        var widgetInfo = page.documentHelper.selection.formFieldHighlighters.get(lineWidget);\n        for (var i = 0; i < widgetInfo.length; i++) {\n          this.pageContext.fillStyle = this.documentHelper.owner.documentEditorSettings.formFieldSettings.shadingColor;\n          var height_1 = lineWidget.height;\n          var isAltered = false;\n          var isLastLine = lineWidget.isLastLine();\n          if (isLastLine) {\n            height_1 = height_1 - HelperMethods.convertPointToPixel(this.documentHelper.layout.getAfterSpacing(lineWidget.paragraph));\n            if (lineWidget.paragraph.paragraphFormat.lineSpacing > 1) {\n              var formField = this.getFormfieldInLine(lineWidget);\n              if (!isNullOrUndefined(formField)) {\n                var sizeInfo = this.documentHelper.textHelper.getHeight(formField.characterFormat);\n                var maxHeight = sizeInfo.Height;\n                if (lineWidget.paragraph.paragraphFormat.lineSpacingType === 'Multiple') {\n                  height_1 = height_1 - HelperMethods.convertPointToPixel(this.documentHelper.layout.getLineSpacing(lineWidget.paragraph, maxHeight, true));\n                } else {\n                  top = top + HelperMethods.convertPointToPixel(lineWidget.paragraph.paragraphFormat.beforeSpacing);\n                  height_1 = sizeInfo.Height;\n                  isAltered = true;\n                }\n              }\n            }\n          }\n          this.pageContext.fillRect(this.getScaledValue(widgetInfo[i].left, 1), this.getScaledValue(top, 2), this.getScaledValue(widgetInfo[i].width), this.getScaledValue(height_1));\n          if (isAltered) {\n            isAltered = false;\n            top = top - HelperMethods.convertPointToPixel(lineWidget.paragraph.paragraphFormat.beforeSpacing);\n          }\n        }\n      }\n    }\n    // Render search highlight\n    this.renderSearchHighlight(page, lineWidget, top);\n    // EditRegion highlight \n    this.renderEditRegionHighlight(page, lineWidget, top);\n    var commentIDList = [];\n    var children = lineWidget.renderedElements;\n    var underlineY = this.getUnderlineYPosition(lineWidget);\n    var bookmarks = [];\n    if (!isNullOrUndefined(lineWidget.paragraph.associatedCell) && lineWidget.paragraph.associatedCell.isRenderBookmarkStart) {\n      var firstLineInFirstPara = lineWidget.paragraph.associatedCell.firstChild.firstChild;\n      if (firstLineInFirstPara == lineWidget) {\n        bookmarks.push({\n          x: left,\n          y: top,\n          height: lineWidget.height - lineWidget.margin.bottom,\n          type: 0\n        });\n      }\n    }\n    for (var i = 0; i < children.length; i++) {\n      var elementBox = children[i];\n      if (elementBox instanceof ShapeBase && elementBox.textWrappingStyle !== 'Inline') {\n        continue;\n      }\n      if (elementBox instanceof CommentCharacterElementBox || elementBox instanceof EditRangeStartElementBox) {\n        var pageGap = 0;\n        if (this.viewer instanceof PageLayoutViewer) {\n          pageGap = this.viewer.pageGap;\n        }\n        var style = 'display:block;position:absolute;';\n        var topPosition = this.getScaledValue(top + (page.boundingRectangle.y - pageGap * (page.index + 1))) + pageGap * (page.index + 1) + 'px;';\n        if (elementBox instanceof EditRangeStartElementBox && (this.documentHelper.owner.currentUser === elementBox.user || elementBox.group === \"Everyone\" && elementBox.user === \"\")) {\n          if (this.documentHelper.owner.documentEditorSettings.highlightEditableRanges && elementBox.columnFirst == -1) {\n            var height = elementBox.line.height - elementBox.line.margin.bottom;\n            var xLeft = left;\n            var yTop = top;\n            var highlighters = this.documentHelper.selection.editRegionHighlighters;\n            var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(lineWidget) : [];\n            var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n            this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(yTop, 2), this.getScaledValue(lineWidget.height - lineWidget.margin.bottom), 0, color);\n          }\n          if (this.documentHelper.owner.enableLockAndEdit) {\n            var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n            l10n.setLocale(this.documentHelper.owner.locale);\n            elementBox.renderLockMark(this.documentHelper.owner.currentUser, l10n);\n            var settings = this.documentHelper.owner.documentEditorSettings.collaborativeEditingSettings;\n            var color = elementBox.user === this.documentHelper.owner.currentUser ? settings.editableRegionColor : settings.lockedRegionColor;\n            style += \"color:\" + color + \";\";\n            var leftMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.leftMargin);\n            var leftPosition = page.boundingRectangle.x + this.getScaledValue(leftMargin - 20) + 'px;';\n            if (this.viewer instanceof WebLayoutViewer) {\n              leftPosition = lineWidget.paragraph.x - 5 + 'px;';\n            }\n            style = style + 'left:' + leftPosition + 'top:' + topPosition;\n            elementBox.editRangeMark.setAttribute('style', style);\n          } else {\n            if (elementBox.editRangeMark) {\n              elementBox.editRangeMark.setAttribute('style', 'display:none');\n            }\n          }\n        } else if (elementBox instanceof CommentCharacterElementBox && elementBox.commentType === 0 && this.documentHelper.owner.selectionModule) {\n          if (this.documentHelper.owner.enableComment) {\n            var rightMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.rightMargin);\n            var pageWidth = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.pageWidth);\n            var leftPosition = page.boundingRectangle.x + this.getScaledValue(pageWidth - rightMargin + rightMargin / 4) + 'px;';\n            if (this.viewer instanceof WebLayoutViewer) {\n              leftPosition = page.boundingRectangle.width - this.viewer.padding.right * 2 - this.viewer.padding.left * 2 + 'px;';\n            }\n            style = style + 'left:' + leftPosition + 'top:' + topPosition;\n            if (commentIDList.indexOf(elementBox.commentId) === -1 && !isNullOrUndefined(elementBox.comment) && !elementBox.comment.isReply) {\n              commentIDList.push(elementBox.commentId);\n              elementBox.renderCommentMark(topPosition, leftPosition);\n              elementBox.commentMark.setAttribute('style', style);\n            }\n          } else {\n            if (elementBox.commentMark) {\n              elementBox.commentMark.setAttribute('style', 'display:none');\n            }\n          }\n        }\n      }\n      if (elementBox instanceof EditRangeEndElementBox && (this.documentHelper.owner.currentUser === elementBox.editRangeStart.user || elementBox.editRangeStart.group === \"Everyone\" && elementBox.editRangeStart.user === \"\")) {\n        if (elementBox.editRangeStart.columnFirst == -1 && this.documentHelper.owner.documentEditorSettings.highlightEditableRanges) {\n          var height = elementBox.line.height - elementBox.line.margin.bottom;\n          var xLeft = left;\n          var yTop = top;\n          var highlighters = this.documentHelper.selection.editRegionHighlighters;\n          var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(lineWidget) : [];\n          var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n          this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(yTop, 2), this.getScaledValue(lineWidget.height - lineWidget.margin.bottom), 1, color);\n        }\n      }\n      if (elementBox instanceof BookmarkElementBox && this.documentHelper.owner.documentEditorSettings.showBookmarks && this.documentHelper.getBookmarks().indexOf(elementBox.name) !== -1) {\n        var height = elementBox.line.height - elementBox.line.margin.bottom;\n        var xLeft = left;\n        var yTop = top;\n        if (elementBox.bookmarkType == 1) {\n          if (this.isBookmarkEndAtStart(elementBox) && isNullOrUndefined(elementBox.properties)) {\n            var previousParaElement = elementBox.paragraph;\n            var prevRenderableElement = void 0;\n            var isRenderablePresent = false;\n            while (!isRenderablePresent && !isNullOrUndefined(previousParaElement)) {\n              var lineIndex = previousParaElement.childWidgets.indexOf(elementBox.line) >= 0 ? previousParaElement.childWidgets.indexOf(elementBox.line) : previousParaElement.childWidgets.length - 1;\n              for (var i_1 = lineIndex; i_1 >= 0; i_1--) {\n                var line = previousParaElement.childWidgets[i_1];\n                var elementIndex = line.children.indexOf(elementBox) >= 0 ? line.children.indexOf(elementBox) : line.children.length - 1;\n                for (var j = elementIndex; j >= 0; j--) {\n                  if (this.isRenderable(line.children[j])) {\n                    prevRenderableElement = line.children[j];\n                    isRenderablePresent = true;\n                    break;\n                  }\n                }\n                if (isRenderablePresent) {\n                  break;\n                }\n              }\n              if (!isRenderablePresent) {\n                previousParaElement = this.documentHelper.selection.getPreviousParagraphBlock(previousParaElement);\n              }\n            }\n            if (!isNullOrUndefined(prevRenderableElement)) {\n              xLeft += this.documentHelper.selection.getWidth(prevRenderableElement.line, false) + this.documentHelper.textHelper.getParagraphMarkWidth(elementBox.line.paragraph.characterFormat);\n              yTop = this.documentHelper.selection.getTop(prevRenderableElement.line);\n            }\n          }\n          if (!isNullOrUndefined(elementBox.properties)) {\n            if (elementBox.properties['isAfterParagraphMark']) {\n              xLeft += this.documentHelper.textHelper.getParagraphMarkWidth(elementBox.line.paragraph.characterFormat);\n            }\n            if (elementBox.properties['isAfterCellMark']) {\n              xLeft += this.documentHelper.textHelper.getWidth(String.fromCharCode(164), lineWidget.paragraph.characterFormat);\n            }\n          }\n        }\n        if (elementBox.bookmarkType == 1) {\n          if (!isNullOrUndefined(elementBox.reference)) {\n            if (isNullOrUndefined(elementBox.reference.properties)) {\n              if (!this.documentHelper.selection.isRenderBookmarkAtEnd(elementBox)) {\n                bookmarks.push({\n                  x: xLeft,\n                  y: yTop,\n                  height: height,\n                  type: elementBox.bookmarkType\n                });\n              }\n            } else {\n              var bookmarkEndCell = elementBox.paragraph.associatedCell;\n              if (isNullOrUndefined(bookmarkEndCell)) {\n                bookmarks.push({\n                  x: xLeft,\n                  y: yTop,\n                  height: height,\n                  type: elementBox.bookmarkType\n                });\n              }\n            }\n          }\n        } else {\n          if (isNullOrUndefined(elementBox.properties)) {\n            bookmarks.push({\n              x: xLeft,\n              y: yTop,\n              height: height,\n              type: elementBox.bookmarkType\n            });\n          }\n        }\n      }\n      if (elementBox instanceof FieldElementBox || this.isFieldCode || elementBox.width === 0 && elementBox.height === 0) {\n        if (this.isFieldCode) {\n          elementBox.width = 0;\n        }\n        left += elementBox.width + elementBox.margin.left;\n        this.toSkipFieldCode(elementBox);\n        continue;\n      }\n      if (!this.isPrinting) {\n        if (this.getScaledValue(top + elementBox.margin.top, 2) + elementBox.height * this.documentHelper.zoomFactor < 0 || this.getScaledValue(top + elementBox.margin.top, 2) > this.documentHelper.visibleBounds.height) {\n          left += elementBox.width + elementBox.margin.left;\n          if (elementBox instanceof TextElementBox) {\n            if (this.documentHelper.owner.isSpellCheck) {\n              elementBox.canTrigger = true;\n            }\n            elementBox.isVisible = false;\n            if (!elementBox.isSpellChecked || elementBox.line.paragraph.isChangeDetected) {\n              elementBox.ischangeDetected = true;\n            }\n          }\n          continue;\n        }\n      }\n      if (elementBox instanceof ListTextElementBox) {\n        this.renderListTextElementBox(elementBox, left, top, underlineY);\n      } else if (elementBox instanceof ImageElementBox) {\n        left += elementBox.padding.left;\n        this.renderImageElementBox(elementBox, left, top, underlineY);\n      } else if (elementBox instanceof ShapeElementBox) {\n        var shapeLeftMargin = elementBox.margin.left;\n        var shapeLeft = this.getScaledValue(left + shapeLeftMargin, 1);\n        var shapeTop = this.getScaledValue(top, 2);\n        this.renderShapeElementBox(elementBox, shapeLeft, shapeTop, page);\n      } else {\n        elementBox.isVisible = true;\n        left += elementBox.padding.left;\n        this.renderTextElementBox(elementBox, left, top, underlineY);\n      }\n      left += elementBox.width + elementBox.margin.left;\n      if (lineWidget.paragraph.bidi) {\n        x += elementBox.margin.left;\n      } else {\n        x = left;\n      }\n    }\n    if (this.documentHelper.owner.documentEditorSettings.showBookmarks && bookmarks.length > 0) {\n      for (var i = 0; i < bookmarks.length; i++) {\n        var bookmark = bookmarks[i];\n        this.renderBookmark(this.getScaledValue(bookmark.x, 1), this.getScaledValue(bookmark.y, 2), this.getScaledValue(bookmark.height), bookmark.type);\n      }\n    }\n    if (this.documentHelper.owner.documentEditorSettings.showHiddenMarks && !this.isPrinting) {\n      var text = '';\n      var currentCharFormat = lineWidget.paragraph.characterFormat;\n      var y = 0;\n      var characterFont = this.retriveCharacterformat(currentCharFormat);\n      var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n      l10n.setLocale(this.documentHelper.owner.locale);\n      this.pageContext.fillStyle = HelperMethods.getColor(currentCharFormat.fontColor);\n      if (children.length == 0 && !lineWidget.isEndsWithLineBreak && !isNullOrUndefined(lineWidget.paragraph) || lineWidget.paragraph.childWidgets.length === 1) {\n        y = lineWidget.paragraph.y + this.documentHelper.textHelper.getHeight(currentCharFormat).BaselineOffset + this.documentHelper.layout.getBeforeSpacing(lineWidget.paragraph);\n        //Paragraph with empty linewidgets with mutiple line breaks\n        if (!lineWidget.isEndsWithLineBreak && lineWidget.indexInOwner > 0 && children.length == 0) {\n          y = top + lineWidget.previousLine.maxBaseLine;\n        }\n      } else {\n        y = top + lineWidget.maxBaseLine;\n      }\n      if (currentCharFormat.revisions.length > 0) {\n        //CharacterFormat Track changes is not supported., Hence only the Para mark changes are parsed and preserved in the charcterForamt. \n        var color = this.documentHelper.authors.get(currentCharFormat.revisions[0].author);\n        this.pageContext.fillStyle = HelperMethods.getColor(color);\n      }\n      if (lineWidget.isEndsWithColumnBreak) {\n        characterFont = this.retriveCharacterformat(currentCharFormat, 0.7);\n        text = \".....\" + l10n.getConstant('Column Break') + \".....\";\n      } else if (lineWidget.isEndsWithPageBreak) {\n        characterFont = this.retriveCharacterformat(currentCharFormat, 0.7);\n        if (lineWidget.paragraph.bidi) {\n          text = String.fromCharCode(182) + '.....' + l10n.getConstant('Page Break') + '.....';\n        } else {\n          text = '.....' + l10n.getConstant('Page Break') + '.....' + String.fromCharCode(182);\n        }\n        var textinfo = this.documentHelper.textHelper.getWidth(text, currentCharFormat, FontScriptType.English);\n        if (this.viewer instanceof PageLayoutViewer) {\n          if (lineWidget.paragraph.bidi) {\n            if (x < textinfo + this.viewer.clientActiveArea.x) {\n              text = '.....';\n            }\n          } else {\n            if (x > this.viewer.clientActiveArea.width) {\n              text = '.....';\n            }\n          }\n        } else {\n          if (lineWidget.paragraph.bidi) {\n            if (x - textinfo < this.viewer.clientActiveArea.x) {\n              text = '.....';\n            }\n          } else {\n            if (x + textinfo > this.viewer.clientActiveArea.width + this.viewer.clientActiveArea.x) {\n              text = '.....';\n            }\n          }\n        }\n      } else if (lineWidget.isEndsWithLineBreak) {\n        text = lineWidget.paragraph.bidi ? String.fromCharCode(8627) : String.fromCharCode(8629);\n      } else if (lineWidget.paragraph.isInsideTable && isNullOrUndefined(lineWidget.nextLine) && isNullOrUndefined(lineWidget.paragraph.nextWidget)) {\n        if (lineWidget.height != 0) {\n          //The nested table parent cell mark is render the out bound ,So skip cell mark is linewidget height equal to zero \n          text = String.fromCharCode(164);\n        }\n      } else if (isNullOrUndefined(lineWidget.nextLine)) {\n        text = String.fromCharCode(182);\n      }\n      if (lineWidget.paragraph.containerWidget instanceof BodyWidget && !isNullOrUndefined(lineWidget.paragraph.nextRenderedWidget)) {\n        if (lineWidget.paragraph.containerWidget.sectionIndex !== lineWidget.paragraph.nextRenderedWidget.containerWidget.sectionIndex && lineWidget.isLastLine()) {\n          if (lineWidget.paragraph.nextRenderedWidget.containerWidget.sectionFormat.breakCode === 'NoBreak' && lineWidget.paragraph.containerWidget.index !== lineWidget.paragraph.nextRenderedWidget.containerWidget.index) {\n            text = ':::::' + l10n.getConstant('Section Break Continuous') + ':::::';\n          } else {\n            text = ':::::' + l10n.getConstant('Section Break Next Page') + ':::::';\n          }\n          characterFont = this.retriveCharacterformat(currentCharFormat, 0.7);\n          if (lineWidget.isEndsWithPageBreak) {\n            if (lineWidget.paragraph.bidi) {\n              text = text + String.fromCharCode(182) + '.....' + l10n.getConstant('Page Break') + '.....';\n            } else {\n              text = '.....' + l10n.getConstant('Page Break') + '.....' + String.fromCharCode(182) + text;\n            }\n          }\n          var textinfo = this.documentHelper.textHelper.getWidth(text, currentCharFormat, FontScriptType.English);\n          if (this.viewer instanceof PageLayoutViewer) {\n            if (lineWidget.paragraph.bidi) {\n              if (x < textinfo + this.viewer.clientActiveArea.x) {\n                text = ':::::';\n                if (lineWidget.isEndsWithPageBreak) {\n                  text = ':::::.....';\n                }\n              }\n            } else {\n              if (x + textinfo - this.viewer.clientActiveArea.x > this.viewer.clientActiveArea.width) {\n                text = ':::::';\n                if (lineWidget.isEndsWithPageBreak) {\n                  text = '.....:::::';\n                }\n              }\n            }\n          } else {\n            if (lineWidget.paragraph.bidi) {\n              if (x - textinfo < this.viewer.clientActiveArea.x) {\n                text = ':::::';\n                if (lineWidget.isEndsWithPageBreak) {\n                  text = ':::::.....';\n                }\n              }\n            } else {\n              if (x + textinfo - this.documentHelper.pages[0].boundingRectangle.x > this.viewer.clientActiveArea.width) {\n                text = ':::::';\n                if (lineWidget.isEndsWithPageBreak) {\n                  text = '.....:::::';\n                }\n              }\n            }\n          }\n        }\n      }\n      if (text.length > 0) {\n        if (lineWidget.paragraph.bidi && !lineWidget.paragraph.isEmpty()) {\n          x -= this.documentHelper.textHelper.getWidth(text, currentCharFormat, FontScriptType.English);\n        }\n        this.pageContext.font = characterFont;\n        var scaleFactor = currentCharFormat.scaling < 100 ? 1 : currentCharFormat.scaling / 100;\n        this.pageContext.letterSpacing = currentCharFormat.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n        this.pageContext.save();\n        this.pageContext.scale(scaleFactor, 1);\n        this.pageContext.fillText(text, this.getScaledValue(x, 1) / scaleFactor, this.getScaledValue(y, 2));\n        this.pageContext.restore();\n      }\n    }\n  };\n  Renderer.prototype.isBookmarkEndAtStart = function (bookmark) {\n    var para = bookmark.paragraph;\n    var index = 0;\n    var firstLine = para.childWidgets[index];\n    var isBookmarkAtStart = true;\n    while (firstLine.children.indexOf(bookmark) == -1) {\n      firstLine = para.childWidgets[++index];\n      if (index == para.childWidgets.length) {\n        break;\n      }\n    }\n    if (bookmark.line != firstLine) {\n      return false;\n    }\n    var bookmarkIndex = firstLine.children.indexOf(bookmark) >= 0 ? firstLine.children.indexOf(bookmark) : -1;\n    for (var i = bookmarkIndex; i >= 0; i--) {\n      var element = firstLine.children[i];\n      if (this.isRenderable(element)) {\n        isBookmarkAtStart = false;\n      }\n    }\n    if (isBookmarkAtStart) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  Renderer.prototype.isRenderable = function (element) {\n    if (!(element instanceof BookmarkElementBox || element instanceof EditRangeStartElementBox || element instanceof EditRangeEndElementBox)) {\n      return true;\n    }\n    return false;\n  };\n  Renderer.prototype.combineHexColors = function (color1, color2) {\n    var hex1 = color1.replace(\"#\", \"\");\n    var hex2 = color2.replace(\"#\", \"\");\n    var r1 = parseInt(hex1.substring(0, 2), 16);\n    var g1 = parseInt(hex1.substring(2, 4), 16);\n    var b1 = parseInt(hex1.substring(4, 6), 16);\n    var r2 = parseInt(hex2.substring(0, 2), 16);\n    var g2 = parseInt(hex2.substring(2, 4), 16);\n    var b2 = parseInt(hex2.substring(4, 6), 16);\n    var r = Math.round(r1 * 0.35 + r2 * 0.65);\n    var g = Math.round(g1 * 0.35 + g2 * 0.65);\n    var b = Math.round(b1 * 0.35 + b2 * 0.65);\n    var mixedColor = \"#\" + r.toString(16) + g.toString(16) + b.toString(16);\n    return mixedColor;\n  };\n  Renderer.prototype.renderBookmark = function (x, y, height, type, restrictColor) {\n    if (this.isPrinting) {\n      return;\n    }\n    this.pageContext.beginPath();\n    this.pageContext.lineWidth = 1.5;\n    var extensionLength = 3;\n    if (type == 0) {\n      this.pageContext.moveTo(x + extensionLength, y);\n      this.pageContext.lineTo(x, y);\n      this.pageContext.lineTo(x, y + height);\n      this.pageContext.lineTo(x + extensionLength, y + height);\n    }\n    if (type == 1) {\n      this.pageContext.moveTo(x - extensionLength, y);\n      this.pageContext.lineTo(x, y);\n      this.pageContext.lineTo(x, y + height);\n      this.pageContext.lineTo(x - extensionLength, y + height);\n    }\n    this.pageContext.strokeStyle = \"#7F7F7F\";\n    this.pageContext.stroke();\n    this.pageContext.closePath();\n    if (!isNullOrUndefined(restrictColor)) {\n      var combinedColor = this.combineHexColors(restrictColor, \"#7F7F7F\");\n      this.pageContext.fillStyle = combinedColor;\n      this.pageContext.fillRect(x, y, 1.5, height);\n    }\n  };\n  Renderer.prototype.retriveCharacterformat = function (character, fontSizeFactor) {\n    if (isNullOrUndefined(fontSizeFactor)) {\n      fontSizeFactor = 1;\n    }\n    var font = '';\n    this.pageContext.textBaseline = 'alphabetic';\n    var bold = '';\n    var italic = '';\n    var fontSize = 11;\n    var fontFamily = '';\n    bold = character.bold ? 'bold' : '';\n    italic = character.italic ? 'italic' : '';\n    fontSize = character.fontSize === 0 ? 0.5 : character.fontSize / (character.baselineAlignment === 'Normal' ? 1 : 1.5);\n    fontSize = fontSize * this.documentHelper.zoomFactor * fontSizeFactor;\n    fontFamily = character.fontFamily;\n    font = bold + ' ' + italic + ' ' + fontSize + 'pt' + ' ' + '\"' + fontFamily + '\"';\n    return font;\n  };\n  Renderer.prototype.toSkipFieldCode = function (element) {\n    if (element instanceof FieldElementBox) {\n      if (element.fieldType === 0) {\n        if (!this.isFieldCode && (!isNullOrUndefined(element.fieldEnd) || element.hasFieldEnd)) {\n          this.fieldStacks.push(element);\n          this.isFieldCode = true;\n        }\n      } else if (element.fieldType === 2 || element.fieldType === 1) {\n        if (this.fieldStacks.length > 0 && element.fieldBegin === this.fieldStacks[this.fieldStacks.length - 1]) {\n          this.fieldStacks.pop();\n          this.isFieldCode = false;\n        }\n      }\n    }\n  };\n  Renderer.prototype.getUnderlineYPosition = function (lineWidget) {\n    var height = 0;\n    var lineHeight = 0;\n    for (var i = 0; i < lineWidget.children.length; i++) {\n      if (lineWidget.children[i] instanceof FieldElementBox || lineWidget.children[i].width === 0 && lineWidget.children[i].height === 0) {\n        continue;\n      }\n      if (lineWidget.children[i] instanceof ShapeElementBox) {\n        continue;\n      } else {\n        if (height < lineWidget.children[i].height + lineWidget.children[i].margin.top) {\n          height = lineWidget.children[i].margin.top + lineWidget.children[i].height;\n          lineHeight = lineWidget.children[i] instanceof ImageElementBox ? 0.9 : lineWidget.children[i].height / 20;\n        }\n      }\n    }\n    return height - 2 * lineHeight;\n  };\n  Renderer.prototype.renderListTextElementBox = function (elementBox, left, top, underlineY) {\n    var topMargin = elementBox.margin.top;\n    var leftMargin = elementBox.margin.left;\n    var format = elementBox.listLevel.characterFormat;\n    var breakCharacterFormat = elementBox.line.paragraph.characterFormat;\n    var color = format.hasValue('fontColor') ? format.fontColor : breakCharacterFormat.fontColor;\n    this.pageContext.textBaseline = 'alphabetic';\n    var bold = '';\n    var italic = '';\n    var fontFamily = format.hasValue('fontFamily') ? format.fontFamily : breakCharacterFormat.fontFamily;\n    if (this.documentHelper.isIosDevice && (elementBox.text === String.fromCharCode(9679) || elementBox.text === String.fromCharCode(9675))) {\n      fontFamily = '';\n    }\n    var fontSize = format.hasValue('fontSize') ? format.fontSize : breakCharacterFormat.fontSize;\n    var baselineAlignment = format.hasValue('baselineAlignment') ? format.baselineAlignment : breakCharacterFormat.baselineAlignment;\n    bold = format.hasValue('bold') ? format.bold ? 'bold' : '' : breakCharacterFormat.bold ? 'bold' : '';\n    italic = format.hasValue('italic') ? format.italic ? 'italic' : '' : breakCharacterFormat.italic ? 'italic' : '';\n    fontSize = fontSize === 0 ? 0.5 : fontSize / (baselineAlignment === 'Normal' ? 1 : 1.5);\n    fontSize = this.isPrinting ? fontSize : fontSize * this.documentHelper.zoomFactor;\n    var strikethrough = format.hasValue('strikethrough') ? format.strikethrough : breakCharacterFormat.strikethrough;\n    var highlightColor = format.hasValue('highlightColor') ? format.highlightColor : breakCharacterFormat.highlightColor;\n    if (highlightColor !== 'NoColor') {\n      if (highlightColor.substring(0, 1) !== '#') {\n        this.pageContext.fillStyle = HelperMethods.getHighlightColorCode(highlightColor);\n      } else {\n        this.pageContext.fillStyle = HelperMethods.getColor(highlightColor);\n      }\n      this.pageContext.fillRect(Math.floor(this.getScaledValue(left + leftMargin, 1)), Math.floor(this.getScaledValue(top + topMargin, 2) - 1), Math.ceil(this.getScaledValue(elementBox.width) + 1), Math.ceil(this.getScaledValue(elementBox.height) + 1));\n    }\n    this.pageContext.font = bold + ' ' + italic + ' ' + fontSize + 'pt' + ' ' + '\"' + fontFamily + '\"';\n    if (baselineAlignment === 'Subscript') {\n      topMargin += elementBox.height - elementBox.height / 1.5;\n    }\n    var baselineOffset = elementBox.baselineOffset;\n    topMargin = format.baselineAlignment === 'Normal' ? topMargin + baselineOffset : topMargin + baselineOffset / 1.5;\n    var text = elementBox.text;\n    var isParaBidi = elementBox.paragraph.paragraphFormat.bidi;\n    if (isParaBidi) {\n      this.pageContext.direction = 'rtl';\n      left += elementBox.width;\n    }\n    // \"empty\" is old value used for auto color till v19.2.49. It is maintained for backward compatibility.\n    if (color === \"empty\" || color === '#00000000') {\n      var bgColor = this.getBackgroundColorHeirachy(elementBox);\n      this.pageContext.fillStyle = this.getDefaultFontColor(bgColor);\n    } else {\n      this.pageContext.fillStyle = HelperMethods.getColor(color);\n    }\n    var scaleFactor = format.scaling < 100 ? 1 : format.scaling / 100;\n    if (this.documentHelper.owner.documentEditorSettings.showHiddenMarks && !this.isPrinting) {\n      if (elementBox instanceof ListTextElementBox && elementBox.text === \"\\t\") {\n        this.tabMark(elementBox, format, left, top, leftMargin, topMargin);\n      }\n      this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n      this.pageContext.save();\n      this.pageContext.scale(scaleFactor, 1);\n      this.pageContext.fillText(this.replaceSpace(text), this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width));\n      this.pageContext.restore();\n    } else {\n      this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n      this.pageContext.save();\n      this.pageContext.scale(scaleFactor, 1);\n      this.pageContext.fillText(text, this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width));\n      this.pageContext.restore();\n    }\n    if (isParaBidi) {\n      this.pageContext.direction = 'ltr';\n      left -= elementBox.width;\n    }\n    if (format.underline !== 'None' && !isNullOrUndefined(format.underline)) {\n      this.renderUnderline(elementBox, left, top, underlineY, color, format.underline, baselineAlignment);\n    }\n    if (strikethrough !== 'None') {\n      this.renderStrikeThrough(elementBox, left, top, format.strikethrough, color, baselineAlignment);\n    }\n  };\n  Renderer.prototype.getDefaultFontColor = function (backColor) {\n    if (HelperMethods.isVeryDark(backColor)) {\n      return \"#FFFFFF\";\n    } else {\n      return \"#000000\";\n    }\n  };\n  Renderer.prototype.renderTextElementBox = function (elementBox, left, top, underlineY) {\n    var isHeightType = false;\n    var containerWidget = elementBox.line.paragraph.containerWidget;\n    if (containerWidget instanceof TableCellWidget) {\n      isHeightType = containerWidget.ownerRow.rowFormat.heightType === 'Exactly';\n    }\n    var topMargin = elementBox.margin.top;\n    var leftMargin = elementBox.margin.left;\n    if (isHeightType && containerWidget instanceof TableCellWidget) {\n      var width = containerWidget.width + containerWidget.margin.left + containerWidget.margin.right - containerWidget.leftBorderWidth;\n      this.clipRect(containerWidget.x - containerWidget.margin.left, containerWidget.y, this.getScaledValue(width), this.getScaledValue(containerWidget.height));\n    }\n    var format = elementBox.characterFormat;\n    var doHighLight = true;\n    if (format.highlightColor != \"NoColor\" && elementBox.text.trim() == \"\") {\n      var firstLine = elementBox.line.paragraph.firstChild;\n      var lastLine = elementBox.line.paragraph.lastChild;\n      if (!isNullOrUndefined(firstLine) && firstLine instanceof LineWidget && firstLine.children.length > 0 && elementBox === firstLine.children[0]) {\n        doHighLight = false;\n      }\n      if (!isNullOrUndefined(lastLine) && lastLine instanceof LineWidget && lastLine.children.length > 0 && elementBox === lastLine.children[lastLine.children.length - 1]) {\n        doHighLight = false;\n      }\n    }\n    if (format.highlightColor !== 'NoColor' && doHighLight) {\n      if (format.highlightColor.substring(0, 1) !== '#') {\n        this.pageContext.fillStyle = HelperMethods.getHighlightColorCode(format.highlightColor);\n      } else {\n        this.pageContext.fillStyle = HelperMethods.getColor(format.highlightColor);\n      }\n      this.pageContext.fillRect(Math.floor(this.getScaledValue(left + leftMargin, 1)), Math.floor(this.getScaledValue(top + topMargin, 2) - 1), Math.ceil(this.getScaledValue(elementBox.width) + 1), Math.ceil(this.getScaledValue(elementBox.height) + 1));\n    }\n    var revisionInfo = this.checkRevisionType(elementBox);\n    var color = revisionInfo.length > 0 ? this.getRevisionColor(revisionInfo) : format.fontColor;\n    this.pageContext.textBaseline = 'alphabetic';\n    var bold = '';\n    var italic = '';\n    var fontSize = 11;\n    bold = format.bold ? 'bold' : '';\n    italic = format.italic ? 'italic' : '';\n    fontSize = format.fontSize === 0 ? 0.5 : format.fontSize / (format.baselineAlignment === 'Normal' ? 1 : 1.5);\n    fontSize = this.isPrinting ? fontSize : fontSize * this.documentHelper.zoomFactor;\n    var renderFontFamily = this.documentHelper.textHelper.getFontNameToRender(elementBox.scriptType, format);\n    this.pageContext.font = bold + ' ' + italic + ' ' + fontSize + 'pt' + ' ' + '\"' + renderFontFamily + '\"';\n    if (format.baselineAlignment === 'Subscript') {\n      topMargin += elementBox.height - elementBox.height / 1.5;\n    }\n    var baselineOffset = elementBox.baselineOffset;\n    topMargin = format.baselineAlignment === 'Normal' ? topMargin + baselineOffset : topMargin + baselineOffset / 1.5;\n    // \"empty\" is old value used for auto color till v19.2.49. It is maintained for backward compatibility.\n    if (color === \"empty\" || color === '#00000000') {\n      var bgColor = this.getBackgroundColorHeirachy(elementBox);\n      this.pageContext.fillStyle = this.getDefaultFontColor(bgColor);\n    } else {\n      this.pageContext.fillStyle = HelperMethods.getColor(color);\n    }\n    var scaledWidth = this.getScaledValue(elementBox.width);\n    var text = elementBox.text;\n    if (elementBox instanceof TabElementBox) {\n      var tabElement = elementBox;\n      if (tabElement.tabText === '' && !isNullOrUndefined(tabElement.tabLeader) && tabElement.tabLeader !== 'None') {\n        text = this.getTabLeader(elementBox);\n        tabElement.tabText = text;\n      } else if (tabElement.tabText !== '') {\n        text = tabElement.tabText;\n      }\n    }\n    //this.pageContext.direction = 'ltr';\n    var isRTL = format.bidi || this.documentHelper.textHelper.isRTLText(elementBox.text);\n    text = this.documentHelper.textHelper.setText(text, isRTL, format.bdo, true);\n    if (format.allCaps) {\n      text = text.toUpperCase();\n    }\n    var characterRange = elementBox.characterRange;\n    if ((characterRange == CharacterRangeType.WordSplit || (characterRange & CharacterRangeType.WordSplit) == CharacterRangeType.WordSplit && (characterRange & CharacterRangeType.RightToLeft) == CharacterRangeType.RightToLeft) && format.bidi) {\n      text = this.inverseCharacter(text);\n    }\n    var scaleFactor = format.scaling < 100 ? 1 : format.scaling / 100;\n    if (characterRange === CharacterRangeType.RightToLeft && !HelperMethods.startsWith(text, ' ')) {\n      this.pageContext.direction = 'rtl';\n      left += elementBox.width;\n    }\n    if (this.documentHelper.owner.documentEditorSettings.showHiddenMarks && !this.isPrinting) {\n      if ((elementBox instanceof TabElementBox || elementBox instanceof TextElementBox) && elementBox.text === \"\\t\") {\n        this.tabMark(elementBox, format, left, top, leftMargin, topMargin);\n      }\n      if (text === '\\r') {\n        text = String.fromCharCode(182);\n      }\n      this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n      this.pageContext.save();\n      this.pageContext.scale(scaleFactor, 1);\n      this.pageContext.fillText(this.replaceSpace(text), this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), scaledWidth);\n      this.pageContext.restore();\n    } else {\n      this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n      this.pageContext.save();\n      this.pageContext.scale(scaleFactor, 1);\n      this.pageContext.fillText(text, this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), scaledWidth);\n      this.pageContext.restore();\n    }\n    if (characterRange === CharacterRangeType.RightToLeft && !HelperMethods.startsWith(text, ' ')) {\n      this.pageContext.direction = 'ltr';\n      left -= elementBox.width;\n    }\n    if (this.documentHelper.owner.isSpellCheck) {\n      if (this.documentHelper.owner.isSpellCheck && !this.spellChecker.removeUnderline && (this.documentHelper.triggerSpellCheck || elementBox.canTrigger) && elementBox.text !== ' ' && !this.documentHelper.isScrollHandler && (isNullOrUndefined(elementBox.previousNode) || !(elementBox.previousNode instanceof FieldElementBox))) {\n        elementBox.canTrigger = true;\n        this.leftPosition = this.pageLeft;\n        this.topPosition = this.pageTop;\n        var errorDetails = this.spellChecker.checktextElementHasErrors(elementBox.text, elementBox, left);\n        if (errorDetails.errorFound && !this.isPrinting) {\n          color = '#FF0000';\n          var backgroundColor = containerWidget instanceof TableCellWidget ? containerWidget.cellFormat.shading.backgroundColor : this.documentHelper.backgroundColor;\n          var errors = this.spellChecker.errorWordCollection;\n          for (var i = 0; i < errorDetails.elements.length; i++) {\n            var currentElement = errorDetails.elements[i];\n            var exactText = this.spellChecker.manageSpecialCharacters(currentElement.text, undefined, true);\n            if (elementBox.ignoreOnceItems.indexOf(exactText) === -1) {\n              if (isRTL) {\n                this.renderWavyLine(currentElement, isNullOrUndefined(currentElement.end) ? left : currentElement.end.location.x, top, underlineY, color, 'Single', format.baselineAlignment, backgroundColor);\n              } else {\n                this.renderWavyLine(currentElement, isNullOrUndefined(currentElement.start) ? left : currentElement.start.location.x, top, underlineY, color, 'Single', format.baselineAlignment, backgroundColor);\n              }\n              if (errors.containsKey(exactText)) {\n                var errorElements = errors.get(exactText);\n                if (errorElements.indexOf(currentElement) === -1) {\n                  errorElements.push(currentElement);\n                }\n              }\n            }\n          }\n        } else if (elementBox.ischangeDetected || this.documentHelper.triggerElementsOnLoading) {\n          elementBox.ischangeDetected = false;\n          this.handleChangeDetectedElements(elementBox, underlineY, left, top, format.baselineAlignment);\n        }\n      }\n    }\n    var currentInfo = this.getRevisionType(revisionInfo, true);\n    if (format.underline !== 'None' && !isNullOrUndefined(format.underline) || !isNullOrUndefined(currentInfo) && (currentInfo.type === 'Insertion' || currentInfo.type === 'MoveTo')) {\n      this.renderUnderline(elementBox, left, top, underlineY, color, format.underline, format.baselineAlignment, currentInfo);\n    }\n    currentInfo = this.getRevisionType(revisionInfo, false);\n    if (format.strikethrough !== 'None' && !isNullOrUndefined(format.strikethrough) || !isNullOrUndefined(currentInfo) && (currentInfo.type === 'Deletion' || currentInfo.type === 'MoveFrom')) {\n      this.renderStrikeThrough(elementBox, left, top, format.strikethrough, color, format.baselineAlignment, currentInfo);\n    }\n    if (isHeightType) {\n      this.pageContext.restore();\n    }\n  };\n  Renderer.prototype.tabMark = function (elementBox, format, left, top, leftMargin, topMargin) {\n    var tabMarkString = elementBox.paragraph.bidi ? String.fromCharCode(8592) : String.fromCharCode(8594);\n    var tabMarkWidth = this.documentHelper.textHelper.getWidth(tabMarkString, format, elementBox.scriptType);\n    var availableSpaceWidth = elementBox.width / 2;\n    var tabWidth = tabMarkWidth / 2;\n    this.pageContext.font = this.retriveCharacterformat(elementBox.characterFormat);\n    this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n    this.pageContext.save();\n    var scaleFactor = format.scaling < 100 ? 1 : format.scaling / 100;\n    this.pageContext.scale(scaleFactor, 1);\n    if (availableSpaceWidth > tabMarkWidth) {\n      this.pageContext.fillText(tabMarkString, this.getScaledValue(left + leftMargin + availableSpaceWidth - tabWidth, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2));\n    } else {\n      this.pageContext.fillText(tabMarkString, this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width));\n    }\n    this.pageContext.restore();\n  };\n  Renderer.prototype.replaceSpace = function (text) {\n    text = text.replace(new RegExp(String.fromCharCode(32), 'g'), String.fromCharCode(183));\n    text = text.replace(new RegExp(String.fromCharCode(160), 'g'), String.fromCharCode(176));\n    return text;\n  };\n  Renderer.prototype.inverseCharacter = function (ch) {\n    switch (ch) {\n      //Specify the '('\n      case String.fromCharCode(40):\n        //Specify the ')'\n        return String.fromCharCode(41);\n      //Specify the ')'\n      case String.fromCharCode(41):\n        //Specify the '('\n        return String.fromCharCode(40);\n      //Specify the '<'\n      case String.fromCharCode(60):\n        //Specify the '>'\n        return String.fromCharCode(62);\n      //Specify the '>'\n      case String.fromCharCode(62):\n        //Specify the '<'\n        return String.fromCharCode(60);\n      //Specify the '{'\n      case String.fromCharCode(123):\n        //Specify the '}'\n        return String.fromCharCode(125);\n      //Specify the '}'\n      case String.fromCharCode(125):\n        //Specify the '{'\n        return String.fromCharCode(123);\n      //Specify the '['\n      case String.fromCharCode(91):\n        //Specify the ']'\n        return String.fromCharCode(93);\n      //Specify the ']'\n      case String.fromCharCode(93):\n        //Specify the '['\n        return String.fromCharCode(91);\n      default:\n        return ch;\n    }\n  };\n  Renderer.prototype.getBackgroundColorHeirachy = function (element) {\n    var bgColor;\n    // \"empty\" is old value used for auto color till v19.2.49. It is maintained for backward compatibility.\n    if (element.paragraph.isInsideTable) {\n      var cell = element.paragraph.containerWidget;\n      bgColor = cell.cellFormat.shading.backgroundColor;\n      if (bgColor !== \"empty\" && bgColor !== '#00000000') {\n        return bgColor;\n      } else {\n        bgColor = cell.ownerTable.tableFormat.shading.backgroundColor;\n        if (bgColor !== \"empty\" && bgColor !== '#00000000') {\n          return bgColor;\n        }\n      }\n    } else if (element.paragraph.containerWidget instanceof TextFrame && !isNullOrUndefined(element.paragraph.containerWidget.containerShape) && !isNullOrUndefined(element.paragraph.containerWidget.containerShape.fillFormat) && element.paragraph.containerWidget.containerShape.fillFormat.color === '#000000FF') {\n      return element.paragraph.containerWidget.containerShape.fillFormat.color;\n    }\n    return this.documentHelper.backgroundColor;\n  };\n  Renderer.prototype.handleChangeDetectedElements = function (elementBox, underlineY, left, top, baselineAlignment) {\n    var _this = this;\n    var checkText = elementBox.text.trim();\n    var beforeIndex = this.pageIndex;\n    if (elementBox.text === '\\v') {\n      return;\n    }\n    if (!this.spellChecker.checkElementCanBeCombined(elementBox, underlineY, beforeIndex, true)) {\n      /* eslint-disable @typescript-eslint/no-explicit-any */\n      var splittedText = checkText.split(/[\\s]+/);\n      var markindex = elementBox.line.getOffset(elementBox, 0);\n      var spaceValue = 1;\n      if (splittedText.length > 1) {\n        for (var i = 0; i < splittedText.length; i++) {\n          var currentText = splittedText[i];\n          var retrievedText = this.spellChecker.manageSpecialCharacters(currentText, undefined, true);\n          if (this.spellChecker.ignoreAllItems.indexOf(retrievedText) === -1 && elementBox.ignoreOnceItems.indexOf(retrievedText) === -1) {\n            this.handleUnorderedElements(retrievedText, elementBox, underlineY, i, markindex, i === splittedText.length - 1, beforeIndex);\n            markindex += currentText.length + spaceValue;\n          }\n        }\n      } else {\n        var retrievedText = this.spellChecker.manageSpecialCharacters(checkText, undefined, true);\n        if (checkText.length > 0) {\n          if (this.spellChecker.ignoreAllItems.indexOf(retrievedText) === -1 && elementBox.ignoreOnceItems.indexOf(retrievedText) === -1) {\n            var indexInLine_1 = elementBox.indexInOwner;\n            var indexinParagraph_1 = elementBox.line.paragraph.indexInOwner;\n            var spellInfo = this.spellChecker.checkSpellingInPageInfo(retrievedText);\n            if (spellInfo.isElementPresent && this.spellChecker.enableOptimizedSpellCheck) {\n              var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + spellInfo.hasSpellError + '}');\n              this.spellChecker.handleWordByWordSpellCheck(jsonObject, elementBox, left, top, underlineY, baselineAlignment, true);\n            } else {\n              if (this.spellChecker.isInUniqueWords(retrievedText)) {\n                var hasSpellingError = this.spellChecker.isErrorWord(retrievedText) ? true : false;\n                var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + hasSpellingError + '}');\n                this.spellChecker.handleWordByWordSpellCheck(jsonObject, elementBox, left, top, underlineY, baselineAlignment, true);\n              } else if (!this.documentHelper.owner.editorModule.triggerPageSpellCheck || this.documentHelper.triggerElementsOnLoading) {\n                /* eslint-disable @typescript-eslint/no-explicit-any */\n                this.spellChecker.callSpellChecker(this.spellChecker.languageID, checkText, true, this.spellChecker.allowSpellCheckAndSuggestion).then(function (data) {\n                  /* eslint-disable @typescript-eslint/no-explicit-any */\n                  var jsonObject = JSON.parse(data);\n                  var canUpdate = (beforeIndex === _this.pageIndex || elementBox.isVisible) && indexInLine_1 === elementBox.indexInOwner && indexinParagraph_1 === elementBox.line.paragraph.indexInOwner;\n                  _this.spellChecker.handleWordByWordSpellCheck(jsonObject, elementBox, left, top, underlineY, baselineAlignment, canUpdate);\n                });\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  Renderer.prototype.handleUnorderedElements = function (currentText, elementBox, underlineY, iteration, markIndex, isLastItem, beforeIndex) {\n    var _this = this;\n    var indexInLine = elementBox.indexInOwner;\n    var indexinParagraph = elementBox.line.paragraph.indexInOwner;\n    if (currentText.length > 0) {\n      var spellInfo = this.spellChecker.checkSpellingInPageInfo(currentText);\n      if (spellInfo.isElementPresent && this.spellChecker.enableOptimizedSpellCheck) {\n        var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + spellInfo.hasSpellError + '}');\n        this.spellChecker.handleSplitWordSpellCheck(jsonObject, currentText, elementBox, true, underlineY, iteration, markIndex, isLastItem);\n      } else {\n        var canUpdate_1 = elementBox.isVisible && indexInLine === elementBox.indexInOwner && indexinParagraph === elementBox.line.paragraph.indexInOwner;\n        if (this.spellChecker.isInUniqueWords(currentText)) {\n          var hasSpellingError = this.spellChecker.isErrorWord(currentText) ? true : false;\n          var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + hasSpellingError + '}');\n          this.spellChecker.handleSplitWordSpellCheck(jsonObject, currentText, elementBox, canUpdate_1, underlineY, iteration, markIndex, isLastItem);\n        } else if (!this.documentHelper.owner.editorModule.triggerPageSpellCheck || this.documentHelper.triggerElementsOnLoading) {\n          /* eslint-disable @typescript-eslint/no-explicit-any */\n          this.spellChecker.callSpellChecker(this.spellChecker.languageID, currentText, true, this.spellChecker.allowSpellCheckAndSuggestion).then(function (data) {\n            /* eslint-disable @typescript-eslint/no-explicit-any */\n            var jsonObject = JSON.parse(data);\n            _this.spellChecker.handleSplitWordSpellCheck(jsonObject, currentText, elementBox, canUpdate_1, underlineY, iteration, markIndex, isLastItem);\n          });\n        }\n      }\n    }\n  };\n  Renderer.prototype.renderWavyLine = function (elementBox, left, top, underlineY, color, underline, baselineAlignment, backgroundColor) {\n    if (this.isPrinting) {\n      return;\n    }\n    if (elementBox.text.length > 1) {\n      var renderedHeight = elementBox.height / (baselineAlignment === 'Normal' ? 1 : 1.5);\n      var topMargin = elementBox.margin.top;\n      var underlineHeight = renderedHeight / 20;\n      var frequencyRange = 0.5;\n      var amplitudeRange = 1.0;\n      var stepToCover = .7;\n      var y = 0;\n      if (baselineAlignment === 'Subscript' || elementBox instanceof ListTextElementBox) {\n        y = renderedHeight - 2 * underlineHeight + top;\n        topMargin += elementBox.height - renderedHeight;\n        y += topMargin > 0 ? topMargin : 0;\n      } else {\n        y = underlineY + top;\n      }\n      var specialCharacter = this.spellChecker.getSpecialCharactersInfo(elementBox);\n      var whiteSpaceData = this.spellChecker.getWhiteSpaceCharacterInfo(elementBox);\n      var x = left + specialCharacter.beginningWidth + (whiteSpaceData.isBeginning ? whiteSpaceData.width : 0) + elementBox.margin.left;\n      var x1 = x * this.documentHelper.zoomFactor + this.leftPosition;\n      var y1 = y * this.documentHelper.zoomFactor + this.topPosition;\n      var x2 = x1 + this.getScaledValue(elementBox.width - (specialCharacter.beginningWidth + specialCharacter.endWidth) - whiteSpaceData.width);\n      var startingPoint = new Point(x1, y1);\n      var endingPoint = new Point(x2, y1);\n      this.drawWavy(startingPoint, endingPoint, (x2 - x1) * frequencyRange, amplitudeRange, stepToCover, color, elementBox.height, backgroundColor);\n    }\n  };\n  Renderer.prototype.drawWavy = function (from, to, frequency, amplitude, step, color, height, backColor, negative) {\n    this.pageContext.save();\n    this.pageContext.fillStyle = !isNullOrUndefined(backColor) ? backColor : this.documentHelper.backgroundColor;\n    this.pageContext.fillRect(from.x, from.y - amplitude, to.x - from.x, amplitude * 3);\n    this.pageContext.restore();\n    this.pageContext.lineWidth = 1;\n    this.pageContext.lineCap = 'round';\n    this.pageContext.strokeStyle = color;\n    this.pageContext.beginPath();\n    //this.pageContext.save();\n    var cx = 0;\n    var cy = 0;\n    var fx = from.x;\n    var fy = from.y;\n    var tx = to.x;\n    var ty = to.y;\n    var i = 0;\n    var waveOffsetLength = 0;\n    var ang = Math.atan2(ty - fy, tx - fx);\n    var distance = Math.sqrt((fx - tx) * (fx - tx) + (fy - ty) * (fy - ty));\n    var a = amplitude * 1;\n    var f = Math.PI * frequency;\n    for (i; i <= distance; i += step) {\n      waveOffsetLength = Math.sin(i / distance * f) * a;\n      cx = from.x + Math.cos(ang) * i + Math.cos(ang - Math.PI / 2) * waveOffsetLength;\n      cy = from.y + Math.sin(ang) * i + Math.sin(ang - Math.PI / 2) * waveOffsetLength;\n      i > 0 ? this.pageContext.lineTo(cx, cy) : this.pageContext.moveTo(cx, cy);\n    }\n    this.pageContext.stroke();\n    this.pageContext.restore();\n  };\n  /**\n   * @private\n   */\n  Renderer.prototype.getTabLeader = function (elementBox) {\n    var textWidth = 0;\n    var tabString = this.getTabLeaderString(elementBox.tabLeader);\n    var tabText = tabString;\n    textWidth = this.documentHelper.textHelper.getWidth(tabText, elementBox.characterFormat, elementBox.scriptType);\n    var count = Math.floor(elementBox.width / textWidth);\n    if (textWidth == 0) {\n      count = 0;\n    }\n    for (var i = 0; i <= count; i++) {\n      tabText += tabString;\n    }\n    return tabText.slice(0, -1);\n  };\n  Renderer.prototype.getTabLeaderString = function (tabLeader) {\n    var tabString = '';\n    switch (tabLeader) {\n      case 'Dot':\n        tabString = '.';\n        break;\n      case 'Hyphen':\n        tabString = '-';\n        break;\n      case 'Underscore':\n      case 'Single':\n        tabString = '_';\n        break;\n    }\n    return tabString;\n  };\n  Renderer.prototype.clipRect = function (xPos, yPos, width, height) {\n    this.pageContext.beginPath();\n    this.pageContext.save();\n    this.pageContext.rect(this.getScaledValue(xPos, 1), this.getScaledValue(yPos, 2), width, height);\n    this.pageContext.clip();\n  };\n  Renderer.prototype.getTrimmedWidth = function (elementBox) {\n    var width = elementBox.width;\n    if (elementBox instanceof TextElementBox && !(elementBox instanceof TabElementBox) && isNullOrUndefined(elementBox.nextNode)) {\n      width = this.documentHelper.textHelper.getWidth(HelperMethods.trimEnd(elementBox.text), elementBox.characterFormat, elementBox.scriptType);\n    }\n    return width;\n  };\n  Renderer.prototype.renderUnderline = function (elementBox, left, top, underlineY, color, underline, baselineAlignment, revisionInfo) {\n    var renderedHeight = elementBox.height / (baselineAlignment === 'Normal' ? 1 : 1.5);\n    var topMargin = elementBox.margin.top;\n    var underlineHeight = renderedHeight / 20;\n    var y = 0;\n    var lineHeight = renderedHeight / 20;\n    if (baselineAlignment === 'Subscript' || elementBox instanceof ListTextElementBox) {\n      y = renderedHeight - 2 * underlineHeight + top;\n      topMargin += elementBox.height - renderedHeight;\n      y += topMargin > 0 ? topMargin : 0;\n    } else {\n      y = underlineY + top;\n    }\n    var lineCount = 0;\n    if (!isNullOrUndefined(revisionInfo)) {\n      underline = revisionInfo.type === 'MoveTo' ? 'Double' : 'Single';\n    }\n    if (underline === 'Double') {\n      y -= lineHeight;\n    }\n    if (elementBox instanceof ImageElementBox) {\n      underlineHeight = 0.9;\n    }\n    while (lineCount < (underline === 'Double' ? 2 : 1)) {\n      lineCount++;\n      var width = this.getTrimmedWidth(elementBox);\n      this.pageContext.fillRect(this.getScaledValue(left + elementBox.margin.left, 1), this.getScaledValue(y, 2), this.getScaledValue(width), this.getScaledValue(underlineHeight));\n      y += 2 * lineHeight;\n    }\n  };\n  Renderer.prototype.renderStrikeThrough = function (elementBox, left, top, strikethrough, color, baselineAlignment, revisionInfo) {\n    var renderedHeight = elementBox.height / (baselineAlignment === 'Normal' ? 1 : 1.5);\n    var topMargin = elementBox.margin.top;\n    if (baselineAlignment === 'Subscript') {\n      topMargin += elementBox.height - renderedHeight;\n    }\n    top += topMargin > 0 ? topMargin : 0;\n    var lineHeight = renderedHeight / 20;\n    var y = renderedHeight / 2 + 0.5 * lineHeight;\n    var lineCount = 0;\n    if (!isNullOrUndefined(revisionInfo)) {\n      strikethrough = revisionInfo.type === 'Deletion' ? 'SingleStrike' : 'DoubleStrike';\n    }\n    if (elementBox instanceof ImageElementBox) {\n      lineHeight = 0.9;\n    }\n    if (strikethrough === 'DoubleStrike') {\n      y -= lineHeight;\n    }\n    while (lineCount < (strikethrough === 'DoubleStrike' ? 2 : 1)) {\n      lineCount++;\n      var width = this.getTrimmedWidth(elementBox);\n      this.pageContext.fillRect(this.getScaledValue(left + elementBox.margin.left, 1), this.getScaledValue(y + top, 2), this.getScaledValue(width), this.getScaledValue(lineHeight));\n      y += 2 * lineHeight;\n    }\n  };\n  Renderer.prototype.renderImageElementBox = function (elementBox, left, top, underlineY) {\n    var topMargin = elementBox.margin.top;\n    var leftMargin = elementBox.margin.left;\n    var revisionInfo = this.checkRevisionType(elementBox);\n    var color = revisionInfo.length > 0 ? this.getRevisionColor(revisionInfo) : 'black';\n    this.pageContext.textBaseline = 'top';\n    var widgetWidth = 0;\n    var isClipped = false;\n    var containerWid = elementBox.line.paragraph.containerWidget;\n    var isHeightType = false;\n    if (containerWid instanceof TableCellWidget) {\n      isHeightType = containerWid.ownerRow.rowFormat.heightType === 'Exactly';\n    }\n    if (elementBox.textWrappingStyle === 'Inline') {\n      if (topMargin < 0 || elementBox.line.paragraph.width < elementBox.width) {\n        // if (containerWid instanceof BodyWidget) {\n        //     widgetWidth = containerWid.width + containerWid.x;\n        // } else \n        if (containerWid instanceof TableCellWidget) {\n          var leftIndent = 0;\n          if (containerWid.childWidgets[0] instanceof ParagraphWidget) {\n            var paraAdv = containerWid.childWidgets[0];\n            leftIndent = paraAdv.paragraphFormat.leftIndent;\n          }\n          widgetWidth = containerWid.width + containerWid.margin.left - containerWid.leftBorderWidth - leftIndent;\n          isClipped = true;\n          this.clipRect(left + leftMargin, top + topMargin, this.getScaledValue(widgetWidth), this.getScaledValue(containerWid.height));\n        }\n      } else if (isHeightType) {\n        var width = containerWid.width + containerWid.margin.left - containerWid.leftBorderWidth;\n        isClipped = true;\n        this.clipRect(containerWid.x, containerWid.y, this.getScaledValue(width), this.getScaledValue(containerWid.height));\n      }\n    }\n    if (elementBox.isMetaFile && !isNullOrUndefined(elementBox.metaFileImageString)) {\n      this.pageContext.drawImage(elementBox.element, this.getScaledValue(left + leftMargin, 1), this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width), this.getScaledValue(elementBox.height));\n    } else {\n      var fallbackImage_1 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAgVBMVEX///8AAADgAADY2Njl5eVcXFxjY2NZWVl/f3+wsLCmpqb4+PiioqKpqam7u7vV1dX2uLj2wsLhFRXzpKT3vb30sbHhCwv74+P40dH+9vbkIyO2trbBwcHLy8tsbGycnJz529v4zMzrbGzlLS3qZmblNzfrdXXoRkbvi4vvgYHlHh7CZsBOAAADpUlEQVR4nO3da1faQBSF4ekAUQlUEFs14AXxVv7/D6yaQiZx5mSEYXF2ut+PNKzyyK5diYDmR9czx34AB49C/CjE759w3jvvWr15Tdgz3atXE54f++EcIArxoxA/CvGjED8K8aMQPwrxoxA/CvGLEeZ9jPJdhfk4GyCUjb3ECGE/Q6m/q3DwfudjP0ERZYN9hKdn2hvd3+0jHJz5/kBVuTk96bbQUEjhYR9ckiikUH8UUqg/CinUH4UU6o9CCvVHIYX6o5BC/VFIof4opFB/FFKoPwop1B+FFOqPQgrjyxfjVC38Lxk9tnAxGqZqdKtSOE4GHA5/fuNJpDCtcNHbv4VqYYqPLjgfUViPQgrjozA2CptRSGF8/59w+Wrt+rr1btNna1cPzg0wwuXavncxabnX7PfHYYXzlYARvlobQZyUR9mXm+1NMEK7SSLONgcVV9vb8IQXv4J3KSeKKlxXxNCzONkeYp8AV3p9UT1+P3FWHVAsq5thhGZSEb1DrSZq7dS5HUdoLiuBZ6jORG3tCwAkNJfCUJ2Jrqe1P0ESCkMNTdSACYNDDU7UoAkDQw1P1MAJvUMVJmrwhJ6hShM1gMIvQxUnahCFjaHKEzWQQneoxR95ogZTWBuqPFEDKnSHKk/UoArdoYoTNbDC5lBDEzW4QjMpYiZqgIXG/S76JhwHK5zVVipcnkIVuv/RW/HyFKhwYhuFr6NiCmdNoDBUSGFjovJQEYXuRN9ahwoorJ8uSZenPsMTNk+X2q6jwgm/ntHL11HhhL4zenmoYEL/Gb04VCxh6KKTNFQoYfiikzBUJKF00Sk8VCChfF00OFQcYdt10dBQYYRT5xn0n9G7Q0X8GfCzNNEyZ6iPgD/HlydaVg11DfhajJaJlm2HugIUrlomWrYZKuJKHz6vHhbSM/hROdRnxNe1meuXYvW0DB6+aflYrB7dlzDiCM3N1dVN6GDhMCDhjlHYjEIK46MwNgqbUUhhfJ/vA07wO8N1vw94ONo/3e/lTpVOYfc/UyG//ZmqW52fi/FuTNW3/lZ+eguF+qOQQv1RSKH+KKRQfxRSqD8KKdQfhRTqj0IK9UchhfqjkEL9UUih/iikUH8UUqg/CmXh6Hsv3jlK+wnvD/vgkrSHMMuyu1P9ZdmuwnycDQYn+svG3n9KEUKT9zHyf6+IEWJHIX4U4kchfhTiRyF+FOJHIX4U4kchfnVhijeZa6sunCf4ZdPamteEHY5C/CjEr/vCv0ec0g+AtS1QAAAAAElFTkSuQmCC';\n      try {\n        var imgX_1 = this.getScaledValue(left + leftMargin, 1);\n        var imgY_1 = this.getScaledValue(top + topMargin, 2);\n        var width_3 = this.getScaledValue(elementBox.width);\n        var height_2 = this.getScaledValue(elementBox.height);\n        var render_1 = this;\n        elementBox.element.onload = function () {\n          var lastLoaded = elementBox.element.getAttribute(\"lastLoaded\");\n          if (!isNullOrUndefined(render_1.documentHelper) && lastLoaded !== elementBox.element.src) {\n            if (!elementBox.isCrop) {\n              render_1.pageContext.drawImage(elementBox.element, imgX_1, imgY_1, width_3, height_2);\n            } else {\n              render_1.pageContext.drawImage(elementBox.element, elementBox.cropX, elementBox.cropY, elementBox.cropWidth, elementBox.cropHeight, imgX_1, imgY_1, width_3, height_2);\n            }\n          }\n        };\n        elementBox.element.onerror = function () {\n          elementBox.element.src = fallbackImage_1;\n        };\n        if (!elementBox.isCrop) {\n          this.pageContext.drawImage(elementBox.element, imgX_1,\n          //dx\n          imgY_1,\n          //dy\n          width_3,\n          //dw\n          height_2); //dh\n        } else {\n          this.pageContext.drawImage(elementBox.element, elementBox.cropX,\n          //sx\n          elementBox.cropY,\n          //sy\n          elementBox.cropWidth,\n          //sw\n          elementBox.cropHeight,\n          //sh\n          imgX_1,\n          //dx\n          imgY_1,\n          //dy\n          width_3,\n          //dw\n          height_2); //dh\n        }\n      } catch (e) {\n        elementBox.imageString = fallbackImage_1;\n        this.documentHelper.addBase64StringInCollection(elementBox);\n        elementBox.element.src = this.documentHelper.getImageString(elementBox);\n        this.pageContext.drawImage(elementBox.element, this.getScaledValue(left + leftMargin, 1), this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width), this.getScaledValue(elementBox.height));\n      }\n    }\n    this.pageContext.fillStyle = HelperMethods.getColor(color);\n    var currentRevision = this.getRevisionType(revisionInfo, false);\n    if (!isNullOrUndefined(currentRevision) && (currentRevision.type === 'Deletion' || currentRevision.type === 'MoveFrom')) {\n      this.renderStrikeThrough(elementBox, left, top, 'SingleStrike', color, 'Normal', currentRevision);\n    }\n    currentRevision = this.getRevisionType(revisionInfo, true);\n    if (!isNullOrUndefined(currentRevision) && (currentRevision.type === 'Insertion' || currentRevision.type === 'MoveTo')) {\n      var y = this.getUnderlineYPosition(elementBox.line);\n      this.renderUnderline(elementBox, left, top, y, color, 'Single', 'Normal');\n    }\n    if (isClipped) {\n      this.pageContext.restore();\n    }\n  };\n  Renderer.prototype.renderTableOutline = function (tableWidget) {\n    var layout = new Layout(this.documentHelper);\n    var table = tableWidget;\n    tableWidget.width = this.documentHelper.layout.getTableWidth(table);\n    var border = !table.isBidiTable ? layout.getTableLeftBorder(table.tableFormat.borders) : layout.getTableRightBorder(table.tableFormat.borders);\n    var lineWidth = 0;\n    //ToDo: Need to draw the borders based on the line style.\n    // if (!isNullOrUndefined(border )) {\n    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n    this.renderSingleBorder(border.color, tableWidget.x - tableWidget.margin.left - lineWidth / 2, tableWidget.y, tableWidget.x - tableWidget.margin.left - lineWidth / 2, tableWidget.y + tableWidget.height, lineWidth, border.lineStyle);\n    // }\n    border = layout.getTableTopBorder(table.tableFormat.borders);\n    lineWidth = 0;\n    // if (!isNullOrUndefined(border )) {\n    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n    this.renderSingleBorder(border.color, tableWidget.x - tableWidget.margin.left - lineWidth, tableWidget.y - lineWidth / 2, tableWidget.x + tableWidget.width + lineWidth + tableWidget.margin.right, tableWidget.y - lineWidth / 2, lineWidth, border.lineStyle);\n    // }\n    border = !table.isBidiTable ? layout.getTableRightBorder(table.tableFormat.borders) : layout.getTableLeftBorder(table.tableFormat.borders);\n    lineWidth = 0;\n    // if (!isNullOrUndefined(border )) {\n    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n    this.renderSingleBorder(border.color, tableWidget.x + tableWidget.width + tableWidget.margin.right + lineWidth / 2, tableWidget.y, tableWidget.x + tableWidget.width + tableWidget.margin.right + lineWidth / 2, tableWidget.y + tableWidget.height, lineWidth, border.lineStyle);\n    // }\n    border = layout.getTableBottomBorder(table.tableFormat.borders);\n    lineWidth = 0;\n    // if (!isNullOrUndefined(border )) {\n    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n    this.renderSingleBorder(border.color, tableWidget.x - tableWidget.margin.left - lineWidth, tableWidget.y + tableWidget.height - lineWidth / 2, tableWidget.x + tableWidget.width + lineWidth + tableWidget.margin.right, tableWidget.y + tableWidget.height - lineWidth / 2, lineWidth, border.lineStyle);\n    // }\n  };\n  /* eslint-disable  */\n  Renderer.prototype.renderTableCellOutline = function (documentHelper, cellWidget) {\n    var layout = documentHelper.layout;\n    var borders = undefined;\n    var tableCell = cellWidget;\n    var cellTopMargin = 0;\n    var cellBottomMargin = 0;\n    var cellLeftMargin = 0;\n    var cellRightMargin = 0;\n    var height = 0;\n    var isBidiTable = cellWidget.ownerTable.isBidiTable;\n    borders = tableCell.cellFormat.borders;\n    if (cellWidget.containerWidget instanceof TableRowWidget) {\n      cellBottomMargin = cellWidget.margin.bottom - cellWidget.containerWidget.bottomBorderWidth;\n      cellTopMargin = cellWidget.margin.top - cellWidget.containerWidget.topBorderWidth;\n    }\n    cellLeftMargin = cellWidget.margin.left - cellWidget.leftBorderWidth;\n    cellRightMargin = cellWidget.margin.right - cellWidget.rightBorderWidth;\n    if (!isNullOrUndefined(tableCell.ownerRow) && tableCell.ownerRow.rowFormat.heightType === 'Exactly') {\n      height = HelperMethods.convertPointToPixel(tableCell.ownerRow.rowFormat.height) + cellTopMargin + cellBottomMargin;\n    } else {\n      if (!isNullOrUndefined(tableCell.ownerRow) && [tableCell.ownerRow].length <= 1) {\n        height = Math.max(HelperMethods.convertPointToPixel(tableCell.ownerRow.rowFormat.height), cellWidget.height) + cellTopMargin + cellBottomMargin;\n      } else {\n        height = cellWidget.height + cellTopMargin + cellBottomMargin;\n      }\n    }\n    var border = !isBidiTable ? TableCellWidget.getCellLeftBorder(tableCell) : TableCellWidget.getCellRightBorder(tableCell);\n    var lineWidth = 0;\n    // if (!isNullOrUndefined(border )) {\n    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth()); //Renders the cell left border.\n    this.renderCellBackground(height, cellWidget, cellLeftMargin, cellRightMargin, lineWidth);\n    var leftBorderWidth = lineWidth;\n    if (tableCell.index === 0 || tableCell.cellFormat.rowSpan === 1 || tableCell.cellFormat.rowSpan > 1 && tableCell.columnIndex === 0) {\n      this.renderSingleBorder(border.color, cellWidget.x - cellLeftMargin - lineWidth, cellWidget.y - cellWidget.margin.top, cellWidget.x - cellLeftMargin - lineWidth, cellWidget.y + cellWidget.height + cellBottomMargin, lineWidth, border.lineStyle);\n    } else {\n      for (var i = 0; i < tableCell.ownerTable.childWidgets.length; i++) {\n        var row = tableCell.ownerTable.childWidgets[i];\n        var cell = void 0;\n        for (var j = 0; j < row.childWidgets.length; j++) {\n          var currentCell = row.childWidgets[j];\n          if (currentCell.columnIndex + currentCell.cellFormat.columnSpan - 1 === tableCell.columnIndex - 1) {\n            cell = currentCell;\n            break;\n          } else if (row.childWidgets[j].columnIndex >= tableCell.columnIndex && row.childWidgets[j].previousWidget) {\n            cell = row.childWidgets[j].previousWidget;\n            break;\n          }\n        }\n        if (cell && cell.columnIndex + cell.cellFormat.columnSpan - 1 === tableCell.columnIndex - 1) {\n          var border_1 = !isBidiTable ? TableCellWidget.getCellRightBorder(cell) : TableCellWidget.getCellLeftBorder(cell);\n          var lineWidthInt = HelperMethods.convertPointToPixel(border_1.getLineWidth());\n          cellLeftMargin = tableCell.margin.left - lineWidthInt;\n          if (cell.y + cell.height < tableCell.y) {\n            continue;\n          } else if (cell.y < tableCell.y && cell.y + cell.height > tableCell.y) {\n            this.renderSingleBorder(border_1.color, tableCell.x - cellLeftMargin - lineWidthInt, tableCell.y - cellTopMargin, tableCell.x - cellLeftMargin - lineWidthInt, cell.y + cell.height + cell.margin.bottom, lineWidthInt, border_1.lineStyle);\n          } else if (cell.y === tableCell.y || cell.y > tableCell.y && cell.y + cell.height < tableCell.y + tableCell.height) {\n            this.renderSingleBorder(border_1.color, tableCell.x - cellLeftMargin - lineWidthInt, cell.y - cell.margin.top, tableCell.x - cellLeftMargin - lineWidthInt, cell.y + cell.height + cell.margin.bottom, lineWidthInt, border_1.lineStyle);\n          } else if (cell.y < tableCell.y + tableCell.height && cell.y + cell.height >= tableCell.y + tableCell.height) {\n            this.renderSingleBorder(border_1.color, tableCell.x - cellLeftMargin - lineWidthInt, cell.y - cell.margin.top, tableCell.x - cellLeftMargin - lineWidthInt, cell.y + cell.height + cellBottomMargin, lineWidthInt, border_1.lineStyle);\n          } else if (cell.y > tableCell.y + tableCell.height) {\n            break;\n          }\n        }\n      }\n    }\n    // }\n    if (tableCell.updatedTopBorders && tableCell.updatedTopBorders.length > 1) {\n      var cellX = cellWidget.x - cellWidget.margin.left - leftBorderWidth / 2;\n      var cellY = cellWidget.y - cellWidget.margin.top;\n      for (var a = 0; a < tableCell.updatedTopBorders.length; a++) {\n        var borderInfo = tableCell.updatedTopBorders[a];\n        border = borderInfo.border;\n        if (border.lineStyle !== 'None' && border.lineWidth < TableCellWidget.getCellTopBorder(tableCell).lineWidth) {\n          border.lineWidth = TableCellWidget.getCellTopBorder(tableCell).lineWidth;\n        }\n        if (!isNullOrUndefined(border)) {\n          lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n          this.renderSingleBorder(border.color, cellX, cellY + lineWidth / 2, cellX + borderInfo.width, cellY + lineWidth / 2, lineWidth, border.lineStyle);\n          cellX = cellX + borderInfo.width;\n        }\n      }\n    } else {\n      border = TableCellWidget.getCellTopBorder(tableCell);\n      // if (!isNullOrUndefined(border )) { //Renders the cell top border.        \n      lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n      var width = 0;\n      this.renderSingleBorder(border.color, cellWidget.x - cellWidget.margin.left - leftBorderWidth / 2, cellWidget.y - cellWidget.margin.top + lineWidth / 2, cellWidget.x + cellWidget.width + cellWidget.margin.right + width, cellWidget.y - cellWidget.margin.top + lineWidth / 2, lineWidth, border.lineStyle);\n      // }\n    }\n    var isLastCell = false;\n    if (!isBidiTable) {\n      isLastCell = tableCell.cellIndex === tableCell.ownerRow.childWidgets.length - 1;\n    } else {\n      isLastCell = tableCell.columnIndex === 0;\n    }\n    var prevRowSpannedCells = tableCell.containerWidget.getPreviousRowSpannedCells();\n    var isAffectedByRowSpan = false;\n    for (var k = 0; k < prevRowSpannedCells.length; k++) {\n      var spannedCell = prevRowSpannedCells[k];\n      if (tableCell.rowIndex < spannedCell.rowIndex + spannedCell.cellFormat.rowSpan && tableCell.columnIndex < spannedCell.columnIndex) {\n        isAffectedByRowSpan = true;\n        break;\n      }\n    }\n    if ((tableCell.ownerTable.tableFormat.cellSpacing > 0 || isLastCell) && (isBidiTable || tableCell.columnIndex + tableCell.cellFormat.columnSpan === tableCell.ownerTable.tableHolder.columns.length || !isAffectedByRowSpan)) {\n      border = isBidiTable ? TableCellWidget.getCellLeftBorder(tableCell) : TableCellWidget.getCellRightBorder(tableCell);\n      // if (!isNullOrUndefined(border )) { //Renders the cell right border.           \n      lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n      this.renderSingleBorder(border.color, cellWidget.x + cellWidget.width + cellWidget.margin.right - lineWidth / 2, cellWidget.y - cellWidget.margin.top, cellWidget.x + cellWidget.width + cellWidget.margin.right - lineWidth / 2, cellWidget.y + cellWidget.height + cellBottomMargin, lineWidth, border.lineStyle);\n      // }\n    }\n    var nextRow = tableCell.ownerRow.nextWidget;\n    //Specifies the next row is within the current table widget.\n    //True means current row is not rendered at page end; Otherwise False.\n    var nextRowIsInCurrentTableWidget = false;\n    var previousCellIndex = undefined;\n    if (!isNullOrUndefined(nextRow)) {\n      if (nextRow.lastChild) {\n        var lastCellWidget = nextRow.lastChild;\n        previousCellIndex = lastCellWidget.columnIndex + lastCellWidget.cellFormat.columnSpan;\n      }\n      var nextRowWidget = undefined;\n      // if (viewer.renderedElements.containsKey(nextRow) && viewer.renderedElements.get(nextRow).length > 0) {\n      nextRowWidget = nextRow;\n      // }\n      if (nextRowWidget instanceof TableRowWidget) {\n        if (cellWidget.containerWidget instanceof TableRowWidget && cellWidget.containerWidget.containerWidget instanceof TableWidget) {\n          nextRowIsInCurrentTableWidget = cellWidget.containerWidget.containerWidget.childWidgets.indexOf(nextRowWidget) !== -1;\n        }\n      }\n    }\n    if (tableCell.ownerTable.tableFormat.cellSpacing > 0 || tableCell.ownerRow.rowIndex === tableCell.ownerTable.childWidgets.length - 1 || tableCell.cellFormat.rowSpan > 1 && tableCell.ownerRow.rowIndex + tableCell.cellFormat.rowSpan >= tableCell.ownerTable.childWidgets.length || !nextRowIsInCurrentTableWidget || this.isRenderHeader || previousCellIndex && nextRow.childWidgets.length < tableCell.ownerRow.childWidgets.length && previousCellIndex < tableCell.columnIndex + tableCell.cellFormat.columnSpan || !isNullOrUndefined(tableCell.cellFormat.borders.bottom) && tableCell.cellFormat.borders.bottom.lineStyle !== 'Cleared' && tableCell.cellFormat.rowSpan === 1 && !isBidiTable && (!isNullOrUndefined(nextRow) && cellWidget.x < nextRow.firstChild.x - nextRow.firstChild.margin.left && nextRow.rowFormat.gridBefore > 0 && (nextRow.rowFormat.beforeWidth !== 0 || nextRow.rowFormat.gridBeforeWidth !== 0) || !isNullOrUndefined(nextRow) && cellWidget.x + cellWidget.width > nextRow.lastChild.x + nextRow.lastChild.width + nextRow.lastChild.margin.right && nextRow.rowFormat.gridAfter > 0 && (nextRow.rowFormat.afterWidth !== 0 || nextRow.rowFormat.gridAfterWidth !== 0))) {\n      var bottomBorder = tableCell.cellFormat.borders.bottom;\n      if (!isNullOrUndefined(bottomBorder) && bottomBorder.lineStyle === 'Cleared') {\n        border = TableCellWidget.getCellBottomBorder(tableCell);\n      } else {\n        border = tableCell.cellFormat.rowSpan > 1 && tableCell.ownerRow.rowIndex + tableCell.cellFormat.rowSpan === tableCell.ownerTable.childWidgets.length ?\n        //true part for vertically merged cells specifically.\n        tableCell.getBorderBasedOnPriority(tableCell.getBorderBasedOnPriority(tableCell.cellFormat.borders.bottom, tableCell.ownerRow.rowFormat.borders.bottom), tableCell.ownerTable.tableFormat.borders.bottom)\n        //false part for remaining cases that has been handled inside method. \n        : TableCellWidget.getCellBottomBorder(tableCell);\n      }\n      var startX = cellWidget.x - cellWidget.margin.left - leftBorderWidth / 2;\n      var endX = cellWidget.x + cellWidget.width + cellWidget.margin.right;\n      if (!(previousCellIndex && nextRow.childWidgets.length < tableCell.ownerRow.childWidgets.length && previousCellIndex < tableCell.columnIndex + tableCell.cellFormat.columnSpan) && !isNullOrUndefined(nextRow) && !isBidiTable && nextRow.rowFormat.gridAfter > 0 && (nextRow.rowFormat.afterWidth !== 0 || nextRow.rowFormat.gridAfterWidth !== 0) && !isNullOrUndefined(nextRow.lastChild) && !isNullOrUndefined(TableCellWidget.getCellTopBorder(nextRow.lastChild)) && TableCellWidget.getCellTopBorder(nextRow.lastChild).lineStyle !== \"None\" && cellWidget.x < nextRow.lastChild.x + nextRow.lastChild.width + nextRow.lastChild.margin.right) {\n        startX = nextRow.lastChild.x + nextRow.lastChild.width + nextRow.lastChild.margin.right;\n      }\n      if (!(previousCellIndex && nextRow.childWidgets.length < tableCell.ownerRow.childWidgets.length && previousCellIndex < tableCell.columnIndex + tableCell.cellFormat.columnSpan) && !isNullOrUndefined(nextRow) && !isBidiTable && nextRow.rowFormat.gridBefore > 0 && (nextRow.rowFormat.beforeWidth !== 0 || nextRow.rowFormat.gridBeforeWidth !== 0) && !isNullOrUndefined(nextRow.firstChild) && !isNullOrUndefined(TableCellWidget.getCellTopBorder(nextRow.firstChild)) && TableCellWidget.getCellTopBorder(nextRow.firstChild).lineStyle !== \"None\" && cellWidget.x + cellWidget.width > nextRow.firstChild.x - nextRow.firstChild.margin.left) {\n        endX = nextRow.firstChild.x - nextRow.firstChild.margin.left;\n      }\n      // if (!isNullOrUndefined(border )) {\n      //Renders the cell bottom border.\n      lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n      this.renderSingleBorder(border.color, startX, cellWidget.y + cellWidget.height + cellBottomMargin + lineWidth / 2, endX, cellWidget.y + cellWidget.height + cellBottomMargin + lineWidth / 2, lineWidth, border.lineStyle);\n      // }\n    }\n    border = layout.getCellDiagonalUpBorder(tableCell);\n    // if (!isNullOrUndefined(border )) {\n    //Renders the cell diagonal up border.\n    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n    if (lineWidth > 0) {\n      this.renderSingleBorder(border.color, cellWidget.x - cellLeftMargin, cellWidget.y + cellWidget.height + cellBottomMargin, cellWidget.x + cellWidget.width + cellRightMargin, cellWidget.y - cellTopMargin, lineWidth, border.lineStyle);\n      // }\n    }\n    border = layout.getCellDiagonalDownBorder(tableCell);\n    // if (!isNullOrUndefined(border )) {\n    //Renders the cell diagonal down border.\n    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n    if (lineWidth > 0) {\n      this.renderSingleBorder(border.color, cellWidget.x - cellLeftMargin, cellWidget.y - cellTopMargin, cellWidget.x + cellWidget.width + cellRightMargin, cellWidget.y + cellWidget.height + cellBottomMargin, lineWidth, border.lineStyle);\n    }\n    // }\n  };\n  Renderer.prototype.renderCellBackground = function (height, cellWidget, leftMargin, rightMargin, lineWidth) {\n    var cellFormat = cellWidget.cellFormat;\n    var bgColor = cellFormat.shading.backgroundColor === '#ffffff' ? cellWidget.ownerTable.tableFormat.shading.backgroundColor : cellFormat.shading.backgroundColor;\n    var left = cellWidget.x - leftMargin - lineWidth;\n    var topMargin = cellWidget.margin.top - cellWidget.containerWidget.topBorderWidth;\n    var top = cellWidget.y - topMargin;\n    var width = cellWidget.width + leftMargin + rightMargin + lineWidth / 2;\n    if (cellWidget.ownerRow.rowFormat.revisions.length > 0) {\n      var revision = cellWidget.ownerRow.rowFormat.revisions[cellWidget.ownerRow.rowFormat.revisions.length - 1];\n      bgColor = revision.revisionType === 'Insertion' ? '#e1f2fa' : '#fce6f4';\n    }\n    this.pageContext.beginPath();\n    if (bgColor !== 'empty') {\n      this.pageContext.fillStyle = HelperMethods.getColor(bgColor);\n      this.pageContext.fillRect(this.getScaledValue(left, 1), this.getScaledValue(top, 2), this.getScaledValue(width), this.getScaledValue(height));\n      this.pageContext.closePath();\n    }\n    //Render foreground color\n    if (cellFormat.shading.hasValue('foregroundColor') && cellFormat.shading.textureStyle !== 'TextureNone') {\n      this.pageContext.beginPath();\n      this.pageContext.fillStyle = this.drawTextureStyle(cellFormat.shading.textureStyle, HelperMethods.getColor(cellFormat.shading.foregroundColor), HelperMethods.getColor(cellFormat.shading.backgroundColor), cellFormat.shading.foregroundColor === 'empty', cellFormat.shading.backgroundColor === 'empty');\n      this.pageContext.fillRect(this.getScaledValue(left, 1), this.getScaledValue(top, 2), this.getScaledValue(width), this.getScaledValue(height));\n      this.pageContext.closePath();\n    }\n  };\n  Renderer.prototype.drawTextureStyle = function (textureStyle, foreColor, backColor, isForeColorEmpty, isBackColorEmpty) {\n    if (isBackColorEmpty) {\n      backColor = '#ffffff';\n    }\n    if (isForeColorEmpty) {\n      foreColor = '#000000';\n    }\n    if (textureStyle.indexOf('Percent') > -1) {\n      var text = textureStyle.replace(\"Texture\", \"\").replace(\"Percent\", \"\").replace(\"Pt\", \".\");\n      var percent = parseInt(text);\n      return this.getForeColor(foreColor, backColor, percent, isForeColorEmpty, isBackColorEmpty);\n    }\n    if (textureStyle === 'TextureSolid') {\n      return foreColor;\n    }\n    return '#FFFFFF';\n  };\n  Renderer.prototype.getForeColor = function (foreColor, backColor, percent, isForeColorEmpty, isBackColorEmpty) {\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var foreColorRgb = HelperMethods.convertHexToRgb(foreColor);\n    var backColorRgb = HelperMethods.convertHexToRgb(backColor);\n    r = this.getColorValue(foreColorRgb.r, backColorRgb.r, percent, isForeColorEmpty, isBackColorEmpty);\n    g = this.getColorValue(foreColorRgb.g, backColorRgb.g, percent, isForeColorEmpty, isBackColorEmpty);\n    b = this.getColorValue(foreColorRgb.b, backColorRgb.b, percent, isForeColorEmpty, isBackColorEmpty);\n    return '#' + HelperMethods.convertRgbToHex(r) + HelperMethods.convertRgbToHex(g) + HelperMethods.convertRgbToHex(b);\n  };\n  Renderer.prototype.getColorValue = function (foreColorValue, backColorValue, percent, isForeColorEmpty, isBackColorEmpty) {\n    var colorValue = 0;\n    if (percent == 100) {\n      colorValue = foreColorValue;\n    } else {\n      if (isForeColorEmpty) {\n        if (isBackColorEmpty) {\n          colorValue = Math.round(255 * (1 - percent / 100));\n        } else {\n          colorValue = Math.round(backColorValue * (1 - percent / 100));\n        }\n      } else {\n        if (isBackColorEmpty) {\n          colorValue = Math.round(foreColorValue * (percent / 100));\n        } else {\n          colorValue = backColorValue + Math.round(foreColorValue * (percent / 100)) - Math.round(backColorValue * (percent / 100));\n        }\n      }\n    }\n    return colorValue;\n  };\n  Renderer.prototype.renderSingleBorder = function (color, startX, startY, endX, endY, lineWidth, lineStyle) {\n    this.pageContext.beginPath();\n    this.pageContext.moveTo(this.getScaledValue(startX, 1), this.getScaledValue(startY, 2));\n    this.pageContext.lineTo(this.getScaledValue(endX, 1), this.getScaledValue(endY, 2));\n    this.pageContext.lineWidth = this.getScaledValue(lineWidth);\n    // set line color\n    this.pageContext.strokeStyle = HelperMethods.getColor(color);\n    if (lineStyle !== \"None\" && lineStyle !== \"Cleared\") {\n      this.pageContext.stroke();\n    }\n    this.pageContext.closePath();\n  };\n  Renderer.prototype.getScaledValue = function (value, type) {\n    if (this.isPrinting) {\n      return value;\n    }\n    if (isNullOrUndefined(type)) {\n      type = 0;\n    }\n    var x = value * this.documentHelper.zoomFactor;\n    return x + (type === 1 ? this.pageLeft : type === 2 ? this.pageTop : 0);\n  };\n  Renderer.prototype.checkRevisionType = function (elementBox) {\n    var revisions = [];\n    var count = elementBox.revisions.length;\n    for (var i = 0; i < count; i++) {\n      var currentRevision = elementBox.revisions[i];\n      var color = this.documentHelper.authors.get(currentRevision.author);\n      revisions.push({\n        'type': currentRevision.revisionType,\n        'color': color\n      });\n    }\n    return revisions;\n  };\n  Renderer.prototype.getRevisionColor = function (revisionInfo) {\n    if (revisionInfo.length === 1) {\n      return revisionInfo[0].color;\n    }\n    for (var i = 0; i < revisionInfo.length; i++) {\n      if (revisionInfo[i].type === 'Deletion' || revisionInfo[i].type === 'MoveFrom') {\n        return revisionInfo[i].color;\n      }\n    }\n    if (revisionInfo.length > 0) {\n      return revisionInfo[0].color;\n    }\n    return undefined;\n  };\n  Renderer.prototype.getRevisionType = function (revisionInfo, checkInsert) {\n    if (revisionInfo.length === 0) {\n      return undefined;\n    }\n    for (var i = 0; i < revisionInfo.length; i++) {\n      var type = undefined;\n      if (checkInsert && (revisionInfo[i].type === 'Insertion' || revisionInfo[i].type === 'MoveTo')) {\n        type = revisionInfo[i];\n        this.pageContext.fillStyle = HelperMethods.getColor(type.color);\n        revisionInfo.splice(i, 1);\n        return type;\n      }\n      if (!checkInsert && (revisionInfo[i].type === 'Deletion' || revisionInfo[i].type === 'MoveFrom')) {\n        type = revisionInfo[i];\n        this.pageContext.fillStyle = HelperMethods.getColor(type.color);\n        revisionInfo.splice(i, 1);\n        return type;\n      }\n    }\n    return undefined;\n  };\n  Renderer.prototype.getFormfieldInLine = function (line) {\n    for (var i = 0; i < line.children.length; i++) {\n      if (line.children[i] instanceof FieldElementBox && !isNullOrUndefined(line.children[i].formFieldData)) {\n        return line.children[i];\n      }\n    }\n    return undefined;\n  };\n  /**\n   * Destroys the internal objects which is maintained.\n   *\n   * @returns {void}\n   */\n  Renderer.prototype.destroy = function () {\n    this.documentHelper = undefined;\n    if (!isNullOrUndefined(this.pageCanvasIn)) {\n      this.pageCanvasIn.innerHTML = '';\n    }\n    this.pageCanvasIn = undefined;\n  };\n  return Renderer;\n}();\nexport { Renderer };","map":{"version":3,"names":["isNullOrUndefined","L10n","Rect","ImageElementBox","LineWidget","ParagraphWidget","BodyWidget","TextElementBox","HeaderFooterWidget","ListTextElementBox","TableRowWidget","TableWidget","TableCellWidget","FieldElementBox","TabElementBox","BlockWidget","CommentCharacterElementBox","ShapeElementBox","EditRangeStartElementBox","ShapeBase","TextFrame","BookmarkElementBox","EditRangeEndElementBox","Layout","PageLayoutViewer","WebLayoutViewer","HelperMethods","Point","CharacterRangeType","FontScriptType","DocumentCanvasElement","Dictionary","Renderer","documentHelper","commentMarkDictionary","isPrinting","isExporting","pageLeft","pageTop","pageIndex","isFieldCode","isRenderHeader","leftPosition","topPosition","height","fieldStacks","Object","defineProperty","prototype","get","pageCanvasIn","document","createElement","getContext","save","exportPageCanvas","viewer","undefined","containerCanvas","enumerable","configurable","owner","spellCheckerModule","selectionCanvas","pageCanvas","renderWidgets","page","left","top","width","pageContext","fillStyle","getColor","backgroundColor","beginPath","visibleBounds","marginTop","index","padding","fillRect","closePath","strokeStyle","pageOutline","strokeRect","setPageSize","rect","clip","headerWidget","renderHFWidgets","headerWidgetIn","footerWidget","footerWidgetIn","i","bodyWidgets","length","render","parseInt","toString","footnoteWidget","layoutType","renderfootNoteWidget","endnoteWidget","enableHeaderAndFooter","renderHeaderSeparator","restore","clearRect","selectionContext","boundingRectangle","dpr","Math","max","window","devicePixelRatio","documentEditorSettings","printDevicePixelRatio","style","globalAlpha","scale","widget","isHeader","cliped","pageHt","headerFooterHeight","topMargin","convertPointToPixel","sectionFormat","widgetHeight","y","getScaledValue","footerDistance","footerHeight","bottomMargin","renderFloatingItems","floatingElements","childWidgets","block","renderWidget","abs","pageWidth","ctx","min","renderDashLine","type","getHeaderFooterType","getHeaderFooter","headerFooterType","sectionIndex","l10n","defaultLocale","setLocale","locale","headersFooters","sectionMarkIndex","getConstant","font","measureText","renderHeaderFooterMark","renderHeaderFooterMarkText","headerFooterWidget","content","width_1","right","containerWidth","type_1","sectionIndex_1","index_1","headerFooterWidget_1","width_2","getFooterHeight","footerWidgetHeight","actualHeight","differentFirstPage","previousPage","differentOddAndEvenPages","pages","indexOf","context","x","isSmallDash","lineWidth","setLineDash","moveTo","lineTo","stroke","renderSolidLine","w","h","textBaseline","fillText","bodyWidget","isClipped","nextColumnBody","nextRenderedWidget","columnIndex","columns","colIndex","xPos","leftMargin","space","rightMargin","clipRect","repeatHeaderRowTableWidget","renderHeader","layout","getHeader","lineBetweenColumns","linestartY","inBetweenSpace","previousRenderedWidget","startX","startY","zoomFactor","endX","endY","firstBody","getBodyWidget","getNextWidgetHeight","color","renderSingleBorder","wrappingType","overLappedShapeWidgets","sort","a","b","zOrderPosition","shape","textWrappingStyle","isOverLappedShapeWidget","containsKey","renderImageElementBox","shapeLeft","shapeTop","renderShapeElementBox","add","sortedOverLappedShapeWidgets","keys","j","floatingElement","compatibilityMode","isBelowText","isHorizontalRule","isZeroShapeHeight","shapeType","autoShapeType","blocks","textFrame","margin","fillFormat","fill","lineFormat","line","lineFormatType","weight","round","enableLockAndEdit","renderLockRegionBorder","renderParagraphWidget","renderTableWidget","isInsideTable","locked","settinsModel","collaborativeEditingSettings","previousWidget","nextWidget","lockedBy","currentUser","editableRegionColor","lockedRegionColor","header","updateClientArea","clientArea","parentTable","ownerTable","getSplitWidgets","table","clone","updateClientAreaLocation","updateTableHeaderRows","cell","j_1","renderTableCellWidget","updateChildLocationForTable","headerRow","clonedTable","rowSpan","row","rowFormat","clonedRow","push","containerWidget","updateChildLocationForRow","cellFormat","k","nextRow","clonedRow_1","paraWidget","isFieldCodeBlock","firstLine","firstChild","paddingLeft","children","element","isEmpty","selectionModule","selection","start","paragraph","isInHeaderFooter","renderParagraphBorder","renderLine","paragraphWidet","leftBorder","paragraphFormat","borders","topBorder","rightBorder","bottomBorder","bottom","lastLine","lastChild","canRenderParagraphBorders","canRenderBorder","lineStyle","getParagraphLeftPosition","isFirstLine","skipTopBorder","getTopMargin","isLastLine","skipBottomBorder","getBottomMargin","getContainerWidth","hangingIndent","firstLineIndent","associatedCell","leftBorderWidth","indent","leftIndent","rightIndent","section","paragarph","footnote","isEmptyPage","footerY","footNoteReference","breakCode","footWidth","editorModule","isFootNoteInsert","footNoteElement","text","replace","tableWidget","renderTableRowWidget","tableFormat","cellSpacing","renderTableOutline","isRenderBookmarkEnd","showBookmarks","cellWidget","border","isBidiTable","getCellLeftBorder","getCellRightBorder","getLineWidth","lastPara","getLastParagraph","renderBookmark","textHelper","getParagraphMarkWidth","characterFormat","rowWidget","position","getEndPosition","cellTopMargin","cellBottomMargin","topBorderWidth","bottomBorderWidth","renderSelectionHighlightOnTable","renderTableCellOutline","isRenderEditRangeStart","firstPara","getFirstParagraph","xLeft","ytop","highlightEditableRanges","highlighters","editRegionHighlighters","widgetInfo","isRenderEditRangeEnd","getWidth","String","fromCharCode","checkHeaderFooterLineWidget","headerFooter","parentHeaderFooter","selectedWidget","parentIndex","getHierarchicalIndex","currentLineIndex","substring","renderEditRegionHighlight","lineWidget","renderHighlight","renderSearchHighlight","searchModule","searchHighlighters","searchHighlightColor","renderSelectionHighlight","isScrollToSpellCheck","selectedWidgets","addSelectionHighlight","addSelectionHighlightTable","paraFormat","bidi","formFieldHighlighters","formFieldSettings","applyShading","shadingColor","height_1","isAltered","getAfterSpacing","lineSpacing","formField","getFormfieldInLine","sizeInfo","getHeight","maxHeight","Height","lineSpacingType","getLineSpacing","beforeSpacing","commentIDList","renderedElements","underlineY","getUnderlineYPosition","bookmarks","isRenderBookmarkStart","firstLineInFirstPara","elementBox","pageGap","user","group","columnFirst","yTop","renderLockMark","settings","editRangeMark","setAttribute","commentType","enableComment","commentId","comment","isReply","renderCommentMark","commentMark","editRangeStart","getBookmarks","name","bookmarkType","isBookmarkEndAtStart","properties","previousParaElement","prevRenderableElement","isRenderablePresent","lineIndex","i_1","elementIndex","isRenderable","getPreviousParagraphBlock","getTop","reference","isRenderBookmarkAtEnd","bookmarkEndCell","toSkipFieldCode","isSpellCheck","canTrigger","isVisible","isSpellChecked","isChangeDetected","ischangeDetected","renderListTextElementBox","shapeLeftMargin","renderTextElementBox","bookmark","showHiddenMarks","currentCharFormat","characterFont","retriveCharacterformat","fontColor","isEndsWithLineBreak","BaselineOffset","getBeforeSpacing","indexInOwner","previousLine","maxBaseLine","revisions","authors","author","isEndsWithColumnBreak","isEndsWithPageBreak","textinfo","English","clientActiveArea","nextLine","scaleFactor","scaling","letterSpacing","characterSpacing","para","isBookmarkAtStart","bookmarkIndex","combineHexColors","color1","color2","hex1","hex2","r1","g1","b1","r2","g2","b2","r","g","mixedColor","restrictColor","extensionLength","combinedColor","character","fontSizeFactor","bold","italic","fontSize","fontFamily","baselineAlignment","fieldType","fieldEnd","hasFieldEnd","fieldBegin","pop","lineHeight","format","listLevel","breakCharacterFormat","hasValue","isIosDevice","strikethrough","highlightColor","getHighlightColorCode","floor","ceil","baselineOffset","isParaBidi","direction","bgColor","getBackgroundColorHeirachy","getDefaultFontColor","tabMark","replaceSpace","underline","renderUnderline","renderStrikeThrough","backColor","isVeryDark","isHeightType","ownerRow","heightType","doHighLight","trim","revisionInfo","checkRevisionType","getRevisionColor","renderFontFamily","getFontNameToRender","scriptType","scaledWidth","tabElement","tabText","tabLeader","getTabLeader","isRTL","isRTLText","setText","bdo","allCaps","toUpperCase","characterRange","WordSplit","RightToLeft","inverseCharacter","startsWith","spellChecker","removeUnderline","triggerSpellCheck","isScrollHandler","previousNode","errorDetails","checktextElementHasErrors","errorFound","shading","errors","errorWordCollection","elements","currentElement","exactText","manageSpecialCharacters","ignoreOnceItems","renderWavyLine","end","location","errorElements","triggerElementsOnLoading","handleChangeDetectedElements","currentInfo","getRevisionType","tabMarkString","tabMarkWidth","availableSpaceWidth","tabWidth","RegExp","ch","containerShape","_this","checkText","beforeIndex","checkElementCanBeCombined","splittedText","split","markindex","getOffset","spaceValue","currentText","retrievedText","ignoreAllItems","handleUnorderedElements","indexInLine_1","indexinParagraph_1","spellInfo","checkSpellingInPageInfo","isElementPresent","enableOptimizedSpellCheck","jsonObject","JSON","parse","hasSpellError","handleWordByWordSpellCheck","isInUniqueWords","hasSpellingError","isErrorWord","triggerPageSpellCheck","callSpellChecker","languageID","allowSpellCheckAndSuggestion","then","data","canUpdate","iteration","markIndex","isLastItem","indexInLine","indexinParagraph","handleSplitWordSpellCheck","canUpdate_1","renderedHeight","underlineHeight","frequencyRange","amplitudeRange","stepToCover","specialCharacter","getSpecialCharactersInfo","whiteSpaceData","getWhiteSpaceCharacterInfo","beginningWidth","isBeginning","x1","y1","x2","endWidth","startingPoint","endingPoint","drawWavy","from","to","frequency","amplitude","step","negative","lineCap","cx","cy","fx","fy","tx","ty","waveOffsetLength","ang","atan2","distance","sqrt","f","PI","sin","cos","textWidth","tabString","getTabLeaderString","count","slice","yPos","getTrimmedWidth","nextNode","trimEnd","lineCount","widgetWidth","containerWid","paraAdv","isMetaFile","metaFileImageString","drawImage","fallbackImage_1","imgX_1","imgY_1","width_3","height_2","render_1","onload","lastLoaded","getAttribute","src","isCrop","cropX","cropY","cropWidth","cropHeight","onerror","e","imageString","addBase64StringInCollection","getImageString","currentRevision","getTableWidth","getTableLeftBorder","getTableRightBorder","getTableTopBorder","getTableBottomBorder","tableCell","cellLeftMargin","cellRightMargin","rightBorderWidth","renderCellBackground","currentCell","columnSpan","border_1","lineWidthInt","updatedTopBorders","cellX","cellY","borderInfo","getCellTopBorder","isLastCell","cellIndex","prevRowSpannedCells","getPreviousRowSpannedCells","isAffectedByRowSpan","spannedCell","rowIndex","tableHolder","nextRowIsInCurrentTableWidget","previousCellIndex","lastCellWidget","nextRowWidget","gridBefore","beforeWidth","gridBeforeWidth","gridAfter","afterWidth","gridAfterWidth","getCellBottomBorder","getBorderBasedOnPriority","getCellDiagonalUpBorder","getCellDiagonalDownBorder","revision","revisionType","textureStyle","drawTextureStyle","foregroundColor","foreColor","isForeColorEmpty","isBackColorEmpty","percent","getForeColor","foreColorRgb","convertHexToRgb","backColorRgb","getColorValue","convertRgbToHex","foreColorValue","backColorValue","colorValue","value","checkInsert","splice","formFieldData","destroy","innerHTML"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/node_modules/@syncfusion/ej2-documenteditor/src/document-editor/implementation/viewer/render.js"],"sourcesContent":["import { isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { Rect, ImageElementBox, LineWidget, ParagraphWidget, BodyWidget, TextElementBox, HeaderFooterWidget, ListTextElementBox, TableRowWidget, TableWidget, TableCellWidget, FieldElementBox, TabElementBox, BlockWidget, CommentCharacterElementBox, ShapeElementBox, EditRangeStartElementBox, ShapeBase, TextFrame, BookmarkElementBox, EditRangeEndElementBox } from './page';\nimport { Layout } from './layout';\nimport { PageLayoutViewer, WebLayoutViewer } from './viewer';\nimport { HelperMethods, Point } from '../editor/editor-helper';\nimport { CharacterRangeType } from '../../index';\nimport { FontScriptType } from '../../index';\nimport { DocumentCanvasElement } from './document-canvas';\nimport { Dictionary } from '../../base/dictionary';\n/**\n * @private\n */\nvar Renderer = /** @class */ (function () {\n    function Renderer(documentHelper) {\n        /**\n         * @private\n         */\n        this.commentMarkDictionary = new Dictionary();\n        this.isPrinting = false;\n        this.isExporting = false;\n        this.pageLeft = 0;\n        this.pageTop = 0;\n        this.pageIndex = -1;\n        this.isFieldCode = false;\n        this.isRenderHeader = false;\n        this.leftPosition = 0;\n        this.topPosition = 0;\n        this.height = 0;\n        this.fieldStacks = [];\n        this.documentHelper = documentHelper;\n    }\n    Object.defineProperty(Renderer.prototype, \"pageCanvas\", {\n        get: function () {\n            if (this.isPrinting) {\n                if (isNullOrUndefined(this.pageCanvasIn)) {\n                    this.pageCanvasIn = document.createElement('canvas');\n                    this.pageCanvasIn.getContext('2d').save();\n                }\n                return this.pageCanvasIn;\n            }\n            if (this.isExporting) {\n                if (isNullOrUndefined(this.exportPageCanvas)) {\n                    this.exportPageCanvas = new DocumentCanvasElement();\n                }\n                return this.exportPageCanvas;\n            }\n            else {\n                return isNullOrUndefined(this.viewer) ? undefined : this.documentHelper.containerCanvas;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"spellChecker\", {\n        get: function () {\n            return this.documentHelper.owner.spellCheckerModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"selectionCanvas\", {\n        get: function () {\n            return isNullOrUndefined(this.viewer) ? undefined : this.documentHelper.selectionCanvas;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"pageContext\", {\n        get: function () {\n            return this.pageCanvas.getContext('2d');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"selectionContext\", {\n        get: function () {\n            return this.selectionCanvas.getContext('2d');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Renderer.prototype, \"viewer\", {\n        get: function () {\n            return this.documentHelper.owner.viewer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Renderer.prototype.renderWidgets = function (page, left, top, width, height) {\n        if (isNullOrUndefined(this.pageCanvas) || isNullOrUndefined(page)) {\n            return;\n        }\n        this.pageContext.fillStyle = HelperMethods.getColor(this.documentHelper.backgroundColor);\n        this.pageContext.beginPath();\n        if (this.viewer instanceof WebLayoutViewer) {\n            height = height > this.documentHelper.visibleBounds.height ? height : this.documentHelper.visibleBounds.height;\n            var marginTop = top;\n            if (page.index === 0) {\n                marginTop = top - this.viewer.padding.top;\n            }\n            /* eslint-disable-next-line max-len */\n            this.pageContext.fillRect(left - this.viewer.padding.left, marginTop, width + this.viewer.padding.left, height + this.viewer.padding.top);\n        }\n        else {\n            this.pageContext.fillRect(left, top, width, height);\n        }\n        this.pageContext.closePath();\n        if (this.viewer instanceof PageLayoutViewer) {\n            this.pageContext.strokeStyle = this.documentHelper.owner.pageOutline;\n            this.pageContext.strokeRect(left, top, width, height);\n        }\n        this.pageLeft = left;\n        this.pageTop = top;\n        this.pageIndex = page.index;\n        if (this.isPrinting) {\n            this.setPageSize(page);\n        }\n        else {\n            this.pageContext.beginPath();\n            this.pageContext.save();\n            this.pageContext.rect(left, top, width, height);\n            this.pageContext.clip();\n        }\n        this.height = height;\n        if (page.headerWidget) {\n            this.renderHFWidgets(page, page.headerWidgetIn, width, true);\n        }\n        if (page.footerWidget) {\n            this.renderHFWidgets(page, page.footerWidgetIn, width, false);\n        }\n        for (var i = 0; i < page.bodyWidgets.length; i++) {\n            this.render(page, page.bodyWidgets[parseInt(i.toString(), 10)]);\n            if (page.footnoteWidget && this.documentHelper.owner.layoutType === 'Pages') {\n                this.renderfootNoteWidget(page, page.footnoteWidget, width);\n            }\n        }\n        if (page.endnoteWidget && this.documentHelper.owner.layoutType === 'Pages') {\n            this.renderfootNoteWidget(page, page.endnoteWidget, width);\n        }\n        if (this.documentHelper.owner.enableHeaderAndFooter && !this.isPrinting) {\n            this.renderHeaderSeparator(page, this.pageLeft, this.pageTop, page.headerWidgetIn);\n        }\n        this.pageLeft = 0;\n        this.pageTop = 0;\n        this.pageContext.restore();\n    };\n    Renderer.prototype.setPageSize = function (page) {\n        this.pageContext.clearRect(0, 0, this.pageCanvas.width, this.pageCanvas.height);\n        this.selectionContext.clearRect(0, 0, this.selectionCanvas.width, this.selectionCanvas.height);\n        this.pageContext.restore();\n        this.selectionContext.restore();\n        var width = page.boundingRectangle.width;\n        var height = page.boundingRectangle.height;\n        var dpr = Math.max(window.devicePixelRatio, this.documentHelper.owner.documentEditorSettings.printDevicePixelRatio);\n        if (this.pageCanvas.width !== width * dpr || this.pageCanvas.height !== height * dpr) {\n            this.pageCanvas.height = height * dpr;\n            this.pageCanvas.width = width * dpr;\n            this.pageCanvas.style.height = height + 'px';\n            this.pageCanvas.style.width = width + 'px';\n            this.pageContext.globalAlpha = 1;\n            this.pageContext.scale(dpr, dpr);\n        }\n        this.pageContext.fillStyle = '#FFFFFF';\n        this.pageContext.fillRect(0, 0, this.pageCanvas.width, this.pageCanvas.height);\n        this.pageContext.fillStyle = '#000000';\n    };\n    Renderer.prototype.renderHFWidgets = function (page, widget, width, isHeader) {\n        if (this.isFieldCode) {\n            this.isFieldCode = false;\n        }\n        if (!this.isPrinting) {\n            this.pageContext.globalAlpha = this.documentHelper.owner.enableHeaderAndFooter ? 1 : 0.65;\n        }\n        var cliped = false;\n        var height = 0;\n        var pageHt = 0;\n        var headerFooterHeight = page.boundingRectangle.height / 100 * 40;\n        if (isHeader) {\n            var topMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.topMargin);\n            var widgetHeight = Math.max((widget.y + widget.height), topMargin);\n            if (widgetHeight > headerFooterHeight) {\n                cliped = true;\n                this.pageContext.beginPath();\n                this.pageContext.save();\n                this.pageContext.rect(this.pageLeft, this.pageTop, width, this.getScaledValue(headerFooterHeight));\n                this.pageContext.clip();\n            }\n        }\n        else {\n            var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n            var footerHeight = void 0;\n            if (isNullOrUndefined(page.footerWidgetIn.sectionFormat)) {\n                footerHeight = page.boundingRectangle.height -\n                    /* eslint-disable-next-line max-len */\n                    Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin));\n            }\n            else {\n                footerHeight = page.boundingRectangle.height -\n                    /* eslint-disable-next-line max-len */\n                    Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin));\n            }\n            height = Math.max(page.boundingRectangle.height - headerFooterHeight, footerHeight);\n            pageHt = page.boundingRectangle.height - footerDistance;\n        }\n        this.renderFloatingItems(page, widget.floatingElements, 'Behind');\n        for (var i = 0; i < widget.childWidgets.length; i++) {\n            var block = widget.childWidgets[parseInt(i.toString(), 10)];\n            if (!isHeader) {\n                height += block.height;\n            }\n            // if (isHeader || !isHeader && this.getScaledValue(Math.round(height)) <= this.getScaledValue(Math.round(pageHt))) {\n            this.renderWidget(page, block);\n            // }\n        }\n        this.renderFloatingItems(page, widget.floatingElements, 'InFrontOfText');\n        if (cliped) {\n            this.pageContext.restore();\n        }\n        if (!this.isPrinting) {\n            this.pageContext.globalAlpha = this.documentHelper.owner.enableHeaderAndFooter ? 0.50 : 1;\n        }\n    };\n    Renderer.prototype.renderHeaderSeparator = function (page, left, top, widget) {\n        //Header Widget\n        var topMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.topMargin);\n        var y = this.getScaledValue(Math.max((widget.y + widget.height), Math.abs(topMargin)));\n        var pageWidth = this.getScaledValue(page.boundingRectangle.width);\n        var ctx = this.pageContext;\n        ctx.save();\n        ctx.globalAlpha = 0.85;\n        var headerFooterHeight = (this.getScaledValue(page.boundingRectangle.height) / 100) * 40;\n        //Maximum header height limit\n        y = Math.min(y, headerFooterHeight);\n        //Dash line Separator\n        this.renderDashLine(ctx, left, top + y, pageWidth, '#000000', false);\n        var type = this.getHeaderFooterType(page, true);\n        var index = this.viewer.getHeaderFooter(widget.headerFooterType);\n        var sectionIndex = page.sectionIndex;\n        var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n        l10n.setLocale(this.documentHelper.owner.locale);\n        if (this.documentHelper.headersFooters.length > 1) {\n            var sectionMarkIndex = sectionIndex + 1;\n            type = type + \" -\" + l10n.getConstant('Section') + \" \" + sectionMarkIndex + \"-\";\n        }\n        ctx.font = '9pt Arial';\n        var width = ctx.measureText(type).width;\n        this.renderHeaderFooterMark(ctx, left + 5, top + y, width + 10, 20);\n        this.renderHeaderFooterMarkText(ctx, type, left + 10, y + top + 15);\n        var headerFooterWidget;\n        if (this.documentHelper.headersFooters[parseInt(sectionIndex.toString(), 10)]) {\n            headerFooterWidget = this.documentHelper.headersFooters[parseInt(sectionIndex.toString(), 10)][parseInt(index.toString(), 10)];\n        }\n        if (sectionIndex != 0 && !headerFooterWidget) {\n            var content = l10n.getConstant('Same as Previous');\n            var width_1 = ctx.measureText(content).width;\n            var right = this.viewer.containerWidth - width_1 - 75 + left;\n            this.renderHeaderFooterMark(ctx, right, top + y, width_1 + 10, 20);\n            this.renderHeaderFooterMarkText(ctx, content, right + 5, y + top + 15);\n        }\n        if (page.footerWidget) {\n            //Footer Widget\n            var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n            var footerHeight = this.getScaledValue(page.boundingRectangle.height) -\n                /* eslint-disable-next-line max-len */\n                this.getScaledValue(Math.max(page.footerWidgetIn.height + footerDistance, Math.abs(HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin))));\n            //Maximum footer height limit\n            footerHeight = Math.max((this.getScaledValue(page.boundingRectangle.height) - headerFooterHeight), footerHeight);\n            this.renderDashLine(ctx, left, top + footerHeight, pageWidth, '#000000', false);\n            var type_1 = this.getHeaderFooterType(page, false);\n            var sectionIndex_1 = page.sectionIndex;\n            if (this.documentHelper.headersFooters.length > 1) {\n                var sectionMarkIndex = sectionIndex_1 + 1;\n                type_1 = type_1 + \" -\" + l10n.getConstant('Section') + \" \" + sectionMarkIndex + \"-\";\n            }\n            width = ctx.measureText(type_1).width;\n            this.renderHeaderFooterMark(ctx, left + 5, top + footerHeight - 20, width + 10, 20);\n            this.renderHeaderFooterMarkText(ctx, type_1, left + 10, top + footerHeight - 5);\n            var index_1 = this.viewer.getHeaderFooter(page.footerWidget.headerFooterType);\n            var headerFooterWidget_1;\n            if (this.documentHelper.headersFooters[parseInt(sectionIndex_1.toString(), 10)]) {\n                headerFooterWidget_1 = this.documentHelper.headersFooters[parseInt(sectionIndex_1.toString(), 10)][parseInt(index_1.toString(), 10)];\n            }\n            if (sectionIndex_1 != 0 && !headerFooterWidget_1) {\n                var content = l10n.getConstant('Same as Previous');\n                var width_2 = ctx.measureText(content).width;\n                var right = this.viewer.containerWidth - width_2 - 75 + left;\n                this.renderHeaderFooterMark(ctx, right, top + footerHeight - 20, width_2 + 10, 20);\n                this.renderHeaderFooterMarkText(ctx, content, right + 5, top + footerHeight - 5);\n            }\n            ctx.restore();\n        }\n    };\n    Renderer.prototype.getFooterHeight = function (page) {\n        var footerWidgetHeight = ((page.boundingRectangle.height) / 100) * 40;\n        var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n        var actualHeight = page.boundingRectangle.height -\n            Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin));\n        return Math.max((page.boundingRectangle.height) - footerWidgetHeight, actualHeight);\n    };\n    Renderer.prototype.getHeaderFooterType = function (page, isHeader) {\n        var type;\n        var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n        l10n.setLocale(this.documentHelper.owner.locale);\n        type = isHeader ? l10n.getConstant('Header') : l10n.getConstant('Footer');\n        if (page.bodyWidgets[0].sectionFormat.differentFirstPage &&\n            (isNullOrUndefined(page.previousPage) || page.sectionIndex !== page.previousPage.sectionIndex)) {\n            type = isHeader ? l10n.getConstant('First Page Header') : l10n.getConstant('First Page Footer');\n        }\n        else if (page.bodyWidgets[0].sectionFormat.differentOddAndEvenPages) {\n            if ((this.documentHelper.pages.indexOf(page) + 1) % 2 === 0) {\n                type = isHeader ? l10n.getConstant('Even Page Header') : l10n.getConstant('Even Page Footer');\n            }\n            else {\n                type = isHeader ? l10n.getConstant('Odd Page Header') : l10n.getConstant('Odd Page Footer');\n            }\n        }\n        return type;\n    };\n    /* eslint-disable-next-line max-len */\n    Renderer.prototype.renderDashLine = function (context, x, y, width, fillStyle, isSmallDash) {\n        context.beginPath();\n        context.strokeStyle = fillStyle;\n        context.lineWidth = 1;\n        if (isSmallDash) {\n            context.setLineDash([3, 2]);\n        }\n        else {\n            context.setLineDash([6, 4]);\n        }\n        context.moveTo(x, y);\n        context.lineTo(x + width, y);\n        context.stroke();\n        context.setLineDash([]);\n        context.closePath();\n    };\n    Renderer.prototype.renderSolidLine = function (context, x, y, width, fillStyle) {\n        context.beginPath();\n        context.strokeStyle = fillStyle;\n        context.lineWidth = 0.5;\n        context.moveTo(x, y);\n        context.lineTo(x + width, y);\n        context.stroke();\n        context.closePath();\n    };\n    Renderer.prototype.renderHeaderFooterMark = function (ctx, x, y, w, h) {\n        ctx.beginPath();\n        ctx.fillStyle = 'lightgray';\n        ctx.fillRect(x, y, w, h);\n        ctx.strokeStyle = 'black';\n        ctx.strokeRect(x, y, w, h);\n        ctx.closePath();\n    };\n    Renderer.prototype.renderHeaderFooterMarkText = function (ctx, content, x, y) {\n        ctx.beginPath();\n        ctx.fillStyle = '#000000';\n        ctx.textBaseline = 'alphabetic';\n        ctx.fillText(content, x, y);\n        ctx.closePath();\n    };\n    Renderer.prototype.render = function (page, bodyWidget) {\n        if (this.isFieldCode) {\n            this.isFieldCode = false;\n        }\n        /* eslint-disable */\n        for (var i = 0; i < page.bodyWidgets.length; i++) {\n            if (!isNullOrUndefined(page.bodyWidgets[i].floatingElements)) {\n                this.renderFloatingItems(page, page.bodyWidgets[i].floatingElements, 'Behind');\n            }\n        }\n        /* eslint-enable */\n        var isClipped = false;\n        var nextColumnBody;\n        if (!isNullOrUndefined(bodyWidget.nextRenderedWidget) && bodyWidget.columnIndex + 1 === bodyWidget.nextRenderedWidget.columnIndex) {\n            nextColumnBody = bodyWidget.nextRenderedWidget;\n        }\n        if (!(this.viewer instanceof WebLayoutViewer) && bodyWidget.sectionFormat.columns.length > 1 && !isNullOrUndefined(nextColumnBody)) {\n            var colIndex = page.bodyWidgets.indexOf(bodyWidget);\n            var xPos = void 0;\n            var width = void 0;\n            if (bodyWidget.columnIndex === 0) {\n                /* eslint-disable */\n                xPos = page.bodyWidgets[colIndex].x - HelperMethods.convertPointToPixel(page.bodyWidgets[colIndex].sectionFormat.leftMargin);\n                width = HelperMethods.convertPointToPixel(page.bodyWidgets[colIndex].sectionFormat.leftMargin) + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].width + (bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].space / 2);\n                /* eslint-enable */\n            }\n            else if (colIndex === bodyWidget.sectionFormat.columns.length - 1) {\n                /* eslint-disable */\n                xPos = page.bodyWidgets[colIndex].x - (bodyWidget.sectionFormat.columns[bodyWidget.columnIndex - 1].space / 2);\n                width = HelperMethods.convertPointToPixel(page.bodyWidgets[colIndex].sectionFormat.rightMargin) + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].width + (bodyWidget.sectionFormat.columns[bodyWidget.columnIndex - 1].space / 2);\n                /* eslint-enable */\n            }\n            else {\n                /* eslint-disable */\n                xPos = page.bodyWidgets[colIndex].x - (bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].space / 2);\n                width = bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].width + bodyWidget.sectionFormat.columns[bodyWidget.columnIndex].space;\n                /* eslint-enable */\n            }\n            /* eslint-disable */\n            this.clipRect(xPos, page.bodyWidgets[colIndex].y, this.getScaledValue(width), this.getScaledValue(page.boundingRectangle.height));\n            /* eslint-enable */\n            isClipped = true;\n        }\n        for (var i = 0; i < bodyWidget.childWidgets.length; i++) {\n            var widget = bodyWidget.childWidgets[parseInt(i.toString(), 10)];\n            if (i === 0 && bodyWidget.childWidgets[0] instanceof TableWidget &&\n                (bodyWidget.childWidgets[0].childWidgets.length > 0) &&\n                page.repeatHeaderRowTableWidget) {\n                /* eslint-disable-next-line max-len */\n                this.renderHeader(page, widget, this.documentHelper.layout.getHeader(bodyWidget.childWidgets[0]));\n            }\n            this.renderWidget(page, widget);\n        }\n        if (isClipped) {\n            this.pageContext.restore();\n        }\n        /* eslint-disable */\n        for (var i = 0; i < page.bodyWidgets.length; i++) {\n            if (!isNullOrUndefined(page.bodyWidgets[i].floatingElements)) {\n                this.renderFloatingItems(page, page.bodyWidgets[i].floatingElements, 'InFrontOfText');\n            }\n        }\n        /* eslint-enable */\n        for (var i = 0; i < page.bodyWidgets.length; i++) {\n            if (page.bodyWidgets[parseInt(i.toString(), 10)].sectionFormat.lineBetweenColumns === true) {\n                if (page.bodyWidgets[parseInt(i.toString(), 10)].columnIndex !== 0 && page.bodyWidgets.length > 1) {\n                    var topMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.topMargin);\n                    var linestartY = this.getScaledValue(Math.max((page.headerWidgetIn.y + page.headerWidgetIn.height), topMargin));\n                    var headerFooterHeight = (this.getScaledValue(page.boundingRectangle.height) / 100) * 40;\n                    var footerDistance = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.footerDistance);\n                    var footerHeight = this.getScaledValue(page.boundingRectangle.height) -\n                        /* eslint-disable-next-line max-len */\n                        this.getScaledValue(Math.max(page.footerWidgetIn.height + footerDistance, HelperMethods.convertPointToPixel(page.footerWidgetIn.sectionFormat.bottomMargin)));\n                    footerHeight = Math.max((this.getScaledValue(page.boundingRectangle.height) - headerFooterHeight), footerHeight);\n                    var inBetweenSpace = (page.bodyWidgets[parseInt(i.toString(), 10)].x - (page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.x + page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.width)) / 2;\n                    var startX = inBetweenSpace + (page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.x + page.bodyWidgets[parseInt(i.toString(), 10)].previousRenderedWidget.width);\n                    var startY = linestartY / this.documentHelper.zoomFactor;\n                    var endX = startX;\n                    var endY = void 0;\n                    if (page.footnoteWidget) {\n                        endY = ((footerHeight - (page.footerWidgetIn.height / 2)) - page.footnoteWidget.height * this.documentHelper.zoomFactor) / this.documentHelper.zoomFactor;\n                    }\n                    else {\n                        endY = (footerHeight - (page.footerWidgetIn.height / 2)) / this.documentHelper.zoomFactor;\n                    }\n                    var firstBody = this.documentHelper.layout.getBodyWidget(page.bodyWidgets[parseInt(i.toString(), 10)], true);\n                    var height = this.documentHelper.layout.getNextWidgetHeight(firstBody);\n                    startY = page.bodyWidgets[parseInt(i.toString(), 10)].y;\n                    endY = height;\n                    var color = '#000000';\n                    this.renderSingleBorder(color, startX, startY, endX, endY, 0.5, \"Single\");\n                }\n            }\n        }\n    };\n    Renderer.prototype.renderFloatingItems = function (page, floatingElements, wrappingType) {\n        if (!isNullOrUndefined(floatingElements) && floatingElements.length > 0) {\n            var overLappedShapeWidgets = new Dictionary();\n            /* eslint-disable */\n            floatingElements.sort(function (a, b) {\n                if (a instanceof TableWidget || b instanceof TableWidget) {\n                    return 0;\n                }\n                else {\n                    return a.zOrderPosition - b.zOrderPosition;\n                }\n            });\n            for (var i = 0; i < floatingElements.length; i++) {\n                if (floatingElements[i] instanceof TableWidget) {\n                    continue;\n                }\n                var shape = floatingElements[i];\n                if ((wrappingType === \"Behind\" && shape.textWrappingStyle !== \"Behind\") ||\n                    (wrappingType !== \"Behind\" && shape.textWrappingStyle === \"Behind\")) {\n                    continue;\n                }\n                if (!this.isOverLappedShapeWidget(shape) || overLappedShapeWidgets.containsKey(shape.zOrderPosition)) {\n                    if (shape instanceof ImageElementBox) {\n                        this.renderImageElementBox(shape, shape.x, shape.y, 0);\n                    }\n                    else if (shape instanceof ShapeElementBox) {\n                        var shapeLeft = this.getScaledValue(shape.x, 1);\n                        var shapeTop = this.getScaledValue(shape.y, 2);\n                        this.renderShapeElementBox(shape, shapeLeft, shapeTop, page);\n                    }\n                }\n                else if (!overLappedShapeWidgets.containsKey(shape.zOrderPosition)) {\n                    overLappedShapeWidgets.add(shape.zOrderPosition, shape);\n                }\n            }\n            if (overLappedShapeWidgets.length > 0) {\n                var sortedOverLappedShapeWidgets = overLappedShapeWidgets.keys.sort();\n                for (var j = 0; j < sortedOverLappedShapeWidgets.length; j++) {\n                    var shape = overLappedShapeWidgets.get(sortedOverLappedShapeWidgets[j]);\n                    if (shape instanceof ImageElementBox) {\n                        this.renderImageElementBox(shape, shape.x, shape.y, 0);\n                    }\n                    else if (shape instanceof ShapeElementBox) {\n                        var shapeLeft = this.getScaledValue(shape.x, 1);\n                        var shapeTop = this.getScaledValue(shape.y, 2);\n                        this.renderShapeElementBox(shape, shapeLeft, shapeTop, page);\n                    }\n                }\n            }\n        }\n    };\n    Renderer.prototype.isOverLappedShapeWidget = function (floatingElement) {\n        return ((floatingElement instanceof ImageElementBox\n            && floatingElement.textWrappingStyle !== 'Inline'\n            && floatingElement.textWrappingStyle !== 'Behind'\n            && !(this.documentHelper.compatibilityMode !== 'Word2013'\n                && (floatingElement.isBelowText\n                    && floatingElement.textWrappingStyle !== 'InFrontOfText')))\n            || (floatingElement instanceof ShapeElementBox\n                && floatingElement.textWrappingStyle !== 'Inline'\n                && floatingElement.textWrappingStyle !== 'Behind'\n                && !(this.documentHelper.compatibilityMode !== 'Word2013'\n                    && (floatingElement.isBelowText\n                        && floatingElement.textWrappingStyle !== 'InFrontOfText'))));\n    };\n    Renderer.prototype.renderShapeElementBox = function (shape, shapeLeft, shapeTop, page) {\n        if (shape.isHorizontalRule) {\n            return;\n        }\n        var isZeroShapeHeight = (shape.height === 0) ? true : false;\n        var shapeType = shape.autoShapeType;\n        var blocks = shape.textFrame.childWidgets;\n        shapeTop += shape.margin.top;\n        this.pageContext.beginPath();\n        if (shape.fillFormat && shape.fillFormat.color && shape.fillFormat.fill && shapeType !== 'StraightConnector') {\n            this.pageContext.fillStyle = shape.fillFormat.color;\n            this.pageContext.fillRect(shapeLeft, shapeTop, this.getScaledValue(shape.width), this.getScaledValue(shape.height));\n        }\n        if (!isNullOrUndefined(shapeType)) {\n            if (shape.lineFormat.line && shape.lineFormat.lineFormatType !== 'None') {\n                this.pageContext.lineWidth = shape.lineFormat.weight;\n                this.pageContext.strokeStyle = HelperMethods.getColor(shape.lineFormat.color);\n                if (shapeType !== 'StraightConnector') {\n                    this.pageContext.strokeRect(shapeLeft, shapeTop, this.getScaledValue(shape.width), this.getScaledValue(shape.height));\n                }\n                else {\n                    this.pageContext.moveTo(shapeLeft, shapeTop);\n                    this.pageContext.lineTo(shapeLeft + this.getScaledValue(shape.width), shapeTop + this.getScaledValue(shape.height));\n                    this.pageContext.stroke();\n                }\n            }\n        }\n        this.pageContext.closePath();\n        var isClipped = false;\n        if (shape.width != 0 && shape.height != 0) {\n            isClipped = true;\n            this.clipRect(shape.x, shape.y, this.getScaledValue(shape.width), this.getScaledValue(shape.height));\n        }\n        for (var i = 0; i < blocks.length; i++) {\n            this.renderWidget(page, blocks[i]);\n            if (isZeroShapeHeight && shapeType !== 'StraightConnector') {\n                shape.height = HelperMethods.round((shape.height + blocks[i].height), 5);\n            }\n        }\n        if (isZeroShapeHeight) {\n            isZeroShapeHeight = false;\n        }\n        if (isClipped) {\n            this.pageContext.restore();\n        }\n    };\n    Renderer.prototype.renderWidget = function (page, widget) {\n        if (this.documentHelper.owner.enableLockAndEdit) {\n            this.renderLockRegionBorder(page, widget);\n        }\n        if (widget instanceof ParagraphWidget) {\n            this.renderParagraphWidget(page, widget);\n        }\n        else {\n            this.renderTableWidget(page, widget);\n        }\n    };\n    Renderer.prototype.renderLockRegionBorder = function (page, widget) {\n        if (!widget.isInsideTable && widget instanceof BlockWidget && widget.locked) {\n            var settinsModel = this.documentHelper.owner.documentEditorSettings.collaborativeEditingSettings;\n            var sectionFormat = page.bodyWidgets[0].sectionFormat;\n            var leftPosition = HelperMethods.convertPointToPixel(sectionFormat.leftMargin) - 5;\n            var pageWidth = sectionFormat.pageWidth - sectionFormat.leftMargin - sectionFormat.rightMargin;\n            pageWidth = HelperMethods.convertPointToPixel(pageWidth) + 10;\n            if (this.viewer instanceof WebLayoutViewer) {\n                leftPosition = widget.x - 5;\n                pageWidth = (this.documentHelper.visibleBounds.width - (this.viewer.padding.right * 5)) / this.documentHelper.zoomFactor;\n            }\n            var previousWidget = widget.previousRenderedWidget;\n            var nextWidget = widget.nextRenderedWidget;\n            var color = widget.lockedBy === this.documentHelper.owner.currentUser ? settinsModel.editableRegionColor : settinsModel.lockedRegionColor;\n            var topPosition = widget.y;\n            var height = widget.y + widget.height;\n            //Left border\n            this.renderSingleBorder(color, leftPosition, topPosition, leftPosition, height, 1, \"Single\");\n            //Top border\n            if (isNullOrUndefined(previousWidget) || !previousWidget.locked || widget.lockedBy !== previousWidget.lockedBy) {\n                this.renderSingleBorder(color, leftPosition, topPosition, leftPosition + pageWidth, topPosition, 1, \"Single\");\n            }\n            //Right border\n            this.renderSingleBorder(color, leftPosition + pageWidth, topPosition, leftPosition + pageWidth, height, 1, \"Single\");\n            if (isNullOrUndefined(nextWidget) || !nextWidget.locked || widget.lockedBy !== nextWidget.lockedBy) {\n                // Bottom border\n                this.renderSingleBorder(color, leftPosition, height, leftPosition + pageWidth, height, 1, \"Single\");\n            }\n        }\n    };\n    Renderer.prototype.renderHeader = function (page, widget, header) {\n        if (isNullOrUndefined(header)) {\n            return;\n        }\n        //Updated client area for current page\n        page.viewer.updateClientArea(page.bodyWidgets[0], page);\n        var top = page.viewer.clientArea.y;\n        var parentTable = header.ownerTable.getSplitWidgets()[0];\n        if (parentTable.childWidgets.length === 0) {\n            return;\n        }\n        if (widget.childWidgets.indexOf(header) !== -1) {\n            return;\n        }\n        var table = parentTable.clone();\n        table.childWidgets = [];\n        page.viewer.updateClientAreaLocation(table, new Rect(page.viewer.clientArea.x, top, table.width, table.height));\n        this.updateTableHeaderRows(header, table, page, top);\n        this.isRenderHeader = true;\n        for (var j = 0; j < table.childWidgets.length; j++) {\n            var headerWidget = table.childWidgets[j];\n            var cell = undefined;\n            //Renders table cell outline rectangle - Border and background color.\n            for (var j_1 = 0; j_1 < headerWidget.childWidgets.length; j_1++) {\n                cell = headerWidget.childWidgets[j_1];\n                this.renderTableCellWidget(page, cell);\n            }\n            top += headerWidget.height;\n        }\n        this.isRenderHeader = false;\n        if (widget.y !== top) {\n            //this.Location.Y = top;\n            page.documentHelper.layout.updateChildLocationForTable(top, widget);\n        }\n    };\n    Renderer.prototype.updateTableHeaderRows = function (headerRow, clonedTable, page, top) {\n        var table = headerRow.ownerTable;\n        var rowSpan = 1;\n        for (var i = 0; i < table.childWidgets.length; i++) {\n            var row = table.childWidgets[i];\n            if (row.rowFormat.isHeader) {\n                var clonedRow = row.clone();\n                clonedTable.childWidgets.push(clonedRow);\n                clonedRow.containerWidget = clonedTable;\n                page.viewer.updateClientAreaLocation(clonedRow, new Rect(page.viewer.clientArea.x, top, clonedRow.width, clonedRow.height));\n                page.documentHelper.layout.updateChildLocationForRow(top, clonedRow);\n                top += clonedRow.height;\n                if (row == headerRow) {\n                    for (var j = 0; j < headerRow.childWidgets.length; j++) {\n                        var cell = headerRow.childWidgets[j];\n                        rowSpan = Math.max(rowSpan, cell.cellFormat.rowSpan);\n                    }\n                    if (rowSpan > 1 && i + rowSpan < table.childWidgets.length) {\n                        for (var k = 1; k < rowSpan; k++) {\n                            var nextRow = table.childWidgets[i + k];\n                            if (!isNullOrUndefined(nextRow)) {\n                                var clonedRow_1 = nextRow.clone();\n                                clonedTable.childWidgets.push(clonedRow_1);\n                                clonedRow_1.containerWidget = clonedTable;\n                                page.viewer.updateClientAreaLocation(clonedRow_1, new Rect(page.viewer.clientArea.x, top, clonedRow_1.width, clonedRow_1.height));\n                                page.documentHelper.layout.updateChildLocationForRow(top, clonedRow_1);\n                                top += clonedRow_1.height;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Renderer.prototype.renderParagraphWidget = function (page, paraWidget) {\n        if (this.isFieldCode && paraWidget.isFieldCodeBlock) {\n            return;\n        }\n        var top = paraWidget.y;\n        var left = paraWidget.x;\n        var isClipped = false;\n        var firstLine = paraWidget.firstChild;\n        var paddingLeft = 0;\n        if (!isNullOrUndefined(firstLine)) {\n            for (var i = 0; i < firstLine.children.length; i++) {\n                var element = firstLine.children[i];\n                if (element instanceof TextElementBox) {\n                    paddingLeft = element.padding.left;\n                    break;\n                }\n            }\n        }\n        if (paddingLeft > 0) {\n            this.clipRect(paraWidget.x + paddingLeft, this.getScaledValue(page.boundingRectangle.y), this.getScaledValue(page.boundingRectangle.width), this.getScaledValue(page.boundingRectangle.height));\n            isClipped = true;\n        }\n        if (!(paraWidget.containerWidget instanceof HeaderFooterWidget && paraWidget.containerWidget.isEmpty && !isNullOrUndefined(this.documentHelper.owner.selectionModule) && !isNullOrUndefined(this.documentHelper.selection.start.paragraph) && !this.documentHelper.selection.start.paragraph.isInHeaderFooter)) {\n            this.renderParagraphBorder(page, paraWidget);\n        }\n        if (isClipped) {\n            this.pageContext.restore();\n        }\n        for (var i = 0; i < paraWidget.childWidgets.length; i++) {\n            var widget = paraWidget.childWidgets[i];\n            top += widget.marginTop;\n            this.renderLine(widget, page, left, top);\n            top += widget.height;\n        }\n    };\n    Renderer.prototype.renderParagraphBorder = function (page, paragraphWidet) {\n        var leftBorder = paragraphWidet.paragraphFormat.borders.left;\n        var topBorder = paragraphWidet.paragraphFormat.borders.top;\n        var rightBorder = paragraphWidet.paragraphFormat.borders.right;\n        var bottomBorder = paragraphWidet.paragraphFormat.borders.bottom;\n        var startX = 0;\n        var startY = 0;\n        var endX = 0;\n        var endY = 0;\n        var lineWidth = 0;\n        var firstLine = paragraphWidet.firstChild;\n        var lastLine = paragraphWidet.lastChild;\n        var canRenderParagraphBorders = this.documentHelper.canRenderBorder(paragraphWidet);\n        if (!isNullOrUndefined(leftBorder) && leftBorder.lineStyle !== 'None') {\n            startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet) - HelperMethods.convertPointToPixel(leftBorder.space);\n            endX = startX;\n            endY = startY + paragraphWidet.height;\n            if (topBorder.lineStyle !== 'None' && firstLine.isFirstLine() && !canRenderParagraphBorders.skipTopBorder) {\n                startY = paragraphWidet.y + this.getTopMargin(paragraphWidet) - (HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space));\n                endY = startY + paragraphWidet.height - (this.getTopMargin(paragraphWidet) - (HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space)));\n            }\n            else {\n                startY = paragraphWidet.y;\n                endY = startY + paragraphWidet.height;\n            }\n            if (bottomBorder.lineStyle !== 'None' && lastLine.isLastLine() && !canRenderParagraphBorders.skipBottomBorder) {\n                endY = (endY + HelperMethods.convertPointToPixel(bottomBorder.lineWidth + bottomBorder.space)) - this.getBottomMargin(paragraphWidet);\n            }\n            lineWidth = HelperMethods.convertPointToPixel(leftBorder.lineWidth);\n            this.renderSingleBorder(leftBorder.color, startX, startY, endX, endY, lineWidth, leftBorder.lineStyle);\n        }\n        if (!isNullOrUndefined(topBorder) && topBorder.lineStyle !== 'None' && firstLine.isFirstLine() && !canRenderParagraphBorders.skipTopBorder) {\n            startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet);\n            endX = startX + this.getContainerWidth(paragraphWidet, page);\n            startY = paragraphWidet.y + this.getTopMargin(paragraphWidet) - (HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space));\n            endY = startY;\n            if (leftBorder.lineStyle !== 'None') {\n                startX -= HelperMethods.convertPointToPixel(leftBorder.space);\n            }\n            if (rightBorder.lineStyle !== 'None') {\n                endX += HelperMethods.convertPointToPixel(rightBorder.space);\n            }\n            lineWidth = HelperMethods.convertPointToPixel(topBorder.lineWidth);\n            this.renderSingleBorder(topBorder.color, startX, startY, endX, endY, lineWidth, topBorder.lineStyle);\n        }\n        if (!isNullOrUndefined(rightBorder) && rightBorder.lineStyle !== 'None') {\n            startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet) + this.getContainerWidth(paragraphWidet, page) + HelperMethods.convertPointToPixel(rightBorder.space);\n            startY = endY;\n            endX = startX;\n            endY = startY + paragraphWidet.height;\n            if (topBorder.lineStyle !== 'None' && firstLine.isFirstLine() && !canRenderParagraphBorders.skipTopBorder) {\n                startY = paragraphWidet.y + this.getTopMargin(paragraphWidet) - (HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space));\n                endY = startY + paragraphWidet.height - (this.getTopMargin(paragraphWidet) - (HelperMethods.convertPointToPixel(topBorder.lineWidth + topBorder.space)));\n            }\n            else {\n                startY = paragraphWidet.y;\n                endY = startY + paragraphWidet.height;\n            }\n            if (bottomBorder.lineStyle !== 'None' && lastLine.isLastLine() && !canRenderParagraphBorders.skipBottomBorder) {\n                endY = (endY + HelperMethods.convertPointToPixel(bottomBorder.lineWidth + bottomBorder.space)) - this.getBottomMargin(paragraphWidet);\n            }\n            lineWidth = HelperMethods.convertPointToPixel(rightBorder.lineWidth);\n            this.renderSingleBorder(rightBorder.color, startX, startY, endX, endY, lineWidth, rightBorder.lineStyle);\n        }\n        if (!isNullOrUndefined(bottomBorder) && bottomBorder.lineStyle !== 'None' && lastLine.isLastLine() && !canRenderParagraphBorders.skipBottomBorder) {\n            startX = this.documentHelper.getParagraphLeftPosition(paragraphWidet);\n            endX = startX + this.getContainerWidth(paragraphWidet, page);\n            startY = (paragraphWidet.y + paragraphWidet.height + HelperMethods.convertPointToPixel(bottomBorder.lineWidth + bottomBorder.space)) - (this.getBottomMargin(paragraphWidet));\n            endY = startY;\n            if (leftBorder.lineStyle !== 'None') {\n                startX -= HelperMethods.convertPointToPixel(leftBorder.space);\n            }\n            if (rightBorder.lineStyle !== 'None') {\n                endX += HelperMethods.convertPointToPixel(rightBorder.space);\n            }\n            lineWidth = HelperMethods.convertPointToPixel(bottomBorder.lineWidth);\n            this.renderSingleBorder(bottomBorder.color, startX, startY, endX, endY, lineWidth, bottomBorder.lineStyle);\n        }\n    };\n    Renderer.prototype.getContainerWidth = function (paraWidget, page) {\n        var hangingIndent = 0;\n        if (paraWidget.paragraphFormat.firstLineIndent < 0) {\n            hangingIndent = Math.abs(paraWidget.paragraphFormat.firstLineIndent);\n        }\n        if (paraWidget.isInsideTable) {\n            var cell = paraWidget.associatedCell;\n            return (cell.width + cell.margin.left + cell.margin.right) - cell.leftBorderWidth;\n        }\n        else {\n            if (this.viewer instanceof WebLayoutViewer) {\n                var indent = HelperMethods.convertPointToPixel(paraWidget.leftIndent + paraWidget.rightIndent);\n                return (this.documentHelper.visibleBounds.width - (indent) - (this.viewer.padding.right * 4) - (this.viewer.padding.left * 2)) / this.documentHelper.zoomFactor;\n            }\n            else {\n                var section = paraWidget.bodyWidget;\n                if (section instanceof BodyWidget && section.sectionFormat.columns.length > 1) {\n                    var colIndex = section.columnIndex;\n                    return section.sectionFormat.columns[colIndex].width + HelperMethods.convertPointToPixel(hangingIndent - (paraWidget.rightIndent + paraWidget.leftIndent));\n                }\n                else {\n                    var width = section.sectionFormat.pageWidth - section.sectionFormat.leftMargin - section.sectionFormat.rightMargin;\n                    return HelperMethods.convertPointToPixel(width + hangingIndent - (paraWidget.rightIndent + paraWidget.leftIndent));\n                }\n            }\n        }\n    };\n    Renderer.prototype.getTopMargin = function (paragraph) {\n        if (paragraph.isEmpty()) {\n            return paragraph.childWidgets[0].margin.top;\n        }\n        else {\n            var widget = paragraph.childWidgets[0];\n            var topMargin = 0;\n            if (!isNullOrUndefined(widget.margin)) {\n                topMargin = widget.margin.top;\n            }\n            return topMargin;\n        }\n    };\n    Renderer.prototype.getBottomMargin = function (paragarph) {\n        if (paragarph.isEmpty()) {\n            return paragarph.childWidgets[paragarph.childWidgets.length - 1].margin.bottom;\n        }\n        else {\n            var widget = paragarph.childWidgets[paragarph.childWidgets.length - 1];\n            var bottomMargin = 0;\n            if (!isNullOrUndefined(widget.margin)) {\n                bottomMargin = widget.margin.bottom;\n            }\n            return bottomMargin;\n        }\n    };\n    Renderer.prototype.renderfootNoteWidget = function (page, footnote, width) {\n        var isEmptyPage = footnote.page.bodyWidgets.length === 1 && ((footnote.page.bodyWidgets[0].childWidgets.length === 1\n            && footnote.page.bodyWidgets[0].childWidgets[0].isEmpty != undefined && footnote.page.bodyWidgets[0].childWidgets[0].isEmpty()) || footnote.page.bodyWidgets[0].childWidgets.length === 0);\n        var footerY = this.getFooterHeight(page);\n        var height = footnote.y + footnote.height;\n        if (height > footerY) {\n            height = (footerY - footnote.y);\n        }\n        this.pageContext.beginPath();\n        this.pageContext.save();\n        this.pageContext.rect(this.pageLeft, this.getScaledValue(footnote.y, 2), this.getScaledValue(width), this.getScaledValue(height));\n        this.pageContext.clip();\n        for (var i = 0; i < footnote.bodyWidgets.length; i++) {\n            var bodyWidget = footnote.bodyWidgets[i];\n            var footNoteReference = bodyWidget.footNoteReference;\n            for (var j = 0; j < bodyWidget.childWidgets.length; j++) {\n                var widget = bodyWidget.childWidgets[j];\n                if (i === 0 && j === 0) {\n                    var ctx = this.pageContext;\n                    var xPos = page.bodyWidgets[0].x;\n                    if (page.bodyWidgets.length > 1 && !isNullOrUndefined(bodyWidget.nextWidget) && !(bodyWidget.nextWidget.sectionFormat.breakCode === 'NoBreak')) {\n                        var footWidth = page.bodyWidgets[0].width;\n                        this.renderSolidLine(ctx, this.getScaledValue(xPos, 1), this.getScaledValue(footnote.y + (footnote.margin.top / 2) + 1, 2), footWidth * this.documentHelper.zoomFactor, '#000000');\n                    }\n                    else {\n                        this.renderSolidLine(ctx, this.getScaledValue(xPos, 1), this.getScaledValue(footnote.y + (footnote.margin.top / 2) + 1, 2), 210 * this.documentHelper.zoomFactor, '#000000');\n                    }\n                }\n                if (j === 0 && !isNullOrUndefined(footNoteReference) && widget.childWidgets[0].children[0] instanceof TextElementBox && !this.documentHelper.owner.editorModule.isFootNoteInsert) {\n                    //if (j < 1 || (j > 0 && widget.footNoteReference !== (bodyWidget.childWidgets[j - 1] as BlockWidget).footNoteReference)) {\n                    var footNoteElement = widget.childWidgets[0].children[0];\n                    if (footNoteElement.text === '\\u0002') {\n                        footNoteElement.text = footNoteElement.text.replace(footNoteElement.text, footNoteReference.text);\n                    }\n                    footNoteElement.width = footNoteReference.width;\n                    //}\n                }\n                this.renderWidget(page, widget);\n            }\n        }\n        this.pageContext.restore();\n    };\n    Renderer.prototype.renderTableWidget = function (page, tableWidget) {\n        if (this.isFieldCode) {\n            return;\n        }\n        for (var i = 0; i < tableWidget.childWidgets.length; i++) {\n            var widget = tableWidget.childWidgets[i];\n            this.renderTableRowWidget(page, widget);\n            if (tableWidget.tableFormat.cellSpacing > 0) {\n                this.renderTableOutline(tableWidget);\n            }\n            if (widget.isRenderBookmarkEnd && this.documentHelper.owner.documentEditorSettings.showBookmarks) {\n                var cellWidget = widget.lastChild;\n                var border = cellWidget.ownerTable.isBidiTable ? TableCellWidget.getCellLeftBorder(cellWidget) : TableCellWidget.getCellRightBorder(cellWidget);\n                var lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n                var lastPara = this.documentHelper.selection.getLastParagraph(widget.lastChild);\n                var height = lastPara.lastChild.height - lastPara.lastChild.margin.bottom;\n                this.renderBookmark(this.getScaledValue((cellWidget.x + cellWidget.width + cellWidget.margin.right - lineWidth / 2) + this.documentHelper.textHelper.getParagraphMarkWidth(lastPara.characterFormat), 1), this.getScaledValue(cellWidget.y - cellWidget.margin.top, 2), this.getScaledValue(height), 1);\n            }\n        }\n    };\n    Renderer.prototype.renderTableRowWidget = function (page, rowWidget) {\n        for (var i = 0; i < rowWidget.childWidgets.length; i++) {\n            var widget = rowWidget.childWidgets[i];\n            this.renderTableCellWidget(page, widget);\n            if (widget.isRenderBookmarkEnd && this.documentHelper.owner.documentEditorSettings.showBookmarks) {\n                var lastPara = this.documentHelper.selection.getLastParagraph(widget);\n                var lastLine = lastPara.lastChild;\n                var position = this.documentHelper.selection.getEndPosition(lastPara);\n                this.renderBookmark(this.getScaledValue(position.x, 1), this.getScaledValue(position.y, 2), this.getScaledValue(lastLine.height - lastLine.margin.bottom), 1);\n            }\n        }\n    };\n    Renderer.prototype.renderTableCellWidget = function (page, cellWidget) {\n        if (!this.isPrinting) {\n            var cellTopMargin = 0;\n            var cellBottomMargin = 0;\n            cellTopMargin = cellWidget.margin.top - cellWidget.containerWidget.topBorderWidth;\n            cellBottomMargin = cellWidget.margin.bottom - cellWidget.containerWidget.bottomBorderWidth;\n            if (this.getScaledValue(cellWidget.y, 2) + cellWidget.height + cellBottomMargin * this.documentHelper.zoomFactor < 0 ||\n                (this.getScaledValue(cellWidget.y, 2) - cellTopMargin > this.documentHelper.visibleBounds.height)) {\n                return;\n            }\n        }\n        var widgetHeight = 0;\n        this.renderSelectionHighlightOnTable(page, cellWidget);\n        this.renderTableCellOutline(page.documentHelper, cellWidget);\n        for (var i = 0; i < cellWidget.childWidgets.length; i++) {\n            var widget = cellWidget.childWidgets[i];\n            // MS word render the content in right margin also.\n            // So, we need to add right margin value while cliping the content\n            var width = (cellWidget.width + cellWidget.margin.left + cellWidget.margin.right) - cellWidget.leftBorderWidth;\n            if (!this.isPrinting) {\n                this.clipRect(cellWidget.x - cellWidget.margin.left, cellWidget.y, this.getScaledValue(width), this.getScaledValue(this.height));\n            }\n            this.renderWidget(page, widget);\n            this.pageContext.restore();\n        }\n        if (cellWidget.isRenderEditRangeStart) {\n            var firstPara = this.documentHelper.selection.getFirstParagraph(cellWidget);\n            var firstLine = firstPara.firstChild;\n            var xLeft = firstLine.paragraph.x;\n            var ytop = firstLine.paragraph.y;\n            if (this.documentHelper.owner.documentEditorSettings.highlightEditableRanges) {\n                var highlighters = this.documentHelper.selection.editRegionHighlighters;\n                var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(firstLine) : [];\n                var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n                this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(ytop, 2), this.getScaledValue(firstLine.height - firstLine.margin.bottom), 0, color);\n            }\n        }\n        if (cellWidget.isRenderEditRangeEnd) {\n            var lastPara = this.documentHelper.selection.getLastParagraph(cellWidget);\n            var lastLine = lastPara.lastChild;\n            var position = this.documentHelper.selection.getEndPosition(lastPara);\n            var xLeft = this.documentHelper.textHelper.getWidth(String.fromCharCode(164), lastLine.paragraph.characterFormat) + position.x;\n            if (this.documentHelper.owner.documentEditorSettings.highlightEditableRanges) {\n                var highlighters = this.documentHelper.selection.editRegionHighlighters;\n                var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(lastLine) : [];\n                var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n                this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(position.y, 2), this.getScaledValue(lastLine.height - lastLine.margin.bottom), 0, color);\n            }\n        }\n    };\n    Renderer.prototype.checkHeaderFooterLineWidget = function (widget, keys) {\n        var headerFooter;\n        if (widget instanceof LineWidget) {\n            headerFooter = widget.paragraph.bodyWidget;\n        }\n        else if (widget instanceof TableCellWidget) {\n            headerFooter = widget.bodyWidget;\n        }\n        if (!isNullOrUndefined(headerFooter.parentHeaderFooter)) {\n            headerFooter = headerFooter.parentHeaderFooter;\n            for (var j = 0; j < keys.length; j++) {\n                var selectedWidget = keys[j];\n                if (selectedWidget instanceof LineWidget && widget instanceof LineWidget) {\n                    var parentIndex = selectedWidget.getHierarchicalIndex('');\n                    var currentLineIndex = widget.getHierarchicalIndex('');\n                    if (selectedWidget.paragraph.isInHeaderFooter && headerFooter === selectedWidget.paragraph.bodyWidget\n                        && parentIndex.substring(parentIndex.indexOf(';')) === currentLineIndex.substring(currentLineIndex.indexOf(';'))) {\n                        return selectedWidget;\n                    }\n                }\n                else if (selectedWidget instanceof TableCellWidget && widget instanceof TableCellWidget) {\n                    var parentIndex = selectedWidget.getHierarchicalIndex('');\n                    var currentLineIndex = widget.getHierarchicalIndex('');\n                    if (selectedWidget.ownerTable.isInHeaderFooter && headerFooter === selectedWidget.ownerTable.bodyWidget\n                        && parentIndex.substring(parentIndex.indexOf(';')) === currentLineIndex.substring(currentLineIndex.indexOf(';'))) {\n                        return selectedWidget;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    Renderer.prototype.renderEditRegionHighlight = function (page, lineWidget, top) {\n        if (page.documentHelper.selection && !isNullOrUndefined(page.documentHelper.selection.editRegionHighlighters)) {\n            var renderHighlight = this.documentHelper.selection.editRegionHighlighters.containsKey(lineWidget);\n            if (!renderHighlight && lineWidget.paragraph.isInHeaderFooter) {\n                var keys = this.documentHelper.selection.editRegionHighlighters.keys;\n                lineWidget = this.checkHeaderFooterLineWidget(lineWidget, keys);\n                if (!isNullOrUndefined(lineWidget)) {\n                    renderHighlight = true;\n                }\n            }\n            if (renderHighlight) {\n                var widgetInfo = this.documentHelper.selection.editRegionHighlighters.get(lineWidget);\n                for (var i = 0; i < widgetInfo.length; i++) {\n                    this.pageContext.fillStyle = widgetInfo[i].color !== '' ? widgetInfo[i].color : '#add8e6';\n                    this.pageContext.fillRect(this.getScaledValue(widgetInfo[i].left, 1), this.getScaledValue(top, 2), this.getScaledValue(widgetInfo[i].width), this.getScaledValue(lineWidget.height));\n                }\n            }\n        }\n    };\n    Renderer.prototype.renderSearchHighlight = function (page, lineWidget, top) {\n        if (this.documentHelper.owner.searchModule && !isNullOrUndefined(page.documentHelper.owner.searchModule.searchHighlighters)) {\n            var renderHighlight = page.documentHelper.owner.searchModule.searchHighlighters.containsKey(lineWidget);\n            if (!renderHighlight && lineWidget.paragraph.isInHeaderFooter) {\n                var keys = page.documentHelper.owner.searchModule.searchHighlighters.keys;\n                lineWidget = this.checkHeaderFooterLineWidget(lineWidget, keys);\n                if (!isNullOrUndefined(lineWidget)) {\n                    renderHighlight = true;\n                }\n            }\n            if (renderHighlight) {\n                var widgetInfo = page.documentHelper.owner.searchModule.searchHighlighters.get(lineWidget);\n                for (var i = 0; i < widgetInfo.length; i++) {\n                    this.pageContext.fillStyle = this.viewer.owner.documentEditorSettings.searchHighlightColor;\n                    this.pageContext.fillRect(this.getScaledValue(widgetInfo[i].left, 1), this.getScaledValue(top, 2), this.getScaledValue(widgetInfo[i].width), this.getScaledValue(lineWidget.height));\n                }\n            }\n        }\n    };\n    Renderer.prototype.renderSelectionHighlight = function (page, lineWidget, top) {\n        if (!this.isPrinting && page.documentHelper.owner.selectionModule && !this.documentHelper.isScrollToSpellCheck && page.documentHelper.owner.selectionModule.selectedWidgets.length > 0) {\n            var renderHighlight = page.documentHelper.owner.selectionModule.selectedWidgets.containsKey(lineWidget);\n            if (!renderHighlight && lineWidget.paragraph.isInHeaderFooter) {\n                var keys = page.documentHelper.owner.selectionModule.selectedWidgets.keys;\n                lineWidget = this.checkHeaderFooterLineWidget(lineWidget, keys);\n                if (!isNullOrUndefined(lineWidget)) {\n                    renderHighlight = true;\n                }\n            }\n            if (renderHighlight) {\n                page.documentHelper.owner.selectionModule.addSelectionHighlight(this.selectionContext, lineWidget, top, page);\n            }\n        }\n    };\n    Renderer.prototype.renderSelectionHighlightOnTable = function (page, cellWidget) {\n        if (!this.isPrinting && page.documentHelper.owner.selectionModule && page.documentHelper.owner.selectionModule.selectedWidgets.length > 0) {\n            var renderHighlight = page.documentHelper.owner.selectionModule.selectedWidgets.containsKey(cellWidget);\n            if (!renderHighlight && cellWidget.ownerTable.isInHeaderFooter) {\n                var keys = page.documentHelper.owner.selectionModule.selectedWidgets.keys;\n                cellWidget = this.checkHeaderFooterLineWidget(cellWidget, keys);\n                if (!isNullOrUndefined(cellWidget)) {\n                    renderHighlight = true;\n                }\n            }\n            if (renderHighlight) {\n                page.documentHelper.owner.selectionModule.addSelectionHighlightTable(this.selectionContext, cellWidget, page);\n            }\n        }\n    };\n    Renderer.prototype.renderLine = function (lineWidget, page, left, top) {\n        this.renderSelectionHighlight(page, lineWidget, top);\n        var paraFormat = lineWidget.paragraph.paragraphFormat;\n        var x = left;\n        if (lineWidget.isFirstLine() && !paraFormat.bidi) {\n            left += HelperMethods.convertPointToPixel(paraFormat.firstLineIndent);\n        }\n        if (this.documentHelper && this.documentHelper.selection && !isNullOrUndefined(this.documentHelper.selection.formFieldHighlighters)\n            && this.documentHelper.selection.formFieldHighlighters.containsKey(lineWidget)) {\n            if (this.documentHelper.owner.documentEditorSettings\n                && this.documentHelper.owner.documentEditorSettings.formFieldSettings.applyShading) {\n                var widgetInfo = page.documentHelper.selection.formFieldHighlighters.get(lineWidget);\n                for (var i = 0; i < widgetInfo.length; i++) {\n                    this.pageContext.fillStyle = this.documentHelper.owner.documentEditorSettings.formFieldSettings.shadingColor;\n                    var height_1 = lineWidget.height;\n                    var isAltered = false;\n                    var isLastLine = lineWidget.isLastLine();\n                    if (isLastLine) {\n                        height_1 = height_1 - HelperMethods.convertPointToPixel(this.documentHelper.layout.getAfterSpacing(lineWidget.paragraph));\n                        if (lineWidget.paragraph.paragraphFormat.lineSpacing > 1) {\n                            var formField = this.getFormfieldInLine(lineWidget);\n                            if (!isNullOrUndefined(formField)) {\n                                var sizeInfo = this.documentHelper.textHelper.getHeight(formField.characterFormat);\n                                var maxHeight = sizeInfo.Height;\n                                if (lineWidget.paragraph.paragraphFormat.lineSpacingType === 'Multiple') {\n                                    height_1 = height_1 - HelperMethods.convertPointToPixel(this.documentHelper.layout.getLineSpacing(lineWidget.paragraph, maxHeight, true));\n                                }\n                                else {\n                                    top = top + HelperMethods.convertPointToPixel(lineWidget.paragraph.paragraphFormat.beforeSpacing);\n                                    height_1 = sizeInfo.Height;\n                                    isAltered = true;\n                                }\n                            }\n                        }\n                    }\n                    this.pageContext.fillRect(this.getScaledValue(widgetInfo[i].left, 1), this.getScaledValue(top, 2), this.getScaledValue(widgetInfo[i].width), this.getScaledValue(height_1));\n                    if (isAltered) {\n                        isAltered = false;\n                        top = top - HelperMethods.convertPointToPixel(lineWidget.paragraph.paragraphFormat.beforeSpacing);\n                    }\n                }\n            }\n        }\n        // Render search highlight\n        this.renderSearchHighlight(page, lineWidget, top);\n        // EditRegion highlight \n        this.renderEditRegionHighlight(page, lineWidget, top);\n        var commentIDList = [];\n        var children = lineWidget.renderedElements;\n        var underlineY = this.getUnderlineYPosition(lineWidget);\n        var bookmarks = [];\n        if (!isNullOrUndefined(lineWidget.paragraph.associatedCell) && lineWidget.paragraph.associatedCell.isRenderBookmarkStart) {\n            var firstLineInFirstPara = lineWidget.paragraph.associatedCell.firstChild.firstChild;\n            if (firstLineInFirstPara == lineWidget) {\n                bookmarks.push({ x: left, y: top, height: lineWidget.height - lineWidget.margin.bottom, type: 0 });\n            }\n        }\n        for (var i = 0; i < children.length; i++) {\n            var elementBox = children[i];\n            if (elementBox instanceof ShapeBase && elementBox.textWrappingStyle !== 'Inline') {\n                continue;\n            }\n            if (elementBox instanceof CommentCharacterElementBox || elementBox instanceof EditRangeStartElementBox) {\n                var pageGap = 0;\n                if (this.viewer instanceof PageLayoutViewer) {\n                    pageGap = this.viewer.pageGap;\n                }\n                var style = 'display:block;position:absolute;';\n                var topPosition = this.getScaledValue((top) + (page.boundingRectangle.y -\n                    (pageGap * (page.index + 1)))) + (pageGap * (page.index + 1)) + 'px;';\n                if (elementBox instanceof EditRangeStartElementBox && (this.documentHelper.owner.currentUser === elementBox.user || (elementBox.group === \"Everyone\" && elementBox.user === \"\"))) {\n                    if (this.documentHelper.owner.documentEditorSettings.highlightEditableRanges && elementBox.columnFirst == -1) {\n                        var height = elementBox.line.height - elementBox.line.margin.bottom;\n                        var xLeft = left;\n                        var yTop = top;\n                        var highlighters = this.documentHelper.selection.editRegionHighlighters;\n                        var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(lineWidget) : [];\n                        var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n                        this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(yTop, 2), this.getScaledValue(lineWidget.height - lineWidget.margin.bottom), 0, color);\n                    }\n                    if (this.documentHelper.owner.enableLockAndEdit) {\n                        var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n                        l10n.setLocale(this.documentHelper.owner.locale);\n                        elementBox.renderLockMark(this.documentHelper.owner.currentUser, l10n);\n                        var settings = this.documentHelper.owner.documentEditorSettings.collaborativeEditingSettings;\n                        var color = elementBox.user === this.documentHelper.owner.currentUser ? settings.editableRegionColor : settings.lockedRegionColor;\n                        style += \"color:\" + color + \";\";\n                        var leftMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.leftMargin);\n                        var leftPosition = page.boundingRectangle.x + this.getScaledValue(leftMargin - 20) + 'px;';\n                        if (this.viewer instanceof WebLayoutViewer) {\n                            leftPosition = lineWidget.paragraph.x - 5 + 'px;';\n                        }\n                        style = style + 'left:' + leftPosition + 'top:' + topPosition;\n                        elementBox.editRangeMark.setAttribute('style', style);\n                    }\n                    else {\n                        if (elementBox.editRangeMark) {\n                            elementBox.editRangeMark.setAttribute('style', 'display:none');\n                        }\n                    }\n                }\n                else if (elementBox instanceof CommentCharacterElementBox &&\n                    elementBox.commentType === 0 && this.documentHelper.owner.selectionModule) {\n                    if (this.documentHelper.owner.enableComment) {\n                        var rightMargin = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.rightMargin);\n                        var pageWidth = HelperMethods.convertPointToPixel(page.bodyWidgets[0].sectionFormat.pageWidth);\n                        var leftPosition = page.boundingRectangle.x + this.getScaledValue((pageWidth - rightMargin) + (rightMargin / 4)) + 'px;';\n                        if (this.viewer instanceof WebLayoutViewer) {\n                            leftPosition = (page.boundingRectangle.width - (this.viewer.padding.right * 2) - (this.viewer.padding.left * 2)) + 'px;';\n                        }\n                        style = style + 'left:' + leftPosition + 'top:' + topPosition;\n                        if (commentIDList.indexOf(elementBox.commentId) === -1 && !isNullOrUndefined(elementBox.comment) && !elementBox.comment.isReply) {\n                            commentIDList.push(elementBox.commentId);\n                            elementBox.renderCommentMark(topPosition, leftPosition);\n                            elementBox.commentMark.setAttribute('style', style);\n                        }\n                    }\n                    else {\n                        if (elementBox.commentMark) {\n                            elementBox.commentMark.setAttribute('style', 'display:none');\n                        }\n                    }\n                }\n            }\n            if (elementBox instanceof EditRangeEndElementBox && (this.documentHelper.owner.currentUser === elementBox.editRangeStart.user || (elementBox.editRangeStart.group === \"Everyone\" && elementBox.editRangeStart.user === \"\"))) {\n                if (elementBox.editRangeStart.columnFirst == -1 && this.documentHelper.owner.documentEditorSettings.highlightEditableRanges) {\n                    var height = elementBox.line.height - elementBox.line.margin.bottom;\n                    var xLeft = left;\n                    var yTop = top;\n                    var highlighters = this.documentHelper.selection.editRegionHighlighters;\n                    var widgetInfo = !isNullOrUndefined(highlighters) ? highlighters.get(lineWidget) : [];\n                    var color = !isNullOrUndefined(widgetInfo) && !isNullOrUndefined(widgetInfo[0]) ? widgetInfo[0].color : \"ffff00\";\n                    this.renderBookmark(this.getScaledValue(xLeft, 1), this.getScaledValue(yTop, 2), this.getScaledValue(lineWidget.height - lineWidget.margin.bottom), 1, color);\n                }\n            }\n            if (elementBox instanceof BookmarkElementBox && this.documentHelper.owner.documentEditorSettings.showBookmarks && this.documentHelper.getBookmarks().indexOf(elementBox.name) !== -1) {\n                var height = elementBox.line.height - elementBox.line.margin.bottom;\n                var xLeft = left;\n                var yTop = top;\n                if (elementBox.bookmarkType == 1) {\n                    if (this.isBookmarkEndAtStart(elementBox) && isNullOrUndefined(elementBox.properties)) {\n                        var previousParaElement = elementBox.paragraph;\n                        var prevRenderableElement = void 0;\n                        var isRenderablePresent = false;\n                        while (!isRenderablePresent && !isNullOrUndefined(previousParaElement)) {\n                            var lineIndex = previousParaElement.childWidgets.indexOf(elementBox.line) >= 0 ? previousParaElement.childWidgets.indexOf(elementBox.line) : previousParaElement.childWidgets.length - 1;\n                            for (var i_1 = lineIndex; i_1 >= 0; i_1--) {\n                                var line = previousParaElement.childWidgets[i_1];\n                                var elementIndex = line.children.indexOf(elementBox) >= 0 ? line.children.indexOf(elementBox) : line.children.length - 1;\n                                for (var j = elementIndex; j >= 0; j--) {\n                                    if (this.isRenderable(line.children[j])) {\n                                        prevRenderableElement = line.children[j];\n                                        isRenderablePresent = true;\n                                        break;\n                                    }\n                                }\n                                if (isRenderablePresent) {\n                                    break;\n                                }\n                            }\n                            if (!isRenderablePresent) {\n                                previousParaElement = this.documentHelper.selection.getPreviousParagraphBlock(previousParaElement);\n                            }\n                        }\n                        if (!isNullOrUndefined(prevRenderableElement)) {\n                            xLeft += this.documentHelper.selection.getWidth(prevRenderableElement.line, false) + this.documentHelper.textHelper.getParagraphMarkWidth(elementBox.line.paragraph.characterFormat);\n                            yTop = this.documentHelper.selection.getTop(prevRenderableElement.line);\n                        }\n                    }\n                    if (!isNullOrUndefined(elementBox.properties)) {\n                        if (elementBox.properties['isAfterParagraphMark']) {\n                            xLeft += this.documentHelper.textHelper.getParagraphMarkWidth(elementBox.line.paragraph.characterFormat);\n                        }\n                        if (elementBox.properties['isAfterCellMark']) {\n                            xLeft += this.documentHelper.textHelper.getWidth(String.fromCharCode(164), lineWidget.paragraph.characterFormat);\n                        }\n                    }\n                }\n                if (elementBox.bookmarkType == 1) {\n                    if (!isNullOrUndefined(elementBox.reference)) {\n                        if (isNullOrUndefined(elementBox.reference.properties)) {\n                            if (!this.documentHelper.selection.isRenderBookmarkAtEnd(elementBox)) {\n                                bookmarks.push({ x: xLeft, y: yTop, height: height, type: elementBox.bookmarkType });\n                            }\n                        }\n                        else {\n                            var bookmarkEndCell = elementBox.paragraph.associatedCell;\n                            if (isNullOrUndefined(bookmarkEndCell)) {\n                                bookmarks.push({ x: xLeft, y: yTop, height: height, type: elementBox.bookmarkType });\n                            }\n                        }\n                    }\n                }\n                else {\n                    if (isNullOrUndefined(elementBox.properties)) {\n                        bookmarks.push({ x: xLeft, y: yTop, height: height, type: elementBox.bookmarkType });\n                    }\n                }\n            }\n            if (elementBox instanceof FieldElementBox || this.isFieldCode ||\n                (elementBox.width === 0 && elementBox.height === 0)) {\n                if (this.isFieldCode) {\n                    elementBox.width = 0;\n                }\n                left += elementBox.width + elementBox.margin.left;\n                this.toSkipFieldCode(elementBox);\n                continue;\n            }\n            if (!this.isPrinting) {\n                if (this.getScaledValue(top + elementBox.margin.top, 2) + elementBox.height * this.documentHelper.zoomFactor < 0 ||\n                    this.getScaledValue(top + elementBox.margin.top, 2) > this.documentHelper.visibleBounds.height) {\n                    left += elementBox.width + elementBox.margin.left;\n                    if (elementBox instanceof TextElementBox) {\n                        if (this.documentHelper.owner.isSpellCheck) {\n                            elementBox.canTrigger = true;\n                        }\n                        elementBox.isVisible = false;\n                        if (!elementBox.isSpellChecked || elementBox.line.paragraph.isChangeDetected) {\n                            elementBox.ischangeDetected = true;\n                        }\n                    }\n                    continue;\n                }\n            }\n            if (elementBox instanceof ListTextElementBox) {\n                this.renderListTextElementBox(elementBox, left, top, underlineY);\n            }\n            else if (elementBox instanceof ImageElementBox) {\n                left += elementBox.padding.left;\n                this.renderImageElementBox(elementBox, left, top, underlineY);\n            }\n            else if (elementBox instanceof ShapeElementBox) {\n                var shapeLeftMargin = elementBox.margin.left;\n                var shapeLeft = this.getScaledValue(left + shapeLeftMargin, 1);\n                var shapeTop = this.getScaledValue(top, 2);\n                this.renderShapeElementBox(elementBox, shapeLeft, shapeTop, page);\n            }\n            else {\n                elementBox.isVisible = true;\n                left += elementBox.padding.left;\n                this.renderTextElementBox(elementBox, left, top, underlineY);\n            }\n            left += elementBox.width + elementBox.margin.left;\n            if (lineWidget.paragraph.bidi) {\n                x += (elementBox.margin.left);\n            }\n            else {\n                x = left;\n            }\n        }\n        if (this.documentHelper.owner.documentEditorSettings.showBookmarks && bookmarks.length > 0) {\n            for (var i = 0; i < bookmarks.length; i++) {\n                var bookmark = bookmarks[i];\n                this.renderBookmark(this.getScaledValue(bookmark.x, 1), this.getScaledValue(bookmark.y, 2), this.getScaledValue(bookmark.height), bookmark.type);\n            }\n        }\n        if (this.documentHelper.owner.documentEditorSettings.showHiddenMarks && !this.isPrinting) {\n            var text = '';\n            var currentCharFormat = lineWidget.paragraph.characterFormat;\n            var y = 0;\n            var characterFont = this.retriveCharacterformat(currentCharFormat);\n            var l10n = new L10n('documenteditor', this.documentHelper.owner.defaultLocale);\n            l10n.setLocale(this.documentHelper.owner.locale);\n            this.pageContext.fillStyle = HelperMethods.getColor(currentCharFormat.fontColor);\n            if ((children.length == 0 && !lineWidget.isEndsWithLineBreak && !isNullOrUndefined(lineWidget.paragraph)) || (lineWidget.paragraph.childWidgets.length === 1)) {\n                y = lineWidget.paragraph.y + (this.documentHelper.textHelper.getHeight(currentCharFormat)).BaselineOffset + this.documentHelper.layout.getBeforeSpacing(lineWidget.paragraph);\n                //Paragraph with empty linewidgets with mutiple line breaks\n                if (!lineWidget.isEndsWithLineBreak && lineWidget.indexInOwner > 0 && children.length == 0) {\n                    y = top + lineWidget.previousLine.maxBaseLine;\n                }\n            }\n            else {\n                y = top + lineWidget.maxBaseLine;\n            }\n            if (currentCharFormat.revisions.length > 0) {\n                //CharacterFormat Track changes is not supported., Hence only the Para mark changes are parsed and preserved in the charcterForamt. \n                var color = this.documentHelper.authors.get(currentCharFormat.revisions[0].author);\n                this.pageContext.fillStyle = HelperMethods.getColor(color);\n            }\n            if (lineWidget.isEndsWithColumnBreak) {\n                characterFont = this.retriveCharacterformat(currentCharFormat, 0.7);\n                text = \".....\" + l10n.getConstant('Column Break') + \".....\";\n            }\n            else if (lineWidget.isEndsWithPageBreak) {\n                characterFont = this.retriveCharacterformat(currentCharFormat, 0.7);\n                if (lineWidget.paragraph.bidi) {\n                    text = String.fromCharCode(182) + '.....' + l10n.getConstant('Page Break') + '.....';\n                }\n                else {\n                    text = '.....' + l10n.getConstant('Page Break') + '.....' + String.fromCharCode(182);\n                }\n                var textinfo = this.documentHelper.textHelper.getWidth(text, currentCharFormat, FontScriptType.English);\n                if (this.viewer instanceof PageLayoutViewer) {\n                    if (lineWidget.paragraph.bidi) {\n                        if (x < (textinfo + this.viewer.clientActiveArea.x)) {\n                            text = '.....';\n                        }\n                    }\n                    else {\n                        if (x > this.viewer.clientActiveArea.width) {\n                            text = '.....';\n                        }\n                    }\n                }\n                else {\n                    if (lineWidget.paragraph.bidi) {\n                        if ((x - textinfo) < this.viewer.clientActiveArea.x) {\n                            text = '.....';\n                        }\n                    }\n                    else {\n                        if ((x + textinfo) > (this.viewer.clientActiveArea.width + this.viewer.clientActiveArea.x)) {\n                            text = '.....';\n                        }\n                    }\n                }\n            }\n            else if (lineWidget.isEndsWithLineBreak) {\n                text = lineWidget.paragraph.bidi ? String.fromCharCode(8627) : String.fromCharCode(8629);\n            }\n            else if (lineWidget.paragraph.isInsideTable && isNullOrUndefined(lineWidget.nextLine) && isNullOrUndefined(lineWidget.paragraph.nextWidget)) {\n                if (lineWidget.height != 0) { //The nested table parent cell mark is render the out bound ,So skip cell mark is linewidget height equal to zero \n                    text = String.fromCharCode(164);\n                }\n            }\n            else if (isNullOrUndefined(lineWidget.nextLine)) {\n                text = String.fromCharCode(182);\n            }\n            if (lineWidget.paragraph.containerWidget instanceof BodyWidget && !isNullOrUndefined(lineWidget.paragraph.nextRenderedWidget)) {\n                if (lineWidget.paragraph.containerWidget.sectionIndex !== lineWidget.paragraph.nextRenderedWidget.containerWidget.sectionIndex && lineWidget.isLastLine()) {\n                    if (lineWidget.paragraph.nextRenderedWidget.containerWidget.sectionFormat.breakCode === 'NoBreak' && lineWidget.paragraph.containerWidget.index !== lineWidget.paragraph.nextRenderedWidget.containerWidget.index) {\n                        text = ':::::' + l10n.getConstant('Section Break Continuous') + ':::::';\n                    }\n                    else {\n                        text = ':::::' + l10n.getConstant('Section Break Next Page') + ':::::';\n                    }\n                    characterFont = this.retriveCharacterformat(currentCharFormat, 0.7);\n                    if (lineWidget.isEndsWithPageBreak) {\n                        if (lineWidget.paragraph.bidi) {\n                            text = text + String.fromCharCode(182) + '.....' + l10n.getConstant('Page Break') + '.....';\n                        }\n                        else {\n                            text = '.....' + l10n.getConstant('Page Break') + '.....' + String.fromCharCode(182) + text;\n                        }\n                    }\n                    var textinfo = this.documentHelper.textHelper.getWidth(text, currentCharFormat, FontScriptType.English);\n                    if (this.viewer instanceof PageLayoutViewer) {\n                        if (lineWidget.paragraph.bidi) {\n                            if (x < (textinfo + this.viewer.clientActiveArea.x)) {\n                                text = ':::::';\n                                if (lineWidget.isEndsWithPageBreak) {\n                                    text = ':::::.....';\n                                }\n                            }\n                        }\n                        else {\n                            if ((x + textinfo - this.viewer.clientActiveArea.x) > (this.viewer.clientActiveArea.width)) {\n                                text = ':::::';\n                                if (lineWidget.isEndsWithPageBreak) {\n                                    text = '.....:::::';\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (lineWidget.paragraph.bidi) {\n                            if ((x - textinfo) < this.viewer.clientActiveArea.x) {\n                                text = ':::::';\n                                if (lineWidget.isEndsWithPageBreak) {\n                                    text = ':::::.....';\n                                }\n                            }\n                        }\n                        else {\n                            if ((x + textinfo - this.documentHelper.pages[0].boundingRectangle.x) > (this.viewer.clientActiveArea.width)) {\n                                text = ':::::';\n                                if (lineWidget.isEndsWithPageBreak) {\n                                    text = '.....:::::';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (text.length > 0) {\n                if (lineWidget.paragraph.bidi && !lineWidget.paragraph.isEmpty()) {\n                    x -= this.documentHelper.textHelper.getWidth(text, currentCharFormat, FontScriptType.English);\n                }\n                this.pageContext.font = characterFont;\n                var scaleFactor = currentCharFormat.scaling < 100 ? 1 : currentCharFormat.scaling / 100;\n                this.pageContext.letterSpacing = currentCharFormat.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n                this.pageContext.save();\n                this.pageContext.scale(scaleFactor, 1);\n                this.pageContext.fillText(text, this.getScaledValue(x, 1) / (scaleFactor), this.getScaledValue(y, 2));\n                this.pageContext.restore();\n            }\n        }\n    };\n    Renderer.prototype.isBookmarkEndAtStart = function (bookmark) {\n        var para = bookmark.paragraph;\n        var index = 0;\n        var firstLine = para.childWidgets[index];\n        var isBookmarkAtStart = true;\n        while (firstLine.children.indexOf(bookmark) == -1) {\n            firstLine = para.childWidgets[++index];\n            if (index == para.childWidgets.length) {\n                break;\n            }\n        }\n        if (bookmark.line != firstLine) {\n            return false;\n        }\n        var bookmarkIndex = firstLine.children.indexOf(bookmark) >= 0 ? firstLine.children.indexOf(bookmark) : -1;\n        for (var i = bookmarkIndex; i >= 0; i--) {\n            var element = firstLine.children[i];\n            if (this.isRenderable(element)) {\n                isBookmarkAtStart = false;\n            }\n        }\n        if (isBookmarkAtStart) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Renderer.prototype.isRenderable = function (element) {\n        if (!(element instanceof BookmarkElementBox || element instanceof EditRangeStartElementBox || element instanceof EditRangeEndElementBox)) {\n            return true;\n        }\n        return false;\n    };\n    Renderer.prototype.combineHexColors = function (color1, color2) {\n        var hex1 = color1.replace(\"#\", \"\");\n        var hex2 = color2.replace(\"#\", \"\");\n        var r1 = parseInt(hex1.substring(0, 2), 16);\n        var g1 = parseInt(hex1.substring(2, 4), 16);\n        var b1 = parseInt(hex1.substring(4, 6), 16);\n        var r2 = parseInt(hex2.substring(0, 2), 16);\n        var g2 = parseInt(hex2.substring(2, 4), 16);\n        var b2 = parseInt(hex2.substring(4, 6), 16);\n        var r = Math.round((r1 * 0.35) + (r2 * 0.65));\n        var g = Math.round((g1 * 0.35) + (g2 * 0.65));\n        var b = Math.round((b1 * 0.35) + (b2 * 0.65));\n        var mixedColor = \"#\" + r.toString(16) + g.toString(16) + b.toString(16);\n        return mixedColor;\n    };\n    Renderer.prototype.renderBookmark = function (x, y, height, type, restrictColor) {\n        if (this.isPrinting) {\n            return;\n        }\n        this.pageContext.beginPath();\n        this.pageContext.lineWidth = 1.5;\n        var extensionLength = 3;\n        if (type == 0) {\n            this.pageContext.moveTo(x + extensionLength, y);\n            this.pageContext.lineTo(x, y);\n            this.pageContext.lineTo(x, y + height);\n            this.pageContext.lineTo(x + extensionLength, y + height);\n        }\n        if (type == 1) {\n            this.pageContext.moveTo(x - extensionLength, y);\n            this.pageContext.lineTo(x, y);\n            this.pageContext.lineTo(x, y + height);\n            this.pageContext.lineTo(x - extensionLength, y + height);\n        }\n        this.pageContext.strokeStyle = \"#7F7F7F\";\n        this.pageContext.stroke();\n        this.pageContext.closePath();\n        if (!isNullOrUndefined(restrictColor)) {\n            var combinedColor = this.combineHexColors(restrictColor, \"#7F7F7F\");\n            this.pageContext.fillStyle = combinedColor;\n            this.pageContext.fillRect(x, y, 1.5, height);\n        }\n    };\n    Renderer.prototype.retriveCharacterformat = function (character, fontSizeFactor) {\n        if (isNullOrUndefined(fontSizeFactor)) {\n            fontSizeFactor = 1;\n        }\n        var font = '';\n        this.pageContext.textBaseline = 'alphabetic';\n        var bold = '';\n        var italic = '';\n        var fontSize = 11;\n        var fontFamily = '';\n        bold = character.bold ? 'bold' : '';\n        italic = character.italic ? 'italic' : '';\n        fontSize = character.fontSize === 0 ? 0.5 : character.fontSize / (character.baselineAlignment === 'Normal' ? 1 : 1.5);\n        fontSize = fontSize * this.documentHelper.zoomFactor * fontSizeFactor;\n        fontFamily = character.fontFamily;\n        font = bold + ' ' + italic + ' ' + fontSize + 'pt' + ' ' + '\"' + fontFamily + '\"';\n        return font;\n    };\n    Renderer.prototype.toSkipFieldCode = function (element) {\n        if (element instanceof FieldElementBox) {\n            if (element.fieldType === 0) {\n                if (!this.isFieldCode && (!isNullOrUndefined(element.fieldEnd) || element.hasFieldEnd)) {\n                    this.fieldStacks.push(element);\n                    this.isFieldCode = true;\n                }\n            }\n            else if (element.fieldType === 2 || element.fieldType === 1) {\n                if (this.fieldStacks.length > 0 && element.fieldBegin === this.fieldStacks[this.fieldStacks.length - 1]) {\n                    this.fieldStacks.pop();\n                    this.isFieldCode = false;\n                }\n            }\n        }\n    };\n    Renderer.prototype.getUnderlineYPosition = function (lineWidget) {\n        var height = 0;\n        var lineHeight = 0;\n        for (var i = 0; i < lineWidget.children.length; i++) {\n            if (lineWidget.children[i] instanceof FieldElementBox ||\n                (lineWidget.children[i].width === 0 && lineWidget.children[i].height === 0)) {\n                continue;\n            }\n            if (lineWidget.children[i] instanceof ShapeElementBox) {\n                continue;\n            }\n            else {\n                if (height < lineWidget.children[i].height + lineWidget.children[i].margin.top) {\n                    height = lineWidget.children[i].margin.top + lineWidget.children[i].height;\n                    lineHeight = (lineWidget.children[i] instanceof ImageElementBox) ? 0.9 : lineWidget.children[i].height / 20;\n                }\n            }\n        }\n        return height - 2 * lineHeight;\n    };\n    Renderer.prototype.renderListTextElementBox = function (elementBox, left, top, underlineY) {\n        var topMargin = elementBox.margin.top;\n        var leftMargin = elementBox.margin.left;\n        var format = elementBox.listLevel.characterFormat;\n        var breakCharacterFormat = elementBox.line.paragraph.characterFormat;\n        var color = format.hasValue('fontColor') ? format.fontColor : breakCharacterFormat.fontColor;\n        this.pageContext.textBaseline = 'alphabetic';\n        var bold = '';\n        var italic = '';\n        var fontFamily = format.hasValue('fontFamily') ? format.fontFamily : breakCharacterFormat.fontFamily;\n        if (this.documentHelper.isIosDevice && (elementBox.text === String.fromCharCode(9679) || elementBox.text === String.fromCharCode(9675))) {\n            fontFamily = '';\n        }\n        var fontSize = format.hasValue('fontSize') ? format.fontSize : breakCharacterFormat.fontSize;\n        var baselineAlignment = format.hasValue('baselineAlignment') ? format.baselineAlignment : breakCharacterFormat.baselineAlignment;\n        bold = format.hasValue('bold') ? format.bold ? 'bold' : '' : breakCharacterFormat.bold ? 'bold' : '';\n        italic = format.hasValue('italic') ? format.italic ? 'italic' : '' : breakCharacterFormat.italic ? 'italic' : '';\n        fontSize = fontSize === 0 ? 0.5 : fontSize / (baselineAlignment === 'Normal' ? 1 : 1.5);\n        fontSize = this.isPrinting ? fontSize : fontSize * this.documentHelper.zoomFactor;\n        var strikethrough = format.hasValue('strikethrough') ? format.strikethrough : breakCharacterFormat.strikethrough;\n        var highlightColor = format.hasValue('highlightColor') ? format.highlightColor : breakCharacterFormat.highlightColor;\n        if (highlightColor !== 'NoColor') {\n            if (highlightColor.substring(0, 1) !== '#') {\n                this.pageContext.fillStyle = HelperMethods.getHighlightColorCode(highlightColor);\n            }\n            else {\n                this.pageContext.fillStyle = HelperMethods.getColor(highlightColor);\n            }\n            this.pageContext.fillRect(Math.floor(this.getScaledValue(left + leftMargin, 1)), Math.floor(this.getScaledValue(top + topMargin, 2) - 1), Math.ceil(this.getScaledValue(elementBox.width) + 1), Math.ceil(this.getScaledValue(elementBox.height) + 1));\n        }\n        this.pageContext.font = bold + ' ' + italic + ' ' + fontSize + 'pt' + ' ' + '\"' + fontFamily + '\"';\n        if (baselineAlignment === 'Subscript') {\n            topMargin += elementBox.height - elementBox.height / 1.5;\n        }\n        var baselineOffset = elementBox.baselineOffset;\n        topMargin = (format.baselineAlignment === 'Normal') ? topMargin + baselineOffset : (topMargin + (baselineOffset / 1.5));\n        var text = elementBox.text;\n        var isParaBidi = elementBox.paragraph.paragraphFormat.bidi;\n        if (isParaBidi) {\n            this.pageContext.direction = 'rtl';\n            left += elementBox.width;\n        }\n        // \"empty\" is old value used for auto color till v19.2.49. It is maintained for backward compatibility.\n        if (color === \"empty\" || color === '#00000000') {\n            var bgColor = this.getBackgroundColorHeirachy(elementBox);\n            this.pageContext.fillStyle = this.getDefaultFontColor(bgColor);\n        }\n        else {\n            this.pageContext.fillStyle = HelperMethods.getColor(color);\n        }\n        var scaleFactor = format.scaling < 100 ? 1 : format.scaling / 100;\n        if (this.documentHelper.owner.documentEditorSettings.showHiddenMarks && !this.isPrinting) {\n            if (elementBox instanceof ListTextElementBox && elementBox.text === \"\\t\") {\n                this.tabMark(elementBox, format, left, top, leftMargin, topMargin);\n            }\n            this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n            this.pageContext.save();\n            this.pageContext.scale(scaleFactor, 1);\n            this.pageContext.fillText(this.replaceSpace(text), this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width));\n            this.pageContext.restore();\n        }\n        else {\n            this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n            this.pageContext.save();\n            this.pageContext.scale(scaleFactor, 1);\n            this.pageContext.fillText(text, this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width));\n            this.pageContext.restore();\n        }\n        if (isParaBidi) {\n            this.pageContext.direction = 'ltr';\n            left -= elementBox.width;\n        }\n        if (format.underline !== 'None' && !isNullOrUndefined(format.underline)) {\n            this.renderUnderline(elementBox, left, top, underlineY, color, format.underline, baselineAlignment);\n        }\n        if (strikethrough !== 'None') {\n            this.renderStrikeThrough(elementBox, left, top, format.strikethrough, color, baselineAlignment);\n        }\n    };\n    Renderer.prototype.getDefaultFontColor = function (backColor) {\n        if (HelperMethods.isVeryDark(backColor)) {\n            return \"#FFFFFF\";\n        }\n        else {\n            return \"#000000\";\n        }\n    };\n    Renderer.prototype.renderTextElementBox = function (elementBox, left, top, underlineY) {\n        var isHeightType = false;\n        var containerWidget = elementBox.line.paragraph.containerWidget;\n        if (containerWidget instanceof TableCellWidget) {\n            isHeightType = (containerWidget.ownerRow.rowFormat.heightType === 'Exactly');\n        }\n        var topMargin = elementBox.margin.top;\n        var leftMargin = elementBox.margin.left;\n        if (isHeightType && containerWidget instanceof TableCellWidget) {\n            var width = (containerWidget.width + containerWidget.margin.left + containerWidget.margin.right) - containerWidget.leftBorderWidth;\n            this.clipRect(containerWidget.x - containerWidget.margin.left, containerWidget.y, this.getScaledValue(width), this.getScaledValue(containerWidget.height));\n        }\n        var format = elementBox.characterFormat;\n        var doHighLight = true;\n        if (format.highlightColor != \"NoColor\" && elementBox.text.trim() == \"\") {\n            var firstLine = elementBox.line.paragraph.firstChild;\n            var lastLine = elementBox.line.paragraph.lastChild;\n            if (!isNullOrUndefined(firstLine) && firstLine instanceof LineWidget\n                && firstLine.children.length > 0 && elementBox === firstLine.children[0]) {\n                doHighLight = false;\n            }\n            if (!isNullOrUndefined(lastLine) && lastLine instanceof LineWidget\n                && lastLine.children.length > 0 && elementBox === lastLine.children[lastLine.children.length - 1]) {\n                doHighLight = false;\n            }\n        }\n        if (format.highlightColor !== 'NoColor' && doHighLight) {\n            if (format.highlightColor.substring(0, 1) !== '#') {\n                this.pageContext.fillStyle = HelperMethods.getHighlightColorCode(format.highlightColor);\n            }\n            else {\n                this.pageContext.fillStyle = HelperMethods.getColor(format.highlightColor);\n            }\n            this.pageContext.fillRect(Math.floor(this.getScaledValue(left + leftMargin, 1)), Math.floor(this.getScaledValue(top + topMargin, 2) - 1), Math.ceil(this.getScaledValue(elementBox.width) + 1), Math.ceil(this.getScaledValue(elementBox.height) + 1));\n        }\n        var revisionInfo = this.checkRevisionType(elementBox);\n        var color = revisionInfo.length > 0 ? this.getRevisionColor(revisionInfo) : format.fontColor;\n        this.pageContext.textBaseline = 'alphabetic';\n        var bold = '';\n        var italic = '';\n        var fontSize = 11;\n        bold = format.bold ? 'bold' : '';\n        italic = format.italic ? 'italic' : '';\n        fontSize = format.fontSize === 0 ? 0.5 : format.fontSize / (format.baselineAlignment === 'Normal' ? 1 : 1.5);\n        fontSize = this.isPrinting ? fontSize : fontSize * this.documentHelper.zoomFactor;\n        var renderFontFamily = this.documentHelper.textHelper.getFontNameToRender(elementBox.scriptType, format);\n        this.pageContext.font = bold + ' ' + italic + ' ' + fontSize + 'pt' + ' ' + '\"' + renderFontFamily + '\"';\n        if (format.baselineAlignment === 'Subscript') {\n            topMargin += elementBox.height - elementBox.height / 1.5;\n        }\n        var baselineOffset = elementBox.baselineOffset;\n        topMargin = (format.baselineAlignment === 'Normal') ? topMargin + baselineOffset : (topMargin + (baselineOffset / 1.5));\n        // \"empty\" is old value used for auto color till v19.2.49. It is maintained for backward compatibility.\n        if (color === \"empty\" || color === '#00000000') {\n            var bgColor = this.getBackgroundColorHeirachy(elementBox);\n            this.pageContext.fillStyle = this.getDefaultFontColor(bgColor);\n        }\n        else {\n            this.pageContext.fillStyle = HelperMethods.getColor(color);\n        }\n        var scaledWidth = this.getScaledValue(elementBox.width);\n        var text = elementBox.text;\n        if (elementBox instanceof TabElementBox) {\n            var tabElement = elementBox;\n            if (tabElement.tabText === '' && !isNullOrUndefined(tabElement.tabLeader) && tabElement.tabLeader !== 'None') {\n                text = this.getTabLeader(elementBox);\n                tabElement.tabText = text;\n            }\n            else if (tabElement.tabText !== '') {\n                text = tabElement.tabText;\n            }\n        }\n        //this.pageContext.direction = 'ltr';\n        var isRTL = format.bidi || this.documentHelper.textHelper.isRTLText(elementBox.text);\n        text = this.documentHelper.textHelper.setText(text, isRTL, format.bdo, true);\n        if (format.allCaps) {\n            text = text.toUpperCase();\n        }\n        var characterRange = elementBox.characterRange;\n        if (((characterRange == CharacterRangeType.WordSplit) ||\n            (((characterRange & CharacterRangeType.WordSplit) == CharacterRangeType.WordSplit) &&\n                ((characterRange & CharacterRangeType.RightToLeft) == CharacterRangeType.RightToLeft))) && format.bidi) {\n            text = this.inverseCharacter(text);\n        }\n        var scaleFactor = format.scaling < 100 ? 1 : format.scaling / 100;\n        if (characterRange === CharacterRangeType.RightToLeft && !HelperMethods.startsWith(text, ' ')) {\n            this.pageContext.direction = 'rtl';\n            left += elementBox.width;\n        }\n        if (this.documentHelper.owner.documentEditorSettings.showHiddenMarks && !this.isPrinting) {\n            if ((elementBox instanceof TabElementBox || elementBox instanceof TextElementBox) && elementBox.text === \"\\t\") {\n                this.tabMark(elementBox, format, left, top, leftMargin, topMargin);\n            }\n            if (text === '\\r') {\n                text = String.fromCharCode(182);\n            }\n            this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n            this.pageContext.save();\n            this.pageContext.scale(scaleFactor, 1);\n            this.pageContext.fillText(this.replaceSpace(text), this.getScaledValue(left + leftMargin, 1) / (scaleFactor), this.getScaledValue(top + topMargin, 2), scaledWidth);\n            this.pageContext.restore();\n        }\n        else {\n            this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n            this.pageContext.save();\n            this.pageContext.scale(scaleFactor, 1);\n            this.pageContext.fillText(text, this.getScaledValue(left + leftMargin, 1) / (scaleFactor), this.getScaledValue(top + topMargin, 2), scaledWidth);\n            this.pageContext.restore();\n        }\n        if (characterRange === CharacterRangeType.RightToLeft && !HelperMethods.startsWith(text, ' ')) {\n            this.pageContext.direction = 'ltr';\n            left -= elementBox.width;\n        }\n        if (this.documentHelper.owner.isSpellCheck) {\n            if (((this.documentHelper.owner.isSpellCheck && !this.spellChecker.removeUnderline) && (this.documentHelper.triggerSpellCheck || elementBox.canTrigger) && elementBox.text !== ' ' && !this.documentHelper.isScrollHandler && (isNullOrUndefined(elementBox.previousNode) || !(elementBox.previousNode instanceof FieldElementBox)))) {\n                elementBox.canTrigger = true;\n                this.leftPosition = this.pageLeft;\n                this.topPosition = this.pageTop;\n                var errorDetails = this.spellChecker.checktextElementHasErrors(elementBox.text, elementBox, left);\n                if (errorDetails.errorFound && !this.isPrinting) {\n                    color = '#FF0000';\n                    var backgroundColor = (containerWidget instanceof TableCellWidget) ? containerWidget.cellFormat.shading.backgroundColor : this.documentHelper.backgroundColor;\n                    var errors = this.spellChecker.errorWordCollection;\n                    for (var i = 0; i < errorDetails.elements.length; i++) {\n                        var currentElement = errorDetails.elements[i];\n                        var exactText = this.spellChecker.manageSpecialCharacters(currentElement.text, undefined, true);\n                        if (elementBox.ignoreOnceItems.indexOf(exactText) === -1) {\n                            if (isRTL) {\n                                this.renderWavyLine(currentElement, (isNullOrUndefined(currentElement.end)) ? left : currentElement.end.location.x, top, underlineY, color, 'Single', format.baselineAlignment, backgroundColor);\n                            }\n                            else {\n                                this.renderWavyLine(currentElement, (isNullOrUndefined(currentElement.start)) ? left : currentElement.start.location.x, top, underlineY, color, 'Single', format.baselineAlignment, backgroundColor);\n                            }\n                            if (errors.containsKey(exactText)) {\n                                var errorElements = errors.get(exactText);\n                                if (errorElements.indexOf(currentElement) === -1) {\n                                    errorElements.push(currentElement);\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (elementBox.ischangeDetected || this.documentHelper.triggerElementsOnLoading) {\n                    elementBox.ischangeDetected = false;\n                    this.handleChangeDetectedElements(elementBox, underlineY, left, top, format.baselineAlignment);\n                }\n            }\n        }\n        var currentInfo = this.getRevisionType(revisionInfo, true);\n        if (format.underline !== 'None' && !isNullOrUndefined(format.underline) || (!isNullOrUndefined(currentInfo) && (currentInfo.type === 'Insertion' || currentInfo.type === 'MoveTo'))) {\n            this.renderUnderline(elementBox, left, top, underlineY, color, format.underline, format.baselineAlignment, currentInfo);\n        }\n        currentInfo = this.getRevisionType(revisionInfo, false);\n        if (format.strikethrough !== 'None' && !isNullOrUndefined(format.strikethrough) || (!isNullOrUndefined(currentInfo) && (currentInfo.type === 'Deletion' || currentInfo.type === 'MoveFrom'))) {\n            this.renderStrikeThrough(elementBox, left, top, format.strikethrough, color, format.baselineAlignment, currentInfo);\n        }\n        if (isHeightType) {\n            this.pageContext.restore();\n        }\n    };\n    Renderer.prototype.tabMark = function (elementBox, format, left, top, leftMargin, topMargin) {\n        var tabMarkString = elementBox.paragraph.bidi ? String.fromCharCode(8592) : String.fromCharCode(8594);\n        var tabMarkWidth = this.documentHelper.textHelper.getWidth(tabMarkString, format, elementBox.scriptType);\n        var availableSpaceWidth = elementBox.width / 2;\n        var tabWidth = tabMarkWidth / 2;\n        this.pageContext.font = this.retriveCharacterformat(elementBox.characterFormat);\n        this.pageContext.letterSpacing = format.characterSpacing * this.documentHelper.zoomFactor + 'pt';\n        this.pageContext.save();\n        var scaleFactor = format.scaling < 100 ? 1 : format.scaling / 100;\n        this.pageContext.scale(scaleFactor, 1);\n        if (availableSpaceWidth > tabMarkWidth) {\n            this.pageContext.fillText(tabMarkString, this.getScaledValue(((left + leftMargin + availableSpaceWidth) - (tabWidth)), 1) / scaleFactor, this.getScaledValue(top + topMargin, 2));\n        }\n        else {\n            this.pageContext.fillText(tabMarkString, this.getScaledValue(left + leftMargin, 1) / scaleFactor, this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width));\n        }\n        this.pageContext.restore();\n    };\n    Renderer.prototype.replaceSpace = function (text) {\n        text = text.replace(new RegExp(String.fromCharCode(32), 'g'), String.fromCharCode(183));\n        text = text.replace(new RegExp(String.fromCharCode(160), 'g'), String.fromCharCode(176));\n        return text;\n    };\n    Renderer.prototype.inverseCharacter = function (ch) {\n        switch (ch) {\n            //Specify the '('\n            case String.fromCharCode(40):\n                //Specify the ')'\n                return String.fromCharCode(41);\n            //Specify the ')'\n            case String.fromCharCode(41):\n                //Specify the '('\n                return String.fromCharCode(40);\n            //Specify the '<'\n            case String.fromCharCode(60):\n                //Specify the '>'\n                return String.fromCharCode(62);\n            //Specify the '>'\n            case String.fromCharCode(62):\n                //Specify the '<'\n                return String.fromCharCode(60);\n            //Specify the '{'\n            case String.fromCharCode(123):\n                //Specify the '}'\n                return String.fromCharCode(125);\n            //Specify the '}'\n            case String.fromCharCode(125):\n                //Specify the '{'\n                return String.fromCharCode(123);\n            //Specify the '['\n            case String.fromCharCode(91):\n                //Specify the ']'\n                return String.fromCharCode(93);\n            //Specify the ']'\n            case String.fromCharCode(93):\n                //Specify the '['\n                return String.fromCharCode(91);\n            default:\n                return ch;\n        }\n    };\n    Renderer.prototype.getBackgroundColorHeirachy = function (element) {\n        var bgColor;\n        // \"empty\" is old value used for auto color till v19.2.49. It is maintained for backward compatibility.\n        if (element.paragraph.isInsideTable) {\n            var cell = element.paragraph.containerWidget;\n            bgColor = cell.cellFormat.shading.backgroundColor;\n            if (bgColor !== \"empty\" && bgColor !== '#00000000') {\n                return bgColor;\n            }\n            else {\n                bgColor = cell.ownerTable.tableFormat.shading.backgroundColor;\n                if (bgColor !== \"empty\" && bgColor !== '#00000000') {\n                    return bgColor;\n                }\n            }\n        }\n        else if (element.paragraph.containerWidget instanceof TextFrame\n            && !isNullOrUndefined(element.paragraph.containerWidget.containerShape) && !isNullOrUndefined(element.paragraph.containerWidget.containerShape.fillFormat) && element.paragraph.containerWidget.containerShape.fillFormat.color === '#000000FF') {\n            return element.paragraph.containerWidget.containerShape.fillFormat.color;\n        }\n        return this.documentHelper.backgroundColor;\n    };\n    Renderer.prototype.handleChangeDetectedElements = function (elementBox, underlineY, left, top, baselineAlignment) {\n        var _this = this;\n        var checkText = elementBox.text.trim();\n        var beforeIndex = this.pageIndex;\n        if (elementBox.text === '\\v') {\n            return;\n        }\n        if (!this.spellChecker.checkElementCanBeCombined(elementBox, underlineY, beforeIndex, true)) {\n            /* eslint-disable @typescript-eslint/no-explicit-any */\n            var splittedText = checkText.split(/[\\s]+/);\n            var markindex = elementBox.line.getOffset(elementBox, 0);\n            var spaceValue = 1;\n            if (splittedText.length > 1) {\n                for (var i = 0; i < splittedText.length; i++) {\n                    var currentText = splittedText[i];\n                    var retrievedText = this.spellChecker.manageSpecialCharacters(currentText, undefined, true);\n                    if (this.spellChecker.ignoreAllItems.indexOf(retrievedText) === -1 && elementBox.ignoreOnceItems.indexOf(retrievedText) === -1) {\n                        this.handleUnorderedElements(retrievedText, elementBox, underlineY, i, markindex, i === splittedText.length - 1, beforeIndex);\n                        markindex += currentText.length + spaceValue;\n                    }\n                }\n            }\n            else {\n                var retrievedText = this.spellChecker.manageSpecialCharacters(checkText, undefined, true);\n                if (checkText.length > 0) {\n                    if (this.spellChecker.ignoreAllItems.indexOf(retrievedText) === -1 && elementBox.ignoreOnceItems.indexOf(retrievedText) === -1) {\n                        var indexInLine_1 = elementBox.indexInOwner;\n                        var indexinParagraph_1 = elementBox.line.paragraph.indexInOwner;\n                        var spellInfo = this.spellChecker.checkSpellingInPageInfo(retrievedText);\n                        if (spellInfo.isElementPresent && this.spellChecker.enableOptimizedSpellCheck) {\n                            var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + spellInfo.hasSpellError + '}');\n                            this.spellChecker.handleWordByWordSpellCheck(jsonObject, elementBox, left, top, underlineY, baselineAlignment, true);\n                        }\n                        else {\n                            if (this.spellChecker.isInUniqueWords(retrievedText)) {\n                                var hasSpellingError = this.spellChecker.isErrorWord(retrievedText) ? true : false;\n                                var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + hasSpellingError + '}');\n                                this.spellChecker.handleWordByWordSpellCheck(jsonObject, elementBox, left, top, underlineY, baselineAlignment, true);\n                            }\n                            else if (!this.documentHelper.owner.editorModule.triggerPageSpellCheck || this.documentHelper.triggerElementsOnLoading) {\n                                /* eslint-disable @typescript-eslint/no-explicit-any */\n                                this.spellChecker.callSpellChecker(this.spellChecker.languageID, checkText, true, this.spellChecker.allowSpellCheckAndSuggestion).then(function (data) {\n                                    /* eslint-disable @typescript-eslint/no-explicit-any */\n                                    var jsonObject = JSON.parse(data);\n                                    var canUpdate = (beforeIndex === _this.pageIndex || elementBox.isVisible) && (indexInLine_1 === elementBox.indexInOwner) && (indexinParagraph_1 === elementBox.line.paragraph.indexInOwner);\n                                    _this.spellChecker.handleWordByWordSpellCheck(jsonObject, elementBox, left, top, underlineY, baselineAlignment, canUpdate);\n                                });\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Renderer.prototype.handleUnorderedElements = function (currentText, elementBox, underlineY, iteration, markIndex, isLastItem, beforeIndex) {\n        var _this = this;\n        var indexInLine = elementBox.indexInOwner;\n        var indexinParagraph = elementBox.line.paragraph.indexInOwner;\n        if (currentText.length > 0) {\n            var spellInfo = this.spellChecker.checkSpellingInPageInfo(currentText);\n            if (spellInfo.isElementPresent && this.spellChecker.enableOptimizedSpellCheck) {\n                var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + spellInfo.hasSpellError + '}');\n                this.spellChecker.handleSplitWordSpellCheck(jsonObject, currentText, elementBox, true, underlineY, iteration, markIndex, isLastItem);\n            }\n            else {\n                var canUpdate_1 = (elementBox.isVisible) && (indexInLine === elementBox.indexInOwner) && (indexinParagraph === elementBox.line.paragraph.indexInOwner);\n                if (this.spellChecker.isInUniqueWords(currentText)) {\n                    var hasSpellingError = this.spellChecker.isErrorWord(currentText) ? true : false;\n                    var jsonObject = JSON.parse('{\\\"HasSpellingError\\\":' + hasSpellingError + '}');\n                    this.spellChecker.handleSplitWordSpellCheck(jsonObject, currentText, elementBox, canUpdate_1, underlineY, iteration, markIndex, isLastItem);\n                }\n                else if (!this.documentHelper.owner.editorModule.triggerPageSpellCheck || this.documentHelper.triggerElementsOnLoading) {\n                    /* eslint-disable @typescript-eslint/no-explicit-any */\n                    this.spellChecker.callSpellChecker(this.spellChecker.languageID, currentText, true, this.spellChecker.allowSpellCheckAndSuggestion).then(function (data) {\n                        /* eslint-disable @typescript-eslint/no-explicit-any */\n                        var jsonObject = JSON.parse(data);\n                        _this.spellChecker.handleSplitWordSpellCheck(jsonObject, currentText, elementBox, canUpdate_1, underlineY, iteration, markIndex, isLastItem);\n                    });\n                }\n            }\n        }\n    };\n    Renderer.prototype.renderWavyLine = function (elementBox, left, top, underlineY, color, underline, baselineAlignment, backgroundColor) {\n        if (this.isPrinting) {\n            return;\n        }\n        if (elementBox.text.length > 1) {\n            var renderedHeight = elementBox.height / (baselineAlignment === 'Normal' ? 1 : 1.5);\n            var topMargin = elementBox.margin.top;\n            var underlineHeight = renderedHeight / 20;\n            var frequencyRange = 0.5;\n            var amplitudeRange = 1.0;\n            var stepToCover = .7;\n            var y = 0;\n            if (baselineAlignment === 'Subscript' || elementBox instanceof ListTextElementBox) {\n                y = (renderedHeight - 2 * underlineHeight) + top;\n                topMargin += elementBox.height - renderedHeight;\n                y += topMargin > 0 ? topMargin : 0;\n            }\n            else {\n                y = underlineY + top;\n            }\n            var specialCharacter = this.spellChecker.getSpecialCharactersInfo(elementBox);\n            var whiteSpaceData = this.spellChecker.getWhiteSpaceCharacterInfo(elementBox);\n            var x = left + specialCharacter.beginningWidth + ((whiteSpaceData.isBeginning) ? whiteSpaceData.width : 0) + elementBox.margin.left;\n            var x1 = x * this.documentHelper.zoomFactor + this.leftPosition;\n            var y1 = y * this.documentHelper.zoomFactor + this.topPosition;\n            var x2 = x1 + this.getScaledValue(elementBox.width - (specialCharacter.beginningWidth + specialCharacter.endWidth) - whiteSpaceData.width);\n            var startingPoint = new Point(x1, y1);\n            var endingPoint = new Point(x2, y1);\n            this.drawWavy(startingPoint, endingPoint, (x2 - x1) * frequencyRange, amplitudeRange, stepToCover, color, elementBox.height, backgroundColor);\n        }\n    };\n    Renderer.prototype.drawWavy = function (from, to, frequency, amplitude, step, color, height, backColor, negative) {\n        this.pageContext.save();\n        this.pageContext.fillStyle = (!isNullOrUndefined(backColor) ? backColor : this.documentHelper.backgroundColor);\n        this.pageContext.fillRect(from.x, from.y - amplitude, (to.x - from.x), amplitude * 3);\n        this.pageContext.restore();\n        this.pageContext.lineWidth = 1;\n        this.pageContext.lineCap = 'round';\n        this.pageContext.strokeStyle = color;\n        this.pageContext.beginPath();\n        //this.pageContext.save();\n        var cx = 0;\n        var cy = 0;\n        var fx = from.x;\n        var fy = from.y;\n        var tx = to.x;\n        var ty = to.y;\n        var i = 0;\n        var waveOffsetLength = 0;\n        var ang = Math.atan2(ty - fy, tx - fx);\n        var distance = Math.sqrt((fx - tx) * (fx - tx) + (fy - ty) * (fy - ty));\n        var a = amplitude * 1;\n        var f = Math.PI * frequency;\n        for (i; i <= distance; i += step) {\n            waveOffsetLength = Math.sin((i / distance) * f) * a;\n            cx = from.x + Math.cos(ang) * i + Math.cos(ang - Math.PI / 2) * waveOffsetLength;\n            cy = from.y + Math.sin(ang) * i + Math.sin(ang - Math.PI / 2) * waveOffsetLength;\n            i > 0 ? this.pageContext.lineTo(cx, cy) : this.pageContext.moveTo(cx, cy);\n        }\n        this.pageContext.stroke();\n        this.pageContext.restore();\n    };\n    /**\n     * @private\n     */\n    Renderer.prototype.getTabLeader = function (elementBox) {\n        var textWidth = 0;\n        var tabString = this.getTabLeaderString(elementBox.tabLeader);\n        var tabText = tabString;\n        textWidth = this.documentHelper.textHelper.getWidth(tabText, elementBox.characterFormat, elementBox.scriptType);\n        var count = Math.floor(elementBox.width / textWidth);\n        if (textWidth == 0) {\n            count = 0;\n        }\n        for (var i = 0; i <= count; i++) {\n            tabText += tabString;\n        }\n        return tabText.slice(0, -1);\n    };\n    Renderer.prototype.getTabLeaderString = function (tabLeader) {\n        var tabString = '';\n        switch (tabLeader) {\n            case 'Dot':\n                tabString = '.';\n                break;\n            case 'Hyphen':\n                tabString = '-';\n                break;\n            case 'Underscore':\n            case 'Single':\n                tabString = '_';\n                break;\n        }\n        return tabString;\n    };\n    Renderer.prototype.clipRect = function (xPos, yPos, width, height) {\n        this.pageContext.beginPath();\n        this.pageContext.save();\n        this.pageContext.rect(this.getScaledValue(xPos, 1), this.getScaledValue(yPos, 2), width, height);\n        this.pageContext.clip();\n    };\n    Renderer.prototype.getTrimmedWidth = function (elementBox) {\n        var width = elementBox.width;\n        if (elementBox instanceof TextElementBox && !(elementBox instanceof TabElementBox) && isNullOrUndefined(elementBox.nextNode)) {\n            width = this.documentHelper.textHelper.getWidth(HelperMethods.trimEnd(elementBox.text), elementBox.characterFormat, elementBox.scriptType);\n        }\n        return width;\n    };\n    Renderer.prototype.renderUnderline = function (elementBox, left, top, underlineY, color, underline, baselineAlignment, revisionInfo) {\n        var renderedHeight = elementBox.height / (baselineAlignment === 'Normal' ? 1 : 1.5);\n        var topMargin = elementBox.margin.top;\n        var underlineHeight = renderedHeight / 20;\n        var y = 0;\n        var lineHeight = renderedHeight / 20;\n        if (baselineAlignment === 'Subscript' || elementBox instanceof ListTextElementBox) {\n            y = (renderedHeight - 2 * underlineHeight) + top;\n            topMargin += elementBox.height - renderedHeight;\n            y += topMargin > 0 ? topMargin : 0;\n        }\n        else {\n            y = underlineY + top;\n        }\n        var lineCount = 0;\n        if (!isNullOrUndefined(revisionInfo)) {\n            underline = (revisionInfo.type === 'MoveTo') ? 'Double' : 'Single';\n        }\n        if (underline === 'Double') {\n            y -= lineHeight;\n        }\n        if (elementBox instanceof ImageElementBox) {\n            underlineHeight = 0.9;\n        }\n        while (lineCount < (underline === 'Double' ? 2 : 1)) {\n            lineCount++;\n            var width = this.getTrimmedWidth(elementBox);\n            this.pageContext.fillRect(this.getScaledValue(left + elementBox.margin.left, 1), this.getScaledValue(y, 2), this.getScaledValue(width), this.getScaledValue(underlineHeight));\n            y += 2 * lineHeight;\n        }\n    };\n    Renderer.prototype.renderStrikeThrough = function (elementBox, left, top, strikethrough, color, baselineAlignment, revisionInfo) {\n        var renderedHeight = elementBox.height / (baselineAlignment === 'Normal' ? 1 : 1.5);\n        var topMargin = elementBox.margin.top;\n        if (baselineAlignment === 'Subscript') {\n            topMargin += elementBox.height - renderedHeight;\n        }\n        top += topMargin > 0 ? topMargin : 0;\n        var lineHeight = renderedHeight / 20;\n        var y = (renderedHeight / 2) + (0.5 * lineHeight);\n        var lineCount = 0;\n        if (!isNullOrUndefined(revisionInfo)) {\n            strikethrough = (revisionInfo.type === 'Deletion') ? 'SingleStrike' : 'DoubleStrike';\n        }\n        if (elementBox instanceof ImageElementBox) {\n            lineHeight = 0.9;\n        }\n        if (strikethrough === 'DoubleStrike') {\n            y -= lineHeight;\n        }\n        while (lineCount < (strikethrough === 'DoubleStrike' ? 2 : 1)) {\n            lineCount++;\n            var width = this.getTrimmedWidth(elementBox);\n            this.pageContext.fillRect(this.getScaledValue(left + elementBox.margin.left, 1), this.getScaledValue(y + top, 2), this.getScaledValue(width), this.getScaledValue(lineHeight));\n            y += 2 * lineHeight;\n        }\n    };\n    Renderer.prototype.renderImageElementBox = function (elementBox, left, top, underlineY) {\n        var topMargin = elementBox.margin.top;\n        var leftMargin = elementBox.margin.left;\n        var revisionInfo = this.checkRevisionType(elementBox);\n        var color = revisionInfo.length > 0 ? this.getRevisionColor(revisionInfo) : 'black';\n        this.pageContext.textBaseline = 'top';\n        var widgetWidth = 0;\n        var isClipped = false;\n        var containerWid = elementBox.line.paragraph.containerWidget;\n        var isHeightType = false;\n        if (containerWid instanceof TableCellWidget) {\n            isHeightType = (containerWid.ownerRow.rowFormat.heightType === 'Exactly');\n        }\n        if (elementBox.textWrappingStyle === 'Inline') {\n            if (topMargin < 0 || elementBox.line.paragraph.width < elementBox.width) {\n                // if (containerWid instanceof BodyWidget) {\n                //     widgetWidth = containerWid.width + containerWid.x;\n                // } else \n                if (containerWid instanceof TableCellWidget) {\n                    var leftIndent = 0;\n                    if (containerWid.childWidgets[0] instanceof ParagraphWidget) {\n                        var paraAdv = containerWid.childWidgets[0];\n                        leftIndent = paraAdv.paragraphFormat.leftIndent;\n                    }\n                    widgetWidth = containerWid.width + containerWid.margin.left - containerWid.leftBorderWidth - leftIndent;\n                    isClipped = true;\n                    this.clipRect(left + leftMargin, top + topMargin, this.getScaledValue(widgetWidth), this.getScaledValue(containerWid.height));\n                }\n            }\n            else if (isHeightType) {\n                var width = containerWid.width + containerWid.margin.left - containerWid.leftBorderWidth;\n                isClipped = true;\n                this.clipRect(containerWid.x, containerWid.y, this.getScaledValue(width), this.getScaledValue(containerWid.height));\n            }\n        }\n        if (elementBox.isMetaFile && !isNullOrUndefined(elementBox.metaFileImageString)) {\n            this.pageContext.drawImage(elementBox.element, this.getScaledValue(left + leftMargin, 1), this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width), this.getScaledValue(elementBox.height));\n        }\n        else {\n            var fallbackImage_1 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAgVBMVEX///8AAADgAADY2Njl5eVcXFxjY2NZWVl/f3+wsLCmpqb4+PiioqKpqam7u7vV1dX2uLj2wsLhFRXzpKT3vb30sbHhCwv74+P40dH+9vbkIyO2trbBwcHLy8tsbGycnJz529v4zMzrbGzlLS3qZmblNzfrdXXoRkbvi4vvgYHlHh7CZsBOAAADpUlEQVR4nO3da1faQBSF4ekAUQlUEFs14AXxVv7/D6yaQiZx5mSEYXF2ut+PNKzyyK5diYDmR9czx34AB49C/CjE759w3jvvWr15Tdgz3atXE54f++EcIArxoxA/CvGjED8K8aMQPwrxoxA/CvGLEeZ9jPJdhfk4GyCUjb3ECGE/Q6m/q3DwfudjP0ERZYN9hKdn2hvd3+0jHJz5/kBVuTk96bbQUEjhYR9ckiikUH8UUqg/CinUH4UU6o9CCvVHIYX6o5BC/VFIof4opFB/FFKoPwop1B+FFOqPQgrjyxfjVC38Lxk9tnAxGqZqdKtSOE4GHA5/fuNJpDCtcNHbv4VqYYqPLjgfUViPQgrjozA2CptRSGF8/59w+Wrt+rr1btNna1cPzg0wwuXavncxabnX7PfHYYXzlYARvlobQZyUR9mXm+1NMEK7SSLONgcVV9vb8IQXv4J3KSeKKlxXxNCzONkeYp8AV3p9UT1+P3FWHVAsq5thhGZSEb1DrSZq7dS5HUdoLiuBZ6jORG3tCwAkNJfCUJ2Jrqe1P0ESCkMNTdSACYNDDU7UoAkDQw1P1MAJvUMVJmrwhJ6hShM1gMIvQxUnahCFjaHKEzWQQneoxR95ogZTWBuqPFEDKnSHKk/UoArdoYoTNbDC5lBDEzW4QjMpYiZqgIXG/S76JhwHK5zVVipcnkIVuv/RW/HyFKhwYhuFr6NiCmdNoDBUSGFjovJQEYXuRN9ahwoorJ8uSZenPsMTNk+X2q6jwgm/ntHL11HhhL4zenmoYEL/Gb04VCxh6KKTNFQoYfiikzBUJKF00Sk8VCChfF00OFQcYdt10dBQYYRT5xn0n9G7Q0X8GfCzNNEyZ6iPgD/HlydaVg11DfhajJaJlm2HugIUrlomWrYZKuJKHz6vHhbSM/hROdRnxNe1meuXYvW0DB6+aflYrB7dlzDiCM3N1dVN6GDhMCDhjlHYjEIK46MwNgqbUUhhfJ/vA07wO8N1vw94ONo/3e/lTpVOYfc/UyG//ZmqW52fi/FuTNW3/lZ+eguF+qOQQv1RSKH+KKRQfxRSqD8KKdQfhRTqj0IK9UchhfqjkEL9UUih/iikUH8UUqg/CmXh6Hsv3jlK+wnvD/vgkrSHMMuyu1P9ZdmuwnycDQYn+svG3n9KEUKT9zHyf6+IEWJHIX4U4kchfhTiRyF+FOJHIX4U4kchfnVhijeZa6sunCf4ZdPamteEHY5C/CjEr/vCv0ec0g+AtS1QAAAAAElFTkSuQmCC';\n            try {\n                var imgX_1 = this.getScaledValue(left + leftMargin, 1);\n                var imgY_1 = this.getScaledValue(top + topMargin, 2);\n                var width_3 = this.getScaledValue(elementBox.width);\n                var height_2 = this.getScaledValue(elementBox.height);\n                var render_1 = this;\n                elementBox.element.onload = function () {\n                    var lastLoaded = elementBox.element.getAttribute(\"lastLoaded\");\n                    if (!isNullOrUndefined(render_1.documentHelper) && lastLoaded !== elementBox.element.src) {\n                        if (!elementBox.isCrop) {\n                            render_1.pageContext.drawImage(elementBox.element, imgX_1, imgY_1, width_3, height_2);\n                        }\n                        else {\n                            render_1.pageContext.drawImage(elementBox.element, elementBox.cropX, elementBox.cropY, elementBox.cropWidth, elementBox.cropHeight, imgX_1, imgY_1, width_3, height_2);\n                        }\n                    }\n                };\n                elementBox.element.onerror = function () {\n                    elementBox.element.src = fallbackImage_1;\n                };\n                if (!elementBox.isCrop) {\n                    this.pageContext.drawImage(elementBox.element, imgX_1, //dx\n                    imgY_1, //dy\n                    width_3, //dw\n                    height_2); //dh\n                }\n                else {\n                    this.pageContext.drawImage(elementBox.element, elementBox.cropX, //sx\n                    elementBox.cropY, //sy\n                    elementBox.cropWidth, //sw\n                    elementBox.cropHeight, //sh\n                    imgX_1, //dx\n                    imgY_1, //dy\n                    width_3, //dw\n                    height_2); //dh\n                }\n            }\n            catch (e) {\n                elementBox.imageString = fallbackImage_1;\n                this.documentHelper.addBase64StringInCollection(elementBox);\n                elementBox.element.src = this.documentHelper.getImageString(elementBox);\n                this.pageContext.drawImage(elementBox.element, this.getScaledValue(left + leftMargin, 1), this.getScaledValue(top + topMargin, 2), this.getScaledValue(elementBox.width), this.getScaledValue(elementBox.height));\n            }\n        }\n        this.pageContext.fillStyle = HelperMethods.getColor(color);\n        var currentRevision = this.getRevisionType(revisionInfo, false);\n        if (!isNullOrUndefined(currentRevision) && (currentRevision.type === 'Deletion' || currentRevision.type === 'MoveFrom')) {\n            this.renderStrikeThrough(elementBox, left, top, 'SingleStrike', color, 'Normal', currentRevision);\n        }\n        currentRevision = this.getRevisionType(revisionInfo, true);\n        if (!isNullOrUndefined(currentRevision) && (currentRevision.type === 'Insertion' || currentRevision.type === 'MoveTo')) {\n            var y = this.getUnderlineYPosition(elementBox.line);\n            this.renderUnderline(elementBox, left, top, y, color, 'Single', 'Normal');\n        }\n        if (isClipped) {\n            this.pageContext.restore();\n        }\n    };\n    Renderer.prototype.renderTableOutline = function (tableWidget) {\n        var layout = new Layout(this.documentHelper);\n        var table = tableWidget;\n        tableWidget.width = this.documentHelper.layout.getTableWidth(table);\n        var border = !table.isBidiTable ? layout.getTableLeftBorder(table.tableFormat.borders)\n            : layout.getTableRightBorder(table.tableFormat.borders);\n        var lineWidth = 0;\n        //ToDo: Need to draw the borders based on the line style.\n        // if (!isNullOrUndefined(border )) {\n        lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n        this.renderSingleBorder(border.color, tableWidget.x - tableWidget.margin.left - lineWidth / 2, tableWidget.y, tableWidget.x - tableWidget.margin.left - lineWidth / 2, tableWidget.y + tableWidget.height, lineWidth, border.lineStyle);\n        // }\n        border = layout.getTableTopBorder(table.tableFormat.borders);\n        lineWidth = 0;\n        // if (!isNullOrUndefined(border )) {\n        lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n        this.renderSingleBorder(border.color, tableWidget.x - tableWidget.margin.left - lineWidth, tableWidget.y - lineWidth / 2, tableWidget.x + tableWidget.width + lineWidth + tableWidget.margin.right, tableWidget.y - lineWidth / 2, lineWidth, border.lineStyle);\n        // }\n        border = !table.isBidiTable ? layout.getTableRightBorder(table.tableFormat.borders)\n            : layout.getTableLeftBorder(table.tableFormat.borders);\n        lineWidth = 0;\n        // if (!isNullOrUndefined(border )) {\n        lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n        this.renderSingleBorder(border.color, tableWidget.x + tableWidget.width + tableWidget.margin.right + lineWidth / 2, tableWidget.y, tableWidget.x + tableWidget.width + tableWidget.margin.right + lineWidth / 2, tableWidget.y + tableWidget.height, lineWidth, border.lineStyle);\n        // }\n        border = layout.getTableBottomBorder(table.tableFormat.borders);\n        lineWidth = 0;\n        // if (!isNullOrUndefined(border )) {\n        lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n        this.renderSingleBorder(border.color, tableWidget.x - tableWidget.margin.left - lineWidth, tableWidget.y + tableWidget.height - lineWidth / 2, tableWidget.x + tableWidget.width + lineWidth + tableWidget.margin.right, tableWidget.y + tableWidget.height - lineWidth / 2, lineWidth, border.lineStyle);\n        // }\n    };\n    /* eslint-disable  */\n    Renderer.prototype.renderTableCellOutline = function (documentHelper, cellWidget) {\n        var layout = documentHelper.layout;\n        var borders = undefined;\n        var tableCell = cellWidget;\n        var cellTopMargin = 0;\n        var cellBottomMargin = 0;\n        var cellLeftMargin = 0;\n        var cellRightMargin = 0;\n        var height = 0;\n        var isBidiTable = cellWidget.ownerTable.isBidiTable;\n        borders = tableCell.cellFormat.borders;\n        if (cellWidget.containerWidget instanceof TableRowWidget) {\n            cellBottomMargin = cellWidget.margin.bottom - cellWidget.containerWidget.bottomBorderWidth;\n            cellTopMargin = cellWidget.margin.top - cellWidget.containerWidget.topBorderWidth;\n        }\n        cellLeftMargin = cellWidget.margin.left - cellWidget.leftBorderWidth;\n        cellRightMargin = cellWidget.margin.right - cellWidget.rightBorderWidth;\n        if (!isNullOrUndefined(tableCell.ownerRow) && tableCell.ownerRow.rowFormat.heightType === 'Exactly') {\n            height = HelperMethods.convertPointToPixel(tableCell.ownerRow.rowFormat.height) + cellTopMargin + cellBottomMargin;\n        }\n        else {\n            if (!isNullOrUndefined(tableCell.ownerRow) && [tableCell.ownerRow].length <= 1) {\n                height = Math.max(HelperMethods.convertPointToPixel(tableCell.ownerRow.rowFormat.height), cellWidget.height) + cellTopMargin + cellBottomMargin;\n            }\n            else {\n                height = cellWidget.height + cellTopMargin + cellBottomMargin;\n            }\n        }\n        var border = !isBidiTable ? TableCellWidget.getCellLeftBorder(tableCell) : TableCellWidget.getCellRightBorder(tableCell);\n        var lineWidth = 0;\n        // if (!isNullOrUndefined(border )) {\n        lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth()); //Renders the cell left border.\n        this.renderCellBackground(height, cellWidget, cellLeftMargin, cellRightMargin, lineWidth);\n        var leftBorderWidth = lineWidth;\n        if (tableCell.index === 0 || tableCell.cellFormat.rowSpan === 1 || (tableCell.cellFormat.rowSpan > 1 && tableCell.columnIndex === 0)) {\n            this.renderSingleBorder(border.color, cellWidget.x - cellLeftMargin - lineWidth, cellWidget.y - cellWidget.margin.top, cellWidget.x - cellLeftMargin - lineWidth, cellWidget.y + cellWidget.height + cellBottomMargin, lineWidth, border.lineStyle);\n        }\n        else {\n            for (var i = 0; i < tableCell.ownerTable.childWidgets.length; i++) {\n                var row = tableCell.ownerTable.childWidgets[i];\n                var cell = void 0;\n                for (var j = 0; j < row.childWidgets.length; j++) {\n                    var currentCell = row.childWidgets[j];\n                    if ((currentCell.columnIndex + currentCell.cellFormat.columnSpan - 1) === tableCell.columnIndex - 1) {\n                        cell = currentCell;\n                        break;\n                    }\n                    else if (row.childWidgets[j].columnIndex >= tableCell.columnIndex && row.childWidgets[j].previousWidget) {\n                        cell = row.childWidgets[j].previousWidget;\n                        break;\n                    }\n                }\n                if (cell && cell.columnIndex + cell.cellFormat.columnSpan - 1 === tableCell.columnIndex - 1) {\n                    var border_1 = !isBidiTable ? TableCellWidget.getCellRightBorder(cell) : TableCellWidget.getCellLeftBorder(cell);\n                    var lineWidthInt = HelperMethods.convertPointToPixel(border_1.getLineWidth());\n                    cellLeftMargin = tableCell.margin.left - lineWidthInt;\n                    if (cell.y + cell.height < tableCell.y) {\n                        continue;\n                    }\n                    else if (cell.y < tableCell.y && cell.y + cell.height > tableCell.y) {\n                        this.renderSingleBorder(border_1.color, tableCell.x - cellLeftMargin - lineWidthInt, tableCell.y - cellTopMargin, tableCell.x - cellLeftMargin - lineWidthInt, cell.y + cell.height + cell.margin.bottom, lineWidthInt, border_1.lineStyle);\n                    }\n                    else if ((cell.y === tableCell.y) || (cell.y > tableCell.y && cell.y + cell.height < tableCell.y + tableCell.height)) {\n                        this.renderSingleBorder(border_1.color, tableCell.x - cellLeftMargin - lineWidthInt, cell.y - cell.margin.top, tableCell.x - cellLeftMargin - lineWidthInt, cell.y + cell.height + cell.margin.bottom, lineWidthInt, border_1.lineStyle);\n                    }\n                    else if (cell.y < tableCell.y + tableCell.height && cell.y + cell.height >= tableCell.y + tableCell.height) {\n                        this.renderSingleBorder(border_1.color, tableCell.x - cellLeftMargin - lineWidthInt, cell.y - cell.margin.top, tableCell.x - cellLeftMargin - lineWidthInt, cell.y + cell.height + cellBottomMargin, lineWidthInt, border_1.lineStyle);\n                    }\n                    else if (cell.y > tableCell.y + tableCell.height) {\n                        break;\n                    }\n                }\n            }\n        }\n        // }\n        if (tableCell.updatedTopBorders && tableCell.updatedTopBorders.length > 1) {\n            var cellX = cellWidget.x - cellWidget.margin.left - leftBorderWidth / 2;\n            var cellY = cellWidget.y - cellWidget.margin.top;\n            for (var a = 0; a < tableCell.updatedTopBorders.length; a++) {\n                var borderInfo = tableCell.updatedTopBorders[a];\n                border = borderInfo.border;\n                if (border.lineStyle !== 'None' && border.lineWidth < TableCellWidget.getCellTopBorder(tableCell).lineWidth) {\n                    border.lineWidth = TableCellWidget.getCellTopBorder(tableCell).lineWidth;\n                }\n                if (!isNullOrUndefined(border)) {\n                    lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n                    this.renderSingleBorder(border.color, cellX, cellY + lineWidth / 2, cellX + borderInfo.width, cellY + lineWidth / 2, lineWidth, border.lineStyle);\n                    cellX = cellX + borderInfo.width;\n                }\n            }\n        }\n        else {\n            border = TableCellWidget.getCellTopBorder(tableCell);\n            // if (!isNullOrUndefined(border )) { //Renders the cell top border.        \n            lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n            var width = 0;\n            this.renderSingleBorder(border.color, cellWidget.x - cellWidget.margin.left - leftBorderWidth / 2, cellWidget.y - cellWidget.margin.top + lineWidth / 2, cellWidget.x + cellWidget.width + cellWidget.margin.right + width, cellWidget.y - cellWidget.margin.top + lineWidth / 2, lineWidth, border.lineStyle);\n            // }\n        }\n        var isLastCell = false;\n        if (!isBidiTable) {\n            isLastCell = tableCell.cellIndex === tableCell.ownerRow.childWidgets.length - 1;\n        }\n        else {\n            isLastCell = tableCell.columnIndex === 0;\n        }\n        var prevRowSpannedCells = tableCell.containerWidget.getPreviousRowSpannedCells();\n        var isAffectedByRowSpan = false;\n        for (var k = 0; k < prevRowSpannedCells.length; k++) {\n            var spannedCell = prevRowSpannedCells[k];\n            if (tableCell.rowIndex < spannedCell.rowIndex + spannedCell.cellFormat.rowSpan && tableCell.columnIndex < spannedCell.columnIndex) {\n                isAffectedByRowSpan = true;\n                break;\n            }\n        }\n        if ((tableCell.ownerTable.tableFormat.cellSpacing > 0 || isLastCell) && (isBidiTable || tableCell.columnIndex + tableCell.cellFormat.columnSpan === tableCell.ownerTable.tableHolder.columns.length || !isAffectedByRowSpan)) {\n            border = isBidiTable ? TableCellWidget.getCellLeftBorder(tableCell) : TableCellWidget.getCellRightBorder(tableCell);\n            // if (!isNullOrUndefined(border )) { //Renders the cell right border.           \n            lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n            this.renderSingleBorder(border.color, cellWidget.x + cellWidget.width + cellWidget.margin.right - lineWidth / 2, cellWidget.y - cellWidget.margin.top, cellWidget.x + cellWidget.width + cellWidget.margin.right - lineWidth / 2, cellWidget.y + cellWidget.height + cellBottomMargin, lineWidth, border.lineStyle);\n            // }\n        }\n        var nextRow = tableCell.ownerRow.nextWidget;\n        //Specifies the next row is within the current table widget.\n        //True means current row is not rendered at page end; Otherwise False.\n        var nextRowIsInCurrentTableWidget = false;\n        var previousCellIndex = undefined;\n        if (!isNullOrUndefined(nextRow)) {\n            if (nextRow.lastChild) {\n                var lastCellWidget = nextRow.lastChild;\n                previousCellIndex = lastCellWidget.columnIndex + lastCellWidget.cellFormat.columnSpan;\n            }\n            var nextRowWidget = undefined;\n            // if (viewer.renderedElements.containsKey(nextRow) && viewer.renderedElements.get(nextRow).length > 0) {\n            nextRowWidget = nextRow;\n            // }\n            if (nextRowWidget instanceof TableRowWidget) {\n                if (cellWidget.containerWidget instanceof TableRowWidget && cellWidget.containerWidget.containerWidget instanceof TableWidget) {\n                    nextRowIsInCurrentTableWidget = cellWidget.containerWidget.containerWidget.childWidgets.indexOf(nextRowWidget) !== -1;\n                }\n            }\n        }\n        if (tableCell.ownerTable.tableFormat.cellSpacing > 0 || tableCell.ownerRow.rowIndex === tableCell.ownerTable.childWidgets.length - 1\n            || (tableCell.cellFormat.rowSpan > 1\n                && tableCell.ownerRow.rowIndex + tableCell.cellFormat.rowSpan >= tableCell.ownerTable.childWidgets.length) ||\n            !nextRowIsInCurrentTableWidget || this.isRenderHeader || previousCellIndex && nextRow.childWidgets.length < tableCell.ownerRow.childWidgets.length\n            && previousCellIndex < tableCell.columnIndex + tableCell.cellFormat.columnSpan ||\n            ((!isNullOrUndefined(tableCell.cellFormat.borders.bottom) && tableCell.cellFormat.borders.bottom.lineStyle !== 'Cleared' && tableCell.cellFormat.rowSpan === 1 && !isBidiTable) &&\n                ((!isNullOrUndefined(nextRow) && cellWidget.x < (nextRow.firstChild.x - nextRow.firstChild.margin.left) &&\n                    nextRow.rowFormat.gridBefore > 0 && (nextRow.rowFormat.beforeWidth !== 0 || nextRow.rowFormat.gridBeforeWidth !== 0)) ||\n                    (!isNullOrUndefined(nextRow) && cellWidget.x + cellWidget.width > (nextRow.lastChild.x + nextRow.lastChild.width + nextRow.lastChild.margin.right) &&\n                        nextRow.rowFormat.gridAfter > 0 && (nextRow.rowFormat.afterWidth !== 0 || nextRow.rowFormat.gridAfterWidth !== 0))))) {\n            var bottomBorder = tableCell.cellFormat.borders.bottom;\n            if (!isNullOrUndefined(bottomBorder) && bottomBorder.lineStyle === 'Cleared') {\n                border = TableCellWidget.getCellBottomBorder(tableCell);\n            }\n            else {\n                border = (tableCell.cellFormat.rowSpan > 1 && tableCell.ownerRow.rowIndex + tableCell.cellFormat.rowSpan === tableCell.ownerTable.childWidgets.length) ?\n                    //true part for vertically merged cells specifically.\n                    tableCell.getBorderBasedOnPriority(tableCell.getBorderBasedOnPriority(tableCell.cellFormat.borders.bottom, tableCell.ownerRow.rowFormat.borders.bottom), tableCell.ownerTable.tableFormat.borders.bottom)\n                    //false part for remaining cases that has been handled inside method. \n                    : TableCellWidget.getCellBottomBorder(tableCell);\n            }\n            var startX = cellWidget.x - cellWidget.margin.left - leftBorderWidth / 2;\n            var endX = cellWidget.x + cellWidget.width + cellWidget.margin.right;\n            if (!(previousCellIndex && nextRow.childWidgets.length < tableCell.ownerRow.childWidgets.length && previousCellIndex < tableCell.columnIndex + tableCell.cellFormat.columnSpan) &&\n                !isNullOrUndefined(nextRow) && !isBidiTable && nextRow.rowFormat.gridAfter > 0 && (nextRow.rowFormat.afterWidth !== 0 || nextRow.rowFormat.gridAfterWidth !== 0) && !isNullOrUndefined(nextRow.lastChild) && !isNullOrUndefined(TableCellWidget.getCellTopBorder(nextRow.lastChild)) && TableCellWidget.getCellTopBorder(nextRow.lastChild).lineStyle !== \"None\" && cellWidget.x < nextRow.lastChild.x + nextRow.lastChild.width + nextRow.lastChild.margin.right) {\n                startX = nextRow.lastChild.x + nextRow.lastChild.width + nextRow.lastChild.margin.right;\n            }\n            if (!(previousCellIndex && nextRow.childWidgets.length < tableCell.ownerRow.childWidgets.length && previousCellIndex < tableCell.columnIndex + tableCell.cellFormat.columnSpan) &&\n                !isNullOrUndefined(nextRow) && !isBidiTable && nextRow.rowFormat.gridBefore > 0 && (nextRow.rowFormat.beforeWidth !== 0 || nextRow.rowFormat.gridBeforeWidth !== 0) && !isNullOrUndefined(nextRow.firstChild) && !isNullOrUndefined(TableCellWidget.getCellTopBorder(nextRow.firstChild)) && TableCellWidget.getCellTopBorder(nextRow.firstChild).lineStyle !== \"None\" && cellWidget.x + cellWidget.width > nextRow.firstChild.x - nextRow.firstChild.margin.left) {\n                endX = nextRow.firstChild.x - nextRow.firstChild.margin.left;\n            }\n            // if (!isNullOrUndefined(border )) {\n            //Renders the cell bottom border.\n            lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n            this.renderSingleBorder(border.color, startX, cellWidget.y + cellWidget.height + cellBottomMargin + lineWidth / 2, endX, cellWidget.y + cellWidget.height + cellBottomMargin + lineWidth / 2, lineWidth, border.lineStyle);\n            // }\n        }\n        border = layout.getCellDiagonalUpBorder(tableCell);\n        // if (!isNullOrUndefined(border )) {\n        //Renders the cell diagonal up border.\n        lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n        if (lineWidth > 0) {\n            this.renderSingleBorder(border.color, cellWidget.x - cellLeftMargin, cellWidget.y + cellWidget.height + cellBottomMargin, cellWidget.x + cellWidget.width + cellRightMargin, cellWidget.y - cellTopMargin, lineWidth, border.lineStyle);\n            // }\n        }\n        border = layout.getCellDiagonalDownBorder(tableCell);\n        // if (!isNullOrUndefined(border )) {\n        //Renders the cell diagonal down border.\n        lineWidth = HelperMethods.convertPointToPixel(border.getLineWidth());\n        if (lineWidth > 0) {\n            this.renderSingleBorder(border.color, cellWidget.x - cellLeftMargin, cellWidget.y - cellTopMargin, cellWidget.x + cellWidget.width + cellRightMargin, cellWidget.y + cellWidget.height + cellBottomMargin, lineWidth, border.lineStyle);\n        }\n        // }\n    };\n    Renderer.prototype.renderCellBackground = function (height, cellWidget, leftMargin, rightMargin, lineWidth) {\n        var cellFormat = cellWidget.cellFormat;\n        var bgColor = cellFormat.shading.backgroundColor === '#ffffff' ?\n            cellWidget.ownerTable.tableFormat.shading.backgroundColor : cellFormat.shading.backgroundColor;\n        var left = cellWidget.x - leftMargin - lineWidth;\n        var topMargin = (cellWidget.margin.top - cellWidget.containerWidget.topBorderWidth);\n        var top = cellWidget.y - topMargin;\n        var width = cellWidget.width + leftMargin + rightMargin + lineWidth / 2;\n        if (cellWidget.ownerRow.rowFormat.revisions.length > 0) {\n            var revision = cellWidget.ownerRow.rowFormat.revisions[cellWidget.ownerRow.rowFormat.revisions.length - 1];\n            bgColor = (revision.revisionType === 'Insertion') ? '#e1f2fa' : '#fce6f4';\n        }\n        this.pageContext.beginPath();\n        if (bgColor !== 'empty') {\n            this.pageContext.fillStyle = HelperMethods.getColor(bgColor);\n            this.pageContext.fillRect(this.getScaledValue(left, 1), this.getScaledValue(top, 2), this.getScaledValue(width), this.getScaledValue(height));\n            this.pageContext.closePath();\n        }\n        //Render foreground color\n        if (cellFormat.shading.hasValue('foregroundColor') && cellFormat.shading.textureStyle !== 'TextureNone') {\n            this.pageContext.beginPath();\n            this.pageContext.fillStyle = this.drawTextureStyle(cellFormat.shading.textureStyle, HelperMethods.getColor(cellFormat.shading.foregroundColor), HelperMethods.getColor(cellFormat.shading.backgroundColor), cellFormat.shading.foregroundColor === 'empty', cellFormat.shading.backgroundColor === 'empty');\n            this.pageContext.fillRect(this.getScaledValue(left, 1), this.getScaledValue(top, 2), this.getScaledValue(width), this.getScaledValue(height));\n            this.pageContext.closePath();\n        }\n    };\n    Renderer.prototype.drawTextureStyle = function (textureStyle, foreColor, backColor, isForeColorEmpty, isBackColorEmpty) {\n        if (isBackColorEmpty) {\n            backColor = '#ffffff';\n        }\n        if (isForeColorEmpty) {\n            foreColor = '#000000';\n        }\n        if (textureStyle.indexOf('Percent') > -1) {\n            var text = textureStyle.replace(\"Texture\", \"\").replace(\"Percent\", \"\").replace(\"Pt\", \".\");\n            var percent = parseInt(text);\n            return this.getForeColor(foreColor, backColor, percent, isForeColorEmpty, isBackColorEmpty);\n        }\n        if (textureStyle === 'TextureSolid') {\n            return foreColor;\n        }\n        return '#FFFFFF';\n    };\n    Renderer.prototype.getForeColor = function (foreColor, backColor, percent, isForeColorEmpty, isBackColorEmpty) {\n        var r = 0;\n        var g = 0;\n        var b = 0;\n        var foreColorRgb = HelperMethods.convertHexToRgb(foreColor);\n        var backColorRgb = HelperMethods.convertHexToRgb(backColor);\n        r = this.getColorValue(foreColorRgb.r, backColorRgb.r, percent, isForeColorEmpty, isBackColorEmpty);\n        g = this.getColorValue(foreColorRgb.g, backColorRgb.g, percent, isForeColorEmpty, isBackColorEmpty);\n        b = this.getColorValue(foreColorRgb.b, backColorRgb.b, percent, isForeColorEmpty, isBackColorEmpty);\n        return ('#' + HelperMethods.convertRgbToHex(r) + HelperMethods.convertRgbToHex(g) + HelperMethods.convertRgbToHex(b));\n    };\n    Renderer.prototype.getColorValue = function (foreColorValue, backColorValue, percent, isForeColorEmpty, isBackColorEmpty) {\n        var colorValue = 0;\n        if (percent == 100) {\n            colorValue = foreColorValue;\n        }\n        else {\n            if (isForeColorEmpty) {\n                if (isBackColorEmpty) {\n                    colorValue = Math.round(255 * (1 - percent / 100));\n                }\n                else {\n                    colorValue = Math.round(backColorValue * (1 - percent / 100));\n                }\n            }\n            else {\n                if (isBackColorEmpty) {\n                    colorValue = Math.round(foreColorValue * (percent / 100));\n                }\n                else {\n                    colorValue = backColorValue + Math.round(foreColorValue * (percent / 100)) - Math.round(backColorValue * (percent / 100));\n                }\n            }\n        }\n        return colorValue;\n    };\n    Renderer.prototype.renderSingleBorder = function (color, startX, startY, endX, endY, lineWidth, lineStyle) {\n        this.pageContext.beginPath();\n        this.pageContext.moveTo(this.getScaledValue(startX, 1), this.getScaledValue(startY, 2));\n        this.pageContext.lineTo(this.getScaledValue(endX, 1), this.getScaledValue(endY, 2));\n        this.pageContext.lineWidth = this.getScaledValue(lineWidth);\n        // set line color\n        this.pageContext.strokeStyle = HelperMethods.getColor(color);\n        if (lineStyle !== \"None\" && lineStyle !== \"Cleared\") {\n            this.pageContext.stroke();\n        }\n        this.pageContext.closePath();\n    };\n    Renderer.prototype.getScaledValue = function (value, type) {\n        if (this.isPrinting) {\n            return value;\n        }\n        if (isNullOrUndefined(type)) {\n            type = 0;\n        }\n        var x = value * this.documentHelper.zoomFactor;\n        return x + (type === 1 ? this.pageLeft : (type === 2 ? this.pageTop : 0));\n    };\n    Renderer.prototype.checkRevisionType = function (elementBox) {\n        var revisions = [];\n        var count = elementBox.revisions.length;\n        for (var i = 0; i < count; i++) {\n            var currentRevision = elementBox.revisions[i];\n            var color = this.documentHelper.authors.get(currentRevision.author);\n            revisions.push({ 'type': currentRevision.revisionType, 'color': color });\n        }\n        return revisions;\n    };\n    Renderer.prototype.getRevisionColor = function (revisionInfo) {\n        if (revisionInfo.length === 1) {\n            return revisionInfo[0].color;\n        }\n        for (var i = 0; i < revisionInfo.length; i++) {\n            if (revisionInfo[i].type === 'Deletion' || revisionInfo[i].type === 'MoveFrom') {\n                return revisionInfo[i].color;\n            }\n        }\n        if (revisionInfo.length > 0) {\n            return revisionInfo[0].color;\n        }\n        return undefined;\n    };\n    Renderer.prototype.getRevisionType = function (revisionInfo, checkInsert) {\n        if (revisionInfo.length === 0) {\n            return undefined;\n        }\n        for (var i = 0; i < revisionInfo.length; i++) {\n            var type = undefined;\n            if (checkInsert && (revisionInfo[i].type === 'Insertion' || revisionInfo[i].type === 'MoveTo')) {\n                type = revisionInfo[i];\n                this.pageContext.fillStyle = HelperMethods.getColor(type.color);\n                revisionInfo.splice(i, 1);\n                return type;\n            }\n            if (!checkInsert && (revisionInfo[i].type === 'Deletion' || revisionInfo[i].type === 'MoveFrom')) {\n                type = revisionInfo[i];\n                this.pageContext.fillStyle = HelperMethods.getColor(type.color);\n                revisionInfo.splice(i, 1);\n                return type;\n            }\n        }\n        return undefined;\n    };\n    Renderer.prototype.getFormfieldInLine = function (line) {\n        for (var i = 0; i < line.children.length; i++) {\n            if (line.children[i] instanceof FieldElementBox && !isNullOrUndefined(line.children[i].formFieldData)) {\n                return line.children[i];\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Destroys the internal objects which is maintained.\n     *\n     * @returns {void}\n     */\n    Renderer.prototype.destroy = function () {\n        this.documentHelper = undefined;\n        if (!isNullOrUndefined(this.pageCanvasIn)) {\n            this.pageCanvasIn.innerHTML = '';\n        }\n        this.pageCanvasIn = undefined;\n    };\n    return Renderer;\n}());\nexport { Renderer };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}