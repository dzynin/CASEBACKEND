{"ast":null,"code":"var _jsxFileName = \"/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/Dashboard/FileViewer.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { UserContext } from \"../App\";\nimport { Resizable } from \"react-resizable\";\nimport processMd from \"./markdown\";\nimport axios from \"axios\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport \"../style/resizable.css\";\nconst updateHash = highlight => {\n  document.location.hash = `pdf-highlight-${highlight.id}`;\n};\nfunction FileViewer() {\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const [highlights, setHighlights] = useState([]);\n  const [dimensions, setDimensions] = useState({\n    height: 720,\n    width: 250\n  });\n  const [selectPdf, setSelectPdf] = useState(false);\n  const [show, setShow] = useState(false);\n  const [index, setIndex] = useState();\n  const [currentHighlightIndex, setCurrentHighlightIndex] = useState(0);\n  const [filter, setFilter] = useState(\"\");\n  useEffect(() => {\n    let highlightUpdated = false;\n    const filteredHighlights = state.fileHighlights.reduce((acc, item) => {\n      if (item.name === state.currentFile.name) {\n        const validHighlights = item.highlights.filter(highlight => highlight.comment.text !== \"OTHER\" && (!filter || highlight.comment.text.toUpperCase().includes(filter)));\n        acc.push(...validHighlights);\n        highlightUpdated = true;\n      }\n      return acc;\n    }, []);\n    setHighlights(filteredHighlights);\n    if (!highlightUpdated || filteredHighlights.length === 0) {\n      setHighlights([]);\n    }\n    setCurrentHighlightIndex(0);\n    if (filteredHighlights.length > 0) {\n      updateHash(filteredHighlights[0]);\n    }\n  }, [state.currentFile, state.fileHighlights, filter]);\n  const handlePreviousHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      alert(`No highlights available for '${filter}'`);\n      return;\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const prevIndex = (currentFilteredIndex - 1 + filteredHighlights.length) % filteredHighlights.length;\n    const prevHighlight = filteredHighlights[prevIndex];\n    setCurrentHighlightIndex(highlights.indexOf(prevHighlight));\n    updateHash(prevHighlight);\n  };\n  const handleNextHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      alert(`No highlights available for '${filter}'`);\n      return;\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const nextIndex = (currentFilteredIndex + 1) % filteredHighlights.length;\n    if (nextIndex === 0 && currentFilteredIndex === filteredHighlights.length - 1) {\n      alert(`Reached end of '${filter}' highlights`);\n      return;\n    }\n    const nextHighlight = filteredHighlights[nextIndex];\n    setCurrentHighlightIndex(highlights.indexOf(nextHighlight));\n    updateHash(nextHighlight);\n  };\n  const handleFileClick = async index => {\n    dispatch({\n      type: \"SET_CURR_FILE\",\n      payload: state.files[index]\n    });\n    dispatch({\n      type: \"SET_MODAL\",\n      payload: false\n    });\n    setSelectPdf(false);\n  };\n  const handleRemove = index => setShow(true);\n  const handleRemoveFile = data => {\n    if (state.files.length > 0) {\n      let arr = state.files;\n      arr.splice(arr.findIndex(a => a.name === data.name), 1);\n      dispatch({\n        type: \"ADD_FILE\",\n        payload: arr\n      });\n      dispatch({\n        type: \"SET_CURR_FILE\",\n        payload: state.files[0]\n      });\n    } else {\n      dispatch({\n        type: \"ADD_FILE\",\n        payload: []\n      });\n      dispatch({\n        type: \"SET_FILE_HIGHLIGHTS\",\n        payload: []\n      });\n      dispatch({\n        type: \"SET_CURR_FILE\",\n        payload: null\n      });\n    }\n    setShow(false);\n    axios.post(`${BASE_URL_DEV}/deletePdfAndGraphData`, {\n      fileName: data.name\n    }, {\n      headers: {\n        'x-access-token': state.auth && state.auth.authToken\n      }\n    }).then(response => console.log(\"delete api response\", response));\n  };\n  const deleteHighlight = index => {\n    const updatedHighlights = highlights.filter((highlight, idx) => idx !== index);\n    setHighlights(updatedHighlights);\n  };\n  const hideModal = () => setSelectPdf(false);\n  return (\n    /*#__PURE__*/\n    //     <Resizable\n    //       className=\"box\"\n    //       height={dimensions.height}\n    //       axis=\"x\"\n    //       width={dimensions.width}\n    //       onResize={(e, { size }) => {\n    //         setDimensions({\n    //           height: size.height,\n    //           width: size.width,\n    //         });\n    //       }}\n    //       resizeHandles={[\"e\"]}\n    //     >\n    //       <div\n    //         className=\"sidebarnew\"\n    //         style={{\n    //           width: dimensions.width + 'px' || \"25%\",\n    //           // minWidth: \"20%\",\n    //           height: dimensions.height + 'px' || \"calc(100vh - 70px)\",\n    //           overflowY: \"scroll\",\n    //         }}\n    //       >\n    //         <div className=\"description\" style={{ padding: \"1rem\" }}>\n    //           <h2 style={{ marginBottom: \"1rem\" }}>Highlights</h2>\n    //           <p>\n    //             <small>\n    //               To create area highlight hold ⌥ Option key (Alt), then click and\n    //               drag.\n    //             </small>\n    //           </p>\n    //         </div>\n    //         {/* <ul className=\"sidebar__highlights\">\n    //           <li\n    //             className=\"sidebar__highlight h4 bg-secondary\"\n    //             onClick={() => setSelectPdf(true)}\n    //           >\n    //             Select Another File\n    //           </li>\n    //           {highlights.length > 0 ? (\n    //             highlights.map((highlight, index) => (\n    //               <li\n    //                 key={index}\n    //                 className=\"sidebar__highlight\"\n    //                 onClick={() => {\n    //                   updateHash(highlight);\n    //                 }}\n    //               >\n    //                 <div>\n    //                   <div style={{ padding: \"0px\" }}>\n    //                     <button\n    //                       style={{ float: \"right\" }}\n    //                       onClick={() => deleteHighlight(index)}\n    //                       className=\"sidebar__btn\"\n    //                     >\n    //                       <i className=\"fa fa-close\"></i>\n    //                     </button>\n    //                     </div>\n    //                     <div>\n    //                     <button\n    //                       style={{ marginLeft: \"114px\" }}\n    //                       onClick={(e) => {\n    //                         e.stopPropagation();\n    //                         handleSendToEditor(highlight);\n    //                       }}\n    //                       className=\"sidebar__btn_send\"\n    //                     >\n    //                       <FontAwesomeIcon icon={faPlus} />\n    //                     </button>\n    //                   </div>\n    //                   <strong>{processMd(highlight.comment.text)}</strong>\n    //                   {highlight.content.text ? (\n    //                     <blockquote style={{ marginTop: \"0.5rem\" }}>\n    //                       {`${highlight.content.text.slice(0, 90).trim()}…`}\n    //                     </blockquote>\n    //                   ) : null}\n    //                   {highlight.content.image ? (\n    //                     <div\n    //                       className=\"highlight__image\"\n    //                       style={{ marginTop: \"0.5rem\" }}\n    //                     >\n    //                       <img src={highlight.content.image} alt={\"Screenshot\"} />\n    //                     </div>\n    //                   ) : null}\n    //                 </div>\n    //                 <div className=\"highlight__location\">\n    //                   Page {highlight.position.pageNumber}\n    //                 </div>\n    //               </li>\n    //             ))\n    //           ) : (\n    //             <li className=\"sidebar__highlight\">\n    //               <div className=\"p-2\">\n    //                 <p style={{ margin: 0 }}>\n    //                   No Highlights Available for Selected Pdf!\n    //                 </p>\n    //               </div>\n    //             </li>\n    //           )}\n    //         </ul> */}\n    // {/*  end of old list style for highlights sidebar */}\n    // {/* new filter buttons */}\n    // {/* <div className=\"filter-buttons\">\n    //   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"ISSUE\")}>Issue</button>\n    //   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"LEGAL_TEST\")}>Legal Test</button>\n    //   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"CONCLUSION\")}>Conclusion</button>\n    //   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"\")}>Clear Filter</button>\n    // </div> */}\n    // <UncontrolledDropdown>\n    //   <DropdownToggle caret color=\"secondary\">\n    //     Filter Highlights\n    //   </DropdownToggle>\n    //   <DropdownMenu>\n    //     <DropdownItem header>Jump to</DropdownItem>\n    //     <DropdownItem onClick={() => setFilter(\"ISSUE\")}>Issue</DropdownItem>\n    //     <DropdownItem onClick={() => setFilter(\"LEGAL_TEST\")}>Legal Test</DropdownItem>\n    //     <DropdownItem onClick={() => setFilter(\"CONCLUSION\")}>Conclusion</DropdownItem>\n    //     <DropdownItem divider />\n    //   </DropdownMenu>\n    // </UncontrolledDropdown>\n    // {/* end of filter buttons */}\n    // {/* begining of new slider card for highlights */}\n    // <div className=\"sidebar__highlights\">\n    //   {highlights.length > 0 ? (\n    //     <div className=\"highlight-card\" key={currentHighlightIndex} onClick={() => updateHash(highlights[currentHighlightIndex])}>\n    //       <div className=\"card-body\">\n    //         <strong>{processMd(highlights[currentHighlightIndex].comment.text)}</strong>\n    //         {highlights[currentHighlightIndex].content.text && (\n    //           <blockquote>\n    //             {`${highlights[currentHighlightIndex].content.text.slice(0, 90).trim()}…`}\n    //           </blockquote>\n    //         )}\n    //         {highlights[currentHighlightIndex].content.image && (\n    //           <div className=\"highlight__image\" style={{ marginTop: \"0.5rem\" }}>\n    //             <img src={highlights[currentHighlightIndex].content.image} alt=\"Screenshot\" />\n    //           </div>\n    //         )}\n    //       </div>\n    //     </div>\n    //   ) : (\n    //     <div className=\"no-highlights\">\n    //       No Highlights Available for Selected Pdf!\n    //     </div>\n    //   )}\n    // </div>\n    //         <div className=\"highlight-actions\">\n    //             <button className=\"btn btn-secondary\" onClick={(e) => {\n    //               e.stopPropagation();\n    //               handlePreviousHighlight();\n    //             }}>Previous</button>\n    //             <button className=\"btn btn-primary\" onClick={(e) => {\n    //               e.stopPropagation();\n    //               handleNextHighlight();\n    //             }}>Next</button>\n    //           </div>\n    // {/* end of new slider highlight card */}\n    //         {highlights.length > 0 ? (\n    //           <div style={{ padding: \"1rem\" }}>\n    //            {/* <button variant=\"primary\" onClick={resetHighlights}> Reset highlights</button> */}\n    //           </div>\n    //         ) : null}\n    //         <Modal\n    //           style={{ color: \"#050505\" }}\n    //           show={selectPdf || state.isModalOpen}\n    //           onHide={() => hideModal()}\n    //           backdrop=\"static\"\n    //           size=\"xl\"\n    //           centered={true}\n    //         >\n    //           <Modal.Header closeButton>\n    //             <Modal.Title id=\"example-modal-sizes-title-sm\">\n    //               Select File\n    //             </Modal.Title>\n    //           </Modal.Header>\n    //           <Modal.Body>\n    //             <div className=\"card\">\n    //               <div className=\"card-body\" style={{ padding: '1.75rem 1.2rem' }}>\n    //                 <div className=\"table-responsive\">\n    //                   <table className=\"table table-hover\">\n    //                     <thead>\n    //                       <tr>\n    //                         <th>PDF NAME</th>\n    //                         <th>CITATION</th>\n    //                         <th>PROVISION</th>\n    //                         <th>ACTION</th>\n    //                       </tr>\n    //                     </thead>\n    //                     <tbody>\n    //                       {state.files && state.files.length > 0 ? (\n    //                         state.files.map((pdf, index) => (\n    //                           state.currentFile && state.currentFile.name === pdf.name ? (\n    //                             <tr style={{ backgroundColor: \"rgba(0, 0, 0, 0.075)\", color: \"#212529\" }}>\n    //                               <td>{pdf.name}</td>\n    //                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n    //                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n    //                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleFileClick(index)} className=\"btn btn-info btn-sm\">View File</button></td>\n    //                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleRemove(pdf)} className=\"btn btn-danger btn-sm\">Delete File</button></td>\n    //                             </tr>\n    //                           ) : (\n    //                             <tr>\n    //                               <td>{pdf.name}</td>\n    //                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n    //                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n    //                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleFileClick(index)} className=\"btn btn-info btn-sm\">View File</button></td>\n    //                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleRemove(pdf)} className=\"btn btn-danger btn-sm\">Delete File</button></td>\n    //                             </tr>\n    //                           )\n    //                         ))) : (\n    //                         <tr>\n    //                           <td colSpan=\"4\" align=\"center\"><p style={{ margin: \"5px\" }}>No Pdfs uploaded!</p></td>\n    //                         </tr>\n    //                       )}\n    //                     </tbody>\n    //                   </table>\n    //                 </div>\n    //               </div>\n    //             </div>\n    //             {console.log(state)}\n    //             {/* // <div\n    //                 //   key={index}\n    //                 //   className=\"btn btn-secondary w-100 rounded-0 py-3 my-1\"\n    //                 //   onClick={() => handleFileClick(index)}\n    //                 // >\n    //                 //   {state.currentFile.name === pdf.name ? (\n    //                 //     <strong>\n    //                 //       <p style={{ margin: 0 }}>{pdf.name}</p>\n    //                 //     </strong>\n    //                 //   ) : (\n    //                 //     <p style={{ margin: 0 }}>{pdf.name}</p>\n    //                 //   )}\n    //                 // </div>\n    //                */}\n    //           </Modal.Body>\n    //         </Modal>\n    //         <Modal\n    //           style={{ color: \"#050505\" }}\n    //           show={show}\n    //           onHide={() => handleClose()}\n    //           centered={true}>\n    //           <Modal.Header closeButton>\n    //             <Modal.Title>Deleting File</Modal.Title>\n    //           </Modal.Header>\n    //           <Modal.Body>Are you sure you want to delete ?</Modal.Body>\n    //           <Modal.Footer>\n    //             <Button variant=\"secondary\" onClick={handleClose}>\n    //               Close\n    //             </Button>\n    //             <Button variant=\"danger\" onClick={() => handleRemoveFile(index)}>\n    //               Delete\n    //             </Button>\n    //           </Modal.Footer>\n    //         </Modal>\n    //       </div>\n    //     </Resizable>\n    //   );\n    React.createElement(Resizable, {\n      className: \"box\",\n      height: dimensions.height,\n      width: dimensions.width,\n      onResize: (e, {\n        size\n      }) => setDimensions({\n        height: size.height,\n        width: size.width\n      }),\n      resizeHandles: [\"e\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebarnew\",\n      style: {\n        width: dimensions.width + 'px',\n        height: dimensions.height + 'px',\n        overflowY: \"scroll\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"description\",\n      style: {\n        padding: \"1rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 5\n      }\n    }, \"Highlights\"), /*#__PURE__*/React.createElement(UncontrolledDropdown, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(DropdownToggle, {\n      caret: true,\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 7\n      }\n    }, \"Filter Highlights\"), /*#__PURE__*/React.createElement(DropdownMenu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      header: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }\n    }, \"Jump to\"), /*#__PURE__*/React.createElement(DropdownItem, {\n      onClick: () => setFilter(\"AXIOM\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }\n    }, \"Axiom\"), /*#__PURE__*/React.createElement(DropdownItem, {\n      onClick: () => setFilter(\"ISSUE\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }\n    }, \"Issue\"), /*#__PURE__*/React.createElement(DropdownItem, {\n      onClick: () => setFilter(\"LEGAL_TEST\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }\n    }, \"Legal Test\"), /*#__PURE__*/React.createElement(DropdownItem, {\n      onClick: () => setFilter(\"CONCLUSION\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }\n    }, \"Conclusion\"), /*#__PURE__*/React.createElement(DropdownItem, {\n      divider: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar__highlights\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 3\n      }\n    }, highlights.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"highlight-card\",\n      key: currentHighlightIndex,\n      onClick: () => updateHash(highlights[currentHighlightIndex]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }\n    }, processMd(highlights[currentHighlightIndex].comment.text)), highlights[currentHighlightIndex].content.text && /*#__PURE__*/React.createElement(\"blockquote\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 13\n      }\n    }, `${highlights[currentHighlightIndex].content.text.slice(0, 90).trim()}…`), highlights[currentHighlightIndex].content.image && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"highlight__image\",\n      style: {\n        marginTop: \"0.5rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: highlights[currentHighlightIndex].content.image,\n      alt: \"Screenshot\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 15\n      }\n    })))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"no-highlights\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 7\n      }\n    }, \"No Highlights Available for Selected Pdf!\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"highlight-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-secondary\",\n      onClick: e => {\n        e.stopPropagation();\n        handlePreviousHighlight();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 5\n      }\n    }, \"Previous\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: e => {\n        e.stopPropagation();\n        handleNextHighlight();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 5\n      }\n    }, \"Next\"))))\n  );\n}\nexport default FileViewer;","map":{"version":3,"names":["React","useContext","useState","useEffect","Modal","Button","UserContext","Resizable","processMd","axios","BASE_URL_DEV","FontAwesomeIcon","faPlus","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","updateHash","highlight","document","location","hash","id","FileViewer","state","dispatch","highlights","setHighlights","dimensions","setDimensions","height","width","selectPdf","setSelectPdf","show","setShow","index","setIndex","currentHighlightIndex","setCurrentHighlightIndex","filter","setFilter","highlightUpdated","filteredHighlights","fileHighlights","reduce","acc","item","name","currentFile","validHighlights","comment","text","toUpperCase","includes","push","length","handlePreviousHighlight","h","alert","currentFilteredIndex","findIndex","prevIndex","prevHighlight","indexOf","handleNextHighlight","nextIndex","nextHighlight","handleFileClick","type","payload","files","handleRemove","handleRemoveFile","data","arr","splice","a","post","fileName","headers","auth","authToken","then","response","console","log","deleteHighlight","updatedHighlights","idx","hideModal","createElement","className","onResize","e","size","resizeHandles","__self","__source","_jsxFileName","lineNumber","columnNumber","style","overflowY","padding","caret","color","header","onClick","divider","key","content","slice","trim","image","marginTop","src","alt","stopPropagation"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/Dashboard/FileViewer.js"],"sourcesContent":["// @flow\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { UserContext } from \"../App\";\nimport { Resizable } from \"react-resizable\";\nimport processMd from \"./markdown\";\nimport axios from \"axios\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nimport \"../style/resizable.css\";\n\nconst updateHash = (highlight) => {\n  document.location.hash = `pdf-highlight-${highlight.id}`;\n};\n\nfunction FileViewer() {\n  const { state, dispatch } = useContext(UserContext);\n  const [highlights, setHighlights] = useState([]);\n  const [dimensions, setDimensions] = useState({ height: 720, width: 250 });\n  const [selectPdf, setSelectPdf] = useState(false);\n  const [show, setShow] = useState(false);\n  const [index, setIndex] = useState();\n  const [currentHighlightIndex, setCurrentHighlightIndex] = useState(0);\n  const [filter, setFilter] = useState(\"\");\n\n  useEffect(() => {\n    let highlightUpdated = false;\n    const filteredHighlights = state.fileHighlights.reduce((acc, item) => {\n      if (item.name === state.currentFile.name) {\n        const validHighlights = item.highlights.filter(highlight => \n          highlight.comment.text !== \"OTHER\" &&\n          (!filter || highlight.comment.text.toUpperCase().includes(filter))\n        );\n        acc.push(...validHighlights);\n        highlightUpdated = true;\n      }\n      return acc;\n    }, []);\n\n    setHighlights(filteredHighlights);\n    if (!highlightUpdated || filteredHighlights.length === 0) {\n      setHighlights([]);\n    }\n    setCurrentHighlightIndex(0);\n\n    if (filteredHighlights.length > 0) {\n      updateHash(filteredHighlights[0]);\n    }\n  }, [state.currentFile, state.fileHighlights, filter]);\n\n  const handlePreviousHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      alert(`No highlights available for '${filter}'`);\n      return;\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const prevIndex = (currentFilteredIndex - 1 + filteredHighlights.length) % filteredHighlights.length;\n    const prevHighlight = filteredHighlights[prevIndex];\n    setCurrentHighlightIndex(highlights.indexOf(prevHighlight));\n    updateHash(prevHighlight);\n  };\n      \n  const handleNextHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      alert(`No highlights available for '${filter}'`);\n      return;\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const nextIndex = (currentFilteredIndex + 1) % filteredHighlights.length;\n  \n    if (nextIndex === 0 && currentFilteredIndex === filteredHighlights.length - 1) {\n      alert(`Reached end of '${filter}' highlights`);\n      return;\n    }\n  \n    const nextHighlight = filteredHighlights[nextIndex];\n    setCurrentHighlightIndex(highlights.indexOf(nextHighlight));\n    updateHash(nextHighlight);\n  };\n\n  const handleFileClick = async (index) => {\n    dispatch({ type: \"SET_CURR_FILE\", payload: state.files[index] });\n    dispatch({ type: \"SET_MODAL\", payload: false });\n    setSelectPdf(false);\n  };\n\n  const handleRemove = (index) => setShow(true);\n  const handleRemoveFile = (data) => {\n    if (state.files.length > 0) {\n      let arr = state.files;\n      arr.splice(arr.findIndex(a => a.name === data.name), 1);\n      dispatch({ type: \"ADD_FILE\", payload: arr });\n      dispatch({ type: \"SET_CURR_FILE\", payload: state.files[0] });\n    } else {\n      dispatch({ type: \"ADD_FILE\", payload: [] });\n      dispatch({ type: \"SET_FILE_HIGHLIGHTS\", payload: [] });\n      dispatch({ type: \"SET_CURR_FILE\", payload: null });\n    }\n    setShow(false);\n    axios.post(`${BASE_URL_DEV}/deletePdfAndGraphData`, { fileName: data.name }, {\n      headers: { 'x-access-token': state.auth && state.auth.authToken }\n    }).then(response => console.log(\"delete api response\", response));\n  };\n\n  const deleteHighlight = (index) => {\n    const updatedHighlights = highlights.filter((highlight, idx) => idx !== index);\n    setHighlights(updatedHighlights);\n  };\n  const hideModal = () => setSelectPdf(false);\n\n  return (\n\n//     <Resizable\n//       className=\"box\"\n//       height={dimensions.height}\n//       axis=\"x\"\n//       width={dimensions.width}\n//       onResize={(e, { size }) => {\n//         setDimensions({\n//           height: size.height,\n//           width: size.width,\n//         });\n//       }}\n//       resizeHandles={[\"e\"]}\n//     >\n//       <div\n//         className=\"sidebarnew\"\n//         style={{\n//           width: dimensions.width + 'px' || \"25%\",\n//           // minWidth: \"20%\",\n//           height: dimensions.height + 'px' || \"calc(100vh - 70px)\",\n//           overflowY: \"scroll\",\n//         }}\n//       >\n//         <div className=\"description\" style={{ padding: \"1rem\" }}>\n//           <h2 style={{ marginBottom: \"1rem\" }}>Highlights</h2>\n//           <p>\n//             <small>\n//               To create area highlight hold ⌥ Option key (Alt), then click and\n//               drag.\n//             </small>\n//           </p>\n//         </div>\n\n//         {/* <ul className=\"sidebar__highlights\">\n//           <li\n//             className=\"sidebar__highlight h4 bg-secondary\"\n//             onClick={() => setSelectPdf(true)}\n//           >\n//             Select Another File\n//           </li>\n//           {highlights.length > 0 ? (\n//             highlights.map((highlight, index) => (\n//               <li\n//                 key={index}\n//                 className=\"sidebar__highlight\"\n//                 onClick={() => {\n//                   updateHash(highlight);\n//                 }}\n//               >\n//                 <div>\n//                   <div style={{ padding: \"0px\" }}>\n//                     <button\n//                       style={{ float: \"right\" }}\n//                       onClick={() => deleteHighlight(index)}\n//                       className=\"sidebar__btn\"\n//                     >\n//                       <i className=\"fa fa-close\"></i>\n//                     </button>\n//                     </div>\n//                     <div>\n//                     <button\n//                       style={{ marginLeft: \"114px\" }}\n//                       onClick={(e) => {\n//                         e.stopPropagation();\n//                         handleSendToEditor(highlight);\n//                       }}\n//                       className=\"sidebar__btn_send\"\n//                     >\n//                       <FontAwesomeIcon icon={faPlus} />\n//                     </button>\n\n//                   </div>\n//                   <strong>{processMd(highlight.comment.text)}</strong>\n//                   {highlight.content.text ? (\n//                     <blockquote style={{ marginTop: \"0.5rem\" }}>\n//                       {`${highlight.content.text.slice(0, 90).trim()}…`}\n//                     </blockquote>\n//                   ) : null}\n//                   {highlight.content.image ? (\n//                     <div\n//                       className=\"highlight__image\"\n//                       style={{ marginTop: \"0.5rem\" }}\n//                     >\n//                       <img src={highlight.content.image} alt={\"Screenshot\"} />\n//                     </div>\n//                   ) : null}\n//                 </div>\n//                 <div className=\"highlight__location\">\n//                   Page {highlight.position.pageNumber}\n//                 </div>\n//               </li>\n//             ))\n//           ) : (\n//             <li className=\"sidebar__highlight\">\n//               <div className=\"p-2\">\n//                 <p style={{ margin: 0 }}>\n//                   No Highlights Available for Selected Pdf!\n//                 </p>\n//               </div>\n//             </li>\n//           )}\n//         </ul> */}\n\n// {/*  end of old list style for highlights sidebar */}\n\n\n// {/* new filter buttons */}\n\n// {/* <div className=\"filter-buttons\">\n//   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"ISSUE\")}>Issue</button>\n//   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"LEGAL_TEST\")}>Legal Test</button>\n//   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"CONCLUSION\")}>Conclusion</button>\n//   <button className=\"btn btn-secondary\" onClick={() => setFilter(\"\")}>Clear Filter</button>\n// </div> */}\n// <UncontrolledDropdown>\n//   <DropdownToggle caret color=\"secondary\">\n//     Filter Highlights\n//   </DropdownToggle>\n//   <DropdownMenu>\n//     <DropdownItem header>Jump to</DropdownItem>\n//     <DropdownItem onClick={() => setFilter(\"ISSUE\")}>Issue</DropdownItem>\n//     <DropdownItem onClick={() => setFilter(\"LEGAL_TEST\")}>Legal Test</DropdownItem>\n//     <DropdownItem onClick={() => setFilter(\"CONCLUSION\")}>Conclusion</DropdownItem>\n//     <DropdownItem divider />\n//   </DropdownMenu>\n// </UncontrolledDropdown>\n\n// {/* end of filter buttons */}\n\n// {/* begining of new slider card for highlights */}\n// <div className=\"sidebar__highlights\">\n//   {highlights.length > 0 ? (\n//     <div className=\"highlight-card\" key={currentHighlightIndex} onClick={() => updateHash(highlights[currentHighlightIndex])}>\n//       <div className=\"card-body\">\n//         <strong>{processMd(highlights[currentHighlightIndex].comment.text)}</strong>\n//         {highlights[currentHighlightIndex].content.text && (\n//           <blockquote>\n//             {`${highlights[currentHighlightIndex].content.text.slice(0, 90).trim()}…`}\n//           </blockquote>\n//         )}\n//         {highlights[currentHighlightIndex].content.image && (\n//           <div className=\"highlight__image\" style={{ marginTop: \"0.5rem\" }}>\n//             <img src={highlights[currentHighlightIndex].content.image} alt=\"Screenshot\" />\n//           </div>\n//         )}\n        \n//       </div>\n//     </div>\n//   ) : (\n//     <div className=\"no-highlights\">\n//       No Highlights Available for Selected Pdf!\n//     </div>\n//   )}\n// </div>\n\n//         <div className=\"highlight-actions\">\n//             <button className=\"btn btn-secondary\" onClick={(e) => {\n//               e.stopPropagation();\n//               handlePreviousHighlight();\n//             }}>Previous</button>\n//             <button className=\"btn btn-primary\" onClick={(e) => {\n//               e.stopPropagation();\n//               handleNextHighlight();\n//             }}>Next</button>\n//           </div>\n\n// {/* end of new slider highlight card */}\n\n\n//         {highlights.length > 0 ? (\n//           <div style={{ padding: \"1rem\" }}>\n//            {/* <button variant=\"primary\" onClick={resetHighlights}> Reset highlights</button> */}\n\n            \n//           </div>\n//         ) : null}\n//         <Modal\n//           style={{ color: \"#050505\" }}\n//           show={selectPdf || state.isModalOpen}\n//           onHide={() => hideModal()}\n//           backdrop=\"static\"\n//           size=\"xl\"\n//           centered={true}\n//         >\n//           <Modal.Header closeButton>\n//             <Modal.Title id=\"example-modal-sizes-title-sm\">\n//               Select File\n//             </Modal.Title>\n//           </Modal.Header>\n//           <Modal.Body>\n\n//             <div className=\"card\">\n//               <div className=\"card-body\" style={{ padding: '1.75rem 1.2rem' }}>\n//                 <div className=\"table-responsive\">\n\n//                   <table className=\"table table-hover\">\n//                     <thead>\n//                       <tr>\n//                         <th>PDF NAME</th>\n//                         <th>CITATION</th>\n//                         <th>PROVISION</th>\n//                         <th>ACTION</th>\n//                       </tr>\n//                     </thead>\n\n//                     <tbody>\n//                       {state.files && state.files.length > 0 ? (\n//                         state.files.map((pdf, index) => (\n//                           state.currentFile && state.currentFile.name === pdf.name ? (\n//                             <tr style={{ backgroundColor: \"rgba(0, 0, 0, 0.075)\", color: \"#212529\" }}>\n//                               <td>{pdf.name}</td>\n\n//                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n//                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n\n//                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleFileClick(index)} className=\"btn btn-info btn-sm\">View File</button></td>\n//                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleRemove(pdf)} className=\"btn btn-danger btn-sm\">Delete File</button></td>\n//                             </tr>\n//                           ) : (\n//                             <tr>\n//                               <td>{pdf.name}</td>\n//                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n//                               <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n//                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleFileClick(index)} className=\"btn btn-info btn-sm\">View File</button></td>\n//                               <td className=\"text-danger\"><button type=\"button\" onClick={() => handleRemove(pdf)} className=\"btn btn-danger btn-sm\">Delete File</button></td>\n//                             </tr>\n//                           )\n\n//                         ))) : (\n//                         <tr>\n//                           <td colSpan=\"4\" align=\"center\"><p style={{ margin: \"5px\" }}>No Pdfs uploaded!</p></td>\n//                         </tr>\n//                       )}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               </div>\n//             </div>\n//             {console.log(state)}\n//             {/* // <div\n//                 //   key={index}\n//                 //   className=\"btn btn-secondary w-100 rounded-0 py-3 my-1\"\n//                 //   onClick={() => handleFileClick(index)}\n//                 // >\n//                 //   {state.currentFile.name === pdf.name ? (\n//                 //     <strong>\n//                 //       <p style={{ margin: 0 }}>{pdf.name}</p>\n//                 //     </strong>\n//                 //   ) : (\n//                 //     <p style={{ margin: 0 }}>{pdf.name}</p>\n//                 //   )}\n//                 // </div>\n//                */}\n\n//           </Modal.Body>\n//         </Modal>\n//         <Modal\n//           style={{ color: \"#050505\" }}\n//           show={show}\n//           onHide={() => handleClose()}\n//           centered={true}>\n//           <Modal.Header closeButton>\n//             <Modal.Title>Deleting File</Modal.Title>\n//           </Modal.Header>\n//           <Modal.Body>Are you sure you want to delete ?</Modal.Body>\n//           <Modal.Footer>\n//             <Button variant=\"secondary\" onClick={handleClose}>\n//               Close\n//             </Button>\n//             <Button variant=\"danger\" onClick={() => handleRemoveFile(index)}>\n//               Delete\n//             </Button>\n//           </Modal.Footer>\n//         </Modal>\n//       </div>\n//     </Resizable>\n//   );\n\n\n\n\n<Resizable className=\"box\" height={dimensions.height} width={dimensions.width} onResize={(e, { size }) => setDimensions({ height: size.height, width: size.width })} resizeHandles={[\"e\"]}>\n<div className=\"sidebarnew\" style={{\n    width: dimensions.width + 'px',\n    height: dimensions.height + 'px',\n    overflowY: \"scroll\",\n  }}>\n  {/* Descriptive and control elements */}\n  <div className=\"description\" style={{ padding: \"1rem\" }}>\n    <h2>Highlights</h2>\n    {/* Filtering dropdown */}\n    <UncontrolledDropdown>\n      <DropdownToggle caret color=\"secondary\">\n        Filter Highlights\n      </DropdownToggle>\n      <DropdownMenu>\n        <DropdownItem header>Jump to</DropdownItem>\n        <DropdownItem onClick={() => setFilter(\"AXIOM\")}>Axiom</DropdownItem>\n        <DropdownItem onClick={() => setFilter(\"ISSUE\")}>Issue</DropdownItem>\n        <DropdownItem onClick={() => setFilter(\"LEGAL_TEST\")}>Legal Test</DropdownItem>\n        <DropdownItem onClick={() => setFilter(\"CONCLUSION\")}>Conclusion</DropdownItem>\n        <DropdownItem divider />\n      </DropdownMenu>\n    </UncontrolledDropdown>\n  </div>\n  \n  {/* Highlight cards */}\n  <div className=\"sidebar__highlights\">\n    {highlights.length > 0 ? (\n      <div className=\"highlight-card\" key={currentHighlightIndex} onClick={() => updateHash(highlights[currentHighlightIndex])}>\n        <div className=\"card-body\">\n          <strong>{processMd(highlights[currentHighlightIndex].comment.text)}</strong>\n          {highlights[currentHighlightIndex].content.text && (\n            <blockquote>{`${highlights[currentHighlightIndex].content.text.slice(0, 90).trim()}…`}</blockquote>\n          )}\n          {highlights[currentHighlightIndex].content.image && (\n            <div className=\"highlight__image\" style={{ marginTop: \"0.5rem\" }}>\n              <img src={highlights[currentHighlightIndex].content.image} alt=\"Screenshot\" />\n            </div>\n          )}\n        </div>\n      </div>\n    ) : (\n      <div className=\"no-highlights\">No Highlights Available for Selected Pdf!</div>\n    )}\n  </div>\n\n  {/* Navigation buttons */}\n  <div className=\"highlight-actions\">\n    <button className=\"btn btn-secondary\" onClick={(e) => {\n      e.stopPropagation();\n      handlePreviousHighlight();\n    }}>Previous</button>\n    <button className=\"btn btn-primary\" onClick={(e) => {\n      e.stopPropagation();\n      handleNextHighlight();\n    }}>Next</button>\n  </div>\n</div>\n</Resizable>\n);\n}\n\nexport default FileViewer;\n"],"mappings":"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AY,CAAC,KAAK,CAAC;EAE3C;IAAA;IAEF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IAGA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IAGA;IACA;IACA;IAGA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;I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","ignoreList":[]},"metadata":{},"sourceType":"module"}