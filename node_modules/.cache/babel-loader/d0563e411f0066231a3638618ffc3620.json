{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from \"react\";\nimport \"../style/MouseSelection.css\";\n\nclass MouseSelection extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      locked: false,\n      start: null,\n      end: null\n    });\n\n    _defineProperty(this, \"root\", void 0);\n\n    _defineProperty(this, \"reset\", () => {\n      const {\n        onDragEnd\n      } = this.props;\n      onDragEnd();\n      this.setState({\n        start: null,\n        end: null,\n        locked: false\n      });\n    });\n  }\n\n  getBoundingRect(start, end) {\n    return {\n      left: Math.min(end.x, start.x),\n      top: Math.min(end.y, start.y),\n      width: Math.abs(end.x - start.x),\n      height: Math.abs(end.y - start.y)\n    };\n  }\n\n  componentDidUpdate() {\n    const {\n      onChange\n    } = this.props;\n    const {\n      start,\n      end\n    } = this.state;\n    const isVisible = Boolean(start && end);\n    onChange(isVisible);\n  }\n\n  componentDidMount() {\n    if (!this.root) {\n      return;\n    }\n\n    const that = this;\n    const {\n      onSelection,\n      onDragStart,\n      onDragEnd,\n      shouldStart\n    } = this.props;\n    const container = this.root.parentElement;\n\n    if (!(container instanceof HTMLElement)) {\n      return;\n    }\n\n    let containerBoundingRect = null;\n\n    const containerCoords = (pageX, pageY) => {\n      if (!containerBoundingRect) {\n        containerBoundingRect = container.getBoundingClientRect();\n      }\n\n      return {\n        x: pageX - containerBoundingRect.left + container.scrollLeft,\n        y: pageY - containerBoundingRect.top + container.scrollTop\n      };\n    };\n\n    container.addEventListener(\"mousemove\", event => {\n      const {\n        start,\n        locked\n      } = this.state;\n\n      if (!start || locked) {\n        return;\n      }\n\n      that.setState({ ...this.state,\n        end: containerCoords(event.pageX, event.pageY)\n      });\n    });\n    container.addEventListener(\"mousedown\", event => {\n      if (!shouldStart(event)) {\n        this.reset();\n        return;\n      }\n\n      const startTarget = event.target;\n\n      if (!(startTarget instanceof HTMLElement)) {\n        return;\n      }\n\n      onDragStart();\n      this.setState({\n        start: containerCoords(event.pageX, event.pageY),\n        end: null,\n        locked: false\n      });\n\n      const onMouseUp = event => {\n        // emulate listen once\n        event.currentTarget.removeEventListener(\"mouseup\", onMouseUp);\n        const {\n          start\n        } = this.state;\n\n        if (!start) {\n          return;\n        }\n\n        const end = containerCoords(event.pageX, event.pageY);\n        const boundingRect = that.getBoundingRect(start, end);\n\n        if (!(event.target instanceof HTMLElement) || !container.contains(event.target) || !that.shouldRender(boundingRect)) {\n          that.reset();\n          return;\n        }\n\n        that.setState({\n          end,\n          locked: true\n        }, () => {\n          const {\n            start,\n            end\n          } = that.state;\n\n          if (!start || !end) {\n            return;\n          }\n\n          if (event.target instanceof HTMLElement) {\n            onSelection(startTarget, boundingRect, that.reset);\n            onDragEnd();\n          }\n        });\n      };\n\n      if (document.body) {\n        document.body.addEventListener(\"mouseup\", onMouseUp);\n      }\n    });\n  }\n\n  shouldRender(boundingRect) {\n    return boundingRect.width >= 1 && boundingRect.height >= 1;\n  }\n\n  render() {\n    const {\n      start,\n      end\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"MouseSelection-container\",\n      ref: node => this.root = node\n    }, start && end ? React.createElement(\"div\", {\n      className: \"MouseSelection\",\n      style: this.getBoundingRect(start, end)\n    }) : null);\n  }\n\n}\n\nexport default MouseSelection;","map":{"version":3,"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/node_modules/react-pdf-highlighter/build/components/MouseSelection.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","React","Component","MouseSelection","constructor","args","locked","start","end","onDragEnd","props","setState","getBoundingRect","left","Math","min","x","top","y","width","abs","height","componentDidUpdate","onChange","state","isVisible","Boolean","componentDidMount","root","that","onSelection","onDragStart","shouldStart","container","parentElement","HTMLElement","containerBoundingRect","containerCoords","pageX","pageY","getBoundingClientRect","scrollLeft","scrollTop","addEventListener","event","reset","startTarget","target","onMouseUp","currentTarget","removeEventListener","boundingRect","contains","shouldRender","document","body","render","createElement","className","ref","node","style"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport \"../style/MouseSelection.css\";\n\nclass MouseSelection extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      locked: false,\n      start: null,\n      end: null\n    });\n\n    _defineProperty(this, \"root\", void 0);\n\n    _defineProperty(this, \"reset\", () => {\n      const {\n        onDragEnd\n      } = this.props;\n      onDragEnd();\n      this.setState({\n        start: null,\n        end: null,\n        locked: false\n      });\n    });\n  }\n\n  getBoundingRect(start, end) {\n    return {\n      left: Math.min(end.x, start.x),\n      top: Math.min(end.y, start.y),\n      width: Math.abs(end.x - start.x),\n      height: Math.abs(end.y - start.y)\n    };\n  }\n\n  componentDidUpdate() {\n    const {\n      onChange\n    } = this.props;\n    const {\n      start,\n      end\n    } = this.state;\n    const isVisible = Boolean(start && end);\n    onChange(isVisible);\n  }\n\n  componentDidMount() {\n    if (!this.root) {\n      return;\n    }\n\n    const that = this;\n    const {\n      onSelection,\n      onDragStart,\n      onDragEnd,\n      shouldStart\n    } = this.props;\n    const container = this.root.parentElement;\n\n    if (!(container instanceof HTMLElement)) {\n      return;\n    }\n\n    let containerBoundingRect = null;\n\n    const containerCoords = (pageX, pageY) => {\n      if (!containerBoundingRect) {\n        containerBoundingRect = container.getBoundingClientRect();\n      }\n\n      return {\n        x: pageX - containerBoundingRect.left + container.scrollLeft,\n        y: pageY - containerBoundingRect.top + container.scrollTop\n      };\n    };\n\n    container.addEventListener(\"mousemove\", event => {\n      const {\n        start,\n        locked\n      } = this.state;\n\n      if (!start || locked) {\n        return;\n      }\n\n      that.setState({ ...this.state,\n        end: containerCoords(event.pageX, event.pageY)\n      });\n    });\n    container.addEventListener(\"mousedown\", event => {\n      if (!shouldStart(event)) {\n        this.reset();\n        return;\n      }\n\n      const startTarget = event.target;\n\n      if (!(startTarget instanceof HTMLElement)) {\n        return;\n      }\n\n      onDragStart();\n      this.setState({\n        start: containerCoords(event.pageX, event.pageY),\n        end: null,\n        locked: false\n      });\n\n      const onMouseUp = event => {\n        // emulate listen once\n        event.currentTarget.removeEventListener(\"mouseup\", onMouseUp);\n        const {\n          start\n        } = this.state;\n\n        if (!start) {\n          return;\n        }\n\n        const end = containerCoords(event.pageX, event.pageY);\n        const boundingRect = that.getBoundingRect(start, end);\n\n        if (!(event.target instanceof HTMLElement) || !container.contains(event.target) || !that.shouldRender(boundingRect)) {\n          that.reset();\n          return;\n        }\n\n        that.setState({\n          end,\n          locked: true\n        }, () => {\n          const {\n            start,\n            end\n          } = that.state;\n\n          if (!start || !end) {\n            return;\n          }\n\n          if (event.target instanceof HTMLElement) {\n            onSelection(startTarget, boundingRect, that.reset);\n            onDragEnd();\n          }\n        });\n      };\n\n      if (document.body) {\n        document.body.addEventListener(\"mouseup\", onMouseUp);\n      }\n    });\n  }\n\n  shouldRender(boundingRect) {\n    return boundingRect.width >= 1 && boundingRect.height >= 1;\n  }\n\n  render() {\n    const {\n      start,\n      end\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"MouseSelection-container\",\n      ref: node => this.root = node\n    }, start && end ? React.createElement(\"div\", {\n      className: \"MouseSelection\",\n      style: this.getBoundingRect(start, end)\n    }) : null);\n  }\n\n}\n\nexport default MouseSelection;"]},"metadata":{},"sourceType":"module"}