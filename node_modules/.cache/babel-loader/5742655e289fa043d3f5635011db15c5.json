{"ast":null,"code":"/* eslint-disable */\nimport { createElement, L10n, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CommentCharacterElementBox } from '../../implementation/viewer/page';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Toolbar, Tab } from '@syncfusion/ej2-navigations';\nimport { DialogUtility } from '@syncfusion/ej2-popups';\nimport { Dictionary, beforeCommentActionEvent, commentEndEvent, commentBeginEvent, commentDeleteEvent } from '../../base/index';\nimport { HelperMethods } from '../editor/editor-helper';\nimport { Mention } from '@syncfusion/ej2-dropdowns';\n/**\n * @private\n */\nvar CommentReviewPane = /** @class */function () {\n  function CommentReviewPane(owner) {\n    var _this = this;\n    this.isNewComment = false;\n    this.isUserClosed = false;\n    /**\n     * @private\n     */\n    this.selectedTab = 0;\n    /**\n     * @param {SelectEventArgs} arg - Specify the selection event args.\n     * @returns {void}\n     */\n    this.onTabSelection = function (arg) {\n      arg.preventFocus = true;\n      _this.selectedTab = arg.selectedIndex;\n      if (_this.selectedTab === 1) {\n        _this.owner.trackChangesPane.updateHeight();\n      } else {\n        _this.commentPane.updateHeight();\n      }\n      setTimeout(function () {\n        if (_this.owner) {\n          _this.owner.resize();\n        }\n      }, 10);\n    };\n    this.owner = owner;\n    var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n    localObj.setLocale(this.owner.locale);\n    this.initReviewPane(localObj);\n    this.parentPaneElement.style.display = 'none';\n  }\n  Object.defineProperty(CommentReviewPane.prototype, \"previousSelectedComment\", {\n    get: function () {\n      return this.previousSelectedCommentInt;\n    },\n    set: function (value) {\n      if (!isNullOrUndefined(value) && value !== this.previousSelectedCommentInt) {\n        if (this.commentPane.comments.containsKey(value)) {\n          var commentStart = this.commentPane.getCommentStart(value);\n          var commentMark = commentStart.commentMark;\n          if (commentMark) {\n            classList(commentMark, [], ['e-de-cmt-mark-selected']);\n            this.commentPane.removeSelectionMark('e-de-cmt-selection');\n            this.commentPane.removeSelectionMark('e-de-cmt-mark-selected');\n          }\n          var commentView = this.commentPane.comments.get(value);\n          commentView.hideDrawer();\n          for (var i = 0; i < value.replyComments.length; i++) {\n            commentView = this.commentPane.comments.get(value.replyComments[i]);\n            if (commentView) {\n              commentView.hideDrawer();\n              commentView.hideMenuItems();\n            }\n          }\n        }\n      }\n      this.previousSelectedCommentInt = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  CommentReviewPane.prototype.selectReviewTab = function (tab) {\n    if (tab === 'Changes') {\n      this.reviewTab.select(1);\n    } else {\n      this.reviewTab.select(0);\n    }\n  };\n  CommentReviewPane.prototype.showHidePane = function (show, tab) {\n    if (this.parentPaneElement) {\n      this.updateTabHeaderWidth();\n      if (show) {\n        this.parentPaneElement.style.display = 'block';\n        if (tab === 'Changes' && this.owner.showRevisions) {\n          this.isCommentTabVisible = false;\n          this.owner.notify('reviewPane', {\n            comment: this.isCommentTabVisible,\n            changes: true\n          });\n          this.reviewTab.select(1);\n        } else {\n          this.owner.trackChangesPane.isChangesTabVisible = false;\n          this.owner.notify('reviewPane', {\n            comment: true,\n            changes: this.owner.trackChangesPane.isChangesTabVisible,\n            isUserClosed: false\n          });\n          this.reviewTab.select(0);\n        }\n        this.owner.trackChangesPane.updateTrackChanges(this.owner.showRevisions);\n        this.commentPane.updateCommentStatus();\n      } else {\n        this.parentPaneElement.style.display = 'none';\n      }\n      if (!this.owner.showRevisions) {\n        this.owner.trackChangesPane.isChangesTabVisible = false;\n        this.owner.notify('reviewPane', {\n          comment: this.isCommentTabVisible,\n          changes: this.owner.trackChangesPane.isChangesTabVisible\n        });\n        this.reviewTab.hideTab(1, true);\n      }\n      if (!this.owner.showComments) {\n        this.isCommentTabVisible = false;\n        this.owner.notify('reviewPane', {\n          comment: this.isCommentTabVisible,\n          changes: this.owner.trackChangesPane.isChangesTabVisible\n        });\n        this.reviewTab.hideTab(0, true);\n      }\n    }\n    if (show) {\n      this.enableDisableItems();\n      this.commentPane.updateHeight();\n    }\n    if (this.owner) {\n      this.owner.resize();\n      if (this.owner.enableAutoFocus) {\n        this.owner.documentHelper.updateFocus();\n      }\n    }\n  };\n  CommentReviewPane.prototype.reviewPaneHelper = function (args) {\n    var _this = this;\n    if (!isNullOrUndefined(args.isUserClosed)) {\n      if (args.isUserClosed !== this.isUserClosed) {\n        this.isUserClosed = args.isUserClosed;\n        if (this.owner) {\n          setTimeout(function () {\n            if (_this.owner) {\n              _this.owner.resize();\n            }\n          }, 10);\n        }\n      } else {\n        return;\n      }\n    } else {\n      if (this.isUserClosed) {\n        return;\n      }\n    }\n    if (!isNullOrUndefined(args.comment) || !isNullOrUndefined(args.changes)) {\n      if (args.comment || args.changes) {\n        if (this.parentPaneElement.style.display === 'none') {\n          this.parentPaneElement.style.display = 'block';\n        }\n        if (this.owner) {\n          setTimeout(function () {\n            if (_this.owner) {\n              _this.owner.resize();\n            }\n          }, 10);\n        }\n      } else {\n        this.parentPaneElement.style.display = 'none';\n        if (this.owner) {\n          setTimeout(function () {\n            if (_this.owner) {\n              _this.owner.resize();\n            }\n          }, 10);\n        }\n      }\n    }\n  };\n  CommentReviewPane.prototype.updateTabHeaderWidth = function () {\n    var reviewTabsEle = this.reviewTab.getRootElement().getElementsByClassName('e-tab-wrap');\n    reviewTabsEle[0].style.padding = '0 8px';\n    reviewTabsEle[1].style.padding = '0 8px';\n  };\n  CommentReviewPane.prototype.initReviewPane = function (localValue) {\n    var reviewContainer = this.owner.documentHelper.optionsPaneContainer;\n    reviewContainer.style.display = 'flex';\n    this.initPaneHeader(localValue);\n    reviewContainer.appendChild(this.addReviewTab(localValue));\n    this.initCommentPane();\n    this.owner.on('reviewPane', this.reviewPaneHelper, this);\n  };\n  CommentReviewPane.prototype.addReviewTab = function (localValue) {\n    var commentHeader = createElement('div', {\n      innerHTML: localValue.getConstant('Comments')\n    });\n    var changesHeader = createElement('div', {\n      innerHTML: localValue.getConstant('Changes')\n    });\n    this.parentPaneElement = createElement('div', {\n      styles: 'height:100%;overflow:auto;display:none',\n      className: 'e-de-review-pane'\n    });\n    this.element = createElement('div', {\n      className: 'e-de-property-tab',\n      id: this.owner.element.id + 'Review_Tab'\n    });\n    var items = [{\n      header: {\n        text: commentHeader\n      },\n      content: this.reviewPane\n    }, {\n      header: {\n        text: changesHeader\n      }\n    }];\n    this.reviewTab = new Tab({\n      items: items,\n      selected: this.onTabSelection,\n      animation: {\n        previous: {\n          effect: 'None'\n        },\n        next: {\n          effect: 'None'\n        }\n      }\n    });\n    this.reviewTab.appendTo(this.element);\n    if (this.owner.enableRtl) {\n      this.reviewTab.enableRtl = true;\n    }\n    this.reviewTab.enablePersistence = true;\n    this.parentPaneElement.appendChild(this.element);\n    return this.parentPaneElement;\n  };\n  CommentReviewPane.prototype.initPaneHeader = function (localValue) {\n    this.headerContainer = createElement('div');\n    this.reviewPane = createElement('div', {\n      className: 'e-de-cmt-pane'\n    });\n    if (this.owner.enableRtl) {\n      classList(this.reviewPane, ['e-rtl'], []);\n    }\n    this.headerContainer.appendChild(this.initToolbar(localValue));\n    this.reviewPane.appendChild(this.headerContainer);\n    this.reviewPane.style.display = 'block';\n    return this.reviewPane;\n  };\n  CommentReviewPane.prototype.closePane = function () {\n    if (this.commentPane && this.commentPane.isEditMode) {\n      if (!isNullOrUndefined(this.commentPane.currentEditingComment) && this.commentPane.isInsertingReply && this.commentPane.currentEditingComment.replyViewTextBox.innerText === '') {\n        this.owner.documentHelper.currentSelectedComment = undefined;\n        this.commentPane.currentEditingComment.cancelReply();\n        this.owner.showComments = false;\n      } else if (this.isNewComment || !isNullOrUndefined(this.commentPane.currentEditingComment) && this.commentPane.isInsertingReply && this.commentPane.currentEditingComment.replyViewTextBox.innerText !== '' || !isNullOrUndefined(this.commentPane.currentEditingComment) && !this.commentPane.isInsertingReply && this.commentPane.currentEditingComment.textArea.innerText !== this.commentPane.currentEditingComment.comment.text) {\n        var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n        localObj.setLocale(this.owner.locale);\n        this.confirmDialog = DialogUtility.confirm({\n          title: localObj.getConstant('Un-posted comments'),\n          content: localObj.getConstant('Discard Comment'),\n          okButton: {\n            text: localObj.getConstant('Discard'),\n            click: this.discardButtonClick.bind(this)\n          },\n          cancelButton: {\n            text: localObj.getConstant('Cancel'),\n            click: this.closeDialogUtils.bind(this)\n          },\n          showCloseIcon: true,\n          closeOnEscape: true,\n          animationSettings: {\n            effect: 'Zoom'\n          },\n          position: {\n            X: 'center',\n            Y: 'center'\n          }\n        });\n      } else {\n        this.owner.documentHelper.currentSelectedComment = undefined;\n        this.commentPane.currentEditingComment.cancelEditing();\n        this.owner.showComments = false;\n      }\n    } else {\n      this.owner.showComments = false;\n      //this.owner.showRevisions = false;\n      this.owner.documentHelper.currentSelectedComment = undefined;\n      this.owner.documentHelper.currentSelectedRevision = undefined;\n      this.owner.notify('reviewPane', {\n        changes: false,\n        comment: false,\n        isUserClosed: true\n      });\n    }\n  };\n  CommentReviewPane.prototype.discardButtonClick = function () {\n    if (this.commentPane.currentEditingComment) {\n      var isNewComment = this.isNewComment;\n      if (this.commentPane.currentEditingComment && this.commentPane.isInsertingReply) {\n        this.commentPane.currentEditingComment.cancelReply();\n      } else {\n        this.commentPane.currentEditingComment.cancelEditing();\n      }\n      this.owner.documentHelper.currentSelectedComment = undefined;\n      this.closeDialogUtils();\n      this.owner.showComments = false;\n    }\n  };\n  CommentReviewPane.prototype.closeDialogUtils = function () {\n    this.confirmDialog.close();\n    this.confirmDialog = undefined;\n  };\n  CommentReviewPane.prototype.initToolbar = function (localValue) {\n    this.toolbarElement = createElement('div');\n    this.toolbar = new Toolbar({\n      items: [{\n        prefixIcon: 'e-de-new-cmt e-de-cmt-tbr',\n        tooltipText: localValue.getConstant('New Comment'),\n        text: localValue.getConstant('New Comment'),\n        click: this.insertComment.bind(this)\n      }, {\n        prefixIcon: 'e-de-nav-left-arrow e-de-cmt-tbr',\n        align: 'Right',\n        tooltipText: localValue.getConstant('Previous Comment'),\n        click: this.navigatePreviousComment.bind(this)\n      }, {\n        prefixIcon: 'e-de-nav-right-arrow e-de-cmt-tbr',\n        align: 'Right',\n        tooltipText: localValue.getConstant('Next Comment'),\n        click: this.navigateNextComment.bind(this)\n      }],\n      enableRtl: this.owner.enableRtl\n    });\n    this.toolbar.appendTo(this.toolbarElement);\n    return this.toolbarElement;\n  };\n  CommentReviewPane.prototype.insertComment = function () {\n    if (this.owner && this.owner.editorModule) {\n      this.owner.editorModule.isUserInsert = true;\n      this.owner.editorModule.insertComment('');\n      this.owner.editorModule.isUserInsert = false;\n    }\n  };\n  CommentReviewPane.prototype.addComment = function (comment, isNewComment, selectComment) {\n    this.isNewComment = isNewComment;\n    this.selectReviewTab('Comments');\n    this.owner.documentHelper.currentSelectedComment = comment;\n    this.commentPane.insertComment(comment);\n    if (!isNewComment) {\n      var commentView = this.commentPane.comments.get(comment);\n      commentView.cancelEditing();\n      this.enableDisableToolbarItem();\n    }\n    if (selectComment) {\n      this.selectComment(comment);\n    }\n  };\n  CommentReviewPane.prototype.deleteComment = function (comment) {\n    if (this.commentPane) {\n      this.commentPane.deleteComment(comment);\n    }\n  };\n  CommentReviewPane.prototype.selectComment = function (comment) {\n    if (this.commentPane.isEditMode) {\n      return;\n    }\n    if (comment.isReply) {\n      comment = comment.ownerComment;\n    }\n    if (this.owner && this.owner.viewer && this.owner.documentHelper.currentSelectedComment !== comment) {\n      this.owner.documentHelper.currentSelectedComment = comment;\n    }\n    this.commentPane.selectComment(comment);\n  };\n  CommentReviewPane.prototype.resolveComment = function (comment) {\n    this.commentPane.resolveComment(comment);\n  };\n  CommentReviewPane.prototype.reopenComment = function (comment) {\n    this.commentPane.reopenComment(comment);\n  };\n  CommentReviewPane.prototype.addReply = function (comment, newComment, selectComment) {\n    this.isNewComment = newComment;\n    this.commentPane.insertReply(comment);\n    if (!newComment) {\n      var commentView = this.commentPane.comments.get(comment);\n      commentView.cancelEditing();\n      this.enableDisableToolbarItem();\n    }\n    if (selectComment) {\n      this.selectComment(comment.ownerComment);\n    }\n  };\n  CommentReviewPane.prototype.navigatePreviousComment = function () {\n    if (this.owner && this.owner.editorModule) {\n      this.owner.selectionModule.navigatePreviousComment();\n    }\n  };\n  CommentReviewPane.prototype.navigateNextComment = function () {\n    if (this.owner && this.owner.editorModule) {\n      this.owner.selectionModule.navigateNextComment();\n    }\n  };\n  CommentReviewPane.prototype.enableDisableItems = function () {\n    this.enableDisableToolbarItem();\n    var keys = this.commentPane.comments.keys;\n    for (var i = 0; i < keys.length; i++) {\n      var commentView = this.commentPane.comments.get(keys[i]);\n      if (this.owner.isReadOnly) {\n        if (!isNullOrUndefined(commentView.replyViewTextBox)) {\n          commentView.replyViewTextBox.style.display = 'none';\n        }\n        commentView.menuBar.style.display = 'none';\n        if (commentView.resolveView) {\n          commentView.resolveView.style.display = 'none';\n        }\n      } else {\n        if (!isNullOrUndefined(commentView.replyViewTextBox)) {\n          commentView.replyViewTextBox.style.display = 'block';\n        }\n        commentView.menuBar.style.display = 'block';\n        if (commentView.resolveView) {\n          commentView.resolveView.style.display = '';\n        }\n      }\n    }\n  };\n  CommentReviewPane.prototype.enableDisableToolbarItem = function () {\n    if (this.toolbar) {\n      var enable = true;\n      if (this.commentPane.isEditMode) {\n        enable = !this.commentPane.isEditMode;\n      }\n      if (this.owner.isReadOnly) {\n        enable = !this.owner.isReadOnly;\n      }\n      var elements = this.toolbar.element.querySelectorAll('.' + 'e-de-cmt-tbr');\n      this.toolbar.enableItems(elements[0].parentElement.parentElement, enable);\n      if (enable && this.owner && this.owner.viewer) {\n        enable = !(this.owner.documentHelper.comments.length === 0);\n      }\n      this.toolbar.enableItems(elements[1].parentElement.parentElement, enable);\n      this.toolbar.enableItems(elements[2].parentElement.parentElement, enable);\n    }\n  };\n  CommentReviewPane.prototype.initCommentPane = function () {\n    this.commentPane = new CommentPane(this.owner, this);\n    this.commentPane.initCommentPane();\n  };\n  CommentReviewPane.prototype.layoutComments = function () {\n    for (var i = 0; i < this.owner.documentHelper.comments.length; i++) {\n      var comment = this.owner.documentHelper.comments[i];\n      if (this.isUnreferredComment(comment)) {\n        this.owner.documentHelper.comments.splice(i, 1);\n        i--;\n        continue;\n      }\n      for (var j = 0; j < comment.replyComments.length; j++) {\n        if (this.isUnreferredComment(comment.replyComments[j])) {\n          comment.replyComments.splice(j, 1);\n          j--;\n        }\n      }\n      this.commentPane.addComment(comment);\n    }\n  };\n  CommentReviewPane.prototype.isUnreferredComment = function (comment) {\n    if (isNullOrUndefined(comment.commentStart) || isNullOrUndefined(comment.commentEnd)) {\n      return true;\n    }\n    return false;\n  };\n  CommentReviewPane.prototype.clear = function () {\n    this.previousSelectedCommentInt = undefined;\n    this.isNewComment = false;\n    this.isUserClosed = false;\n    this.isNewComment = false;\n    this.commentPane.clear();\n  };\n  CommentReviewPane.prototype.discardComment = function (comment) {\n    if (comment) {\n      if (this.owner.editorHistoryModule) {\n        if (this.owner.editorHistoryModule.undoStack.length > 0 && this.owner.editorHistoryModule.undoStack[this.owner.editorHistoryModule.undoStack.length - 1].action === 'InsertComment') {\n          this.owner.editorHistoryModule.undo();\n          this.owner.editorHistoryModule.redoStack.pop();\n        }\n        this.owner.editorModule.isSkipOperationsBuild = this.owner.enableCollaborativeEditing;\n        this.owner.editorModule.deleteCommentInternal(comment);\n        this.owner.editorModule.isSkipOperationsBuild = false;\n      } else if (this.owner.editorModule) {\n        this.owner.editorModule.deleteCommentInternal(comment);\n      }\n    }\n  };\n  CommentReviewPane.prototype.destroy = function () {\n    if (this.commentPane) {\n      this.commentPane.destroy();\n    }\n    this.commentPane = undefined;\n    if (this.toolbar) {\n      this.toolbar.destroy();\n    }\n    this.toolbar = undefined;\n    if (this.toolbarElement && this.toolbarElement.parentElement) {\n      this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n    }\n    this.toolbarElement = undefined;\n    if (this.headerContainer && this.headerContainer.parentElement) {\n      this.headerContainer.parentElement.removeChild(this.headerContainer);\n    }\n    this.headerContainer = undefined;\n    this.previousSelectedCommentInt = undefined;\n    if (this.reviewPane && this.reviewPane.parentElement) {\n      this.reviewPane.parentElement.removeChild(this.reviewPane);\n    }\n    if (!this.owner.isDestroyed) {\n      this.owner.off('reviewPane', this.reviewPaneHelper);\n    }\n    if (!isNullOrUndefined(this.reviewTab)) {\n      this.reviewTab.destroy();\n    }\n    this.reviewTab = undefined;\n    if (!isNullOrUndefined(this.confirmDialog)) {\n      this.confirmDialog.destroy();\n    }\n    this.confirmDialog = undefined;\n    if (!isNullOrUndefined(this.previousSelectedCommentInt)) {\n      this.previousSelectedCommentInt.destroy();\n    }\n    this.previousSelectedCommentInt = undefined;\n    if (this.reviewPane) {\n      this.reviewPane.innerHTML = '';\n      if (this.reviewPane.parentElement) {\n        this.reviewPane.parentElement.removeChild(this.reviewPane);\n      }\n    }\n    this.reviewPane = undefined;\n    if (this.parentPaneElement) {\n      this.parentPaneElement.innerHTML = '';\n      if (this.parentPaneElement.parentElement) {\n        this.parentPaneElement.parentElement.removeChild(this.parentPaneElement);\n      }\n    }\n    this.parentPaneElement = undefined;\n    this.owner = undefined;\n  };\n  return CommentReviewPane;\n}();\nexport { CommentReviewPane };\n/**\n * @private\n */\nvar CommentPane = /** @class */function () {\n  function CommentPane(owner, pane) {\n    this.isEditModeInternal = false;\n    this.isInsertingReply = false;\n    this.owner = owner;\n    this.parentPane = pane;\n    this.parent = pane.reviewPane;\n    this.comments = new Dictionary();\n  }\n  Object.defineProperty(CommentPane.prototype, \"isEditMode\", {\n    get: function () {\n      return this.isEditModeInternal;\n    },\n    set: function (value) {\n      this.isEditModeInternal = value;\n      var keys = this.comments.keys;\n      for (var i = 0; i < keys.length; i++) {\n        var commentView = this.comments.get(keys[i]);\n        if (value) {\n          commentView.menuBar.style.display = 'none';\n        } else if (!commentView.comment.isReply) {\n          commentView.menuBar.style.display = 'block';\n        }\n      }\n      if (this.parentPane) {\n        this.parentPane.enableDisableToolbarItem();\n      }\n      if (this.owner) {\n        if (this.isEditModeInternal) {\n          this.owner.trigger(commentBeginEvent);\n        } else {\n          this.owner.trigger(commentEndEvent);\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  CommentPane.prototype.initCommentPane = function () {\n    this.commentPane = createElement('div', {\n      className: 'e-de-cmt-container e-de-scrollbar-hide'\n    });\n    var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n    localObj.setLocale(this.owner.locale);\n    this.noCommentIndicator = createElement('div', {\n      className: 'e-de-cmt-no-cmt',\n      innerHTML: localObj.getConstant('No comments in this document')\n    });\n    this.commentPane.appendChild(this.noCommentIndicator);\n    this.parent.appendChild(this.commentPane);\n  };\n  CommentPane.prototype.addComment = function (comment) {\n    var commentView = new CommentView(this.owner, this, comment);\n    var commentParent = commentView.layoutComment(false);\n    this.comments.add(comment, commentView);\n    this.commentPane.appendChild(commentParent);\n    for (var i = 0; i < comment.replyComments.length; i++) {\n      var replyView = new CommentView(this.owner, this, comment.replyComments[i]);\n      this.comments.add(comment.replyComments[i], replyView);\n      commentParent.insertBefore(replyView.layoutComment(true), commentView.replyViewContainer);\n    }\n    this.updateCommentStatus();\n    commentView.hideDrawer();\n  };\n  CommentPane.prototype.updateHeight = function () {\n    var tabHeaderHeight = this.parentPane.reviewTab.getRootElement().getElementsByClassName('e-tab-header')[0].getBoundingClientRect().height;\n    this.commentPane.style.height = this.parentPane.parentPaneElement.clientHeight - this.parentPane.headerContainer.clientHeight - tabHeaderHeight + 'px';\n  };\n  CommentPane.prototype.insertReply = function (replyComment) {\n    var parentComment = replyComment.ownerComment;\n    var parentView = this.comments.get(parentComment);\n    var replyView = new CommentView(this.owner, this, replyComment);\n    this.comments.add(replyComment, replyView);\n    var replyElement = replyView.layoutComment(true);\n    var replyIndex = parentComment.replyComments.indexOf(replyComment);\n    if (replyIndex === parentComment.replyComments.length - 1) {\n      parentView.parentElement.insertBefore(replyElement, parentView.replyViewContainer);\n    } else {\n      var nextReply = parentComment.replyComments[replyIndex + 1];\n      parentView.parentElement.insertBefore(replyElement, this.comments.get(nextReply).parentElement);\n    }\n    replyView.editComment();\n  };\n  CommentPane.prototype.insertComment = function (comment) {\n    var commentView = new CommentView(this.owner, this, comment);\n    var commentParent = commentView.layoutComment(false);\n    this.comments.add(comment, commentView);\n    if (this.owner.documentHelper.comments.indexOf(comment) === this.owner.documentHelper.comments.length - 1) {\n      this.commentPane.appendChild(commentParent);\n    } else {\n      var index = this.owner.documentHelper.comments.indexOf(comment);\n      var element = this.comments.get(this.owner.documentHelper.comments[index + 1]).parentElement;\n      this.commentPane.insertBefore(commentParent, element);\n      commentParent.focus();\n    }\n    this.updateCommentStatus();\n    commentView.editComment();\n  };\n  CommentPane.prototype.removeSelectionMark = function (className) {\n    if (this.parent) {\n      var elements = this.parent.getElementsByClassName(className);\n      for (var i = 0; i < elements.length; i++) {\n        classList(elements[i], [], [className]);\n      }\n    }\n  };\n  CommentPane.prototype.selectComment = function (comment) {\n    this.removeSelectionMark('e-de-cmt-selection');\n    if (comment.isReply) {\n      comment = comment.ownerComment;\n    }\n    if (comment) {\n      this.owner.notify('reviewPane', {\n        comment: true,\n        changes: this.owner.trackChangesPane.isChangesTabVisible\n      });\n      var commentView = this.comments.get(comment);\n      var selectedElement = commentView.parentElement;\n      if (selectedElement) {\n        classList(selectedElement, ['e-de-cmt-selection'], []);\n        selectedElement.focus();\n      }\n      var commentStart = this.getCommentStart(comment);\n      if (!commentStart.commentMark) {\n        commentStart.renderCommentMark();\n      }\n      classList(commentStart.commentMark, ['e-de-cmt-mark-selected'], []);\n      commentView.showDrawer();\n    }\n  };\n  CommentPane.prototype.getCommentStart = function (comment) {\n    var localValue = new L10n('documenteditor', this.owner.defaultLocale);\n    localValue.setLocale(this.owner.locale);\n    var commentStart = undefined;\n    if (comment && comment.commentStart) {\n      commentStart = comment.commentStart;\n    }\n    if (commentStart.commentMark !== undefined) {\n      commentStart.commentMark.title = localValue.getConstant('Click to see this comment');\n    }\n    return this.getFirstCommentInLine(commentStart);\n  };\n  CommentPane.prototype.getFirstCommentInLine = function (commentStart) {\n    for (var i = 0; i < commentStart.line.children.length; i++) {\n      var startComment = commentStart.line.children[i];\n      if (startComment instanceof CommentCharacterElementBox && startComment.commentType === 0) {\n        return startComment;\n      }\n    }\n    return commentStart;\n  };\n  CommentPane.prototype.deleteComment = function (comment) {\n    var commentView = this.comments.get(comment);\n    if (!isNullOrUndefined(commentView)) {\n      if (!isNullOrUndefined(this.currentEditingComment) && commentView.comment.commentId == this.currentEditingComment.comment.commentId) {\n        this.isEditMode = false;\n        this.currentEditingComment = undefined;\n      }\n      if (commentView.parentElement && commentView.parentElement.parentElement) {\n        commentView.parentElement.parentElement.removeChild(commentView.parentElement);\n      }\n      //this.commentPane.removeChild();\n      for (var i = 0; i < comment.replyComments.length; i++) {\n        var replyCmt = comment.replyComments[i];\n        if (this.comments.containsKey(replyCmt)) {\n          this.comments.remove(replyCmt);\n        }\n      }\n      this.comments.remove(comment);\n      commentView.destroy();\n    }\n    this.updateCommentStatus();\n  };\n  CommentPane.prototype.resolveComment = function (comment) {\n    var commentView = this.comments.get(comment);\n    if (commentView) {\n      commentView.resolveComment();\n    }\n  };\n  CommentPane.prototype.reopenComment = function (comment) {\n    var commentView = this.comments.get(comment);\n    if (commentView) {\n      commentView.reopenComment();\n    }\n  };\n  CommentPane.prototype.updateCommentStatus = function () {\n    if (this.owner.documentHelper.comments.length === 0) {\n      if (!this.noCommentIndicator.parentElement) {\n        this.commentPane.appendChild(this.noCommentIndicator);\n      }\n      this.noCommentIndicator.style.display = 'block';\n      this.parentPane.isCommentTabVisible = false;\n      this.owner.notify('reviewPane', {\n        comment: false,\n        changes: this.owner.trackChangesPane.isChangesTabVisible\n      });\n      this.parentPane.reviewTab.hideTab(0);\n    } else if (this.owner.showComments) {\n      this.parentPane.isCommentTabVisible = true;\n      this.noCommentIndicator.style.display = 'none';\n      this.owner.notify('reviewPane', {\n        comment: true,\n        changes: this.owner.trackChangesPane.isChangesTabVisible\n      });\n      this.parentPane.reviewTab.hideTab(0, false);\n    }\n    if (this.parentPane) {\n      this.parentPane.enableDisableToolbarItem();\n    }\n  };\n  CommentPane.prototype.clear = function () {\n    this.isEditMode = false;\n    this.currentEditingComment = undefined;\n    this.isInsertingReply = false;\n    this.removeChildElements();\n    this.commentPane.innerHTML = '';\n    this.updateCommentStatus();\n  };\n  CommentPane.prototype.removeChildElements = function () {\n    var comments = this.comments.keys;\n    for (var i = 0; i < comments.length; i++) {\n      this.comments.get(comments[i]).destroy();\n    }\n    this.comments.clear();\n  };\n  CommentPane.prototype.destroy = function () {\n    this.removeChildElements();\n    if (this.noCommentIndicator && this.noCommentIndicator) {\n      this.noCommentIndicator.parentElement.removeChild(this.noCommentIndicator);\n    }\n    this.noCommentIndicator = undefined;\n    if (this.commentPane) {\n      this.commentPane.innerHTML = '';\n      if (this.commentPane.parentElement) {\n        this.commentPane.parentElement.removeChild(this.commentPane);\n      }\n    }\n    this.commentPane = undefined;\n    if (this.parent) {\n      this.parent.innerHTML = '';\n      if (this.parent.parentElement) {\n        this.parent.parentElement.removeChild(this.parent);\n      }\n    }\n    this.parent = undefined;\n    this.parentPane = undefined;\n    this.currentEditingComment = undefined;\n    this.owner = undefined;\n  };\n  return CommentPane;\n}();\nexport { CommentPane };\n/**\n * @private\n */\nvar CommentView = /** @class */function () {\n  function CommentView(owner, commentPane, comment) {\n    this.isReply = false;\n    this.isDrawerExpand = false;\n    this.itemData = [];\n    this.owner = owner;\n    this.comment = comment;\n    this.commentPane = commentPane;\n  }\n  CommentView.prototype.layoutComment = function (isReply) {\n    this.isReply = isReply;\n    var classList = 'e-de-cmt-sub-container';\n    if (isReply) {\n      classList += ' e-de-cmt-reply';\n    }\n    var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n    localObj.setLocale(this.owner.locale);\n    this.parentElement = createElement('div', {\n      className: classList\n    });\n    this.initCommentHeader(localObj);\n    this.initCommentView(localObj);\n    this.initDateView();\n    if (!this.comment.isReply) {\n      this.parentElement.tabIndex = 0;\n      this.initReplyView(localObj);\n      this.initResolveOption(localObj);\n      this.initDrawer();\n      if (this.comment.isResolved) {\n        this.resolveComment();\n      }\n    } else {\n      this.menuBar.style.display = 'none';\n    }\n    this.commentView.addEventListener('mouseenter', this.showMenuItems.bind(this));\n    this.commentView.addEventListener('mouseleave', this.hideMenuItemOnMouseLeave.bind(this));\n    return this.parentElement;\n  };\n  CommentView.prototype.initCommentHeader = function (localObj) {\n    var commentDiv = createElement('div', {\n      className: 'e-de-cmt-view'\n    });\n    this.resolveDiv = createElement('div', {\n      className: 'e-de-cmt-view'\n    });\n    var wrapperDiv = createElement('div', {\n      className: 'e-de-cmt-view'\n    });\n    var roundIcon = createElement('div', {\n      className: 'e-de-resolve-mark'\n    });\n    var span = createElement('span', {\n      className: 'e-de e-icons e-check'\n    });\n    var resolveText = createElement('span', {\n      className: ''\n    });\n    resolveText.innerHTML = \"Resolved\";\n    span.style.display = 'inline-block';\n    roundIcon.style.display = 'flex';\n    roundIcon.style.justifyContent = 'center';\n    roundIcon.style.alignItems = 'center';\n    roundIcon.style.width = \"20px\";\n    roundIcon.style.height = \"20px\";\n    roundIcon.style.borderRadius = \"100%\";\n    roundIcon.style.marginRight = \"6px\";\n    roundIcon.appendChild(span);\n    wrapperDiv.appendChild(roundIcon);\n    wrapperDiv.appendChild(resolveText);\n    this.resolveDiv.appendChild(wrapperDiv);\n    wrapperDiv.style.display = \"flex\";\n    this.resolveDiv.style.display = \"none\";\n    var commentUserInfo = createElement('div', {\n      className: 'e-de-cmt-author'\n    });\n    commentUserInfo.style.marginTop = \"8px\";\n    var userName = createElement('div', {\n      className: 'e-de-cmt-author-name'\n    });\n    userName.textContent = this.comment.author;\n    if (!isNullOrUndefined(this.comment.author)) {\n      commentUserInfo.style.display = 'flex';\n      this.owner.documentHelper.getAvatar(commentUserInfo, userName, this.comment, undefined);\n    }\n    // commentUserInfo.appendChild(this.resolveDiv);\n    //if (this.comment.author === this.owner.currentUser) {\n    this.menuBar = createElement('button', {\n      className: 'e-de-cp-option',\n      attrs: {\n        type: 'button'\n      }\n    });\n    var userOption = [{\n      text: localObj.getConstant('Edit')\n    }, {\n      text: localObj.getConstant('Delete')\n    }, {\n      text: localObj.getConstant('Reply')\n    }, {\n      text: localObj.getConstant('Resolve')\n    }];\n    var menuItem = new DropDownButton({\n      items: this.isReply ? userOption.splice(0, 2) : userOption,\n      select: this.userOptionSelectEvent.bind(this),\n      iconCss: 'e-de-menu-icon',\n      cssClass: 'e-caret-hide',\n      enableRtl: this.owner.enableRtl\n    });\n    this.menuBar.title = localObj.getConstant('More Options') + '...';\n    menuItem.appendTo(this.menuBar);\n    commentUserInfo.appendChild(this.menuBar);\n    this.dropDownButton = menuItem;\n    commentDiv.appendChild(commentUserInfo);\n    this.commentView = commentDiv;\n    this.parentElement.appendChild(commentDiv);\n    commentDiv.addEventListener('click', this.selectComment.bind(this));\n  };\n  CommentView.prototype.selectComment = function () {\n    if (this.commentPane) {\n      if (!this.commentPane.isEditMode) {\n        this.owner.selectionModule.selectComment(this.comment);\n      } else if (this.commentPane.isEditMode && this.commentPane.isInsertingReply && this.commentPane.currentEditingComment && this.commentPane.currentEditingComment.replyViewTextBox.innerText === '') {\n        var comment = this.comment;\n        if (comment && comment.isReply) {\n          comment = this.comment.ownerComment;\n        }\n        if (comment && this.owner.documentHelper.currentSelectedComment === comment) {\n          return;\n        }\n        this.commentPane.currentEditingComment.cancelReply();\n        this.owner.selectionModule.selectComment(this.comment);\n      }\n    }\n  };\n  CommentView.prototype.initCommentView = function (localObj) {\n    this.commentText = createElement('div', {\n      className: 'e-de-cmt-readonly e-mention'\n    });\n    var text = this.comment.text;\n    if (this.comment.mentions && this.comment.mentions.length > 0) {\n      var comment = this.comment;\n      text = comment.mentions[0].Span ? comment.mentions[0].Span + this.comment.text.replace(comment.mentions[0].Name, \"\") : comment.text;\n    }\n    this.comment.text = text;\n    this.commentText.innerHTML = text;\n    this.commentView.appendChild(this.commentText);\n    this.initEditView(localObj);\n  };\n  CommentView.prototype.initEditView = function (localObj) {\n    this.textAreaContainer = createElement('div', {\n      styles: 'display:none'\n    });\n    this.textArea = createElement('div', {\n      className: 'e-de-cmt-textarea e-input'\n    });\n    this.textArea.style.borderWidth = '0 0 1px 0';\n    this.textArea.setAttribute('placeholder', localObj.getConstant('Type your comment here'));\n    this.editMention = new Mention({\n      dataSource: this.owner.documentEditorSettings.mentionSettings.dataSource,\n      fields: this.owner.documentEditorSettings.mentionSettings.fields,\n      select: this.onSelect.bind(this)\n    });\n    this.textArea.innerHTML = this.comment.text;\n    this.textArea.addEventListener('keydown', this.updateTextAreaHeight.bind(this));\n    this.textArea.addEventListener('keyup', this.enableDisablePostButton.bind(this));\n    var editRegionFooter = createElement('div', {\n      className: 'e-de-cmt-action-button'\n    });\n    var postButton = createElement('button', {\n      className: 'e-de-cmt-post-btn e-btn e-flat',\n      attrs: {\n        type: 'button'\n      }\n    });\n    this.postButton = new Button({\n      cssClass: 'e-btn e-flat e-primary e-de-overlay',\n      iconCss: 'e-de-cmt-post',\n      disabled: true\n    }, postButton);\n    postButton.addEventListener('click', this.postComment.bind(this));\n    postButton.title = localObj.getConstant('Post');\n    postButton.setAttribute('aria-label', localObj.getConstant('Post'));\n    var cancelButton = createElement('button', {\n      className: 'e-de-cmt-cancel-btn e-btn e-flat',\n      attrs: {\n        type: 'button'\n      }\n    });\n    this.cancelButton = new Button({\n      cssClass: 'e-btn e-flat',\n      iconCss: 'e-de-cmt-cancel'\n    }, cancelButton);\n    cancelButton.title = localObj.getConstant('Cancel');\n    cancelButton.setAttribute('aria-label', localObj.getConstant('Cancel'));\n    cancelButton.addEventListener('click', this.cancelEditing.bind(this));\n    editRegionFooter.appendChild(postButton);\n    editRegionFooter.appendChild(cancelButton);\n    this.textAreaContainer.appendChild(this.textArea);\n    this.textAreaContainer.appendChild(editRegionFooter);\n    this.commentView.appendChild(this.textAreaContainer);\n    this.editMention.appendTo(this.textArea);\n  };\n  CommentView.prototype.onSelect = function (e) {\n    this.itemData.push(e.itemData);\n  };\n  CommentView.prototype.initDateView = function () {\n    this.commentDate = createElement('div', {\n      className: 'e-de-cmt-date'\n    });\n    this.commentDate.innerText = HelperMethods.getModifiedDate(this.comment.date);\n    this.commentView.appendChild(this.commentDate);\n  };\n  CommentView.prototype.initDrawer = function () {\n    this.drawerElement = createElement('div', {\n      styles: 'display:none;',\n      className: 'e-de-cmt-drawer-cnt'\n    });\n    var leftPane = createElement('div', {\n      className: 'e-de-cmt-drawer'\n    });\n    var spanElement = createElement('span');\n    leftPane.appendChild(spanElement);\n    this.drawerElement.appendChild(leftPane);\n    this.drawerSpanElement = spanElement;\n    this.drawerAction = leftPane;\n    this.drawerAction.addEventListener('click', this.showOrHideDrawer.bind(this));\n    this.parentElement.appendChild(this.drawerElement);\n  };\n  CommentView.prototype.initReplyView = function (localObj) {\n    this.replyViewContainer = createElement('div', {\n      className: 'e-de-cmt-rply-view'\n    });\n    if (this.commentPane.parentPane.isNewComment) {\n      this.replyViewContainer.style.display = 'none';\n    }\n    this.replyViewTextBox = createElement('div', {\n      className: 'e-de-cmt-textarea e-input'\n    });\n    this.replyViewTextBox.style.borderWidth = '0 0 1px 0';\n    this.replyViewTextBox.setAttribute(\"placeholder\", localObj.getConstant('Reply'));\n    this.replyViewTextBox.addEventListener('click', this.enableReplyView.bind(this));\n    this.replyViewTextBox.addEventListener('keydown', this.updateReplyTextAreaHeight.bind(this));\n    this.replyViewTextBox.addEventListener('keyup', this.enableDisableReplyPostButton.bind(this));\n    var editRegionFooter = createElement('div', {\n      styles: 'display:none',\n      className: 'e-de-cmt-action-button'\n    });\n    var postButton = createElement('button', {\n      className: 'e-de-cmt-post-btn e-de-overlay e-btn e-flat',\n      attrs: {\n        type: 'button'\n      }\n    });\n    this.replyPostButton = new Button({\n      cssClass: 'e-btn e-flat e-primary',\n      iconCss: 'e-de-cmt-post',\n      disabled: true\n    }, postButton);\n    this.replyMention = new Mention({\n      dataSource: this.owner.documentEditorSettings.mentionSettings.dataSource,\n      fields: this.owner.documentEditorSettings.mentionSettings.fields,\n      select: this.onSelect.bind(this)\n    });\n    postButton.addEventListener('click', this.postReply.bind(this));\n    postButton.title = localObj.getConstant('Post');\n    var cancelButton = createElement('button', {\n      className: 'e-de-cmt-cancel-btn e-btn e-flat',\n      attrs: {\n        type: 'button'\n      }\n    });\n    cancelButton.setAttribute('aria-label', localObj.getConstant('Cancel'));\n    this.replyCancelButton = new Button({\n      cssClass: 'e-btn e-flat',\n      iconCss: 'e-de-cmt-cancel'\n    }, cancelButton);\n    cancelButton.addEventListener('click', this.cancelReply.bind(this));\n    cancelButton.title = localObj.getConstant('Cancel');\n    editRegionFooter.appendChild(postButton);\n    editRegionFooter.appendChild(cancelButton);\n    this.replyFooter = editRegionFooter;\n    this.replyViewContainer.appendChild(this.replyViewTextBox);\n    this.replyViewContainer.appendChild(editRegionFooter);\n    this.parentElement.appendChild(this.replyViewContainer);\n    this.replyMention.appendTo(this.replyViewTextBox);\n  };\n  CommentView.prototype.initResolveOption = function (localObj) {\n    var editRegionFooter = createElement('div', {\n      className: 'e-de-cmt-resolve-btn'\n    });\n    var wrapperFooterDiv = createElement('div', {\n      className: 'e-de-cmt-resolve-btn'\n    });\n    var reopenDeleteWrapper = createElement('div', {\n      className: 'e-de-cmt-resolve-btn'\n    });\n    var postButton = createElement('button', {\n      className: 'e-de-cmt-post-btn e-btn e-flat',\n      attrs: {\n        type: 'button'\n      }\n    });\n    this.reopenButton = new Button({\n      cssClass: 'e-btn e-flat',\n      iconCss: 'e-de-cmt-reopen'\n    }, postButton);\n    postButton.title = localObj.getConstant('Reopen');\n    postButton.setAttribute('aria-label', localObj.getConstant('Reopen'));\n    postButton.addEventListener('click', this.reopenButtonClick.bind(this));\n    var cancelButton = createElement('button', {\n      className: 'e-de-cmt-cancel-btn e-btn e-flat',\n      attrs: {\n        type: 'button'\n      }\n    });\n    cancelButton.title = localObj.getConstant('Delete');\n    cancelButton.setAttribute('aria-label', localObj.getConstant('Delete'));\n    this.deleteButton = new Button({\n      cssClass: 'e-btn e-flat',\n      iconCss: 'e-de-cmt-delete'\n    }, cancelButton);\n    cancelButton.addEventListener('click', this.deleteComment.bind(this));\n    editRegionFooter.appendChild(postButton);\n    editRegionFooter.appendChild(cancelButton);\n    wrapperFooterDiv.appendChild(this.resolveDiv);\n    reopenDeleteWrapper.appendChild(postButton);\n    reopenDeleteWrapper.appendChild(cancelButton);\n    editRegionFooter.appendChild(wrapperFooterDiv);\n    wrapperFooterDiv.appendChild(reopenDeleteWrapper);\n    wrapperFooterDiv.style.display = \"flex\";\n    wrapperFooterDiv.style.justifyContent = \"space-between\";\n    wrapperFooterDiv.style.alignItems = \"center\";\n    reopenDeleteWrapper.style.display = \"flex\";\n    reopenDeleteWrapper.style.marginTop = \"0px\";\n    this.resolveView = editRegionFooter;\n    this.parentElement.appendChild(editRegionFooter);\n  };\n  CommentView.prototype.reopenButtonClick = function () {\n    this.owner.editorModule.reopenComment(this.comment);\n  };\n  CommentView.prototype.deleteComment = function () {\n    var eventArgs = {\n      author: this.comment.author,\n      cancel: false\n    };\n    this.owner.trigger(commentDeleteEvent, eventArgs);\n    var eventActionArgs = {\n      author: this.comment.author,\n      cancel: eventArgs.cancel,\n      type: 'Delete'\n    };\n    this.owner.trigger(beforeCommentActionEvent, eventActionArgs);\n    if (eventActionArgs.cancel) {\n      return;\n    }\n    this.owner.editorModule.deleteCommentInternal(this.comment);\n    if (eventArgs.cancel) {\n      return;\n    }\n  };\n  CommentView.prototype.updateReplyTextAreaHeight = function () {\n    var _this = this;\n    setTimeout(function () {\n      if (!isNullOrUndefined(_this.replyViewTextBox)) {\n        _this.replyViewTextBox.style.height = 'auto';\n        var scrollHeight = _this.replyViewTextBox.scrollHeight;\n        _this.replyViewTextBox.style.height = scrollHeight + 'px';\n      }\n    });\n  };\n  CommentView.prototype.enableDisableReplyPostButton = function () {\n    this.replyPostButton.disabled = this.replyViewTextBox.innerText === '';\n    if (this.replyPostButton.disabled) {\n      classList(this.replyPostButton.element, ['e-de-overlay'], []);\n    } else if (this.replyPostButton.element.classList.contains('e-de-overlay')) {\n      classList(this.replyPostButton.element, [], ['e-de-overlay']);\n    }\n  };\n  CommentView.prototype.enableReplyView = function () {\n    var _this = this;\n    var eventArgs = {\n      author: this.comment.author,\n      cancel: false,\n      type: 'Reply'\n    };\n    this.owner.trigger(beforeCommentActionEvent, eventArgs);\n    if (eventArgs.cancel && eventArgs.type === 'Reply') {\n      return;\n    }\n    if (this.commentPane.isEditMode) {\n      return;\n    }\n    this.commentPane.currentEditingComment = this;\n    this.commentPane.isInsertingReply = true;\n    if (this.owner.documentHelper.currentSelectedComment !== this.comment) {\n      this.owner.selectionModule.selectComment(this.comment);\n    }\n    this.commentPane.isEditMode = true;\n    //this.replyViewTextBox.readOnly = false;\n    this.replyFooter.style.display = 'block';\n    setTimeout(function () {\n      _this.replyViewTextBox.focus();\n    });\n  };\n  CommentView.prototype.postReply = function () {\n    var replyText = this.replyViewTextBox.innerHTML;\n    this.cancelReply();\n    this.updateReplyTextAreaHeight();\n    this.owner.editorModule.replyComment(this.comment, replyText, this.itemData);\n    if (!this.owner.editorModule.isSkipOperationsBuild && !this.owner.editorModule.isRemoteAction) {\n      this.owner.fireContentChange();\n    }\n    this.owner.editorModule.isSkipOperationsBuild = false;\n  };\n  CommentView.prototype.cancelReply = function () {\n    this.commentPane.currentEditingComment = undefined;\n    this.commentPane.isInsertingReply = true;\n    this.commentPane.isEditMode = false;\n    this.replyPostButton.disabled = true;\n    this.replyViewTextBox.innerText = '';\n    // this.replyViewTextBox.readOnly = true;\n    this.replyFooter.style.display = 'none';\n  };\n  CommentView.prototype.updateTextAreaHeight = function () {\n    var _this = this;\n    setTimeout(function () {\n      if (!isNullOrUndefined(_this.textArea)) {\n        _this.textArea.style.height = 'auto';\n        var scrollHeight = _this.textArea.scrollHeight;\n        _this.textArea.style.height = scrollHeight + 'px';\n      }\n    });\n  };\n  CommentView.prototype.showMenuItems = function () {\n    if (this.comment.isReply && !this.owner.isReadOnly) {\n      if (!this.commentPane.isEditMode && !isNullOrUndefined(this.comment) && !this.comment.isResolved) {\n        this.menuBar.style.display = 'block';\n      }\n    }\n    var commentStart = this.commentPane.getCommentStart(this.comment);\n    if (!isNullOrUndefined(commentStart) && !isNullOrUndefined(commentStart.commentMark)) {\n      commentStart.commentMark.classList.add('e-de-cmt-mark-hover');\n    }\n  };\n  CommentView.prototype.hideMenuItemOnMouseLeave = function () {\n    if (this.comment.isReply) {\n      if (this.owner.documentHelper.currentSelectedComment !== this.comment.ownerComment) {\n        this.hideMenuItems();\n      }\n    }\n    if (this.commentPane) {\n      var commentStart = this.commentPane.getCommentStart(this.comment);\n      if (!isNullOrUndefined(commentStart) && !isNullOrUndefined(commentStart.commentMark)) {\n        commentStart.commentMark.classList.remove('e-de-cmt-mark-hover');\n      }\n    }\n  };\n  CommentView.prototype.hideMenuItems = function () {\n    this.menuBar.style.display = 'none';\n  };\n  CommentView.prototype.enableDisablePostButton = function () {\n    this.postButton.disabled = this.textArea.innerText === '';\n    if (this.postButton.disabled) {\n      classList(this.postButton.element, ['e-de-overlay'], []);\n    } else if (this.postButton.element.classList.contains('e-de-overlay')) {\n      classList(this.postButton.element, [], ['e-de-overlay']);\n    }\n  };\n  CommentView.prototype.editComment = function () {\n    var _this = this;\n    var eventArgs = {\n      author: this.comment.author,\n      cancel: false,\n      type: 'Edit'\n    };\n    this.owner.trigger(beforeCommentActionEvent, eventArgs);\n    if (eventArgs.cancel && eventArgs.type === 'Edit') {\n      return;\n    }\n    this.commentPane.currentEditingComment = this;\n    this.commentPane.isInsertingReply = false;\n    this.commentPane.isEditMode = true;\n    this.commentText.style.display = 'none';\n    this.textAreaContainer.style.display = 'block';\n    this.commentDate.style.display = 'none';\n    this.menuBar.style.display = 'none';\n    this.updateTextAreaHeight();\n    setTimeout(function () {\n      if (_this.textArea) {\n        _this.textArea.focus();\n      }\n    });\n  };\n  CommentView.prototype.resolveComment = function () {\n    classList(this.parentElement, ['e-de-cmt-resolved'], []);\n    this.resolveDiv.style.display = \"inline\";\n    var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n    localObj.setLocale(this.owner.locale);\n    this.dropDownButton.items = [{\n      text: localObj.getConstant('Reopen')\n    }, {\n      text: localObj.getConstant('Delete')\n    }];\n  };\n  CommentView.prototype.reopenComment = function () {\n    classList(this.parentElement, [], ['e-de-cmt-resolved']);\n    this.resolveDiv.style.display = \"none\";\n    var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n    localObj.setLocale(this.owner.locale);\n    this.dropDownButton.items = [{\n      text: localObj.getConstant('Edit')\n    }, {\n      text: localObj.getConstant('Delete')\n    }, {\n      text: localObj.getConstant('Reply')\n    }, {\n      text: localObj.getConstant('Resolve')\n    }];\n    this.showDrawer();\n  };\n  CommentView.prototype.postComment = function () {\n    if (this.itemData) {\n      this.comment.mentions = this.itemData;\n      this.itemData = [];\n    }\n    var eventArgs = {\n      author: this.comment.author,\n      cancel: false,\n      type: 'Post',\n      text: this.textArea.innerText,\n      mentions: this.comment.mentions\n    };\n    this.owner.trigger(beforeCommentActionEvent, eventArgs);\n    if (eventArgs.cancel && eventArgs.type === 'Post') {\n      return;\n    }\n    var updatedText = this.textArea.innerHTML;\n    if (this.owner.editorModule && this.comment.text != '' && this.comment.text != updatedText) {\n      this.owner.editorModule.initHistory('EditComment');\n      var modifiedObject = {\n        commentId: this.comment.commentId,\n        text: this.comment.text\n      };\n      this.owner.editorHistoryModule.currentBaseHistoryInfo.modifiedProperties.push(modifiedObject);\n      this.owner.editorHistoryModule.currentBaseHistoryInfo.removedNodes.push(this.comment);\n      this.owner.editorHistoryModule.updateHistory();\n    }\n    this.commentText.innerHTML = updatedText;\n    this.comment.text = updatedText;\n    this.showCommentView();\n    if (this.commentPane && this.commentPane.parentPane) {\n      this.commentPane.parentPane.isNewComment = false;\n    }\n    if (!isNullOrUndefined(this.replyViewContainer)) {\n      this.replyViewContainer.style.display = '';\n    }\n    if (!this.owner.editorModule.isSkipOperationsBuild && !this.owner.editorModule.isRemoteAction) {\n      this.owner.fireContentChange();\n    }\n  };\n  CommentView.prototype.showCommentView = function () {\n    this.commentPane.isEditMode = false;\n    this.textAreaContainer.style.display = 'none';\n    this.commentText.style.display = 'block';\n    this.commentDate.style.display = 'block';\n    this.menuBar.style.display = 'block';\n  };\n  CommentView.prototype.cancelEditing = function () {\n    this.showCommentView();\n    this.textArea.innerHTML = this.comment.text.trim();\n    if (this.commentPane.parentPane.isNewComment) {\n      if (this.commentPane && this.commentPane.parentPane) {\n        this.commentPane.parentPane.isNewComment = false;\n      }\n      var documentEditor = this.owner;\n      documentEditor.editorModule.isSkipOperationsBuild = this.owner.enableCollaborativeEditing;\n      this.commentPane.parentPane.discardComment(this.comment);\n      documentEditor.editorModule.isSkipOperationsBuild = false;\n    }\n  };\n  CommentView.prototype.showOrHideDrawer = function () {\n    if (this.isDrawerExpand) {\n      this.hideDrawer();\n    } else {\n      this.showDrawer();\n    }\n  };\n  CommentView.prototype.hideDrawer = function () {\n    if (this.parentElement) {\n      var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n      localObj.setLocale(this.owner.locale);\n      var elements = this.parentElement.getElementsByClassName('e-de-cmt-sub-container');\n      if (elements.length > 1) {\n        for (var i = 1; i < elements.length; i++) {\n          elements[i].style.display = 'none';\n        }\n        this.drawerElement.style.display = 'block';\n        classList(this.drawerSpanElement, [], ['e-de-nav-up']);\n        this.drawerSpanElement.innerText = '+' + (elements.length - 1) + ' ' + localObj.getConstant('more') + '...';\n      }\n      this.isDrawerExpand = false;\n    }\n  };\n  CommentView.prototype.showDrawer = function () {\n    if (this.parentElement) {\n      var elements = this.parentElement.getElementsByClassName('e-de-cmt-sub-container');\n      if (elements.length > 1) {\n        for (var i = 0; i < elements.length; i++) {\n          elements[i].style.display = 'block';\n        }\n        this.drawerElement.style.display = 'block';\n        this.drawerSpanElement.innerText = '';\n        classList(this.drawerSpanElement, ['e-de-nav-up'], []);\n      }\n      this.isDrawerExpand = true;\n    }\n  };\n  CommentView.prototype.userOptionSelectEvent = function (event) {\n    var selectedItem = event.item.text;\n    var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n    localObj.setLocale(this.owner.locale);\n    switch (selectedItem) {\n      case localObj.getConstant('Edit'):\n        this.editComment();\n        break;\n      case localObj.getConstant('Reply'):\n        this.enableReplyView();\n        break;\n      case localObj.getConstant('Delete'):\n        this.deleteComment();\n        break;\n      case localObj.getConstant('Resolve'):\n        this.owner.editorModule.resolveComment(this.comment);\n        break;\n      case localObj.getConstant('Reopen'):\n        this.owner.editorModule.reopenComment(this.comment);\n    }\n  };\n  CommentView.prototype.unwireEvent = function () {\n    if (this.drawerAction) {\n      this.drawerAction.removeEventListener('click', this.showOrHideDrawer.bind(this));\n    }\n    if (this.textArea) {\n      this.textArea.removeEventListener('keydown', this.updateTextAreaHeight.bind(this));\n      this.textArea.removeEventListener('keyup', this.enableDisablePostButton.bind(this));\n    }\n    if (this.postButton) {\n      this.postButton.removeEventListener('click', this.postComment.bind(this));\n    }\n    if (this.cancelButton) {\n      this.cancelButton.removeEventListener('click', this.cancelEditing.bind(this));\n    }\n    if (this.commentView) {\n      this.commentView.removeEventListener('click', this.selectComment.bind(this));\n      this.commentView.removeEventListener('mouseenter', this.showMenuItems.bind(this));\n      this.commentView.removeEventListener('mouseleave', this.hideMenuItemOnMouseLeave.bind(this));\n    }\n  };\n  CommentView.prototype.destroy = function () {\n    this.unwireEvent();\n    if (this.comment) {\n      this.comment = undefined;\n    }\n    if (this.dropDownButton) {\n      this.dropDownButton.destroy();\n    }\n    this.dropDownButton = undefined;\n    if (this.postButton) {\n      this.postButton.destroy();\n    }\n    this.postButton = undefined;\n    if (this.cancelButton) {\n      this.cancelButton.destroy();\n    }\n    this.cancelButton = undefined;\n    if (this.replyPostButton) {\n      this.replyPostButton.destroy();\n      this.replyPostButton = undefined;\n    }\n    if (this.replyCancelButton) {\n      this.replyCancelButton.destroy();\n      this.replyCancelButton = undefined;\n    }\n    if (this.reopenButton) {\n      this.reopenButton.destroy();\n      this.reopenButton = undefined;\n    }\n    if (this.deleteButton) {\n      this.deleteButton.destroy();\n      this.deleteButton = undefined;\n    }\n    if (this.parentElement) {\n      this.parentElement.innerHTML = '';\n      if (this.parentElement.parentElement) {\n        this.parentElement.parentElement.removeChild(this.parentElement);\n      }\n    }\n    this.parentElement = undefined;\n    if (this.commentView) {\n      this.commentView.innerHTML = '';\n      if (this.commentView.parentElement) {\n        this.commentView.parentElement.removeChild(this.commentView);\n      }\n    }\n    this.commentView = undefined;\n    this.replyViewContainer = undefined;\n    this.replyViewTextBox = undefined;\n    this.replyFooter = undefined;\n    this.resolveView = undefined;\n    this.menuBar = undefined;\n    this.drawerAction = undefined;\n    this.commentText = undefined;\n    this.commentDate = undefined;\n    this.textAreaContainer = undefined;\n    this.textArea = undefined;\n    this.drawerElement = undefined;\n    this.drawerSpanElement = undefined;\n    this.commentPane = undefined;\n    this.owner = undefined;\n  };\n  return CommentView;\n}();\nexport { CommentView };","map":{"version":3,"names":["createElement","L10n","classList","isNullOrUndefined","CommentCharacterElementBox","DropDownButton","Button","Toolbar","Tab","DialogUtility","Dictionary","beforeCommentActionEvent","commentEndEvent","commentBeginEvent","commentDeleteEvent","HelperMethods","Mention","CommentReviewPane","owner","_this","isNewComment","isUserClosed","selectedTab","onTabSelection","arg","preventFocus","selectedIndex","trackChangesPane","updateHeight","commentPane","setTimeout","resize","localObj","defaultLocale","setLocale","locale","initReviewPane","parentPaneElement","style","display","Object","defineProperty","prototype","get","previousSelectedCommentInt","set","value","comments","containsKey","commentStart","getCommentStart","commentMark","removeSelectionMark","commentView","hideDrawer","i","replyComments","length","hideMenuItems","enumerable","configurable","selectReviewTab","tab","reviewTab","select","showHidePane","show","updateTabHeaderWidth","showRevisions","isCommentTabVisible","notify","comment","changes","isChangesTabVisible","updateTrackChanges","updateCommentStatus","hideTab","showComments","enableDisableItems","enableAutoFocus","documentHelper","updateFocus","reviewPaneHelper","args","reviewTabsEle","getRootElement","getElementsByClassName","padding","localValue","reviewContainer","optionsPaneContainer","initPaneHeader","appendChild","addReviewTab","initCommentPane","on","commentHeader","innerHTML","getConstant","changesHeader","styles","className","element","id","items","header","text","content","reviewPane","selected","animation","previous","effect","next","appendTo","enableRtl","enablePersistence","headerContainer","initToolbar","closePane","isEditMode","currentEditingComment","isInsertingReply","replyViewTextBox","innerText","currentSelectedComment","undefined","cancelReply","textArea","confirmDialog","confirm","title","okButton","click","discardButtonClick","bind","cancelButton","closeDialogUtils","showCloseIcon","closeOnEscape","animationSettings","position","X","Y","cancelEditing","currentSelectedRevision","close","toolbarElement","toolbar","prefixIcon","tooltipText","insertComment","align","navigatePreviousComment","navigateNextComment","editorModule","isUserInsert","addComment","selectComment","enableDisableToolbarItem","deleteComment","isReply","ownerComment","viewer","resolveComment","reopenComment","addReply","newComment","insertReply","selectionModule","keys","isReadOnly","menuBar","resolveView","enable","elements","querySelectorAll","enableItems","parentElement","CommentPane","layoutComments","isUnreferredComment","splice","j","commentEnd","clear","discardComment","editorHistoryModule","undoStack","action","undo","redoStack","pop","isSkipOperationsBuild","enableCollaborativeEditing","deleteCommentInternal","destroy","removeChild","isDestroyed","off","pane","isEditModeInternal","parentPane","parent","trigger","noCommentIndicator","CommentView","commentParent","layoutComment","add","replyView","insertBefore","replyViewContainer","tabHeaderHeight","getBoundingClientRect","height","clientHeight","replyComment","parentComment","parentView","replyElement","replyIndex","indexOf","nextReply","editComment","index","focus","selectedElement","renderCommentMark","showDrawer","getFirstCommentInLine","line","children","startComment","commentType","commentId","replyCmt","remove","removeChildElements","isDrawerExpand","itemData","initCommentHeader","initCommentView","initDateView","tabIndex","initReplyView","initResolveOption","initDrawer","isResolved","addEventListener","showMenuItems","hideMenuItemOnMouseLeave","commentDiv","resolveDiv","wrapperDiv","roundIcon","span","resolveText","justifyContent","alignItems","width","borderRadius","marginRight","commentUserInfo","marginTop","userName","textContent","author","getAvatar","attrs","type","userOption","menuItem","userOptionSelectEvent","iconCss","cssClass","dropDownButton","commentText","mentions","Span","replace","Name","initEditView","textAreaContainer","borderWidth","setAttribute","editMention","dataSource","documentEditorSettings","mentionSettings","fields","onSelect","updateTextAreaHeight","enableDisablePostButton","editRegionFooter","postButton","disabled","postComment","e","push","commentDate","getModifiedDate","date","drawerElement","leftPane","spanElement","drawerSpanElement","drawerAction","showOrHideDrawer","enableReplyView","updateReplyTextAreaHeight","enableDisableReplyPostButton","replyPostButton","replyMention","postReply","replyCancelButton","replyFooter","wrapperFooterDiv","reopenDeleteWrapper","reopenButton","reopenButtonClick","deleteButton","eventArgs","cancel","eventActionArgs","scrollHeight","contains","replyText","isRemoteAction","fireContentChange","updatedText","initHistory","modifiedObject","currentBaseHistoryInfo","modifiedProperties","removedNodes","updateHistory","showCommentView","trim","documentEditor","event","selectedItem","item","unwireEvent","removeEventListener"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/node_modules/@syncfusion/ej2-documenteditor/src/document-editor/implementation/comments/comment.js"],"sourcesContent":["/* eslint-disable */\nimport { createElement, L10n, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CommentCharacterElementBox } from '../../implementation/viewer/page';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Toolbar, Tab } from '@syncfusion/ej2-navigations';\nimport { DialogUtility } from '@syncfusion/ej2-popups';\nimport { Dictionary, beforeCommentActionEvent, commentEndEvent, commentBeginEvent, commentDeleteEvent } from '../../base/index';\nimport { HelperMethods } from '../editor/editor-helper';\nimport { Mention } from '@syncfusion/ej2-dropdowns';\n/**\n * @private\n */\nvar CommentReviewPane = /** @class */ (function () {\n    function CommentReviewPane(owner) {\n        var _this = this;\n        this.isNewComment = false;\n        this.isUserClosed = false;\n        /**\n         * @private\n         */\n        this.selectedTab = 0;\n        /**\n         * @param {SelectEventArgs} arg - Specify the selection event args.\n         * @returns {void}\n         */\n        this.onTabSelection = function (arg) {\n            arg.preventFocus = true;\n            _this.selectedTab = arg.selectedIndex;\n            if (_this.selectedTab === 1) {\n                _this.owner.trackChangesPane.updateHeight();\n            }\n            else {\n                _this.commentPane.updateHeight();\n            }\n            setTimeout(function () {\n                if (_this.owner) {\n                    _this.owner.resize();\n                }\n            }, 10);\n        };\n        this.owner = owner;\n        var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n        localObj.setLocale(this.owner.locale);\n        this.initReviewPane(localObj);\n        this.parentPaneElement.style.display = 'none';\n    }\n    Object.defineProperty(CommentReviewPane.prototype, \"previousSelectedComment\", {\n        get: function () {\n            return this.previousSelectedCommentInt;\n        },\n        set: function (value) {\n            if (!isNullOrUndefined(value) && value !== this.previousSelectedCommentInt) {\n                if (this.commentPane.comments.containsKey(value)) {\n                    var commentStart = this.commentPane.getCommentStart(value);\n                    var commentMark = commentStart.commentMark;\n                    if (commentMark) {\n                        classList(commentMark, [], ['e-de-cmt-mark-selected']);\n                        this.commentPane.removeSelectionMark('e-de-cmt-selection');\n                        this.commentPane.removeSelectionMark('e-de-cmt-mark-selected');\n                    }\n                    var commentView = this.commentPane.comments.get(value);\n                    commentView.hideDrawer();\n                    for (var i = 0; i < value.replyComments.length; i++) {\n                        commentView = this.commentPane.comments.get(value.replyComments[i]);\n                        if (commentView) {\n                            commentView.hideDrawer();\n                            commentView.hideMenuItems();\n                        }\n                    }\n                }\n            }\n            this.previousSelectedCommentInt = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommentReviewPane.prototype.selectReviewTab = function (tab) {\n        if (tab === 'Changes') {\n            this.reviewTab.select(1);\n        }\n        else {\n            this.reviewTab.select(0);\n        }\n    };\n    CommentReviewPane.prototype.showHidePane = function (show, tab) {\n        if (this.parentPaneElement) {\n            this.updateTabHeaderWidth();\n            if (show) {\n                this.parentPaneElement.style.display = 'block';\n                if (tab === 'Changes' && this.owner.showRevisions) {\n                    this.isCommentTabVisible = false;\n                    this.owner.notify('reviewPane', { comment: this.isCommentTabVisible, changes: true });\n                    this.reviewTab.select(1);\n                }\n                else {\n                    this.owner.trackChangesPane.isChangesTabVisible = false;\n                    this.owner.notify('reviewPane', { comment: true, changes: this.owner.trackChangesPane.isChangesTabVisible, isUserClosed: false });\n                    this.reviewTab.select(0);\n                }\n                this.owner.trackChangesPane.updateTrackChanges(this.owner.showRevisions);\n                this.commentPane.updateCommentStatus();\n            }\n            else {\n                this.parentPaneElement.style.display = 'none';\n            }\n            if (!this.owner.showRevisions) {\n                this.owner.trackChangesPane.isChangesTabVisible = false;\n                this.owner.notify('reviewPane', { comment: this.isCommentTabVisible, changes: this.owner.trackChangesPane.isChangesTabVisible });\n                this.reviewTab.hideTab(1, true);\n            }\n            if (!this.owner.showComments) {\n                this.isCommentTabVisible = false;\n                this.owner.notify('reviewPane', { comment: this.isCommentTabVisible, changes: this.owner.trackChangesPane.isChangesTabVisible });\n                this.reviewTab.hideTab(0, true);\n            }\n        }\n        if (show) {\n            this.enableDisableItems();\n            this.commentPane.updateHeight();\n        }\n        if (this.owner) {\n            this.owner.resize();\n            if (this.owner.enableAutoFocus) {\n                this.owner.documentHelper.updateFocus();\n            }\n        }\n    };\n    CommentReviewPane.prototype.reviewPaneHelper = function (args) {\n        var _this = this;\n        if (!isNullOrUndefined(args.isUserClosed)) {\n            if (args.isUserClosed !== this.isUserClosed) {\n                this.isUserClosed = args.isUserClosed;\n                if (this.owner) {\n                    setTimeout(function () {\n                        if (_this.owner) {\n                            _this.owner.resize();\n                        }\n                    }, 10);\n                }\n            }\n            else {\n                return;\n            }\n        }\n        else {\n            if (this.isUserClosed) {\n                return;\n            }\n        }\n        if (!isNullOrUndefined(args.comment) || !isNullOrUndefined(args.changes)) {\n            if ((args.comment || args.changes)) {\n                if (this.parentPaneElement.style.display === 'none') {\n                    this.parentPaneElement.style.display = 'block';\n                }\n                if (this.owner) {\n                    setTimeout(function () {\n                        if (_this.owner) {\n                            _this.owner.resize();\n                        }\n                    }, 10);\n                }\n            }\n            else {\n                this.parentPaneElement.style.display = 'none';\n                if (this.owner) {\n                    setTimeout(function () {\n                        if (_this.owner) {\n                            _this.owner.resize();\n                        }\n                    }, 10);\n                }\n            }\n        }\n    };\n    CommentReviewPane.prototype.updateTabHeaderWidth = function () {\n        var reviewTabsEle = this.reviewTab.getRootElement().getElementsByClassName('e-tab-wrap');\n        reviewTabsEle[0].style.padding = '0 8px';\n        reviewTabsEle[1].style.padding = '0 8px';\n    };\n    CommentReviewPane.prototype.initReviewPane = function (localValue) {\n        var reviewContainer = this.owner.documentHelper.optionsPaneContainer;\n        reviewContainer.style.display = 'flex';\n        this.initPaneHeader(localValue);\n        reviewContainer.appendChild(this.addReviewTab(localValue));\n        this.initCommentPane();\n        this.owner.on('reviewPane', this.reviewPaneHelper, this);\n    };\n    CommentReviewPane.prototype.addReviewTab = function (localValue) {\n        var commentHeader = createElement('div', { innerHTML: localValue.getConstant('Comments') });\n        var changesHeader = createElement('div', { innerHTML: localValue.getConstant('Changes') });\n        this.parentPaneElement = createElement('div', { styles: 'height:100%;overflow:auto;display:none', className: 'e-de-review-pane' });\n        this.element = createElement('div', { className: 'e-de-property-tab', id: this.owner.element.id + 'Review_Tab' });\n        var items = [{ header: { text: commentHeader }, content: this.reviewPane }, { header: { text: changesHeader } }];\n        this.reviewTab = new Tab({ items: items, selected: this.onTabSelection, animation: { previous: { effect: 'None' }, next: { effect: 'None' } } });\n        this.reviewTab.appendTo(this.element);\n        if (this.owner.enableRtl) {\n            this.reviewTab.enableRtl = true;\n        }\n        this.reviewTab.enablePersistence = true;\n        this.parentPaneElement.appendChild(this.element);\n        return this.parentPaneElement;\n    };\n    CommentReviewPane.prototype.initPaneHeader = function (localValue) {\n        this.headerContainer = createElement('div');\n        this.reviewPane = createElement('div', { className: 'e-de-cmt-pane' });\n        if (this.owner.enableRtl) {\n            classList(this.reviewPane, ['e-rtl'], []);\n        }\n        this.headerContainer.appendChild(this.initToolbar(localValue));\n        this.reviewPane.appendChild(this.headerContainer);\n        this.reviewPane.style.display = 'block';\n        return this.reviewPane;\n    };\n    CommentReviewPane.prototype.closePane = function () {\n        if (this.commentPane && this.commentPane.isEditMode) {\n            if (!isNullOrUndefined(this.commentPane.currentEditingComment)\n                && this.commentPane.isInsertingReply && this.commentPane.currentEditingComment.replyViewTextBox.innerText === '') {\n                this.owner.documentHelper.currentSelectedComment = undefined;\n                this.commentPane.currentEditingComment.cancelReply();\n                this.owner.showComments = false;\n            }\n            else if (this.isNewComment || !isNullOrUndefined(this.commentPane.currentEditingComment)\n                && this.commentPane.isInsertingReply && this.commentPane.currentEditingComment.replyViewTextBox.innerText !== '' ||\n                !isNullOrUndefined(this.commentPane.currentEditingComment) && !this.commentPane.isInsertingReply &&\n                    this.commentPane.currentEditingComment.textArea.innerText !== this.commentPane.currentEditingComment.comment.text) {\n                var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n                localObj.setLocale(this.owner.locale);\n                this.confirmDialog = DialogUtility.confirm({\n                    title: localObj.getConstant('Un-posted comments'),\n                    content: localObj.getConstant('Discard Comment'),\n                    okButton: {\n                        text: localObj.getConstant('Discard'), click: this.discardButtonClick.bind(this)\n                    },\n                    cancelButton: {\n                        text: localObj.getConstant('Cancel'), click: this.closeDialogUtils.bind(this)\n                    },\n                    showCloseIcon: true,\n                    closeOnEscape: true,\n                    animationSettings: { effect: 'Zoom' },\n                    position: { X: 'center', Y: 'center' }\n                });\n            }\n            else {\n                this.owner.documentHelper.currentSelectedComment = undefined;\n                this.commentPane.currentEditingComment.cancelEditing();\n                this.owner.showComments = false;\n            }\n        }\n        else {\n            this.owner.showComments = false;\n            //this.owner.showRevisions = false;\n            this.owner.documentHelper.currentSelectedComment = undefined;\n            this.owner.documentHelper.currentSelectedRevision = undefined;\n            this.owner.notify('reviewPane', { changes: false, comment: false, isUserClosed: true });\n        }\n    };\n    CommentReviewPane.prototype.discardButtonClick = function () {\n        if (this.commentPane.currentEditingComment) {\n            var isNewComment = this.isNewComment;\n            if (this.commentPane.currentEditingComment && this.commentPane.isInsertingReply) {\n                this.commentPane.currentEditingComment.cancelReply();\n            }\n            else {\n                this.commentPane.currentEditingComment.cancelEditing();\n            }\n            this.owner.documentHelper.currentSelectedComment = undefined;\n            this.closeDialogUtils();\n            this.owner.showComments = false;\n        }\n    };\n    CommentReviewPane.prototype.closeDialogUtils = function () {\n        this.confirmDialog.close();\n        this.confirmDialog = undefined;\n    };\n    CommentReviewPane.prototype.initToolbar = function (localValue) {\n        this.toolbarElement = createElement('div');\n        this.toolbar = new Toolbar({\n            items: [\n                {\n                    prefixIcon: 'e-de-new-cmt e-de-cmt-tbr', tooltipText: localValue.getConstant('New Comment'),\n                    text: localValue.getConstant('New Comment'), click: this.insertComment.bind(this)\n                },\n                {\n                    prefixIcon: 'e-de-nav-left-arrow e-de-cmt-tbr', align: 'Right',\n                    tooltipText: localValue.getConstant('Previous Comment'), click: this.navigatePreviousComment.bind(this)\n                },\n                {\n                    prefixIcon: 'e-de-nav-right-arrow e-de-cmt-tbr', align: 'Right',\n                    tooltipText: localValue.getConstant('Next Comment'), click: this.navigateNextComment.bind(this)\n                }\n            ],\n            enableRtl: this.owner.enableRtl\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        return this.toolbarElement;\n    };\n    CommentReviewPane.prototype.insertComment = function () {\n        if (this.owner && this.owner.editorModule) {\n            this.owner.editorModule.isUserInsert = true;\n            this.owner.editorModule.insertComment('');\n            this.owner.editorModule.isUserInsert = false;\n        }\n    };\n    CommentReviewPane.prototype.addComment = function (comment, isNewComment, selectComment) {\n        this.isNewComment = isNewComment;\n        this.selectReviewTab('Comments');\n        this.owner.documentHelper.currentSelectedComment = comment;\n        this.commentPane.insertComment(comment);\n        if (!isNewComment) {\n            var commentView = this.commentPane.comments.get(comment);\n            commentView.cancelEditing();\n            this.enableDisableToolbarItem();\n        }\n        if (selectComment) {\n            this.selectComment(comment);\n        }\n    };\n    CommentReviewPane.prototype.deleteComment = function (comment) {\n        if (this.commentPane) {\n            this.commentPane.deleteComment(comment);\n        }\n    };\n    CommentReviewPane.prototype.selectComment = function (comment) {\n        if (this.commentPane.isEditMode) {\n            return;\n        }\n        if (comment.isReply) {\n            comment = comment.ownerComment;\n        }\n        if (this.owner && this.owner.viewer && this.owner.documentHelper.currentSelectedComment !== comment) {\n            this.owner.documentHelper.currentSelectedComment = comment;\n        }\n        this.commentPane.selectComment(comment);\n    };\n    CommentReviewPane.prototype.resolveComment = function (comment) {\n        this.commentPane.resolveComment(comment);\n    };\n    CommentReviewPane.prototype.reopenComment = function (comment) {\n        this.commentPane.reopenComment(comment);\n    };\n    CommentReviewPane.prototype.addReply = function (comment, newComment, selectComment) {\n        this.isNewComment = newComment;\n        this.commentPane.insertReply(comment);\n        if (!newComment) {\n            var commentView = this.commentPane.comments.get(comment);\n            commentView.cancelEditing();\n            this.enableDisableToolbarItem();\n        }\n        if (selectComment) {\n            this.selectComment(comment.ownerComment);\n        }\n    };\n    CommentReviewPane.prototype.navigatePreviousComment = function () {\n        if (this.owner && this.owner.editorModule) {\n            this.owner.selectionModule.navigatePreviousComment();\n        }\n    };\n    CommentReviewPane.prototype.navigateNextComment = function () {\n        if (this.owner && this.owner.editorModule) {\n            this.owner.selectionModule.navigateNextComment();\n        }\n    };\n    CommentReviewPane.prototype.enableDisableItems = function () {\n        this.enableDisableToolbarItem();\n        var keys = this.commentPane.comments.keys;\n        for (var i = 0; i < keys.length; i++) {\n            var commentView = this.commentPane.comments.get(keys[i]);\n            if (this.owner.isReadOnly) {\n                if (!isNullOrUndefined(commentView.replyViewTextBox)) {\n                    commentView.replyViewTextBox.style.display = 'none';\n                }\n                commentView.menuBar.style.display = 'none';\n                if (commentView.resolveView) {\n                    commentView.resolveView.style.display = 'none';\n                }\n            }\n            else {\n                if (!isNullOrUndefined(commentView.replyViewTextBox)) {\n                    commentView.replyViewTextBox.style.display = 'block';\n                }\n                commentView.menuBar.style.display = 'block';\n                if (commentView.resolveView) {\n                    commentView.resolveView.style.display = '';\n                }\n            }\n        }\n    };\n    CommentReviewPane.prototype.enableDisableToolbarItem = function () {\n        if (this.toolbar) {\n            var enable = true;\n            if (this.commentPane.isEditMode) {\n                enable = !this.commentPane.isEditMode;\n            }\n            if (this.owner.isReadOnly) {\n                enable = !this.owner.isReadOnly;\n            }\n            var elements = this.toolbar.element.querySelectorAll('.' + 'e-de-cmt-tbr');\n            this.toolbar.enableItems(elements[0].parentElement.parentElement, enable);\n            if (enable && this.owner && this.owner.viewer) {\n                enable = !(this.owner.documentHelper.comments.length === 0);\n            }\n            this.toolbar.enableItems(elements[1].parentElement.parentElement, enable);\n            this.toolbar.enableItems(elements[2].parentElement.parentElement, enable);\n        }\n    };\n    CommentReviewPane.prototype.initCommentPane = function () {\n        this.commentPane = new CommentPane(this.owner, this);\n        this.commentPane.initCommentPane();\n    };\n    CommentReviewPane.prototype.layoutComments = function () {\n        for (var i = 0; i < this.owner.documentHelper.comments.length; i++) {\n            var comment = this.owner.documentHelper.comments[i];\n            if (this.isUnreferredComment(comment)) {\n                this.owner.documentHelper.comments.splice(i, 1);\n                i--;\n                continue;\n            }\n            for (var j = 0; j < comment.replyComments.length; j++) {\n                if (this.isUnreferredComment(comment.replyComments[j])) {\n                    comment.replyComments.splice(j, 1);\n                    j--;\n                }\n            }\n            this.commentPane.addComment(comment);\n        }\n    };\n    CommentReviewPane.prototype.isUnreferredComment = function (comment) {\n        if (isNullOrUndefined(comment.commentStart)\n            || isNullOrUndefined(comment.commentEnd)) {\n            return true;\n        }\n        return false;\n    };\n    CommentReviewPane.prototype.clear = function () {\n        this.previousSelectedCommentInt = undefined;\n        this.isNewComment = false;\n        this.isUserClosed = false;\n        this.isNewComment = false;\n        this.commentPane.clear();\n    };\n    CommentReviewPane.prototype.discardComment = function (comment) {\n        if (comment) {\n            if (this.owner.editorHistoryModule) {\n                if (this.owner.editorHistoryModule.undoStack.length > 0\n                    && this.owner.editorHistoryModule.undoStack[this.owner.editorHistoryModule.undoStack.length - 1].action === 'InsertComment') {\n                    this.owner.editorHistoryModule.undo();\n                    this.owner.editorHistoryModule.redoStack.pop();\n                }\n                this.owner.editorModule.isSkipOperationsBuild = this.owner.enableCollaborativeEditing;\n                this.owner.editorModule.deleteCommentInternal(comment);\n                this.owner.editorModule.isSkipOperationsBuild = false;\n            }\n            else if (this.owner.editorModule) {\n                this.owner.editorModule.deleteCommentInternal(comment);\n            }\n        }\n    };\n    CommentReviewPane.prototype.destroy = function () {\n        if (this.commentPane) {\n            this.commentPane.destroy();\n        }\n        this.commentPane = undefined;\n        if (this.toolbar) {\n            this.toolbar.destroy();\n        }\n        this.toolbar = undefined;\n        if (this.toolbarElement && this.toolbarElement.parentElement) {\n            this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n        }\n        this.toolbarElement = undefined;\n        if (this.headerContainer && this.headerContainer.parentElement) {\n            this.headerContainer.parentElement.removeChild(this.headerContainer);\n        }\n        this.headerContainer = undefined;\n        this.previousSelectedCommentInt = undefined;\n        if (this.reviewPane && this.reviewPane.parentElement) {\n            this.reviewPane.parentElement.removeChild(this.reviewPane);\n        }\n        if (!this.owner.isDestroyed) {\n            this.owner.off('reviewPane', this.reviewPaneHelper);\n        }\n        if (!isNullOrUndefined(this.reviewTab)) {\n            this.reviewTab.destroy();\n        }\n        this.reviewTab = undefined;\n        if (!isNullOrUndefined(this.confirmDialog)) {\n            this.confirmDialog.destroy();\n        }\n        this.confirmDialog = undefined;\n        if (!isNullOrUndefined(this.previousSelectedCommentInt)) {\n            this.previousSelectedCommentInt.destroy();\n        }\n        this.previousSelectedCommentInt = undefined;\n        if (this.reviewPane) {\n            this.reviewPane.innerHTML = '';\n            if (this.reviewPane.parentElement) {\n                this.reviewPane.parentElement.removeChild(this.reviewPane);\n            }\n        }\n        this.reviewPane = undefined;\n        if (this.parentPaneElement) {\n            this.parentPaneElement.innerHTML = '';\n            if (this.parentPaneElement.parentElement) {\n                this.parentPaneElement.parentElement.removeChild(this.parentPaneElement);\n            }\n        }\n        this.parentPaneElement = undefined;\n        this.owner = undefined;\n    };\n    return CommentReviewPane;\n}());\nexport { CommentReviewPane };\n/**\n * @private\n */\nvar CommentPane = /** @class */ (function () {\n    function CommentPane(owner, pane) {\n        this.isEditModeInternal = false;\n        this.isInsertingReply = false;\n        this.owner = owner;\n        this.parentPane = pane;\n        this.parent = pane.reviewPane;\n        this.comments = new Dictionary();\n    }\n    Object.defineProperty(CommentPane.prototype, \"isEditMode\", {\n        get: function () {\n            return this.isEditModeInternal;\n        },\n        set: function (value) {\n            this.isEditModeInternal = value;\n            var keys = this.comments.keys;\n            for (var i = 0; i < keys.length; i++) {\n                var commentView = this.comments.get(keys[i]);\n                if (value) {\n                    commentView.menuBar.style.display = 'none';\n                }\n                else if (!commentView.comment.isReply) {\n                    commentView.menuBar.style.display = 'block';\n                }\n            }\n            if (this.parentPane) {\n                this.parentPane.enableDisableToolbarItem();\n            }\n            if (this.owner) {\n                if (this.isEditModeInternal) {\n                    this.owner.trigger(commentBeginEvent);\n                }\n                else {\n                    this.owner.trigger(commentEndEvent);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommentPane.prototype.initCommentPane = function () {\n        this.commentPane = createElement('div', { className: 'e-de-cmt-container e-de-scrollbar-hide' });\n        var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n        localObj.setLocale(this.owner.locale);\n        this.noCommentIndicator = createElement('div', {\n            className: 'e-de-cmt-no-cmt',\n            innerHTML: localObj.getConstant('No comments in this document')\n        });\n        this.commentPane.appendChild(this.noCommentIndicator);\n        this.parent.appendChild(this.commentPane);\n    };\n    CommentPane.prototype.addComment = function (comment) {\n        var commentView = new CommentView(this.owner, this, comment);\n        var commentParent = commentView.layoutComment(false);\n        this.comments.add(comment, commentView);\n        this.commentPane.appendChild(commentParent);\n        for (var i = 0; i < comment.replyComments.length; i++) {\n            var replyView = new CommentView(this.owner, this, comment.replyComments[i]);\n            this.comments.add(comment.replyComments[i], replyView);\n            commentParent.insertBefore(replyView.layoutComment(true), commentView.replyViewContainer);\n        }\n        this.updateCommentStatus();\n        commentView.hideDrawer();\n    };\n    CommentPane.prototype.updateHeight = function () {\n        var tabHeaderHeight = this.parentPane.reviewTab.getRootElement().getElementsByClassName('e-tab-header')[0].getBoundingClientRect().height;\n        this.commentPane.style.height = this.parentPane.parentPaneElement.clientHeight - this.parentPane.headerContainer.clientHeight - tabHeaderHeight + 'px';\n    };\n    CommentPane.prototype.insertReply = function (replyComment) {\n        var parentComment = replyComment.ownerComment;\n        var parentView = this.comments.get(parentComment);\n        var replyView = new CommentView(this.owner, this, replyComment);\n        this.comments.add(replyComment, replyView);\n        var replyElement = replyView.layoutComment(true);\n        var replyIndex = parentComment.replyComments.indexOf(replyComment);\n        if (replyIndex === parentComment.replyComments.length - 1) {\n            parentView.parentElement.insertBefore(replyElement, parentView.replyViewContainer);\n        }\n        else {\n            var nextReply = parentComment.replyComments[replyIndex + 1];\n            parentView.parentElement.insertBefore(replyElement, this.comments.get(nextReply).parentElement);\n        }\n        replyView.editComment();\n    };\n    CommentPane.prototype.insertComment = function (comment) {\n        var commentView = new CommentView(this.owner, this, comment);\n        var commentParent = commentView.layoutComment(false);\n        this.comments.add(comment, commentView);\n        if (this.owner.documentHelper.comments.indexOf(comment) === this.owner.documentHelper.comments.length - 1) {\n            this.commentPane.appendChild(commentParent);\n        }\n        else {\n            var index = this.owner.documentHelper.comments.indexOf(comment);\n            var element = this.comments.get(this.owner.documentHelper.comments[index + 1]).parentElement;\n            this.commentPane.insertBefore(commentParent, element);\n            commentParent.focus();\n        }\n        this.updateCommentStatus();\n        commentView.editComment();\n    };\n    CommentPane.prototype.removeSelectionMark = function (className) {\n        if (this.parent) {\n            var elements = this.parent.getElementsByClassName(className);\n            for (var i = 0; i < elements.length; i++) {\n                classList(elements[i], [], [className]);\n            }\n        }\n    };\n    CommentPane.prototype.selectComment = function (comment) {\n        this.removeSelectionMark('e-de-cmt-selection');\n        if (comment.isReply) {\n            comment = comment.ownerComment;\n        }\n        if (comment) {\n            this.owner.notify('reviewPane', { comment: true, changes: this.owner.trackChangesPane.isChangesTabVisible });\n            var commentView = this.comments.get(comment);\n            var selectedElement = commentView.parentElement;\n            if (selectedElement) {\n                classList(selectedElement, ['e-de-cmt-selection'], []);\n                selectedElement.focus();\n            }\n            var commentStart = this.getCommentStart(comment);\n            if (!commentStart.commentMark) {\n                commentStart.renderCommentMark();\n            }\n            classList(commentStart.commentMark, ['e-de-cmt-mark-selected'], []);\n            commentView.showDrawer();\n        }\n    };\n    CommentPane.prototype.getCommentStart = function (comment) {\n        var localValue = new L10n('documenteditor', this.owner.defaultLocale);\n        localValue.setLocale(this.owner.locale);\n        var commentStart = undefined;\n        if (comment && comment.commentStart) {\n            commentStart = comment.commentStart;\n        }\n        if (commentStart.commentMark !== undefined) {\n            commentStart.commentMark.title = localValue.getConstant('Click to see this comment');\n        }\n        return this.getFirstCommentInLine(commentStart);\n    };\n    CommentPane.prototype.getFirstCommentInLine = function (commentStart) {\n        for (var i = 0; i < commentStart.line.children.length; i++) {\n            var startComment = commentStart.line.children[i];\n            if (startComment instanceof CommentCharacterElementBox && startComment.commentType === 0) {\n                return startComment;\n            }\n        }\n        return commentStart;\n    };\n    CommentPane.prototype.deleteComment = function (comment) {\n        var commentView = this.comments.get(comment);\n        if (!isNullOrUndefined(commentView)) {\n            if (!isNullOrUndefined(this.currentEditingComment)\n                && commentView.comment.commentId == this.currentEditingComment.comment.commentId) {\n                this.isEditMode = false;\n                this.currentEditingComment = undefined;\n            }\n            if (commentView.parentElement && commentView.parentElement.parentElement) {\n                commentView.parentElement.parentElement.removeChild(commentView.parentElement);\n            }\n            //this.commentPane.removeChild();\n            for (var i = 0; i < comment.replyComments.length; i++) {\n                var replyCmt = comment.replyComments[i];\n                if (this.comments.containsKey(replyCmt)) {\n                    this.comments.remove(replyCmt);\n                }\n            }\n            this.comments.remove(comment);\n            commentView.destroy();\n        }\n        this.updateCommentStatus();\n    };\n    CommentPane.prototype.resolveComment = function (comment) {\n        var commentView = this.comments.get(comment);\n        if (commentView) {\n            commentView.resolveComment();\n        }\n    };\n    CommentPane.prototype.reopenComment = function (comment) {\n        var commentView = this.comments.get(comment);\n        if (commentView) {\n            commentView.reopenComment();\n        }\n    };\n    CommentPane.prototype.updateCommentStatus = function () {\n        if (this.owner.documentHelper.comments.length === 0) {\n            if (!this.noCommentIndicator.parentElement) {\n                this.commentPane.appendChild(this.noCommentIndicator);\n            }\n            this.noCommentIndicator.style.display = 'block';\n            this.parentPane.isCommentTabVisible = false;\n            this.owner.notify('reviewPane', { comment: false, changes: this.owner.trackChangesPane.isChangesTabVisible });\n            this.parentPane.reviewTab.hideTab(0);\n        }\n        else if (this.owner.showComments) {\n            this.parentPane.isCommentTabVisible = true;\n            this.noCommentIndicator.style.display = 'none';\n            this.owner.notify('reviewPane', { comment: true, changes: this.owner.trackChangesPane.isChangesTabVisible });\n            this.parentPane.reviewTab.hideTab(0, false);\n        }\n        if (this.parentPane) {\n            this.parentPane.enableDisableToolbarItem();\n        }\n    };\n    CommentPane.prototype.clear = function () {\n        this.isEditMode = false;\n        this.currentEditingComment = undefined;\n        this.isInsertingReply = false;\n        this.removeChildElements();\n        this.commentPane.innerHTML = '';\n        this.updateCommentStatus();\n    };\n    CommentPane.prototype.removeChildElements = function () {\n        var comments = this.comments.keys;\n        for (var i = 0; i < comments.length; i++) {\n            this.comments.get(comments[i]).destroy();\n        }\n        this.comments.clear();\n    };\n    CommentPane.prototype.destroy = function () {\n        this.removeChildElements();\n        if (this.noCommentIndicator && this.noCommentIndicator) {\n            this.noCommentIndicator.parentElement.removeChild(this.noCommentIndicator);\n        }\n        this.noCommentIndicator = undefined;\n        if (this.commentPane) {\n            this.commentPane.innerHTML = '';\n            if (this.commentPane.parentElement) {\n                this.commentPane.parentElement.removeChild(this.commentPane);\n            }\n        }\n        this.commentPane = undefined;\n        if (this.parent) {\n            this.parent.innerHTML = '';\n            if (this.parent.parentElement) {\n                this.parent.parentElement.removeChild(this.parent);\n            }\n        }\n        this.parent = undefined;\n        this.parentPane = undefined;\n        this.currentEditingComment = undefined;\n        this.owner = undefined;\n    };\n    return CommentPane;\n}());\nexport { CommentPane };\n/**\n * @private\n */\nvar CommentView = /** @class */ (function () {\n    function CommentView(owner, commentPane, comment) {\n        this.isReply = false;\n        this.isDrawerExpand = false;\n        this.itemData = [];\n        this.owner = owner;\n        this.comment = comment;\n        this.commentPane = commentPane;\n    }\n    CommentView.prototype.layoutComment = function (isReply) {\n        this.isReply = isReply;\n        var classList = 'e-de-cmt-sub-container';\n        if (isReply) {\n            classList += ' e-de-cmt-reply';\n        }\n        var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n        localObj.setLocale(this.owner.locale);\n        this.parentElement = createElement('div', { className: classList });\n        this.initCommentHeader(localObj);\n        this.initCommentView(localObj);\n        this.initDateView();\n        if (!this.comment.isReply) {\n            this.parentElement.tabIndex = 0;\n            this.initReplyView(localObj);\n            this.initResolveOption(localObj);\n            this.initDrawer();\n            if (this.comment.isResolved) {\n                this.resolveComment();\n            }\n        }\n        else {\n            this.menuBar.style.display = 'none';\n        }\n        this.commentView.addEventListener('mouseenter', this.showMenuItems.bind(this));\n        this.commentView.addEventListener('mouseleave', this.hideMenuItemOnMouseLeave.bind(this));\n        return this.parentElement;\n    };\n    CommentView.prototype.initCommentHeader = function (localObj) {\n        var commentDiv = createElement('div', { className: 'e-de-cmt-view' });\n        this.resolveDiv = createElement('div', { className: 'e-de-cmt-view' });\n        var wrapperDiv = createElement('div', { className: 'e-de-cmt-view' });\n        var roundIcon = createElement('div', { className: 'e-de-resolve-mark' });\n        var span = createElement('span', { className: 'e-de e-icons e-check' });\n        var resolveText = createElement('span', { className: '' });\n        resolveText.innerHTML = \"Resolved\";\n        span.style.display = 'inline-block';\n        roundIcon.style.display = 'flex';\n        roundIcon.style.justifyContent = 'center';\n        roundIcon.style.alignItems = 'center';\n        roundIcon.style.width = \"20px\";\n        roundIcon.style.height = \"20px\";\n        roundIcon.style.borderRadius = \"100%\";\n        roundIcon.style.marginRight = \"6px\";\n        roundIcon.appendChild(span);\n        wrapperDiv.appendChild(roundIcon);\n        wrapperDiv.appendChild(resolveText);\n        this.resolveDiv.appendChild(wrapperDiv);\n        wrapperDiv.style.display = \"flex\";\n        this.resolveDiv.style.display = \"none\";\n        var commentUserInfo = createElement('div', { className: 'e-de-cmt-author' });\n        commentUserInfo.style.marginTop = \"8px\";\n        var userName = createElement('div', { className: 'e-de-cmt-author-name' });\n        userName.textContent = this.comment.author;\n        if (!isNullOrUndefined(this.comment.author)) {\n            commentUserInfo.style.display = 'flex';\n            this.owner.documentHelper.getAvatar(commentUserInfo, userName, this.comment, undefined);\n        }\n        // commentUserInfo.appendChild(this.resolveDiv);\n        //if (this.comment.author === this.owner.currentUser) {\n        this.menuBar = createElement('button', { className: 'e-de-cp-option', attrs: { type: 'button' } });\n        var userOption = [{ text: localObj.getConstant('Edit') },\n            { text: localObj.getConstant('Delete') },\n            { text: localObj.getConstant('Reply') },\n            { text: localObj.getConstant('Resolve') }];\n        var menuItem = new DropDownButton({\n            items: this.isReply ? userOption.splice(0, 2) : userOption,\n            select: this.userOptionSelectEvent.bind(this),\n            iconCss: 'e-de-menu-icon',\n            cssClass: 'e-caret-hide',\n            enableRtl: this.owner.enableRtl\n        });\n        this.menuBar.title = localObj.getConstant('More Options') + '...';\n        menuItem.appendTo(this.menuBar);\n        commentUserInfo.appendChild(this.menuBar);\n        this.dropDownButton = menuItem;\n        commentDiv.appendChild(commentUserInfo);\n        this.commentView = commentDiv;\n        this.parentElement.appendChild(commentDiv);\n        commentDiv.addEventListener('click', this.selectComment.bind(this));\n    };\n    CommentView.prototype.selectComment = function () {\n        if (this.commentPane) {\n            if (!this.commentPane.isEditMode) {\n                this.owner.selectionModule.selectComment(this.comment);\n            }\n            else if (this.commentPane.isEditMode && this.commentPane.isInsertingReply\n                && this.commentPane.currentEditingComment && this.commentPane.currentEditingComment.replyViewTextBox.innerText === '') {\n                var comment = this.comment;\n                if (comment && comment.isReply) {\n                    comment = this.comment.ownerComment;\n                }\n                if (comment && this.owner.documentHelper.currentSelectedComment === comment) {\n                    return;\n                }\n                this.commentPane.currentEditingComment.cancelReply();\n                this.owner.selectionModule.selectComment(this.comment);\n            }\n        }\n    };\n    CommentView.prototype.initCommentView = function (localObj) {\n        this.commentText = createElement('div', { className: 'e-de-cmt-readonly e-mention' });\n        var text = this.comment.text;\n        if (this.comment.mentions && this.comment.mentions.length > 0) {\n            var comment = this.comment;\n            text = comment.mentions[0].Span ? comment.mentions[0].Span + this.comment.text.replace(comment.mentions[0].Name, \"\") : comment.text;\n        }\n        this.comment.text = text;\n        this.commentText.innerHTML = text;\n        this.commentView.appendChild(this.commentText);\n        this.initEditView(localObj);\n    };\n    CommentView.prototype.initEditView = function (localObj) {\n        this.textAreaContainer = createElement('div', { styles: 'display:none' });\n        this.textArea = createElement('div', { className: 'e-de-cmt-textarea e-input' });\n        this.textArea.style.borderWidth = '0 0 1px 0';\n        this.textArea.setAttribute('placeholder', localObj.getConstant('Type your comment here'));\n        this.editMention = new Mention({\n            dataSource: this.owner.documentEditorSettings.mentionSettings.dataSource,\n            fields: this.owner.documentEditorSettings.mentionSettings.fields,\n            select: this.onSelect.bind(this),\n        });\n        this.textArea.innerHTML = this.comment.text;\n        this.textArea.addEventListener('keydown', this.updateTextAreaHeight.bind(this));\n        this.textArea.addEventListener('keyup', this.enableDisablePostButton.bind(this));\n        var editRegionFooter = createElement('div', { className: 'e-de-cmt-action-button' });\n        var postButton = createElement('button', { className: 'e-de-cmt-post-btn e-btn e-flat', attrs: { type: 'button' } });\n        this.postButton = new Button({ cssClass: 'e-btn e-flat e-primary e-de-overlay', iconCss: 'e-de-cmt-post', disabled: true }, postButton);\n        postButton.addEventListener('click', this.postComment.bind(this));\n        postButton.title = localObj.getConstant('Post');\n        postButton.setAttribute('aria-label', localObj.getConstant('Post'));\n        var cancelButton = createElement('button', {\n            className: 'e-de-cmt-cancel-btn e-btn e-flat',\n            attrs: { type: 'button' }\n        });\n        this.cancelButton = new Button({ cssClass: 'e-btn e-flat', iconCss: 'e-de-cmt-cancel' }, cancelButton);\n        cancelButton.title = localObj.getConstant('Cancel');\n        cancelButton.setAttribute('aria-label', localObj.getConstant('Cancel'));\n        cancelButton.addEventListener('click', this.cancelEditing.bind(this));\n        editRegionFooter.appendChild(postButton);\n        editRegionFooter.appendChild(cancelButton);\n        this.textAreaContainer.appendChild(this.textArea);\n        this.textAreaContainer.appendChild(editRegionFooter);\n        this.commentView.appendChild(this.textAreaContainer);\n        this.editMention.appendTo(this.textArea);\n    };\n    CommentView.prototype.onSelect = function (e) {\n        this.itemData.push(e.itemData);\n    };\n    CommentView.prototype.initDateView = function () {\n        this.commentDate = createElement('div', { className: 'e-de-cmt-date' });\n        this.commentDate.innerText = HelperMethods.getModifiedDate(this.comment.date);\n        this.commentView.appendChild(this.commentDate);\n    };\n    CommentView.prototype.initDrawer = function () {\n        this.drawerElement = createElement('div', { styles: 'display:none;', className: 'e-de-cmt-drawer-cnt' });\n        var leftPane = createElement('div', { className: 'e-de-cmt-drawer' });\n        var spanElement = createElement('span');\n        leftPane.appendChild(spanElement);\n        this.drawerElement.appendChild(leftPane);\n        this.drawerSpanElement = spanElement;\n        this.drawerAction = leftPane;\n        this.drawerAction.addEventListener('click', this.showOrHideDrawer.bind(this));\n        this.parentElement.appendChild(this.drawerElement);\n    };\n    CommentView.prototype.initReplyView = function (localObj) {\n        this.replyViewContainer = createElement('div', { className: 'e-de-cmt-rply-view' });\n        if (this.commentPane.parentPane.isNewComment) {\n            this.replyViewContainer.style.display = 'none';\n        }\n        this.replyViewTextBox = createElement('div', { className: 'e-de-cmt-textarea e-input' });\n        this.replyViewTextBox.style.borderWidth = '0 0 1px 0';\n        this.replyViewTextBox.setAttribute(\"placeholder\", localObj.getConstant('Reply'));\n        this.replyViewTextBox.addEventListener('click', this.enableReplyView.bind(this));\n        this.replyViewTextBox.addEventListener('keydown', this.updateReplyTextAreaHeight.bind(this));\n        this.replyViewTextBox.addEventListener('keyup', this.enableDisableReplyPostButton.bind(this));\n        var editRegionFooter = createElement('div', { styles: 'display:none', className: 'e-de-cmt-action-button' });\n        var postButton = createElement('button', { className: 'e-de-cmt-post-btn e-de-overlay e-btn e-flat', attrs: { type: 'button' } });\n        this.replyPostButton = new Button({ cssClass: 'e-btn e-flat e-primary', iconCss: 'e-de-cmt-post', disabled: true }, postButton);\n        this.replyMention = new Mention({\n            dataSource: this.owner.documentEditorSettings.mentionSettings.dataSource,\n            fields: this.owner.documentEditorSettings.mentionSettings.fields,\n            select: this.onSelect.bind(this),\n        });\n        postButton.addEventListener('click', this.postReply.bind(this));\n        postButton.title = localObj.getConstant('Post');\n        var cancelButton = createElement('button', {\n            className: 'e-de-cmt-cancel-btn e-btn e-flat',\n            attrs: { type: 'button' }\n        });\n        cancelButton.setAttribute('aria-label', localObj.getConstant('Cancel'));\n        this.replyCancelButton = new Button({ cssClass: 'e-btn e-flat', iconCss: 'e-de-cmt-cancel' }, cancelButton);\n        cancelButton.addEventListener('click', this.cancelReply.bind(this));\n        cancelButton.title = localObj.getConstant('Cancel');\n        editRegionFooter.appendChild(postButton);\n        editRegionFooter.appendChild(cancelButton);\n        this.replyFooter = editRegionFooter;\n        this.replyViewContainer.appendChild(this.replyViewTextBox);\n        this.replyViewContainer.appendChild(editRegionFooter);\n        this.parentElement.appendChild(this.replyViewContainer);\n        this.replyMention.appendTo(this.replyViewTextBox);\n    };\n    CommentView.prototype.initResolveOption = function (localObj) {\n        var editRegionFooter = createElement('div', { className: 'e-de-cmt-resolve-btn' });\n        var wrapperFooterDiv = createElement('div', { className: 'e-de-cmt-resolve-btn' });\n        var reopenDeleteWrapper = createElement('div', { className: 'e-de-cmt-resolve-btn' });\n        var postButton = createElement('button', { className: 'e-de-cmt-post-btn e-btn e-flat', attrs: { type: 'button' } });\n        this.reopenButton = new Button({ cssClass: 'e-btn e-flat', iconCss: 'e-de-cmt-reopen' }, postButton);\n        postButton.title = localObj.getConstant('Reopen');\n        postButton.setAttribute('aria-label', localObj.getConstant('Reopen'));\n        postButton.addEventListener('click', this.reopenButtonClick.bind(this));\n        var cancelButton = createElement('button', {\n            className: 'e-de-cmt-cancel-btn e-btn e-flat',\n            attrs: { type: 'button' }\n        });\n        cancelButton.title = localObj.getConstant('Delete');\n        cancelButton.setAttribute('aria-label', localObj.getConstant('Delete'));\n        this.deleteButton = new Button({ cssClass: 'e-btn e-flat', iconCss: 'e-de-cmt-delete' }, cancelButton);\n        cancelButton.addEventListener('click', this.deleteComment.bind(this));\n        editRegionFooter.appendChild(postButton);\n        editRegionFooter.appendChild(cancelButton);\n        wrapperFooterDiv.appendChild(this.resolveDiv);\n        reopenDeleteWrapper.appendChild(postButton);\n        reopenDeleteWrapper.appendChild(cancelButton);\n        editRegionFooter.appendChild(wrapperFooterDiv);\n        wrapperFooterDiv.appendChild(reopenDeleteWrapper);\n        wrapperFooterDiv.style.display = \"flex\";\n        wrapperFooterDiv.style.justifyContent = \"space-between\";\n        wrapperFooterDiv.style.alignItems = \"center\";\n        reopenDeleteWrapper.style.display = \"flex\";\n        reopenDeleteWrapper.style.marginTop = \"0px\";\n        this.resolveView = editRegionFooter;\n        this.parentElement.appendChild(editRegionFooter);\n    };\n    CommentView.prototype.reopenButtonClick = function () {\n        this.owner.editorModule.reopenComment(this.comment);\n    };\n    CommentView.prototype.deleteComment = function () {\n        var eventArgs = { author: this.comment.author, cancel: false };\n        this.owner.trigger(commentDeleteEvent, eventArgs);\n        var eventActionArgs = { author: this.comment.author, cancel: eventArgs.cancel, type: 'Delete' };\n        this.owner.trigger(beforeCommentActionEvent, eventActionArgs);\n        if (eventActionArgs.cancel) {\n            return;\n        }\n        this.owner.editorModule.deleteCommentInternal(this.comment);\n        if (eventArgs.cancel) {\n            return;\n        }\n    };\n    CommentView.prototype.updateReplyTextAreaHeight = function () {\n        var _this = this;\n        setTimeout(function () {\n            if (!isNullOrUndefined(_this.replyViewTextBox)) {\n                _this.replyViewTextBox.style.height = 'auto';\n                var scrollHeight = _this.replyViewTextBox.scrollHeight;\n                _this.replyViewTextBox.style.height = scrollHeight + 'px';\n            }\n        });\n    };\n    CommentView.prototype.enableDisableReplyPostButton = function () {\n        this.replyPostButton.disabled = this.replyViewTextBox.innerText === '';\n        if (this.replyPostButton.disabled) {\n            classList(this.replyPostButton.element, ['e-de-overlay'], []);\n        }\n        else if (this.replyPostButton.element.classList.contains('e-de-overlay')) {\n            classList(this.replyPostButton.element, [], ['e-de-overlay']);\n        }\n    };\n    CommentView.prototype.enableReplyView = function () {\n        var _this = this;\n        var eventArgs = { author: this.comment.author, cancel: false, type: 'Reply' };\n        this.owner.trigger(beforeCommentActionEvent, eventArgs);\n        if (eventArgs.cancel && eventArgs.type === 'Reply') {\n            return;\n        }\n        if (this.commentPane.isEditMode) {\n            return;\n        }\n        this.commentPane.currentEditingComment = this;\n        this.commentPane.isInsertingReply = true;\n        if (this.owner.documentHelper.currentSelectedComment !== this.comment) {\n            this.owner.selectionModule.selectComment(this.comment);\n        }\n        this.commentPane.isEditMode = true;\n        //this.replyViewTextBox.readOnly = false;\n        this.replyFooter.style.display = 'block';\n        setTimeout(function () {\n            _this.replyViewTextBox.focus();\n        });\n    };\n    CommentView.prototype.postReply = function () {\n        var replyText = (this.replyViewTextBox.innerHTML);\n        this.cancelReply();\n        this.updateReplyTextAreaHeight();\n        this.owner.editorModule.replyComment(this.comment, replyText, this.itemData);\n        if (!this.owner.editorModule.isSkipOperationsBuild && !this.owner.editorModule.isRemoteAction) {\n            this.owner.fireContentChange();\n        }\n        this.owner.editorModule.isSkipOperationsBuild = false;\n    };\n    CommentView.prototype.cancelReply = function () {\n        this.commentPane.currentEditingComment = undefined;\n        this.commentPane.isInsertingReply = true;\n        this.commentPane.isEditMode = false;\n        this.replyPostButton.disabled = true;\n        this.replyViewTextBox.innerText = '';\n        // this.replyViewTextBox.readOnly = true;\n        this.replyFooter.style.display = 'none';\n    };\n    CommentView.prototype.updateTextAreaHeight = function () {\n        var _this = this;\n        setTimeout(function () {\n            if (!isNullOrUndefined(_this.textArea)) {\n                _this.textArea.style.height = 'auto';\n                var scrollHeight = _this.textArea.scrollHeight;\n                _this.textArea.style.height = scrollHeight + 'px';\n            }\n        });\n    };\n    CommentView.prototype.showMenuItems = function () {\n        if (this.comment.isReply && !this.owner.isReadOnly) {\n            if (!this.commentPane.isEditMode && (!isNullOrUndefined(this.comment) && !this.comment.isResolved)) {\n                this.menuBar.style.display = 'block';\n            }\n        }\n        var commentStart = this.commentPane.getCommentStart(this.comment);\n        if (!isNullOrUndefined(commentStart) && !isNullOrUndefined(commentStart.commentMark)) {\n            commentStart.commentMark.classList.add('e-de-cmt-mark-hover');\n        }\n    };\n    CommentView.prototype.hideMenuItemOnMouseLeave = function () {\n        if (this.comment.isReply) {\n            if (this.owner.documentHelper.currentSelectedComment !== this.comment.ownerComment) {\n                this.hideMenuItems();\n            }\n        }\n        if (this.commentPane) {\n            var commentStart = this.commentPane.getCommentStart(this.comment);\n            if (!isNullOrUndefined(commentStart) && !isNullOrUndefined(commentStart.commentMark)) {\n                commentStart.commentMark.classList.remove('e-de-cmt-mark-hover');\n            }\n        }\n    };\n    CommentView.prototype.hideMenuItems = function () {\n        this.menuBar.style.display = 'none';\n    };\n    CommentView.prototype.enableDisablePostButton = function () {\n        this.postButton.disabled = this.textArea.innerText === '';\n        if (this.postButton.disabled) {\n            classList(this.postButton.element, ['e-de-overlay'], []);\n        }\n        else if (this.postButton.element.classList.contains('e-de-overlay')) {\n            classList(this.postButton.element, [], ['e-de-overlay']);\n        }\n    };\n    CommentView.prototype.editComment = function () {\n        var _this = this;\n        var eventArgs = { author: this.comment.author, cancel: false, type: 'Edit' };\n        this.owner.trigger(beforeCommentActionEvent, eventArgs);\n        if (eventArgs.cancel && eventArgs.type === 'Edit') {\n            return;\n        }\n        this.commentPane.currentEditingComment = this;\n        this.commentPane.isInsertingReply = false;\n        this.commentPane.isEditMode = true;\n        this.commentText.style.display = 'none';\n        this.textAreaContainer.style.display = 'block';\n        this.commentDate.style.display = 'none';\n        this.menuBar.style.display = 'none';\n        this.updateTextAreaHeight();\n        setTimeout(function () {\n            if (_this.textArea) {\n                _this.textArea.focus();\n            }\n        });\n    };\n    CommentView.prototype.resolveComment = function () {\n        classList(this.parentElement, ['e-de-cmt-resolved'], []);\n        this.resolveDiv.style.display = \"inline\";\n        var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n        localObj.setLocale(this.owner.locale);\n        this.dropDownButton.items = [{ text: localObj.getConstant('Reopen') }, { text: localObj.getConstant('Delete') }];\n    };\n    CommentView.prototype.reopenComment = function () {\n        classList(this.parentElement, [], ['e-de-cmt-resolved']);\n        this.resolveDiv.style.display = \"none\";\n        var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n        localObj.setLocale(this.owner.locale);\n        this.dropDownButton.items = [{ text: localObj.getConstant('Edit') },\n            { text: localObj.getConstant('Delete') },\n            { text: localObj.getConstant('Reply') },\n            { text: localObj.getConstant('Resolve') }];\n        this.showDrawer();\n    };\n    CommentView.prototype.postComment = function () {\n        if (this.itemData) {\n            this.comment.mentions = this.itemData;\n            this.itemData = [];\n        }\n        var eventArgs = { author: this.comment.author, cancel: false, type: 'Post', text: this.textArea.innerText, mentions: this.comment.mentions };\n        this.owner.trigger(beforeCommentActionEvent, eventArgs);\n        if (eventArgs.cancel && eventArgs.type === 'Post') {\n            return;\n        }\n        var updatedText = (this.textArea.innerHTML);\n        if (this.owner.editorModule && this.comment.text != '' && (this.comment.text != updatedText)) {\n            this.owner.editorModule.initHistory('EditComment');\n            var modifiedObject = {\n                commentId: this.comment.commentId,\n                text: this.comment.text\n            };\n            this.owner.editorHistoryModule.currentBaseHistoryInfo.modifiedProperties.push(modifiedObject);\n            this.owner.editorHistoryModule.currentBaseHistoryInfo.removedNodes.push(this.comment);\n            this.owner.editorHistoryModule.updateHistory();\n        }\n        this.commentText.innerHTML = updatedText;\n        this.comment.text = updatedText;\n        this.showCommentView();\n        if (this.commentPane && this.commentPane.parentPane) {\n            this.commentPane.parentPane.isNewComment = false;\n        }\n        if (!isNullOrUndefined(this.replyViewContainer)) {\n            this.replyViewContainer.style.display = '';\n        }\n        if (!this.owner.editorModule.isSkipOperationsBuild && !this.owner.editorModule.isRemoteAction) {\n            this.owner.fireContentChange();\n        }\n    };\n    CommentView.prototype.showCommentView = function () {\n        this.commentPane.isEditMode = false;\n        this.textAreaContainer.style.display = 'none';\n        this.commentText.style.display = 'block';\n        this.commentDate.style.display = 'block';\n        this.menuBar.style.display = 'block';\n    };\n    CommentView.prototype.cancelEditing = function () {\n        this.showCommentView();\n        this.textArea.innerHTML = this.comment.text.trim();\n        if (this.commentPane.parentPane.isNewComment) {\n            if (this.commentPane && this.commentPane.parentPane) {\n                this.commentPane.parentPane.isNewComment = false;\n            }\n            var documentEditor = this.owner;\n            documentEditor.editorModule.isSkipOperationsBuild = this.owner.enableCollaborativeEditing;\n            this.commentPane.parentPane.discardComment(this.comment);\n            documentEditor.editorModule.isSkipOperationsBuild = false;\n        }\n    };\n    CommentView.prototype.showOrHideDrawer = function () {\n        if (this.isDrawerExpand) {\n            this.hideDrawer();\n        }\n        else {\n            this.showDrawer();\n        }\n    };\n    CommentView.prototype.hideDrawer = function () {\n        if (this.parentElement) {\n            var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n            localObj.setLocale(this.owner.locale);\n            var elements = this.parentElement.getElementsByClassName('e-de-cmt-sub-container');\n            if (elements.length > 1) {\n                for (var i = 1; i < elements.length; i++) {\n                    elements[i].style.display = 'none';\n                }\n                this.drawerElement.style.display = 'block';\n                classList(this.drawerSpanElement, [], ['e-de-nav-up']);\n                this.drawerSpanElement.innerText = '+' + (elements.length - 1) + ' ' + localObj.getConstant('more') + '...';\n            }\n            this.isDrawerExpand = false;\n        }\n    };\n    CommentView.prototype.showDrawer = function () {\n        if (this.parentElement) {\n            var elements = this.parentElement.getElementsByClassName('e-de-cmt-sub-container');\n            if (elements.length > 1) {\n                for (var i = 0; i < elements.length; i++) {\n                    elements[i].style.display = 'block';\n                }\n                this.drawerElement.style.display = 'block';\n                this.drawerSpanElement.innerText = '';\n                classList(this.drawerSpanElement, ['e-de-nav-up'], []);\n            }\n            this.isDrawerExpand = true;\n        }\n    };\n    CommentView.prototype.userOptionSelectEvent = function (event) {\n        var selectedItem = event.item.text;\n        var localObj = new L10n('documenteditor', this.owner.defaultLocale);\n        localObj.setLocale(this.owner.locale);\n        switch (selectedItem) {\n            case localObj.getConstant('Edit'):\n                this.editComment();\n                break;\n            case localObj.getConstant('Reply'):\n                this.enableReplyView();\n                break;\n            case localObj.getConstant('Delete'):\n                this.deleteComment();\n                break;\n            case localObj.getConstant('Resolve'):\n                this.owner.editorModule.resolveComment(this.comment);\n                break;\n            case localObj.getConstant('Reopen'):\n                this.owner.editorModule.reopenComment(this.comment);\n        }\n    };\n    CommentView.prototype.unwireEvent = function () {\n        if (this.drawerAction) {\n            this.drawerAction.removeEventListener('click', this.showOrHideDrawer.bind(this));\n        }\n        if (this.textArea) {\n            this.textArea.removeEventListener('keydown', this.updateTextAreaHeight.bind(this));\n            this.textArea.removeEventListener('keyup', this.enableDisablePostButton.bind(this));\n        }\n        if (this.postButton) {\n            this.postButton.removeEventListener('click', this.postComment.bind(this));\n        }\n        if (this.cancelButton) {\n            this.cancelButton.removeEventListener('click', this.cancelEditing.bind(this));\n        }\n        if (this.commentView) {\n            this.commentView.removeEventListener('click', this.selectComment.bind(this));\n            this.commentView.removeEventListener('mouseenter', this.showMenuItems.bind(this));\n            this.commentView.removeEventListener('mouseleave', this.hideMenuItemOnMouseLeave.bind(this));\n        }\n    };\n    CommentView.prototype.destroy = function () {\n        this.unwireEvent();\n        if (this.comment) {\n            this.comment = undefined;\n        }\n        if (this.dropDownButton) {\n            this.dropDownButton.destroy();\n        }\n        this.dropDownButton = undefined;\n        if (this.postButton) {\n            this.postButton.destroy();\n        }\n        this.postButton = undefined;\n        if (this.cancelButton) {\n            this.cancelButton.destroy();\n        }\n        this.cancelButton = undefined;\n        if (this.replyPostButton) {\n            this.replyPostButton.destroy();\n            this.replyPostButton = undefined;\n        }\n        if (this.replyCancelButton) {\n            this.replyCancelButton.destroy();\n            this.replyCancelButton = undefined;\n        }\n        if (this.reopenButton) {\n            this.reopenButton.destroy();\n            this.reopenButton = undefined;\n        }\n        if (this.deleteButton) {\n            this.deleteButton.destroy();\n            this.deleteButton = undefined;\n        }\n        if (this.parentElement) {\n            this.parentElement.innerHTML = '';\n            if (this.parentElement.parentElement) {\n                this.parentElement.parentElement.removeChild(this.parentElement);\n            }\n        }\n        this.parentElement = undefined;\n        if (this.commentView) {\n            this.commentView.innerHTML = '';\n            if (this.commentView.parentElement) {\n                this.commentView.parentElement.removeChild(this.commentView);\n            }\n        }\n        this.commentView = undefined;\n        this.replyViewContainer = undefined;\n        this.replyViewTextBox = undefined;\n        this.replyFooter = undefined;\n        this.resolveView = undefined;\n        this.menuBar = undefined;\n        this.drawerAction = undefined;\n        this.commentText = undefined;\n        this.commentDate = undefined;\n        this.textAreaContainer = undefined;\n        this.textArea = undefined;\n        this.drawerElement = undefined;\n        this.drawerSpanElement = undefined;\n        this.commentPane = undefined;\n        this.owner = undefined;\n    };\n    return CommentView;\n}());\nexport { CommentView };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}