{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable max-len */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding, Location } from '../model/base';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the legends in charts.\n */\nvar LegendSettings = /** @class */function (_super) {\n  __extends(LegendSettings, _super);\n  function LegendSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate([Property(true)], LegendSettings.prototype, \"visible\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"height\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"width\", void 0);\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, Location)], LegendSettings.prototype, \"location\", void 0);\n  __decorate([Property('Auto')], LegendSettings.prototype, \"position\", void 0);\n  __decorate([Property('Series')], LegendSettings.prototype, \"mode\", void 0);\n  __decorate([Property(8)], LegendSettings.prototype, \"padding\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"itemPadding\", void 0);\n  __decorate([Property('Center')], LegendSettings.prototype, \"alignment\", void 0);\n  __decorate([Complex({\n    fontFamily: null,\n    size: \"14px\",\n    fontStyle: 'Normal',\n    fontWeight: '400',\n    color: null\n  }, Font)], LegendSettings.prototype, \"textStyle\", void 0);\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeHeight\", void 0);\n  __decorate([Property(10)], LegendSettings.prototype, \"shapeWidth\", void 0);\n  __decorate([Complex({}, Border)], LegendSettings.prototype, \"border\", void 0);\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, Margin)], LegendSettings.prototype, \"margin\", void 0);\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, ContainerPadding)], LegendSettings.prototype, \"containerPadding\", void 0);\n  __decorate([Property(8)], LegendSettings.prototype, \"shapePadding\", void 0);\n  __decorate([Property('transparent')], LegendSettings.prototype, \"background\", void 0);\n  __decorate([Property(1)], LegendSettings.prototype, \"opacity\", void 0);\n  __decorate([Property(true)], LegendSettings.prototype, \"toggleVisibility\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"enableHighlight\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"description\", void 0);\n  __decorate([Property(3)], LegendSettings.prototype, \"tabIndex\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"title\", void 0);\n  __decorate([Complex({\n    fontFamily: null,\n    size: \"14px\",\n    fontStyle: 'Normal',\n    fontWeight: '600',\n    color: null\n  }, Font)], LegendSettings.prototype, \"titleStyle\", void 0);\n  __decorate([Property('Top')], LegendSettings.prototype, \"titlePosition\", void 0);\n  __decorate([Property('Normal')], LegendSettings.prototype, \"textWrap\", void 0);\n  __decorate([Property('Ellipsis')], LegendSettings.prototype, \"textOverflow\", void 0);\n  __decorate([Property(100)], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n  __decorate([Property(null)], LegendSettings.prototype, \"maximumLabelWidth\", void 0);\n  __decorate([Property(true)], LegendSettings.prototype, \"enablePages\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"isInversed\", void 0);\n  __decorate([Property(false)], LegendSettings.prototype, \"reverse\", void 0);\n  return LegendSettings;\n}(ChildProperty);\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */function () {\n  /**\n   * Constructor for the dateTime module.\n   *\n   * @private\n   */\n  function BaseLegend(chart) {\n    this.maxItemHeight = 0;\n    this.rowHeights = [];\n    this.pageHeights = [];\n    this.columnHeights = [];\n    this.pageXCollections = []; // pages of x locations\n    this.chartRowCount = 1;\n    this.legendTitleCollections = [];\n    this.legendRegions = [];\n    this.pagingRegions = [];\n    this.chart = chart;\n    this.legend = chart.legendSettings;\n    this.legendID = chart.element.id + '_chart_legend';\n    this.isChartControl = chart.getModuleName() === 'chart' || chart.getModuleName() === 'chart3d';\n    this.isAccChartControl = chart.getModuleName() === 'accumulationchart' || chart.getModuleName() === 'circularchart3d';\n    this.isBulletChartControl = chart.getModuleName() === 'bulletChart';\n    this.isStockChartControl = chart.getModuleName() === 'stockChart';\n    this.bulletChart = this.chart;\n    this.fivePixel = 5;\n    this.rowCount = 0;\n    this.pageButtonSize = 8;\n    this.maxColumns = 0;\n    this.maxWidth = 0;\n    this.currentPage = 1;\n    this.backwardArrowOpacity = 0;\n    this.forwardArrowOpacity = 1;\n    this.arrowWidth = 2 * (this.fivePixel + this.pageButtonSize + this.fivePixel);\n    this.arrowHeight = this.arrowWidth;\n    this.isTop = false;\n    this.isTitle = false;\n    this.currentPageNumber = 1;\n  }\n  /**\n   * Calculate the bounds for the legends.\n   *\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n    var legend = this.legend;\n    var defaultValue = this.isBulletChartControl ? '40%' : '20%';\n    this.getPosition(legend.position, availableSize);\n    this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n    this.isVertical = this.position === 'Left' || this.position === 'Right';\n    this.itemPadding = this.legend.itemPadding ? this.legend.itemPadding : this.isVertical ? this.legend.padding : 20;\n    if (this.isVertical) {\n      this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n      this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n    } else {\n      this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n      this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n    }\n    if (this.chart.getModuleName() === 'chart3d') {\n      this.library.get3DLegendBounds(availableSize, this.legendBounds, legend);\n    } else {\n      this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n    }\n    if (!this.isBulletChartControl) {\n      this.legendBounds.width += this.legend.containerPadding.left + this.legend.containerPadding.right;\n      this.legendBounds.height += this.legend.containerPadding.top + this.legend.containerPadding.bottom;\n    }\n    this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n  };\n  /**\n   * To find legend position based on available size for chart and accumulation chart\n   *\n   * @param position\n   * @param availableSize\n   * @param position\n   * @param availableSize\n   * @returns {void}\n   */\n  BaseLegend.prototype.getPosition = function (position, availableSize) {\n    var chart = this.chart;\n    var accumulation = this.chart;\n    if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n      this.position = position !== 'Auto' ? position : 'Bottom';\n    } else {\n      if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n        position = 'Top';\n      }\n      this.position = position !== 'Auto' ? position : availableSize.width > availableSize.height ? 'Right' : 'Bottom';\n    }\n  };\n  /**\n   * To set bounds for chart and accumulation chart\n   *\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @param computedWidth\n   * @param computedHeight\n   * @param legend\n   * @param legendBounds\n   * @returns {void}\n   */\n  BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n    var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n    if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n      titleHeight += this.pageButtonSize + this.fivePixel;\n    }\n    computedWidth = Math.min(computedWidth, legendBounds.width);\n    computedHeight = Math.min(computedHeight, legendBounds.height);\n    if (legend.mode === 'Gradient') {\n      legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n      legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n    } else {\n      legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n      legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n    }\n    if (!this.isBulletChartControl) {\n      if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n        this.calculateLegendTitle(legend, legendBounds);\n        legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ? this.legendTitleSize.height - this.legendTitleSize.height / this.legendTitleCollections.length : 0;\n      }\n    }\n    this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) / (this.maxItemHeight + legend.padding)));\n  };\n  /**\n   * To find legend location based on position, alignment for chart and accumulation chart\n   *\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   * @param position\n   * @param alignment\n   * @param legendBounds\n   * @param rect\n   * @param availableSize\n   * @param maxLabelSize\n   */\n  BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n    var padding = this.legend.border.width;\n    var isBulletChart = this.isBulletChartControl;\n    var bulletChart = this.bulletChart;\n    var labelIns = bulletChart.labelPosition === 'Inside';\n    var ticklIns = bulletChart.tickPosition === 'Inside';\n    var isVertical = bulletChart.orientation === 'Vertical';\n    var categoryFieldValue = isBulletChart && bulletChart.categoryField !== '' ? maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n    var marginBottom = this.chart.margin.bottom;\n    var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n    var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n    if (position === 'Bottom') {\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n      legendBounds.y += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 : isVertical && bulletChart.categoryField !== '' ? maxLabelSize.height + padding * 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n    } else if (position === 'Top') {\n      var axisTextSize = void 0;\n      if (this.isChartControl) {\n        axisTextSize = measureText('100', this.chart.verticalAxes[0].labelStyle, this.chart.themeStyle.legendLabelFont);\n      }\n      legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n      legendBounds.y = rect.y + padding + this.legend.margin.top;\n      legendBounds.y -= isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && !isVertical ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n      legendHeight -= isBulletChart ? -padding * 2 : this.isChartControl ? -padding * 2 - axisTextSize.height / 2 : 0;\n      subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n    } else if (position === 'Right') {\n      legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height : 0;\n      subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n    } else if (position === 'Left') {\n      legendBounds.x = legendBounds.x + this.legend.margin.left;\n      legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n      legendWidth += isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns && isVertical ? legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height : bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '' ? categoryFieldValue : 0;\n      subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n    } else {\n      legendBounds.x = this.legend.location.x;\n      legendBounds.y = this.legend.location.y;\n      subtractThickness(rect, new Thickness(0, 0, 0, 0));\n    }\n  };\n  /**\n   * To find legend alignment for chart and accumulation chart\n   *\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   * @param start\n   * @param size\n   * @param legendSize\n   * @param alignment\n   */\n  BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n    switch (alignment) {\n      case 'Far':\n        start = size - legendSize - start;\n        break;\n      case 'Center':\n        start = (size - legendSize) / 2;\n        break;\n    }\n    return start;\n  };\n  /**\n   * Renders the legend.\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param redraw\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n    var titleHeight = 0;\n    var titlePlusArrowWidth = 0;\n    var pagingLegendBounds = new Rect(0, 0, 0, 0);\n    var requireLegendBounds = new Rect(0, 0, 0, 0);\n    var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n    var padding = legend.padding;\n    this.itemPadding = this.isBulletChartControl ? legend.padding : this.itemPadding;\n    var isPaging = legend.enablePages;\n    var titlePosition = legend.titlePosition;\n    var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n    var legendGroup = chart.renderer.createGroup({\n      id: this.legendID + '_g'\n    });\n    var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n    this.legendRegions = [];\n    this.chartRowCount = 1;\n    var maxHeight = 0;\n    titleHeight = !this.isTitle ? 0 : this.isTop || this.isVertical ? this.legendTitleSize.height : 0;\n    if (this.isChartControl || this.isAccChartControl && !this.isVertical) {\n      var pageCount = 1;\n      var rowHeights = this.rowHeights[0] + padding;\n      for (var i = 1; i < this.rowHeights.length; i++) {\n        if (rowHeights + this.rowHeights[i] + padding > this.legendBounds.height - this.pageButtonSize - this.maxItemHeight / 2) {\n          this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n          pageCount++;\n          rowHeights = 0;\n        }\n        rowHeights += this.rowHeights[i] + (this.isVertical ? this.itemPadding : padding);\n      }\n      this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n      this.totalPages = pageCount;\n    }\n    for (var i = 0; i < this.legendCollections.length; i++) {\n      if (this.legendCollections[i].text !== '') {\n        maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n        break;\n      } else {\n        continue;\n      }\n    }\n    if (!this.isChartControl && !this.isAccChartControl) {\n      this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n    }\n    // For new legend navigation\n    if (!isPaging && this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n      titlePlusArrowWidth += this.pageButtonSize + 2 * this.fivePixel;\n    } else if (this.isTitle && !this.isPaging && !this.isVertical) {\n      titlePlusArrowWidth = titlePosition === (!this.isRtlEnable ? 'Left' : 'Right') ? this.fivePixel + this.legendTitleSize.width : 0;\n    }\n    if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n      this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n      this.totalPages = 1;\n    } else if (firstLegend !== this.legendCollections.length) {\n      var legendSeriesGroup = void 0; // legendItem group for each series group element\n      var count = 0;\n      var previousLegend = this.legendCollections[firstLegend];\n      // starting shape center x,y position && to resolve lint error used new line for declaration\n      var startPadding = this.isBulletChartControl ? padding : titlePlusArrowWidth + padding + legend.shapeWidth / 2 + legend.containerPadding.left;\n      var xLocation = this.isBulletChartControl && !this.isRtlEnable ? legendBounds.x + titlePlusArrowWidth + padding + legend.shapeWidth / 2 : !this.isRtlEnable ? legendBounds.x + startPadding : legendBounds.x + (this.chart.getModuleName() === 'accumulationchart' && this.isVertical ? this.maxWidth : legendBounds.width) - startPadding;\n      var start = new ChartLocation(xLocation, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 : legendBounds.y + titleHeight + upArrowHeight + padding + this.maxItemHeight / 2 + legend.containerPadding.top);\n      var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n      var textOptions = new TextOption('', start.x, start.y, anchor);\n      var textPadding = legend.shapePadding + this.itemPadding + legend.shapeWidth;\n      //  initialization for totalPages legend click totalpage again calculate\n      this.totalPages = this.totalPages = this.isAccChartControl || this.isChartControl || this.isBulletChartControl || this.isStockChartControl ? this.totalPages : 0;\n      this.pageXCollections = [];\n      this.legendCollections[firstLegend].location = start;\n      var legendIndex = void 0;\n      if (!legend.enablePages && this.isPaging) {\n        var x = start.x - this.fivePixel;\n        var y = start.y - this.fivePixel;\n        var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ? this.legendTitleSize.width + this.fivePixel : 0;\n        var bottomSapce = this.isVertical ? this.pageButtonSize + Math.abs(y - legendBounds.y) : 0;\n        var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0;\n        rightSpace += this.isVertical ? 0 : this.fivePixel + this.pageButtonSize + this.fivePixel;\n        pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n        requireLegendBounds = pagingLegendBounds;\n      } else {\n        requireLegendBounds = legendBounds;\n      }\n      var legendOption = void 0;\n      for (var i = 0; i < this.legendCollections.length; i++) {\n        legendOption = this.legendCollections[i];\n        legendIndex = !this.isReverse ? count : this.legendCollections.length - 1 - count;\n        if (this.chart.getModuleName() === 'accumulationchart') {\n          legendOption.fill = (this.chart || this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n        }\n        if (this.chart.getModuleName() === 'stockChart') {\n          legendOption.type = this.chart.visibleSeries[count].type;\n        }\n        this.accessbilityText = this.isBulletChartControl ? 'Legend of bullet chart' + '' + legendOption.text : 'Click to show or hide the ' + legendOption.text + ' series';\n        if (legendOption.render && legendOption.text && legendOption.text !== '') {\n          legendSeriesGroup = chart.renderer.createGroup({\n            id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n          });\n          if (legendSeriesGroup) {\n            legendSeriesGroup.setAttribute('tabindex', i === 0 ? '0' : '');\n            legendSeriesGroup.setAttribute('aria-label', legend.description || legendOption.text + ' series is ' + (legendOption.visible ? 'showing, press enter to hide the ' : 'hidden, press enter to show the ') + legendOption.text + ' series');\n            legendSeriesGroup.setAttribute('role', 'button');\n            legendSeriesGroup.setAttribute('aria-pressed', legendOption.visible ? 'true' : 'false');\n          }\n          this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n          this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n          this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n          if (legendSeriesGroup) {\n            legendSeriesGroup.style.cssText = 'pointer-events: bounding-box; cursor: ' + (!legend.toggleVisibility && (chart.selectionMode === 'None' || chart.highlightMode === 'None' || chart.selectionMode === 'None') || this.isBulletChartControl ? 'auto' : 'pointer');\n          }\n          if (legendTranslateGroup) {\n            legendTranslateGroup.appendChild(legendSeriesGroup);\n          }\n          previousLegend = legendOption;\n        }\n        count++;\n      }\n      this.totalPages = this.isPaging && !this.isBulletChartControl && !this.legend.enablePages && !this.isVertical && this.totalPages > this.chartRowCount ? this.chartRowCount : this.totalPages;\n      if (this.isPaging && this.totalPages > 1) {\n        this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n      } else {\n        this.totalPages = 1;\n      }\n    }\n    appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n  };\n  /** @private */\n  BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var previousLegend = this.legendCollections[0];\n    var nextLegend = this.legendCollections[1];\n    var defElement = this.chart.renderer.createDefs();\n    var gradientLegendCount = 0;\n    var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n    var opacity = 1;\n    var fillColors = [];\n    var numberItems = [];\n    if (legend.title) {\n      if (!this.isVertical) {\n        if (legend.titlePosition === 'Left') {\n          legendBounds.x += this.legendTitleSize.width;\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Right') {\n          legendBounds.width -= this.legendTitleSize.width;\n        } else if (legend.titlePosition === 'Top') {\n          legendBounds.y += this.legendTitleSize.height;\n          legendBounds.height -= this.legendTitleSize.height;\n        }\n      } else {\n        legendBounds.y += this.legendTitleSize.height;\n        legendBounds.height -= this.legendTitleSize.height;\n      }\n    }\n    for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n      var colorMap = _a[_i];\n      if (numberItems.indexOf(colorMap.start) < 0) {\n        numberItems.push(colorMap.start);\n      }\n      if (colorMap.colors.length > 2) {\n        var diffValue = colorMap.end - colorMap.start;\n        var colorsLength = colorMap.colors.length - 1;\n        if (diffValue > 0) {\n          diffValue = diffValue / colorsLength;\n          for (var index = 1; index < colorsLength; index++) {\n            var calculatedValue = colorMap.start + diffValue * index;\n            numberItems.push(calculatedValue);\n          }\n        } else {\n          for (var index = 1; index < colorsLength; index++) {\n            numberItems.push(colorMap.start);\n          }\n        }\n      }\n      if (numberItems.indexOf(colorMap.end) < 0) {\n        numberItems.push(colorMap.end);\n      }\n      for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n        var fillColor = _c[_b];\n        if (fillColors.indexOf(fillColor) < 0) {\n          fillColors.push(fillColor);\n        }\n      }\n      if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n        fillColors.push(colorMap.colors[0]);\n      }\n    }\n    var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n    var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n    var y2 = this.isVertical ? '100%' : '0%';\n    linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n    linerGradientEle.setAttribute('x1', x1);\n    linerGradientEle.setAttribute('y1', '0%');\n    linerGradientEle.setAttribute('x2', x2);\n    linerGradientEle.setAttribute('y2', y2);\n    var full = numberItems[numberItems.length - 1] - numberItems[0];\n    for (var b = 0; b < fillColors.length; b++) {\n      var offsetValue = numberItems[b] - numberItems[0];\n      offsetValue = offsetValue / full;\n      var stopEle = document.createElementNS(xmlns, 'stop');\n      stopEle.setAttribute('offset', offsetValue.toString());\n      stopEle.setAttribute('stop-color', fillColors[b]);\n      stopEle.setAttribute('stop-opacity', opacity.toString());\n      linerGradientEle.appendChild(stopEle);\n    }\n    var startLabel = previousLegend.text.toString();\n    var endLabel = nextLegend.text.toString();\n    var startTextSize = measureText(startLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n    var endTextSize = measureText(endLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n    var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n    var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n    var otherSpaces = 2 * textWidth + 4 * legend.padding;\n    var linearBarWidth = legendBounds.width;\n    var linearBarHeight = legendBounds.height;\n    var xValue = legendBounds.x + textWidth + 2 * legend.padding;\n    var yValue = legendBounds.y + legend.padding;\n    var startLabelY;\n    var endLabelY;\n    var startLabelX;\n    var endLabelX;\n    if (this.isVertical) {\n      otherSpaces = 2 * textHeight + 4 * legend.padding;\n      linearBarWidth = legendBounds.width - 2 * legend.padding;\n      linearBarHeight = legendBounds.height - otherSpaces;\n      xValue = legendBounds.x + legend.padding;\n      yValue = legendBounds.y + textHeight + 2 * legend.padding;\n      startLabelY = legendBounds.y + legend.padding + textHeight;\n      endLabelY = yValue + linearBarHeight + textHeight;\n      startLabelX = legendBounds.x + legendBounds.width * 0.5 - textWidth * 0.5;\n      endLabelX = startLabelX;\n      if (linearBarWidth > 30) {\n        var diffWidth = linearBarWidth - 30;\n        linearBarWidth = 30;\n        xValue = xValue + diffWidth / 2;\n      }\n    } else {\n      linearBarWidth = legendBounds.width - otherSpaces;\n      linearBarHeight = legendBounds.height - 2 * legend.padding;\n      startLabelX = legendBounds.x + (!this.isRtlEnable ? legend.padding + (textWidth - startTextSize.width) : linearBarWidth + 3 * legend.padding + textWidth);\n      endLabelX = legendBounds.x + (!this.isRtlEnable ? linearBarWidth + 3 * legend.padding + textWidth : legend.padding + (textWidth - endTextSize.width));\n      startLabelY = legendBounds.y + legendBounds.height * 0.5 + textHeight * 0.25;\n      endLabelY = startLabelY;\n      if (linearBarHeight > 30) {\n        var diffHeight = linearBarHeight - 30;\n        linearBarHeight = 30;\n        yValue = yValue + diffHeight / 2;\n      }\n    }\n    var anchor = chart.enableRtl ? 'end' : '';\n    var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n    var hiddenColor = '#D3D3D3';\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n    var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false,\n    // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n    textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n    textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false,\n    // tslint:disable-next-line:align\n    null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    var gradientLegend = chart.renderer.drawRectangle({\n      width: linearBarWidth,\n      height: linearBarHeight,\n      x: xValue,\n      y: yValue,\n      fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n    });\n    defElement.appendChild(linerGradientEle);\n    legendTranslateGroup.appendChild(defElement);\n    legendTranslateGroup.appendChild(gradientLegend);\n  };\n  /**\n   * To find first valid legend text index for chart and accumulation chart\n   *\n   * @param legendCollection\n   * @returns {number}\n   * @private\n   */\n  BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n    var count = 0;\n    for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n      var legend = legendCollection_1[_i];\n      if (legend.render && legend.text && legend.text !== '') {\n        break;\n      }\n      count++;\n    }\n    return count;\n  };\n  /**\n   * To get the legend title text width and height.\n   *\n   * @param legend\n   * @param legendBounds\n   */\n  BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n    if (legend.title) {\n      this.isTop = legend.titlePosition === 'Top';\n      var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n      if (this.isTop || this.isVertical) {\n        this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, legendBounds.width - padding, this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n      } else {\n        this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle, this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n      }\n      var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n      this.legendTitleSize = measureText(text, legend.titleStyle, this.chart.themeStyle.legendTitleFont);\n      this.legendTitleSize.height *= this.legendTitleCollections.length;\n    } else {\n      this.legendTitleSize = new Size(0, 0);\n    }\n  };\n  /**\n   * Render the legend title\n   *\n   * @param chart\n   * @param legend\n   * @param legendBounds\n   * @param legendGroup\n   */\n  BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n    var padding = legend.padding;\n    var alignment = legend.titleStyle.textAlignment;\n    this.isTop = legend.titlePosition === 'Top';\n    var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n    var x = titlePositionX(legendBounds, legend.titleStyle);\n    anchor = this.isTop || this.isVertical ? anchor : chart.enableRtl ? 'end' : '';\n    x = alignment === 'Near' ? x + padding : alignment === 'Far' ? x - padding : x;\n    x = this.isTop || this.isVertical ? x : legendBounds.x + (legend.titlePosition === 'Left' ? 5 : legendBounds.width - this.legendTitleSize.width - 5);\n    var topPadding = legendBounds.height / 2 + this.legendTitleSize.height / 4;\n    var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding : this.legendTitleSize.height / this.legendTitleCollections.length);\n    var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n    textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color || this.chart.themeStyle.legendTitleFont.color, legendGroup, null, null, null, null, null, null, null, null, null, null, this.chart.themeStyle.legendTitleFont);\n  };\n  /**\n   * To create legend rendering elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendBounds\n   * @param legendGroup\n   * @param legend\n   * @param id\n   * @param redraw\n   */\n  BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n    var padding = legend.padding;\n    var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds, 0, 0, '', this.legend.border.dashArray);\n    var legendItemsGroup = chart.renderer.createGroup({\n      id: id + '_collections'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var clippath = chart.renderer.createClipPath({\n      id: id + '_clipPath'\n    });\n    options.width = this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical ? this.maxWidth : legendBounds.width;\n    if (legendGroup) {\n      legendGroup.appendChild(chart.renderer.drawRectangle(options));\n    } else {\n      chart.renderer.drawRectangle(options);\n    }\n    if (legend.title) {\n      this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n    }\n    if (!isCanvas) {\n      legendGroup.appendChild(legendItemsGroup);\n    }\n    this.legendTranslateGroup = chart.renderer.createGroup({\n      id: id + '_translate_g'\n    });\n    if (!isCanvas) {\n      legendItemsGroup.appendChild(this.legendTranslateGroup);\n    }\n    options.y += this.isTop ? this.legendTitleSize.height : 0;\n    options.id += '_clipPath_rect';\n    options.width = !this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl && this.isVertical ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right : legendBounds.width;\n    if (!isCanvas) {\n      this.clipRect = chart.renderer.drawRectangle(options);\n      clippath.appendChild(this.clipRect);\n    } else {\n      this.pagingClipRect = options;\n    }\n    appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n    if (!isCanvas) {\n      legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n    }\n    return this.legendTranslateGroup;\n  };\n  /**\n   * To render legend symbols for chart and accumulation chart\n   *\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   * @param legendOption\n   * @param group\n   * @param i\n   */\n  BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n    var control = this.isBulletChartControl ? this.chart : null;\n    var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n    var isStrokeWidth = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.shape === 'SeriesType' && legendOption.type.toLowerCase().indexOf('line') > -1 && legendOption.type.toLowerCase().indexOf('area') === -1 || legendOption.shape === 'HorizontalLine' || legendOption.shape === 'VerticalLine' || legendOption.shape === 'Cross');\n    var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    var borderColor;\n    var shape = legendOption.shape === 'SeriesType' ? legendOption.type : legendOption.shape;\n    var strokewidth = isStrokeWidth ? this.legend.mode === 'Series' ? this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width : this.isBulletChartControl && legendOption.shape === 'Multiply' ? 4 : 1;\n    var regionPadding;\n    shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n    if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n      var series = this.chart.visibleSeries[legendIndex];\n      var seriesBorder = series.border;\n      var isLineShapemarker = shape === 'HorizontalLine' || shape === 'VerticalLine';\n      borderColor = isLineShapemarker ? symbolColor : seriesBorder.color ? seriesBorder.color : symbolColor;\n      strokewidth = isLineShapemarker ? series.width : seriesBorder.width ? seriesBorder.width : 1;\n    }\n    var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, isCustomBorder ? borderColor : symbolColor, this.legend.opacity, legendOption.dashArray, '');\n    var textSize = measureText(legendOption.text, this.legend.textStyle, this.chart.themeStyle.legendLabelFont);\n    var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding : legendOption.location.x;\n    var y = legendOption.location.y;\n    if (!isCanvas) {\n      group.appendChild(drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n    } else {\n      regionPadding = -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber);\n      drawSymbol({\n        x: x,\n        y: y\n      }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n      this.legendRegions.push({\n        rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding),\n        index: legendIndex\n      });\n    }\n    if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' || legendOption.type === 'Doughnut' && shape === 'Doughnut') {\n      symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n      shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n      symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n      if (!isCanvas) {\n        group.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n      } else {\n        drawSymbol({\n          x: x,\n          y: y\n        }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n      }\n    }\n  };\n  /**\n   * To render legend text for chart and accumulation chart\n   *\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   * @param chart\n   * @param legendOption\n   * @param group\n   * @param textOptions\n   * @param i\n   */\n  BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n    var legend = chart.legendSettings;\n    var hiddenColor = '#D3D3D3';\n    var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n    textOptions.text = legendOption.textCollection.length > 0 ? legendOption.textCollection : legendOption.text;\n    if (legend.isInversed && !this.isRtlEnable) {\n      textOptions.x = legendOption.location.x - legend.shapeWidth / 2;\n    } else if (this.isRtlEnable) {\n      var textWidth = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont).width;\n      textOptions.x = this.chart.getModuleName() === 'bulletChart' ? legendOption.location.x - legend.shapeWidth : legendOption.location.x - ((legendOption.textCollection.length > 1 ? textWidth / legendOption.textCollection.length : textWidth) + legend.shapeWidth / 2 + legend.shapePadding);\n    } else {\n      textOptions.x = legendOption.location.x + legend.shapeWidth / 2 + legend.shapePadding;\n    }\n    textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n    var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ? new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    if (isCanvas) {\n      var textSize = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n      var region = void 0;\n      for (var j = 0; j < this.legendRegions.length; j++) {\n        if (this.legendRegions[j].index === i) {\n          region = this.legendRegions[j];\n          break;\n        }\n      }\n      region.rect.y = textOptions.y < region.rect.y ? textOptions.y : region.rect.y;\n      region.rect.width += textSize.width;\n      region.rect.height = textSize.height;\n      region.rect.y -= textSize.height * 0.5;\n      region.rect.x -= this.isRtlEnable ? region.rect.width : 0;\n    }\n  };\n  /**\n   * To render legend paging elements for chart and accumulation chart\n   *\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   * @param chart\n   * @param bounds\n   * @param textOption\n   * @param legendGroup\n   */\n  // tslint:disable-next-line:max-func-body-length\n  BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n    var paginggroup = chart.renderer.createGroup({\n      id: this.legendID + '_navigation'\n    });\n    var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n    var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n    var grayColor = this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1 ? '#FFFFFF' : '#545454';\n    var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n    var padding = 8; // const padding for paging elements\n    var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n    var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n    var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n    var iconSize = this.pageButtonSize;\n    // Page left arrow drawing calculation started here\n    var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 : this.rowCount - 1;\n    var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n    this.pagingRegions = [];\n    this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n    this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n    if (!isCanvas) {\n      legendGroup.appendChild(paginggroup);\n    }\n    if (!this.isChartControl && !this.isAccChartControl) {\n      if (this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n        this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n      } else {\n        this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n      }\n    }\n    if (paginggroup) {\n      paginggroup.style.cursor = 'pointer';\n    }\n    if ((this.isChartControl || this.isAccChartControl) && !(!legend.enablePages && this.isPaging)) {\n      this.clipPathHeight = this.pageHeights[0];\n    } else {\n      this.clipPathHeight = rowCount * (this.maxItemHeight + legend.padding);\n    }\n    //this.clipPathHeight = !(this.isChartControl) ? (rowCount * (this.maxItemHeight + legend.padding)) : this.columnHeights[0];\n    if (!isCanvas) {\n      this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n    } else {\n      //paging clipRect only for canvas mode\n      this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight - (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n      this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n      this.pagingClipRect.x += legend.border.width;\n      this.pagingClipRect.width -= legend.border.width + legend.border.width / 2;\n      this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n    }\n    var pageTextElement;\n    var x = bounds.x + iconSize / 2;\n    var y = bounds.y + this.clipPathHeight + (titleHeight + bounds.height - this.clipPathHeight) / 2;\n    if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n      x = bounds.x + this.pageButtonSize + titleWidth;\n      y = legend.title && this.isTop ? bounds.y + padding + titleHeight + iconSize / 1 + 0.5 : bounds.y + padding + iconSize + 0.5;\n    }\n    var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n    var translateX = this.isRtlEnable ? legend.border.width + iconSize / 2 : bounds.width - (2 * (iconSize + padding) + padding + size.width);\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + iconSize / 2 + padding / 2 + titleHeight;\n        symbolOption.opacity = this.backwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n      } else {\n        symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity : legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize));\n    // Page numbering rendering calculation started here\n    textOption.x = x + iconSize / 2 + padding;\n    textOption.y = y + size.height / 4;\n    textOption.id = this.legendID + '_pagenumber';\n    textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n    var color = this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1 ? '#FFFFFF' : legend.textStyle.color || this.chart.themeStyle.legendLabelFont.color;\n    if (isCanvas && this.totalNoOfPages) {\n      textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n    }\n    if (legend.enablePages || this.isBulletChartControl) {\n      pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0), null, null, null, null, this.chart.themeStyle.legendLabelFont);\n    }\n    // Page right arrow rendering calculation started here\n    x = textOption.x + padding + iconSize / 2 + size.width;\n    if (this.isPaging && !legend.enablePages && !this.isVertical) {\n      x = bounds.x + bounds.width - (this.isBulletChartControl ? this.fivePixel : 0) - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ? this.legendTitleSize.width + this.fivePixel : 0);\n    }\n    symbolOption.id = pageDown;\n    symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n    if (!isCanvas) {\n      if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n        x = bounds.x + bounds.width / 2;\n        y = bounds.y + bounds.height - iconSize / 2;\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n      } else {\n        paginggroup.appendChild(drawSymbol({\n          x: x,\n          y: y\n        }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n      }\n    } else {\n      drawSymbol({\n        x: x,\n        y: y\n      }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n    }\n    this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n    if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      //placing the navigation buttons and page numbering in legend right corner\n      paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n    } else {\n      if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n        this.totalNoOfPages = this.totalPages;\n        this.calTotalPage = false;\n      }\n      if (!legend.enablePages && !this.isBulletChartControl) {\n        // For new legend page navigation\n        this.translatePage(isCanvas, null, this.currentPage - 1, this.currentPage, legend);\n      }\n    }\n    if (legend.enablePages || this.isBulletChartControl) {\n      this.translatePage(isCanvas, pageTextElement, this.currentPage - 1, this.currentPage, legend);\n    }\n  };\n  BaseLegend.prototype.getPageHeight = function (pageHeights, pageCount) {\n    var sum = 0;\n    for (var i = 0; i < pageCount; i++) {\n      sum += pageHeights[i];\n    }\n    return sum;\n  };\n  /**\n   * To translate legend pages for chart and accumulation chart\n   *\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   * @param pagingText\n   * @param page\n   * @param pageNumber\n   * @param legend\n   */\n  BaseLegend.prototype.translatePage = function (isCanvas, pagingText, page, pageNumber, legend) {\n    var size = this.isChartControl || this.isAccChartControl ? page ? this.getPageHeight(this.pageHeights, page) : 0 : this.clipPathHeight * page;\n    if (!isCanvas && (this.isChartControl || this.isAccChartControl)) {\n      this.clipRect.setAttribute('height', this.pageHeights[page].toString());\n      if (this.isAccChartControl && this.isPaging && !legend.enablePages && this.isVertical) {\n        this.clipRect.setAttribute('height', this.legendBounds.height.toString());\n      }\n    }\n    var translate = 'translate(0,-' + size + ')';\n    if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n      var pageX = this.pageXCollections[page * this.maxColumns];\n      size = !this.isRtlEnable ? pageX - this.legendBounds.x : this.legendBounds.x + this.maxWidth - pageX;\n      size = size < 0 ? 0 : size; // to avoid small pixel variation\n      translate = (!this.isRtlEnable ? 'translate(-' : 'translate(') + size + ',0)';\n    }\n    if (!this.chart.enableCanvas) {\n      this.legendTranslateGroup.setAttribute('transform', translate);\n    }\n    if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n      pagingText.textContent = pageNumber + '/' + this.totalPages;\n    }\n    this.currentPage = pageNumber;\n    return size;\n  };\n  /**\n   * To change legend pages for chart and accumulation chart\n   *\n   * @param event\n   * @param pageUp\n   * @param event\n   * @param pageUp\n   */\n  BaseLegend.prototype.changePage = function (event, pageUp) {\n    var legend = this.chart.legendSettings;\n    var backwardArrow = document.getElementById(this.legendID + '_pageup');\n    var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n    var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n    var pageText = legend.enablePages || this.isBulletChartControl ? document.getElementById(this.legendID + '_pagenumber') : null;\n    var page = legend.enablePages || this.isBulletChartControl ? parseInt(pageText.textContent.split('/')[0], 10) : this.currentPage;\n    if (pageUp && page > 1) {\n      this.translatePage(isCanvas, pageText, page - 2, page - 1, legend);\n    } else if (!pageUp && page < this.totalPages) {\n      this.translatePage(isCanvas, pageText, page, page + 1, legend);\n    }\n    if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n    }\n  };\n  /**\n   * To hide the backward and forward arrow\n   *\n   * @param arrowElement\n   */\n  BaseLegend.prototype.hideArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '0');\n  };\n  /**\n   * To show the  backward and forward arrow\n   *\n   * @param arrowElement\n   */\n  BaseLegend.prototype.showArrow = function (arrowElement) {\n    arrowElement.setAttribute('opacity', '1');\n  };\n  /**\n   * To find legend elements id based on chart or accumulation chart\n   *\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @param option\n   * @param prefix\n   * @param count\n   * @private\n   */\n  BaseLegend.prototype.generateId = function (option, prefix, count) {\n    if (this.isChartControl || this.isStockChartControl) {\n      return prefix + count;\n    } else {\n      return prefix + option.pointIndex;\n    }\n  };\n  /**\n   * To show or hide trimmed text tooltip for legend.\n   *\n   * @param event\n   * @returns {void}\n   * @private\n   */\n  BaseLegend.prototype.move = function (event) {\n    var _this = this;\n    var x = this.chart.mouseX;\n    var y = this.chart.mouseY;\n    if (event.target.textContent.indexOf('...') > -1) {\n      var targetId = event.target.id.split(this.legendID + '_text_');\n      if (targetId.length === 2) {\n        var index = parseInt(targetId[1], 10);\n        var element = this.chart.element;\n        if (!isNaN(index)) {\n          if (this.chart.isTouch) {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n          }\n          if (this.isChartControl) {\n            showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          } else {\n            showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n          }\n        }\n      }\n    } else {\n      removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n    }\n    if (this.chart.isTouch) {\n      clearTimeout(this.clearTooltip);\n      this.clearTooltip = +setTimeout(function () {\n        removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip');\n      }, 1000);\n    }\n  };\n  return BaseLegend;\n}();\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */function () {\n  function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex, dashArray) {\n    this.location = {\n      x: 0,\n      y: 0\n    };\n    this.textCollection = [];\n    this.text = text;\n    this.fill = fill;\n    this.shape = shape;\n    this.url = url;\n    this.visible = visible;\n    this.type = type;\n    this.markerVisibility = markerVisibility;\n    this.markerShape = markerShape;\n    this.pointIndex = pointIndex;\n    this.seriesIndex = seriesIndex;\n    this.dashArray = dashArray;\n  }\n  return LegendOptions;\n}();\nexport { LegendOptions };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Property","Complex","ChildProperty","measureText","Rect","TextOption","Size","PathOption","Font","Border","Margin","ContainerPadding","Location","subtractThickness","Thickness","drawSymbol","ChartLocation","titlePositionX","getTitle","textTrim","getTextAnchor","RectOption","textElement","stringToNumber","removeElement","showTooltip","getElement","appendChildElement","LegendSettings","_super","apply","x","y","fontFamily","size","fontStyle","fontWeight","color","left","right","top","bottom","BaseLegend","chart","maxItemHeight","rowHeights","pageHeights","columnHeights","pageXCollections","chartRowCount","legendTitleCollections","legendRegions","pagingRegions","legend","legendSettings","legendID","element","id","isChartControl","getModuleName","isAccChartControl","isBulletChartControl","isStockChartControl","bulletChart","fivePixel","rowCount","pageButtonSize","maxColumns","maxWidth","currentPage","backwardArrowOpacity","forwardArrowOpacity","arrowWidth","arrowHeight","isTop","isTitle","currentPageNumber","calculateLegendBounds","rect","availableSize","maxLabelSize","defaultValue","getPosition","position","legendBounds","isVertical","itemPadding","padding","height","margin","width","library","get3DLegendBounds","getLegendBounds","containerPadding","getLocation","alignment","accumulation","visibleSeries","type","setBounds","computedWidth","computedHeight","titleHeight","title","titlePosition","legendTitleSize","isPaging","enablePages","Math","min","mode","titleStyle","textOverflow","calculateLegendTitle","max","ceil","border","isBulletChart","labelIns","labelPosition","ticklIns","tickPosition","orientation","categoryFieldValue","categoryField","marginBottom","legendHeight","legendWidth","alignLegend","opposedPosition","majorTickLines","axisTextSize","verticalAxes","labelStyle","themeStyle","legendLabelFont","location","start","legendSize","renderLegend","redraw","titlePlusArrowWidth","pagingLegendBounds","requireLegendBounds","firstLegend","findFirstLegendPosition","legendCollections","upArrowHeight","legendGroup","renderer","createGroup","legendTranslateGroup","createLegendElements","maxHeight","pageCount","totalPages","text","textSize","shapeHeight","isRtlEnable","getLinearLegend","legendSeriesGroup","count","previousLegend","startPadding","shapeWidth","xLocation","anchor","isRtlEnabled","enableRtl","textOptions","textPadding","shapePadding","legendIndex","leftSpace","bottomSapce","abs","rightSpace","legendOption","isReverse","fill","points","pointIndex","accessbilityText","render","generateId","setAttribute","description","visible","getRenderPoint","renderSymbol","renderText","style","cssText","toggleVisibility","selectionMode","highlightMode","appendChild","renderPagingElements","enableCanvas","svgObject","xmlns","nextLegend","defElement","createDefs","gradientLegendCount","linerGradientEle","document","createElementNS","opacity","fillColors","numberItems","_i","_a","rangeColorSettings","colorMap","indexOf","push","colors","diffValue","end","colorsLength","index","calculatedValue","_b","_c","fillColor","x1","x2","y2","full","offsetValue","stopEle","toString","startLabel","endLabel","startTextSize","textStyle","endTextSize","textWidth","textHeight","otherSpaces","linearBarWidth","linearBarHeight","xValue","yValue","startLabelY","endLabelY","startLabelX","endLabelX","diffWidth","diffHeight","hiddenColor","fontcolor","isCanvas","translatePage","gradientLegend","drawRectangle","legendCollection","legendCollection_1","legendTitleFont","maximumTitleWidth","renderLegendTitle","textAlignment","topPadding","legendTitleTextOptions","options","background","dashArray","legendItemsGroup","clippath","createClipPath","clipRect","pagingClipRect","group","control","symbolColor","isStrokeWidth","shape","toLowerCase","isCustomBorder","borderColor","strokewidth","regionPadding","markerShape","series","seriesBorder","isLineShapemarker","symbolOption","isInversed","url","markerVisibility","textCollection","region","j","bounds","textOption","paginggroup","grayColor","theme","pageUp","pageDown","iconSize","titleWidth","cursor","clipPathHeight","clearRect","pageTextElement","translateX","totalNoOfPages","calTotalPage","getPageHeight","sum","pagingText","page","pageNumber","translate","pageX","textContent","changePage","event","backwardArrow","getElementById","forwardArrow","pageText","parseInt","split","hideArrow","showArrow","arrowElement","option","prefix","move","_this","mouseX","mouseY","targetId","isNaN","isTouch","name","offsetWidth","clearTimeout","clearTooltip","setTimeout","LegendOptions","seriesIndex"],"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/node_modules/@syncfusion/ej2-charts/src/common/legend/legend.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable max-len */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable jsdoc/require-param */\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { measureText, Rect, TextOption, Size, PathOption } from '@syncfusion/ej2-svg-base';\nimport { Font, Border, Margin, ContainerPadding, Location } from '../model/base';\nimport { subtractThickness, Thickness, drawSymbol, ChartLocation, titlePositionX, getTitle, textTrim, getTextAnchor } from '../utils/helper';\nimport { RectOption, textElement, stringToNumber } from '../utils/helper';\nimport { removeElement, showTooltip, getElement, appendChildElement } from '../utils/helper';\n/**\n * Configures the legends in charts.\n */\nvar LegendSettings = /** @class */ (function (_super) {\n    __extends(LegendSettings, _super);\n    function LegendSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"visible\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"height\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"width\", void 0);\n    __decorate([\n        Complex({ x: 0, y: 0 }, Location)\n    ], LegendSettings.prototype, \"location\", void 0);\n    __decorate([\n        Property('Auto')\n    ], LegendSettings.prototype, \"position\", void 0);\n    __decorate([\n        Property('Series')\n    ], LegendSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(8)\n    ], LegendSettings.prototype, \"padding\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"itemPadding\", void 0);\n    __decorate([\n        Property('Center')\n    ], LegendSettings.prototype, \"alignment\", void 0);\n    __decorate([\n        Complex({ fontFamily: null, size: \"14px\", fontStyle: 'Normal', fontWeight: '400', color: null }, Font)\n    ], LegendSettings.prototype, \"textStyle\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeHeight\", void 0);\n    __decorate([\n        Property(10)\n    ], LegendSettings.prototype, \"shapeWidth\", void 0);\n    __decorate([\n        Complex({}, Border)\n    ], LegendSettings.prototype, \"border\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, Margin)\n    ], LegendSettings.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, ContainerPadding)\n    ], LegendSettings.prototype, \"containerPadding\", void 0);\n    __decorate([\n        Property(8)\n    ], LegendSettings.prototype, \"shapePadding\", void 0);\n    __decorate([\n        Property('transparent')\n    ], LegendSettings.prototype, \"background\", void 0);\n    __decorate([\n        Property(1)\n    ], LegendSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"toggleVisibility\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"enableHighlight\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"description\", void 0);\n    __decorate([\n        Property(3)\n    ], LegendSettings.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"title\", void 0);\n    __decorate([\n        Complex({ fontFamily: null, size: \"14px\", fontStyle: 'Normal', fontWeight: '600', color: null }, Font)\n    ], LegendSettings.prototype, \"titleStyle\", void 0);\n    __decorate([\n        Property('Top')\n    ], LegendSettings.prototype, \"titlePosition\", void 0);\n    __decorate([\n        Property('Normal')\n    ], LegendSettings.prototype, \"textWrap\", void 0);\n    __decorate([\n        Property('Ellipsis')\n    ], LegendSettings.prototype, \"textOverflow\", void 0);\n    __decorate([\n        Property(100)\n    ], LegendSettings.prototype, \"maximumTitleWidth\", void 0);\n    __decorate([\n        Property(null)\n    ], LegendSettings.prototype, \"maximumLabelWidth\", void 0);\n    __decorate([\n        Property(true)\n    ], LegendSettings.prototype, \"enablePages\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"isInversed\", void 0);\n    __decorate([\n        Property(false)\n    ], LegendSettings.prototype, \"reverse\", void 0);\n    return LegendSettings;\n}(ChildProperty));\nexport { LegendSettings };\n/**\n * Legend base class for Chart and Accumulation chart.\n *\n * @private\n */\nvar BaseLegend = /** @class */ (function () {\n    /**\n     * Constructor for the dateTime module.\n     *\n     * @private\n     */\n    function BaseLegend(chart) {\n        this.maxItemHeight = 0;\n        this.rowHeights = [];\n        this.pageHeights = [];\n        this.columnHeights = [];\n        this.pageXCollections = []; // pages of x locations\n        this.chartRowCount = 1;\n        this.legendTitleCollections = [];\n        this.legendRegions = [];\n        this.pagingRegions = [];\n        this.chart = chart;\n        this.legend = chart.legendSettings;\n        this.legendID = chart.element.id + '_chart_legend';\n        this.isChartControl = (chart.getModuleName() === 'chart' || chart.getModuleName() === 'chart3d');\n        this.isAccChartControl = (chart.getModuleName() === 'accumulationchart' || chart.getModuleName() === 'circularchart3d');\n        this.isBulletChartControl = (chart.getModuleName() === 'bulletChart');\n        this.isStockChartControl = (chart.getModuleName() === 'stockChart');\n        this.bulletChart = this.chart;\n        this.fivePixel = 5;\n        this.rowCount = 0;\n        this.pageButtonSize = 8;\n        this.maxColumns = 0;\n        this.maxWidth = 0;\n        this.currentPage = 1;\n        this.backwardArrowOpacity = 0;\n        this.forwardArrowOpacity = 1;\n        this.arrowWidth = (2 * (this.fivePixel + this.pageButtonSize + this.fivePixel));\n        this.arrowHeight = this.arrowWidth;\n        this.isTop = false;\n        this.isTitle = false;\n        this.currentPageNumber = 1;\n    }\n    /**\n     * Calculate the bounds for the legends.\n     *\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize, maxLabelSize) {\n        var legend = this.legend;\n        var defaultValue = (this.isBulletChartControl) ? '40%' : '20%';\n        this.getPosition(legend.position, availableSize);\n        this.legendBounds = new Rect(rect.x, rect.y, 0, 0);\n        this.isVertical = (this.position === 'Left' || this.position === 'Right');\n        this.itemPadding = this.legend.itemPadding ? this.legend.itemPadding : this.isVertical ? this.legend.padding : 20;\n        if (this.isVertical) {\n            this.legendBounds.height = stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n            this.legendBounds.width = stringToNumber(legend.width || defaultValue, availableSize.width);\n        }\n        else {\n            this.legendBounds.width = stringToNumber(legend.width, availableSize.width) || rect.width;\n            this.legendBounds.height = stringToNumber(legend.height || defaultValue, availableSize.height);\n        }\n        if (this.chart.getModuleName() === 'chart3d') {\n            this.library.get3DLegendBounds(availableSize, this.legendBounds, legend);\n        }\n        else {\n            this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n        }\n        if (!this.isBulletChartControl) {\n            this.legendBounds.width += (this.legend.containerPadding.left + this.legend.containerPadding.right);\n            this.legendBounds.height += (this.legend.containerPadding.top + this.legend.containerPadding.bottom);\n        }\n        this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize, maxLabelSize);\n    };\n    /**\n     * To find legend position based on available size for chart and accumulation chart\n     *\n     * @param position\n     * @param availableSize\n     * @param position\n     * @param availableSize\n     * @returns {void}\n     */\n    BaseLegend.prototype.getPosition = function (position, availableSize) {\n        var chart = this.chart;\n        var accumulation = this.chart;\n        if (this.isChartControl || this.isBulletChartControl || this.isStockChartControl) {\n            this.position = (position !== 'Auto') ? position : 'Bottom';\n        }\n        else {\n            if (position === 'Auto' && ((chart || accumulation).visibleSeries && (chart || accumulation).visibleSeries[0].type === 'Funnel' || (chart || accumulation).visibleSeries[0].type === 'Pyramid')) {\n                position = 'Top';\n            }\n            this.position = (position !== 'Auto') ? position :\n                (availableSize.width > availableSize.height ? 'Right' : 'Bottom');\n        }\n    };\n    /**\n     * To set bounds for chart and accumulation chart\n     *\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @param computedWidth\n     * @param computedHeight\n     * @param legend\n     * @param legendBounds\n     * @returns {void}\n     */\n    BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n        var titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n        if (this.isVertical && this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            titleHeight = legend.title && legend.titlePosition === 'Top' ? this.legendTitleSize.height + this.fivePixel : 0;\n            titleHeight += (this.pageButtonSize + this.fivePixel);\n        }\n        computedWidth = Math.min(computedWidth, legendBounds.width);\n        computedHeight = Math.min(computedHeight, legendBounds.height);\n        if (legend.mode === 'Gradient') {\n            legendBounds.width = legend.width ? legendBounds.width : this.isVertical ? computedWidth : 0.75 * legendBounds.width;\n            legendBounds.height = legend.height ? legendBounds.height : this.isVertical ? 0.75 * legendBounds.height : computedHeight;\n        }\n        else {\n            legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n            legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n        }\n        if (!this.isBulletChartControl) {\n            if (this.isTop && legend.titleStyle.textOverflow !== 'None') {\n                this.calculateLegendTitle(legend, legendBounds);\n                legendBounds.height += legend.titleStyle.textOverflow === 'Wrap' && this.legendTitleCollections.length > 1 ?\n                    (this.legendTitleSize.height - (this.legendTitleSize.height / this.legendTitleCollections.length)) : 0;\n            }\n        }\n        this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding - titleHeight) /\n            (this.maxItemHeight + legend.padding)));\n    };\n    /**\n     * To find legend location based on position, alignment for chart and accumulation chart\n     *\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     * @param position\n     * @param alignment\n     * @param legendBounds\n     * @param rect\n     * @param availableSize\n     * @param maxLabelSize\n     */\n    BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize, maxLabelSize) {\n        var padding = this.legend.border.width;\n        var isBulletChart = this.isBulletChartControl;\n        var bulletChart = this.bulletChart;\n        var labelIns = bulletChart.labelPosition === 'Inside';\n        var ticklIns = bulletChart.tickPosition === 'Inside';\n        var isVertical = bulletChart.orientation === 'Vertical';\n        var categoryFieldValue = (isBulletChart && bulletChart.categoryField !== '') ?\n            maxLabelSize.width + this.chart.border.width + padding * 3 : 0;\n        var marginBottom = this.chart.margin.bottom;\n        var legendHeight = legendBounds.height + padding + this.legend.margin.top + this.legend.margin.bottom;\n        var legendWidth = legendBounds.width + padding + this.legend.margin.left + this.legend.margin.right;\n        if (position === 'Bottom') {\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + (rect.height - legendHeight) + padding + this.legend.margin.top;\n            legendBounds.y += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns\n                && !isVertical) ? bulletChart.majorTickLines.height + marginBottom + this.legend.border.width + padding * 2 :\n                (isVertical && bulletChart.categoryField !== '') ? maxLabelSize.height + padding * 2 : 0;\n            subtractThickness(rect, new Thickness(0, 0, 0, legendHeight));\n        }\n        else if (position === 'Top') {\n            var axisTextSize = void 0;\n            if (this.isChartControl) {\n                axisTextSize = measureText('100', this.chart.verticalAxes[0].labelStyle, this.chart.themeStyle.legendLabelFont);\n            }\n            legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n            legendBounds.y = rect.y + padding + this.legend.margin.top;\n            legendBounds.y -= (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                !isVertical) ? bulletChart.majorTickLines.height + this.chart.margin.top : 0;\n            legendHeight -= (isBulletChart) ? -padding * 2 : (this.isChartControl ? -padding * 2 - axisTextSize.height / 2 : 0);\n            subtractThickness(rect, new Thickness(0, 0, legendHeight, 0));\n        }\n        else if (position === 'Right') {\n            legendBounds.x = rect.x + (rect.width - legendBounds.width) - this.legend.margin.right;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (this.chart.margin.left + this.chart.margin.right + bulletChart.majorTickLines.height) : 0;\n            subtractThickness(rect, new Thickness(0, legendWidth, 0, 0));\n        }\n        else if (position === 'Left') {\n            legendBounds.x = legendBounds.x + this.legend.margin.left;\n            legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n            legendWidth += (isBulletChart && !bulletChart.opposedPosition && !labelIns && !ticklIns &&\n                isVertical) ? (legendBounds.x - this.chart.margin.left + padding + bulletChart.majorTickLines.height) :\n                (bulletChart.orientation !== 'Vertical' && bulletChart.categoryField !== '') ? categoryFieldValue : 0;\n            subtractThickness(rect, new Thickness(legendWidth, 0, 0, 0));\n        }\n        else {\n            legendBounds.x = this.legend.location.x;\n            legendBounds.y = this.legend.location.y;\n            subtractThickness(rect, new Thickness(0, 0, 0, 0));\n        }\n    };\n    /**\n     * To find legend alignment for chart and accumulation chart\n     *\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     * @param start\n     * @param size\n     * @param legendSize\n     * @param alignment\n     */\n    BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n        switch (alignment) {\n            case 'Far':\n                start = (size - legendSize) - start;\n                break;\n            case 'Center':\n                start = ((size - legendSize) / 2);\n                break;\n        }\n        return start;\n    };\n    /**\n     * Renders the legend.\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param redraw\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds, redraw) {\n        var titleHeight = 0;\n        var titlePlusArrowWidth = 0;\n        var pagingLegendBounds = new Rect(0, 0, 0, 0);\n        var requireLegendBounds = new Rect(0, 0, 0, 0);\n        var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n        var padding = legend.padding;\n        this.itemPadding = this.isBulletChartControl ? legend.padding : this.itemPadding;\n        var isPaging = legend.enablePages;\n        var titlePosition = legend.titlePosition;\n        var upArrowHeight = this.isPaging && !legend.enablePages && this.isVertical ? this.pageButtonSize : 0;\n        var legendGroup = chart.renderer.createGroup({ id: this.legendID + '_g' });\n        var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID, redraw);\n        this.legendRegions = [];\n        this.chartRowCount = 1;\n        var maxHeight = 0;\n        titleHeight = !this.isTitle ? 0 : (this.isTop || this.isVertical ? this.legendTitleSize.height : 0);\n        if (this.isChartControl || (this.isAccChartControl && !this.isVertical)) {\n            var pageCount = 1;\n            var rowHeights = this.rowHeights[0] + padding;\n            for (var i = 1; i < this.rowHeights.length; i++) {\n                if ((rowHeights + this.rowHeights[i] + padding) > (this.legendBounds.height - this.pageButtonSize - this.maxItemHeight / 2)) {\n                    this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n                    pageCount++;\n                    rowHeights = 0;\n                }\n                rowHeights += (this.rowHeights[i] + (this.isVertical ? this.itemPadding : padding));\n            }\n            this.pageHeights[pageCount - 1] = rowHeights + titleHeight;\n            this.totalPages = pageCount;\n        }\n        for (var i = 0; i < this.legendCollections.length; i++) {\n            if (this.legendCollections[i].text !== '') {\n                maxHeight = Math.max(this.legendCollections[i].textSize.height, maxHeight);\n                break;\n            }\n            else {\n                continue;\n            }\n        }\n        if (!this.isChartControl && !this.isAccChartControl) {\n            this.maxItemHeight = Math.max(maxHeight, legend.shapeHeight);\n        }\n        // For new legend navigation\n        if (!isPaging && this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = !this.isTitle ? 0 : titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n            titlePlusArrowWidth += (this.pageButtonSize + (2 * this.fivePixel));\n        }\n        else if (this.isTitle && !this.isPaging && !this.isVertical) {\n            titlePlusArrowWidth = titlePosition === ((!this.isRtlEnable) ? 'Left' : 'Right') ? (this.fivePixel + this.legendTitleSize.width) : 0;\n        }\n        if (chart.legendSettings.mode === 'Gradient' && this.legendCollections.length > 1) {\n            this.getLinearLegend(legendBounds, chart, legend, legendTranslateGroup);\n            this.totalPages = 1;\n        }\n        else if (firstLegend !== this.legendCollections.length) {\n            var legendSeriesGroup = void 0; // legendItem group for each series group element\n            var count = 0;\n            var previousLegend = this.legendCollections[firstLegend];\n            // starting shape center x,y position && to resolve lint error used new line for declaration\n            var startPadding = this.isBulletChartControl ? padding : titlePlusArrowWidth + padding + (legend.shapeWidth / 2) + legend.containerPadding.left;\n            var xLocation = (this.isBulletChartControl && !this.isRtlEnable) ? legendBounds.x + titlePlusArrowWidth + padding + (legend.shapeWidth / 2) :\n                (!this.isRtlEnable) ? legendBounds.x + startPadding : legendBounds.x + ((this.chart.getModuleName() === 'accumulationchart' && this.isVertical) ? this.maxWidth : legendBounds.width) - startPadding;\n            var start = new ChartLocation(xLocation, this.isBulletChartControl ? legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) :\n                legendBounds.y + titleHeight + upArrowHeight + padding + (this.maxItemHeight / 2) + legend.containerPadding.top);\n            var anchor = chart.isRtlEnabled || chart.enableRtl ? 'end' : 'start';\n            var textOptions = new TextOption('', start.x, start.y, anchor);\n            var textPadding = legend.shapePadding + this.itemPadding + legend.shapeWidth;\n            //  initialization for totalPages legend click totalpage again calculate\n            this.totalPages = this.totalPages = (this.isAccChartControl || this.isChartControl || this.isBulletChartControl || this.isStockChartControl) ? this.totalPages : 0;\n            this.pageXCollections = [];\n            this.legendCollections[firstLegend].location = start;\n            var legendIndex = void 0;\n            if (!legend.enablePages && this.isPaging) {\n                var x = start.x - this.fivePixel;\n                var y = start.y - this.fivePixel;\n                var leftSpace = this.isTitle && !this.isVertical && titlePosition === 'Left' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                var bottomSapce = this.isVertical ? (this.pageButtonSize) + Math.abs(y - legendBounds.y) : 0;\n                var rightSpace = this.isTitle && !this.isVertical && titlePosition === 'Right' ?\n                    this.legendTitleSize.width + this.fivePixel : 0;\n                rightSpace += this.isVertical ? 0 : (this.fivePixel + this.pageButtonSize + this.fivePixel);\n                pagingLegendBounds = new Rect(x, y, legendBounds.width - rightSpace - leftSpace, legendBounds.height - bottomSapce);\n                requireLegendBounds = pagingLegendBounds;\n            }\n            else {\n                requireLegendBounds = legendBounds;\n            }\n            var legendOption = void 0;\n            for (var i = 0; i < this.legendCollections.length; i++) {\n                legendOption = this.legendCollections[i];\n                legendIndex = !this.isReverse ? count : (this.legendCollections.length - 1) - count;\n                if (this.chart.getModuleName() === 'accumulationchart') {\n                    legendOption.fill = (this.chart || this.chart || this.chart || this.chart).visibleSeries[0].points[legendOption.pointIndex].color;\n                }\n                if (this.chart.getModuleName() === 'stockChart') {\n                    legendOption.type = this.chart.visibleSeries[count].type;\n                }\n                this.accessbilityText = (this.isBulletChartControl) ? 'Legend of bullet chart' + '' + legendOption.text\n                    : 'Click to show or hide the ' + legendOption.text + ' series';\n                if (legendOption.render && legendOption.text && legendOption.text !== '') {\n                    legendSeriesGroup = chart.renderer.createGroup({\n                        id: this.legendID + this.generateId(legendOption, '_g_', legendIndex)\n                    });\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.setAttribute('tabindex', i === 0 ? '0' : '');\n                        legendSeriesGroup.setAttribute('aria-label', legend.description || (legendOption.text + ' series is ' + (legendOption.visible ? 'showing, press enter to hide the ' : 'hidden, press enter to show the ') + legendOption.text + ' series'));\n                        legendSeriesGroup.setAttribute('role', 'button');\n                        legendSeriesGroup.setAttribute('aria-pressed', legendOption.visible ? 'true' : 'false');\n                    }\n                    this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, requireLegendBounds, count, firstLegend);\n                    this.renderSymbol(legendOption, legendSeriesGroup, legendIndex);\n                    this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count, legendIndex);\n                    if (legendSeriesGroup) {\n                        legendSeriesGroup.style.cssText =\n                            'pointer-events: bounding-box; cursor: ' + ((!legend.toggleVisibility && (chart.selectionMode === 'None' ||\n                                chart.highlightMode === 'None' ||\n                                chart.selectionMode === 'None') || this.isBulletChartControl) ? 'auto' : 'pointer');\n                    }\n                    if (legendTranslateGroup) {\n                        legendTranslateGroup.appendChild(legendSeriesGroup);\n                    }\n                    previousLegend = legendOption;\n                }\n                count++;\n            }\n            this.totalPages = (this.isPaging && !this.isBulletChartControl && !this.legend.enablePages && !this.isVertical &&\n                this.totalPages > this.chartRowCount) ? this.chartRowCount : this.totalPages;\n            if (this.isPaging && this.totalPages > 1) {\n                this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n            }\n            else {\n                this.totalPages = 1;\n            }\n        }\n        appendChildElement(chart.enableCanvas, chart.svgObject, legendGroup, redraw);\n    };\n    /** @private */\n    BaseLegend.prototype.getLinearLegend = function (legendBounds, chart, legend, legendTranslateGroup) {\n        var xmlns = 'http://www.w3.org/2000/svg';\n        var previousLegend = this.legendCollections[0];\n        var nextLegend = this.legendCollections[1];\n        var defElement = this.chart.renderer.createDefs();\n        var gradientLegendCount = 0;\n        var linerGradientEle = document.createElementNS(xmlns, 'linearGradient');\n        var opacity = 1;\n        var fillColors = [];\n        var numberItems = [];\n        if (legend.title) {\n            if (!this.isVertical) {\n                if (legend.titlePosition === 'Left') {\n                    legendBounds.x += this.legendTitleSize.width;\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Right') {\n                    legendBounds.width -= this.legendTitleSize.width;\n                }\n                else if (legend.titlePosition === 'Top') {\n                    legendBounds.y += this.legendTitleSize.height;\n                    legendBounds.height -= this.legendTitleSize.height;\n                }\n            }\n            else {\n                legendBounds.y += this.legendTitleSize.height;\n                legendBounds.height -= this.legendTitleSize.height;\n            }\n        }\n        for (var _i = 0, _a = this.chart.rangeColorSettings; _i < _a.length; _i++) {\n            var colorMap = _a[_i];\n            if (numberItems.indexOf(colorMap.start) < 0) {\n                numberItems.push(colorMap.start);\n            }\n            if (colorMap.colors.length > 2) {\n                var diffValue = (colorMap.end - colorMap.start);\n                var colorsLength = colorMap.colors.length - 1;\n                if (diffValue > 0) {\n                    diffValue = diffValue / colorsLength;\n                    for (var index = 1; index < colorsLength; index++) {\n                        var calculatedValue = colorMap.start + (diffValue * index);\n                        numberItems.push(calculatedValue);\n                    }\n                }\n                else {\n                    for (var index = 1; index < colorsLength; index++) {\n                        numberItems.push(colorMap.start);\n                    }\n                }\n            }\n            if (numberItems.indexOf(colorMap.end) < 0) {\n                numberItems.push(colorMap.end);\n            }\n            for (var _b = 0, _c = colorMap.colors; _b < _c.length; _b++) {\n                var fillColor = _c[_b];\n                if (fillColors.indexOf(fillColor) < 0) {\n                    fillColors.push(fillColor);\n                }\n            }\n            if (colorMap.colors.length > 0 && colorMap.colors.length < 2) {\n                fillColors.push(colorMap.colors[0]);\n            }\n        }\n        var x1 = this.isRtlEnable && !this.isVertical ? '100%' : '0%';\n        var x2 = this.isVertical || this.isRtlEnable ? '0%' : '100%';\n        var y2 = this.isVertical ? '100%' : '0%';\n        linerGradientEle.setAttribute('id', this.generateId(previousLegend, 'linearGradient', gradientLegendCount));\n        linerGradientEle.setAttribute('x1', x1);\n        linerGradientEle.setAttribute('y1', '0%');\n        linerGradientEle.setAttribute('x2', x2);\n        linerGradientEle.setAttribute('y2', y2);\n        var full = numberItems[numberItems.length - 1] - numberItems[0];\n        for (var b = 0; b < fillColors.length; b++) {\n            var offsetValue = numberItems[b] - numberItems[0];\n            offsetValue = offsetValue / full;\n            var stopEle = document.createElementNS(xmlns, 'stop');\n            stopEle.setAttribute('offset', offsetValue.toString());\n            stopEle.setAttribute('stop-color', fillColors[b]);\n            stopEle.setAttribute('stop-opacity', opacity.toString());\n            linerGradientEle.appendChild(stopEle);\n        }\n        var startLabel = previousLegend.text.toString();\n        var endLabel = nextLegend.text.toString();\n        var startTextSize = measureText(startLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n        var endTextSize = measureText(endLabel, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n        var textWidth = startTextSize.width > endTextSize.width ? startTextSize.width : endTextSize.width;\n        var textHeight = startTextSize.height > endTextSize.height ? startTextSize.height : endTextSize.height;\n        var otherSpaces = (2 * textWidth) + (4 * legend.padding);\n        var linearBarWidth = legendBounds.width;\n        var linearBarHeight = legendBounds.height;\n        var xValue = legendBounds.x + textWidth + (2 * legend.padding);\n        var yValue = legendBounds.y + legend.padding;\n        var startLabelY;\n        var endLabelY;\n        var startLabelX;\n        var endLabelX;\n        if (this.isVertical) {\n            otherSpaces = (2 * textHeight) + (4 * legend.padding);\n            linearBarWidth = legendBounds.width - (2 * legend.padding);\n            linearBarHeight = legendBounds.height - otherSpaces;\n            xValue = legendBounds.x + legend.padding;\n            yValue = legendBounds.y + textHeight + (2 * legend.padding);\n            startLabelY = legendBounds.y + legend.padding + textHeight;\n            endLabelY = yValue + linearBarHeight + textHeight;\n            startLabelX = (legendBounds.x + (legendBounds.width * 0.5)) - (textWidth * 0.5);\n            endLabelX = startLabelX;\n            if (linearBarWidth > 30) {\n                var diffWidth = linearBarWidth - 30;\n                linearBarWidth = 30;\n                xValue = xValue + (diffWidth / 2);\n            }\n        }\n        else {\n            linearBarWidth = legendBounds.width - otherSpaces;\n            linearBarHeight = legendBounds.height - (2 * legend.padding);\n            startLabelX = legendBounds.x + ((!this.isRtlEnable) ? legend.padding + (textWidth - startTextSize.width) :\n                linearBarWidth + (3 * legend.padding) + textWidth);\n            endLabelX = legendBounds.x + ((!this.isRtlEnable) ? linearBarWidth + (3 * legend.padding) + textWidth :\n                legend.padding + (textWidth - endTextSize.width));\n            startLabelY = legendBounds.y + (legendBounds.height * 0.5) + (textHeight * 0.25);\n            endLabelY = startLabelY;\n            if (linearBarHeight > 30) {\n                var diffHeight = linearBarHeight - 30;\n                linearBarHeight = 30;\n                yValue = yValue + (diffHeight / 2);\n            }\n        }\n        var anchor = chart.enableRtl ? 'end' : '';\n        var textOptions = new TextOption('', startLabelX, startLabelY, anchor, startLabel);\n        var hiddenColor = '#D3D3D3';\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 1);\n        var fontcolor = previousLegend.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        textOptions = new TextOption('', endLabelX, endLabelY, anchor, endLabel);\n        textOptions.id = this.legendID + this.generateId(previousLegend, '_text_', 2);\n        textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, legendTranslateGroup, false, false, false, false, \n        // tslint:disable-next-line:align\n        null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        var gradientLegend = chart.renderer.drawRectangle({\n            width: linearBarWidth,\n            height: linearBarHeight,\n            x: xValue,\n            y: yValue,\n            fill: 'url(#' + this.generateId(previousLegend, 'linearGradient', gradientLegendCount) + ')'\n        });\n        defElement.appendChild(linerGradientEle);\n        legendTranslateGroup.appendChild(defElement);\n        legendTranslateGroup.appendChild(gradientLegend);\n    };\n    /**\n     * To find first valid legend text index for chart and accumulation chart\n     *\n     * @param legendCollection\n     * @returns {number}\n     * @private\n     */\n    BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n        var count = 0;\n        for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n            var legend = legendCollection_1[_i];\n            if (legend.render && legend.text && legend.text !== '') {\n                break;\n            }\n            count++;\n        }\n        return count;\n    };\n    /**\n     * To get the legend title text width and height.\n     *\n     * @param legend\n     * @param legendBounds\n     */\n    BaseLegend.prototype.calculateLegendTitle = function (legend, legendBounds) {\n        if (legend.title) {\n            this.isTop = legend.titlePosition === 'Top';\n            var padding = legend.titleStyle.textOverflow === 'Trim' ? 2 * legend.padding : 0;\n            if (this.isTop || this.isVertical) {\n                this.legendTitleCollections = getTitle(legend.title, legend.titleStyle, (legendBounds.width - padding), this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n            }\n            else {\n                this.legendTitleCollections[0] = textTrim(legend.maximumTitleWidth, legend.title, legend.titleStyle, this.chart.enableRtl, this.chart.themeStyle.legendTitleFont);\n            }\n            var text = this.isTop ? legend.title : this.legendTitleCollections[0];\n            this.legendTitleSize = measureText(text, legend.titleStyle, this.chart.themeStyle.legendTitleFont);\n            this.legendTitleSize.height *= this.legendTitleCollections.length;\n        }\n        else {\n            this.legendTitleSize = new Size(0, 0);\n        }\n    };\n    /**\n     * Render the legend title\n     *\n     * @param chart\n     * @param legend\n     * @param legendBounds\n     * @param legendGroup\n     */\n    BaseLegend.prototype.renderLegendTitle = function (chart, legend, legendBounds, legendGroup) {\n        var padding = legend.padding;\n        var alignment = legend.titleStyle.textAlignment;\n        this.isTop = legend.titlePosition === 'Top';\n        var anchor = getTextAnchor(legend.titleStyle.textAlignment, chart.enableRtl);\n        var x = titlePositionX(legendBounds, legend.titleStyle);\n        anchor = this.isTop || this.isVertical ? anchor : (chart.enableRtl) ? 'end' : '';\n        x = alignment === 'Near' ? (x + padding) : alignment === 'Far' ? (x - padding) : x;\n        x = (this.isTop || this.isVertical) ? x : ((legendBounds.x) + (legend.titlePosition === 'Left' ? 5 :\n            (legendBounds.width - this.legendTitleSize.width - 5)));\n        var topPadding = (legendBounds.height / 2) + (this.legendTitleSize.height / 4);\n        var y = legendBounds.y + (!this.isTop && !this.isVertical ? topPadding :\n            (this.legendTitleSize.height / this.legendTitleCollections.length));\n        var legendTitleTextOptions = new TextOption(this.legendID + '_title', x, y, anchor, this.legendTitleCollections);\n        textElement(chart.renderer, legendTitleTextOptions, legend.titleStyle, legend.titleStyle.color || this.chart.themeStyle.legendTitleFont.color, legendGroup, null, null, null, null, null, null, null, null, null, null, this.chart.themeStyle.legendTitleFont);\n    };\n    /**\n     * To create legend rendering elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendBounds\n     * @param legendGroup\n     * @param legend\n     * @param id\n     * @param redraw\n     */\n    BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id, redraw) {\n        var padding = legend.padding;\n        var options = new RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds, 0, 0, '', this.legend.border.dashArray);\n        var legendItemsGroup = chart.renderer.createGroup({ id: id + '_collections' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var clippath = chart.renderer.createClipPath({ id: id + '_clipPath' });\n        options.width = (this.isRtlEnable && this.chart.getModuleName() === 'accumulationchart' && this.isVertical) ? this.maxWidth : legendBounds.width;\n        if (legendGroup) {\n            legendGroup.appendChild(chart.renderer.drawRectangle(options));\n        }\n        else {\n            chart.renderer.drawRectangle(options);\n        }\n        if (legend.title) {\n            this.renderLegendTitle(chart, legend, legendBounds, legendGroup);\n        }\n        if (!isCanvas) {\n            legendGroup.appendChild(legendItemsGroup);\n        }\n        this.legendTranslateGroup = chart.renderer.createGroup({ id: id + '_translate_g' });\n        if (!isCanvas) {\n            legendItemsGroup.appendChild(this.legendTranslateGroup);\n        }\n        options.y += (this.isTop ? this.legendTitleSize.height : 0);\n        options.id += '_clipPath_rect';\n        options.width = ((!this.isChartControl && chart.getModuleName() !== 'bulletChart' && !this.isStockChartControl) && this.isVertical) ? this.maxWidth - padding + legend.containerPadding.left + legend.containerPadding.right\n            : legendBounds.width;\n        if (!isCanvas) {\n            this.clipRect = chart.renderer.drawRectangle(options);\n            clippath.appendChild(this.clipRect);\n        }\n        else {\n            this.pagingClipRect = options;\n        }\n        appendChildElement(isCanvas, chart.svgObject, clippath, redraw);\n        if (!isCanvas) {\n            legendItemsGroup.style.cssText = 'clip-path:url(#' + clippath.id + ')';\n        }\n        return this.legendTranslateGroup;\n    };\n    /**\n     * To render legend symbols for chart and accumulation chart\n     *\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     * @param legendOption\n     * @param group\n     * @param i\n     */\n    BaseLegend.prototype.renderSymbol = function (legendOption, group, legendIndex) {\n        var control = this.isBulletChartControl ? this.chart : null;\n        var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n        var isStrokeWidth = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') && (((legendOption.shape === 'SeriesType') &&\n            (legendOption.type.toLowerCase().indexOf('line') > -1) && (legendOption.type.toLowerCase().indexOf('area') === -1)) ||\n            ((legendOption.shape === 'HorizontalLine') || (legendOption.shape === 'VerticalLine') || (legendOption.shape === 'Cross')));\n        var isCustomBorder = (this.chart.getModuleName() === 'chart' || this.chart.getModuleName() === 'stockChart') &&\n            (legendOption.type === 'Scatter' || legendOption.type === 'Bubble');\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        var borderColor;\n        var shape = (legendOption.shape === 'SeriesType') ? legendOption.type : legendOption.shape;\n        var strokewidth = isStrokeWidth ? (this.legend.mode === 'Series' ?\n            this.chart.visibleSeries[legendIndex].width : this.chart.visibleSeries[0].width) :\n            (this.isBulletChartControl && legendOption.shape === 'Multiply') ? 4 : 1;\n        var regionPadding;\n        shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n        if (isCustomBorder && legendIndex < this.chart.visibleSeries.length) {\n            var series = this.chart.visibleSeries[legendIndex];\n            var seriesBorder = series.border;\n            var isLineShapemarker = shape === 'HorizontalLine' || shape === 'VerticalLine';\n            borderColor = isLineShapemarker ? symbolColor : seriesBorder.color ? seriesBorder.color : symbolColor;\n            strokewidth = isLineShapemarker ? series.width : seriesBorder.width ? seriesBorder.width : 1;\n        }\n        var symbolOption = new PathOption(this.legendID + this.generateId(legendOption, '_shape_', legendIndex), symbolColor, strokewidth, (isCustomBorder ? borderColor : symbolColor), this.legend.opacity, legendOption.dashArray, '');\n        var textSize = measureText(legendOption.text, this.legend.textStyle, this.chart.themeStyle.legendLabelFont);\n        var x = this.legend.isInversed && !this.isRtlEnable ? legendOption.location.x + textSize.width + this.legend.shapePadding\n            : legendOption.location.x;\n        var y = legendOption.location.y;\n        if (!isCanvas) {\n            group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), legendOption.url, symbolOption, this.accessbilityText, this.chart.renderer, null, this.isBulletChartControl, control));\n        }\n        else {\n            regionPadding = -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber);\n            drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ? new Rect(0, regionPadding, 0, 0) : null, this.isBulletChartControl, control);\n            this.legendRegions.push({\n                rect: new Rect(legendOption.location.x, legendOption.location.y, this.legend.shapeWidth, this.legend.shapeHeight + regionPadding), index: legendIndex\n            });\n        }\n        if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' ||\n            (legendOption.type === 'Doughnut' && shape === 'Doughnut')) {\n            symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', legendIndex);\n            shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n            symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n            if (!isCanvas) {\n                group.appendChild(drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, null, null, this.isBulletChartControl, control));\n            }\n            else {\n                drawSymbol({ x: x, y: y }, shape, new Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, this.accessbilityText, this.chart.renderer, this.currentPageNumber ?\n                    new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, this.isBulletChartControl, control);\n            }\n        }\n    };\n    /**\n     * To render legend text for chart and accumulation chart\n     *\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     * @param chart\n     * @param legendOption\n     * @param group\n     * @param textOptions\n     * @param i\n     */\n    BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i, legendIndex) {\n        var legend = chart.legendSettings;\n        var hiddenColor = '#D3D3D3';\n        var fontcolor = legendOption.visible ? legend.textStyle.color || chart.themeStyle.legendLabelFont.color : hiddenColor;\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        textOptions.id = this.legendID + this.generateId(legendOption, '_text_', legendIndex);\n        textOptions.text = legendOption.textCollection.length > 0 ? legendOption.textCollection : legendOption.text;\n        if (legend.isInversed && !this.isRtlEnable) {\n            textOptions.x = legendOption.location.x - (legend.shapeWidth / 2);\n        }\n        else if (this.isRtlEnable) {\n            var textWidth = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont).width;\n            textOptions.x = this.chart.getModuleName() === 'bulletChart' ? legendOption.location.x - legend.shapeWidth : legendOption.location.x - ((legendOption.textCollection.length > 1 ? textWidth / legendOption.textCollection.length : textWidth) + legend.shapeWidth / 2 + legend.shapePadding);\n        }\n        else {\n            textOptions.x = legendOption.location.x + (legend.shapeWidth / 2) + legend.shapePadding;\n        }\n        textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n        var element = textElement(chart.renderer, textOptions, legend.textStyle, fontcolor, group, false, false, false, false, null, this.currentPageNumber && isCanvas ?\n            new Rect(0, -this.translatePage(isCanvas, null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null, null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        if (isCanvas) {\n            var textSize = measureText(legendOption.text, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n            var region = void 0;\n            for (var j = 0; j < this.legendRegions.length; j++) {\n                if (this.legendRegions[j].index === i) {\n                    region = this.legendRegions[j];\n                    break;\n                }\n            }\n            region.rect.y = textOptions.y < region.rect.y ? textOptions.y : region.rect.y;\n            region.rect.width += textSize.width;\n            region.rect.height = textSize.height;\n            region.rect.y -= textSize.height * 0.5;\n            region.rect.x -= (this.isRtlEnable) ? region.rect.width : 0;\n        }\n    };\n    /**\n     * To render legend paging elements for chart and accumulation chart\n     *\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     * @param chart\n     * @param bounds\n     * @param textOption\n     * @param legendGroup\n     */\n    // tslint:disable-next-line:max-func-body-length\n    BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n        var paginggroup = chart.renderer.createGroup({ id: this.legendID + '_navigation' });\n        var isCanvas = this.isStockChartControl ? false : chart.enableCanvas;\n        var titleHeight = this.isBulletChartControl ? 0 : this.legendTitleSize.height;\n        var grayColor = (this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1) ? '#FFFFFF' : '#545454';\n        var legend = chart.legendSettings; // to solve parameter lint error, legend declaration is here\n        var padding = 8; // const padding for paging elements\n        var pageUp = this.legendID + (!this.isRtlEnable ? '_pageup' : '_pagedown');\n        var pageDown = this.legendID + (!this.isRtlEnable ? '_pagedown' : '_pageup');\n        var symbolOption = new PathOption(pageUp, 'transparent', 5, grayColor, 1, '', '');\n        var iconSize = this.pageButtonSize;\n        // Page left arrow drawing calculation started here\n        var rowCount = !legend.enablePages && this.isPaging && !this.isVertical && !this.isBulletChartControl ? 1 :\n            (this.rowCount - 1);\n        var titleWidth = this.isTitle && legend.titlePosition === 'Left' ? this.legendTitleSize.width : 0;\n        this.pagingRegions = [];\n        this.backwardArrowOpacity = this.currentPage !== 1 ? 1 : 0;\n        this.forwardArrowOpacity = this.currentPage === this.totalPages ? 0 : 1;\n        if (!isCanvas) {\n            legendGroup.appendChild(paginggroup);\n        }\n        if (!this.isChartControl && !this.isAccChartControl) {\n            if (this.isBulletChartControl || this.isStockChartControl || !this.isVertical) {\n                this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n            }\n            else {\n                this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n            }\n        }\n        if (paginggroup) {\n            paginggroup.style.cursor = 'pointer';\n        }\n        if ((this.isChartControl || this.isAccChartControl) && !(!legend.enablePages && this.isPaging)) {\n            this.clipPathHeight = this.pageHeights[0];\n        }\n        else {\n            this.clipPathHeight = (rowCount * (this.maxItemHeight + legend.padding));\n        }\n        //this.clipPathHeight = !(this.isChartControl) ? (rowCount * (this.maxItemHeight + legend.padding)) : this.columnHeights[0];\n        if (!isCanvas) {\n            this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n        }\n        else {\n            //paging clipRect only for canvas mode\n            this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight -\n                (this.pagingClipRect.y - this.legendBounds.y) - legend.border.width;\n            this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight;\n            this.pagingClipRect.x += legend.border.width;\n            this.pagingClipRect.width -= (legend.border.width + legend.border.width / 2);\n            this.chart.renderer.clearRect(new Rect(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height));\n        }\n        var pageTextElement;\n        var x = (bounds.x + iconSize / 2);\n        var y = bounds.y + this.clipPathHeight + ((titleHeight + bounds.height - this.clipPathHeight) / 2);\n        if (this.isPaging && !legend.enablePages && !this.isVertical && !this.isBulletChartControl) {\n            x = (bounds.x + this.pageButtonSize + titleWidth);\n            y = legend.title && this.isTop ? (bounds.y + padding + titleHeight + (iconSize / 1) + 0.5) :\n                (bounds.y + padding + iconSize + 0.5);\n        }\n        var size = measureText(this.totalPages + '/' + this.totalPages, legend.textStyle, this.chart.themeStyle.legendLabelFont);\n        var translateX = (this.isRtlEnable) ? legend.border.width + (iconSize / 2) : bounds.width - (2 * (iconSize + padding) + padding + size.width);\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + (iconSize / 2) + (padding / 2) + titleHeight;\n                symbolOption.opacity = this.backwardArrowOpacity;\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'UpArrow', new Size(iconSize, iconSize), '', symbolOption, 'UpArrow'));\n            }\n            else {\n                symbolOption.opacity = this.isBulletChartControl ? symbolOption.opacity :\n                    (legend.enablePages ? 1 : !this.isRtlEnable ? this.backwardArrowOpacity : this.forwardArrowOpacity);\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'LeftArrow', new Size(iconSize, iconSize), '', symbolOption, 'LeftArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5 : x, y - iconSize * 0.5, iconSize, iconSize));\n        // Page numbering rendering calculation started here\n        textOption.x = x + (iconSize / 2) + padding;\n        textOption.y = y + (size.height / 4);\n        textOption.id = this.legendID + '_pagenumber';\n        textOption.text = !this.isRtlEnable ? '1/' + this.totalPages : this.totalPages + '/1';\n        var color = (this.chart.theme.indexOf('Dark') > -1 || this.chart.theme.indexOf('Contrast') > -1) ? '#FFFFFF' : legend.textStyle.color || this.chart.themeStyle.legendLabelFont.color;\n        if (isCanvas && this.totalNoOfPages) {\n            textOption.text = !this.isRtlEnable ? this.currentPageNumber + '/' + this.totalNoOfPages : this.totalNoOfPages + '/' + this.currentPageNumber;\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            pageTextElement = textElement(chart.renderer, textOption, legend.textStyle, color, paginggroup, false, false, false, false, null, new Rect(translateX, 0, 0, 0), null, null, null, null, this.chart.themeStyle.legendLabelFont);\n        }\n        // Page right arrow rendering calculation started here\n        x = textOption.x + padding + (iconSize / 2) + size.width;\n        if (this.isPaging && !legend.enablePages && !this.isVertical) {\n            x = (bounds.x + bounds.width - (this.isBulletChartControl ? this.fivePixel : 0) - this.pageButtonSize - (legend.title && legend.titlePosition === 'Right' ?\n                this.legendTitleSize.width + this.fivePixel : 0));\n        }\n        symbolOption.id = pageDown;\n        symbolOption.opacity = !legend.enablePages ? !this.isRtlEnable ? this.forwardArrowOpacity : this.backwardArrowOpacity : 1;\n        if (!isCanvas) {\n            if (this.isVertical && !legend.enablePages && !this.isBulletChartControl) {\n                x = bounds.x + (bounds.width / 2);\n                y = bounds.y + bounds.height - (iconSize / 2);\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'DownArrow', new Size(iconSize, iconSize), '', symbolOption, 'DownArrow'));\n            }\n            else {\n                paginggroup.appendChild(drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n            }\n        }\n        else {\n            drawSymbol({ x: x, y: y }, 'RightArrow', new Size(iconSize, iconSize), '', symbolOption, 'RightArrow', this.chart.renderer, new Rect(translateX, 0, 0, 0));\n        }\n        this.pagingRegions.push(new Rect(!this.isRtlEnable ? x + (bounds.width - (2 * (iconSize + padding) + padding + size.width) - iconSize * 0.5) : x, y - iconSize * 0.5, iconSize, iconSize));\n        if (!isCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            //placing the navigation buttons and page numbering in legend right corner\n            paginggroup.setAttribute('transform', 'translate(' + translateX + ', ' + 0 + ')');\n        }\n        else {\n            if (this.currentPageNumber === 1 && this.calTotalPage && (legend.enablePages || this.isBulletChartControl)) {\n                this.totalNoOfPages = this.totalPages;\n                this.calTotalPage = false;\n            }\n            if (!legend.enablePages && !this.isBulletChartControl) { // For new legend page navigation\n                this.translatePage(isCanvas, null, this.currentPage - 1, this.currentPage, legend);\n            }\n        }\n        if (legend.enablePages || this.isBulletChartControl) {\n            this.translatePage(isCanvas, pageTextElement, this.currentPage - 1, this.currentPage, legend);\n        }\n    };\n    BaseLegend.prototype.getPageHeight = function (pageHeights, pageCount) {\n        var sum = 0;\n        for (var i = 0; i < pageCount; i++) {\n            sum += pageHeights[i];\n        }\n        return sum;\n    };\n    /**\n     * To translate legend pages for chart and accumulation chart\n     *\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     * @param pagingText\n     * @param page\n     * @param pageNumber\n     * @param legend\n     */\n    BaseLegend.prototype.translatePage = function (isCanvas, pagingText, page, pageNumber, legend) {\n        var size = (this.isChartControl || this.isAccChartControl) ? (page ? this.getPageHeight(this.pageHeights, page) : 0) : ((this.clipPathHeight) * page);\n        if (!isCanvas && (this.isChartControl || this.isAccChartControl)) {\n            this.clipRect.setAttribute('height', this.pageHeights[page].toString());\n            if (this.isAccChartControl && this.isPaging && !legend.enablePages && this.isVertical) {\n                this.clipRect.setAttribute('height', this.legendBounds.height.toString());\n            }\n        }\n        var translate = 'translate(0,-' + size + ')';\n        if (!this.isChartControl && !this.isBulletChartControl && !this.isStockChartControl && this.isVertical) {\n            var pageX = this.pageXCollections[page * this.maxColumns];\n            size = (!this.isRtlEnable) ? pageX - this.legendBounds.x : (this.legendBounds.x + this.maxWidth) - pageX;\n            size = size < 0 ? 0 : size; // to avoid small pixel variation\n            translate = ((!this.isRtlEnable) ? 'translate(-' : 'translate(') + size + ',0)';\n        }\n        if (!this.chart.enableCanvas) {\n            this.legendTranslateGroup.setAttribute('transform', translate);\n        }\n        if (!this.chart.enableCanvas && (legend.enablePages || this.isBulletChartControl)) {\n            pagingText.textContent = (pageNumber) + '/' + this.totalPages;\n        }\n        this.currentPage = pageNumber;\n        return size;\n    };\n    /**\n     * To change legend pages for chart and accumulation chart\n     *\n     * @param event\n     * @param pageUp\n     * @param event\n     * @param pageUp\n     */\n    BaseLegend.prototype.changePage = function (event, pageUp) {\n        var legend = this.chart.legendSettings;\n        var backwardArrow = document.getElementById(this.legendID + '_pageup');\n        var forwardArrow = document.getElementById(this.legendID + '_pagedown');\n        var isCanvas = this.isStockChartControl ? false : this.chart.enableCanvas;\n        var pageText = (legend.enablePages || this.isBulletChartControl) ?\n            document.getElementById(this.legendID + '_pagenumber') : null;\n        var page = (legend.enablePages || this.isBulletChartControl) ? parseInt(pageText.textContent.split('/')[0], 10) :\n            this.currentPage;\n        if (pageUp && page > 1) {\n            this.translatePage(isCanvas, pageText, (page - 2), (page - 1), legend);\n        }\n        else if (!pageUp && page < this.totalPages) {\n            this.translatePage(isCanvas, pageText, page, (page + 1), legend);\n        }\n        if (this.isPaging && !legend.enablePages && !this.isBulletChartControl) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === this.totalPages ? this.hideArrow(forwardArrow) : this.showArrow(forwardArrow);\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            this.currentPage === 1 ? this.hideArrow(backwardArrow) : this.showArrow(backwardArrow);\n        }\n    };\n    /**\n     * To hide the backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.hideArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '0');\n    };\n    /**\n     * To show the  backward and forward arrow\n     *\n     * @param arrowElement\n     */\n    BaseLegend.prototype.showArrow = function (arrowElement) {\n        arrowElement.setAttribute('opacity', '1');\n    };\n    /**\n     * To find legend elements id based on chart or accumulation chart\n     *\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @param option\n     * @param prefix\n     * @param count\n     * @private\n     */\n    BaseLegend.prototype.generateId = function (option, prefix, count) {\n        if (this.isChartControl || this.isStockChartControl) {\n            return prefix + count;\n        }\n        else {\n            return prefix + option.pointIndex;\n        }\n    };\n    /**\n     * To show or hide trimmed text tooltip for legend.\n     *\n     * @param event\n     * @returns {void}\n     * @private\n     */\n    BaseLegend.prototype.move = function (event) {\n        var _this = this;\n        var x = this.chart.mouseX;\n        var y = this.chart.mouseY;\n        if (event.target.textContent.indexOf('...') > -1) {\n            var targetId = event.target.id.split(this.legendID + '_text_');\n            if (targetId.length === 2) {\n                var index = parseInt(targetId[1], 10);\n                var element = this.chart.element;\n                if (!isNaN(index)) {\n                    if (this.chart.isTouch) {\n                        removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n                    }\n                    if (this.isChartControl) {\n                        showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                    else {\n                        showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), x + 10, y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', getElement(this.chart.element.id + '_Secondary_Element'));\n                    }\n                }\n            }\n        }\n        else {\n            removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n        }\n        if (this.chart.isTouch) {\n            clearTimeout(this.clearTooltip);\n            this.clearTooltip = +setTimeout(function () { removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip'); }, 1000);\n        }\n    };\n    return BaseLegend;\n}());\nexport { BaseLegend };\n/**\n * Class for legend options\n *\n * @private\n */\nvar LegendOptions = /** @class */ (function () {\n    function LegendOptions(text, fill, shape, visible, type, url, markerShape, markerVisibility, pointIndex, seriesIndex, dashArray) {\n        this.location = { x: 0, y: 0 };\n        this.textCollection = [];\n        this.text = text;\n        this.fill = fill;\n        this.shape = shape;\n        this.url = url;\n        this.visible = visible;\n        this.type = type;\n        this.markerVisibility = markerVisibility;\n        this.markerShape = markerShape;\n        this.pointIndex = pointIndex;\n        this.seriesIndex = seriesIndex;\n        this.dashArray = dashArray;\n    }\n    return LegendOptions;\n}());\nexport { LegendOptions };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}