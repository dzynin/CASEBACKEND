{"ast":null,"code":"var _jsxFileName = \"/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/Dashboard/FileViewer.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { UserContext } from \"../App\";\nimport { Resizable } from \"react-resizable\";\nimport processMd from \"./markdown\";\nimport axios from \"axios\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport \"../style/resizable.css\";\n\nconst updateHash = highlight => {\n  document.location.hash = `pdf-highlight-${highlight.id}`;\n};\n\nfunction FileViewer() {\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const [highlights, setHighlights] = useState([]);\n  const [dimensions, setDimensions] = useState({\n    height: 720,\n    width: 250\n  });\n  const [selectPdf, setSelectPdf] = useState(false);\n  const [show, setShow] = useState(false);\n  const [index, setIndex] = useState();\n\n  const handleClose = () => setShow(false);\n\n  useEffect(() => {\n    if (state.currentFile) {\n      let highlightUpdated = false;\n      state.fileHighlights.forEach(item => {\n        if (item.name === state.currentFile.name) {\n          // Filter out highlights with the label \"OTHER\"\n          const filteredHighlights = item.highlights.filter(highlight => highlight.comment.text !== \"OTHER\");\n          setHighlights(filteredHighlights);\n          highlightUpdated = true;\n        }\n      });\n      if (!highlightUpdated) setHighlights([]);\n    }\n\n    console.log(\"files\", state.files);\n  }, [state.currentFile, state.fileHighlights]);\n\n  const handleFileClick = async index => {\n    dispatch({\n      type: \"SET_CURR_FILE\",\n      payload: state.files[index]\n    });\n    dispatch({\n      type: \"SET_MODAL\",\n      payload: false\n    });\n    setSelectPdf(false);\n  };\n\n  const handleRemove = index => {\n    setShow(true);\n    setIndex(index);\n  };\n\n  const handleRemoveFile = data => {\n    console.log(data, \"File Remove....\");\n\n    if (state.files.length > 0) {\n      let arr = state.files;\n      arr.splice(arr.findIndex(a => a.name === data.name), 1);\n      dispatch({\n        type: \"ADD_FILE\",\n        payload: arr\n      });\n      dispatch({\n        type: \"SET_CURR_FILE\",\n        payload: state.files[0]\n      });\n    } else {\n      dispatch({\n        type: \"ADD_FILE\",\n        payload: []\n      });\n      dispatch({\n        type: \"SET_FILE_HIGHLIGHTS\",\n        payload: []\n      });\n      dispatch({\n        type: \"SET_CURR_FILE\",\n        payload: null\n      });\n    }\n\n    setShow(false);\n    axios.post(`${BASE_URL_DEV}/deletePdfAndGraphData`, {\n      fileName: data.name\n    }, {\n      headers: {\n        'x-access-token': state.auth && state.auth.authToken\n      }\n    }).then(function (response) {\n      console.log(\"delete api response\", response);\n    });\n  };\n\n  const deleteHighlight = index => {\n    const updatedHighlights = highlights.filter((highlight, idx) => {\n      if (index !== idx) {\n        return highlight;\n      }\n    });\n    setHighlights(updatedHighlights);\n  };\n\n  const hideModal = () => {\n    setSelectPdf(false);\n    dispatch({\n      type: \"SET_MODAL\",\n      payload: false\n    });\n  };\n\n  const resetHighlights = () => {\n    setHighlights([]);\n  };\n\n  const handleSendToEditor = highlight => {\n    if (!highlight.comment || !highlight.content) {\n      console.error(\"Highlight structure is not as expected\", highlight);\n      return;\n    }\n\n    const payload = {\n      commentText: highlight.comment.text,\n      contentText: highlight.content.text\n    };\n    dispatch({\n      type: 'ADD_HIGHLIGHT_TEXT',\n      payload\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Resizable, {\n    className: \"box\",\n    height: dimensions.height,\n    axis: \"x\",\n    width: dimensions.width,\n    onResize: (e, {\n      size\n    }) => {\n      setDimensions({\n        height: size.height,\n        width: size.width\n      });\n    },\n    resizeHandles: [\"e\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebarnew\",\n    style: {\n      width: dimensions.width + 'px' || \"25%\",\n      // minWidth: \"20%\",\n      height: dimensions.height + 'px' || \"calc(100vh - 70px)\",\n      overflowY: \"scroll\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description\",\n    style: {\n      padding: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, \"Highlights\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, \"To create area highlight hold \\u2325 Option key (Alt), then click and drag.\"))), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"sidebar__highlights\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"sidebar__highlight h4 bg-secondary\",\n    onClick: () => setSelectPdf(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, \"Select Another File\"), highlights.length > 0 ? highlights.map((highlight, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: \"sidebar__highlight\",\n    onClick: () => {\n      updateHash(highlight);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      float: \"right\"\n    },\n    onClick: () => deleteHighlight(index),\n    className: \"sidebar__btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      marginLeft: \"4px\"\n    },\n    onClick: e => {\n      e.stopPropagation(); // Prevent the click from triggering the li's onClick\n\n      handleSendToEditor(highlight);\n    },\n    className: \"sidebar__btn_send\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"mdi-note-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, processMd(highlight.comment.text)), highlight.content.text ? /*#__PURE__*/React.createElement(\"blockquote\", {\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }, `${highlight.content.text.slice(0, 90).trim()}â€¦`) : null, highlight.content.image ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"highlight__image\",\n    style: {\n      marginTop: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: highlight.content.image,\n    alt: \"Screenshot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 23\n    }\n  })) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"highlight__location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }, \"Page \", highlight.position.pageNumber))) : /*#__PURE__*/React.createElement(\"li\", {\n    className: \"sidebar__highlight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 17\n    }\n  }, \"No Highlights Available for Selected Pdf!\")))), highlights.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: resetHighlights,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, \"Reset highlights\")) : null, /*#__PURE__*/React.createElement(Modal, {\n    style: {\n      color: \"#050505\"\n    },\n    show: selectPdf || state.isModalOpen,\n    onHide: () => hideModal(),\n    backdrop: \"static\",\n    size: \"xl\",\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    id: \"example-modal-sizes-title-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, \"Select File\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    style: {\n      padding: '1.75rem 1.2rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 25\n    }\n  }, \"PDF NAME\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 25\n    }\n  }, \"CITATION\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 25\n    }\n  }, \"PROVISION\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 25\n    }\n  }, \"ACTION\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 21\n    }\n  }, state.files && state.files.length > 0 ? state.files.map((pdf, index) => state.currentFile && state.currentFile.name === pdf.name ? /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      backgroundColor: \"rgba(0, 0, 0, 0.075)\",\n      color: \"#212529\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 31\n    }\n  }, pdf.name), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      lineHeight: 'inherit'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'auto',\n      maxHeight: '100px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 69\n    }\n  }, pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map(listValue => {\n    return listValue.target;\n  }).join(' | '))), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      lineHeight: 'inherit'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'auto',\n      maxHeight: '100px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 69\n    }\n  }, pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map(listValue => {\n    return listValue.target;\n  }).join(' | '))), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleFileClick(index),\n    className: \"btn btn-info btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 59\n    }\n  }, \"View File\")), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleRemove(pdf),\n    className: \"btn btn-danger btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 59\n    }\n  }, \"Delete File\"))) : /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 31\n    }\n  }, pdf.name), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      lineHeight: 'inherit'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'auto',\n      maxHeight: '100px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 69\n    }\n  }, pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map(listValue => {\n    return listValue.target;\n  }).join(' | '))), /*#__PURE__*/React.createElement(\"td\", {\n    style: {\n      lineHeight: 'inherit'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'auto',\n      maxHeight: '100px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 69\n    }\n  }, pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map(listValue => {\n    return listValue.target;\n  }).join(' | '))), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleFileClick(index),\n    className: \"btn btn-info btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 59\n    }\n  }, \"View File\")), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleRemove(pdf),\n    className: \"btn btn-danger btn-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 59\n    }\n  }, \"Delete File\")))) : /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: \"4\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 58\n    }\n  }, \"No Pdfs uploaded!\")))))))), console.log(state))), /*#__PURE__*/React.createElement(Modal, {\n    style: {\n      color: \"#050505\"\n    },\n    show: show,\n    onHide: () => handleClose(),\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }\n  }, \"Deleting File\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 11\n    }\n  }, \"Are you sure you want to delete ?\"), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    onClick: () => handleRemoveFile(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }, \"Delete\")))));\n}\n\nexport default FileViewer;","map":{"version":3,"sources":["/home/taymur/Documents/legal2/DATA/Highlight/newmerged/CASEFRONTt/src/Dashboard/FileViewer.js"],"names":["React","useContext","useState","useEffect","Modal","Button","UserContext","Resizable","processMd","axios","BASE_URL_DEV","updateHash","highlight","document","location","hash","id","FileViewer","state","dispatch","highlights","setHighlights","dimensions","setDimensions","height","width","selectPdf","setSelectPdf","show","setShow","index","setIndex","handleClose","currentFile","highlightUpdated","fileHighlights","forEach","item","name","filteredHighlights","filter","comment","text","console","log","files","handleFileClick","type","payload","handleRemove","handleRemoveFile","data","length","arr","splice","findIndex","a","post","fileName","headers","auth","authToken","then","response","deleteHighlight","updatedHighlights","idx","hideModal","resetHighlights","handleSendToEditor","content","error","commentText","contentText","e","size","overflowY","padding","marginBottom","map","float","marginLeft","stopPropagation","marginTop","slice","trim","image","position","pageNumber","margin","color","isModalOpen","pdf","backgroundColor","lineHeight","maxHeight","CITATION","listValue","target","join","PROVISION"],"mappings":"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","sourcesContent":["// @flow\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { UserContext } from \"../App\";\nimport { Resizable } from \"react-resizable\";\nimport processMd from \"./markdown\";\nimport axios from \"axios\";\nimport { BASE_URL_DEV } from \"../utils\";\n\nimport \"../style/resizable.css\";\n\nconst updateHash = (highlight) => {\n  document.location.hash = `pdf-highlight-${highlight.id}`;\n};\n\nfunction FileViewer() {\n  const { state, dispatch } = useContext(UserContext);\n\n  const [highlights, setHighlights] = useState([]);\n  const [dimensions, setDimensions] = useState({\n    height: 720,\n    width: 250,\n  });\n  const [selectPdf, setSelectPdf] = useState(false);\n\n  const [show, setShow] = useState(false);\n  const [index, setIndex] = useState();\n\n  const handleClose = () => setShow(false);\n  useEffect(() => {\n    if (state.currentFile) {\n      let highlightUpdated = false;\n      state.fileHighlights.forEach((item) => {\n        if (item.name === state.currentFile.name) {\n          // Filter out highlights with the label \"OTHER\"\n          const filteredHighlights = item.highlights.filter(highlight => highlight.comment.text !== \"OTHER\");\n          setHighlights(filteredHighlights);\n          highlightUpdated = true;\n        }\n      });\n      if (!highlightUpdated) setHighlights([]);\n    }\n    console.log(\"files\", state.files)\n  }, [state.currentFile, state.fileHighlights]);\n  \n\n  const handleFileClick = async (index) => {\n    dispatch({ type: \"SET_CURR_FILE\", payload: state.files[index] });\n    dispatch({ type: \"SET_MODAL\", payload: false });\n\n    setSelectPdf(false);\n  };\n\n  const handleRemove = (index) => {\n    setShow(true);\n    setIndex(index);\n  }\n\n  const handleRemoveFile = (data) => {\n    console.log(data, \"File Remove....\")\n\n\n\n    if (state.files.length > 0) {\n      let arr = state.files\n      arr.splice(arr.findIndex(a => a.name === data.name), 1)\n      dispatch({ type: \"ADD_FILE\", payload: arr });\n      dispatch({ type: \"SET_CURR_FILE\", payload: state.files[0] });\n    } else {\n      dispatch({ type: \"ADD_FILE\", payload: [] });\n      dispatch({\n        type: \"SET_FILE_HIGHLIGHTS\",\n        payload: [],\n      });\n      dispatch({ type: \"SET_CURR_FILE\", payload: null });\n    }\n\n\n    setShow(false);\n\n\n    axios.post(`${BASE_URL_DEV}/deletePdfAndGraphData`, { fileName: data.name }, {\n      headers: {\n        'x-access-token': state.auth && state.auth.authToken,\n      }\n    })\n      .then(function (response) {\n        console.log(\"delete api response\", response)\n\n      })\n\n  }\n\n  const deleteHighlight = (index) => {\n    const updatedHighlights = highlights.filter((highlight, idx) => {\n      if (index !== idx) {\n        return highlight;\n      }\n    });\n    setHighlights(updatedHighlights);\n  };\n  const hideModal = () => {\n    setSelectPdf(false);\n    dispatch({ type: \"SET_MODAL\", payload: false });\n\n  }\n  const resetHighlights = () => {\n    setHighlights([]);\n  };\n\n  const handleSendToEditor = (highlight) => {\n    if (!highlight.comment || !highlight.content) {\n        console.error(\"Highlight structure is not as expected\", highlight);\n        return;\n    }\n\n    const payload = {\n        commentText: highlight.comment.text,\n        contentText: highlight.content.text,\n    };\n    dispatch({ type: 'ADD_HIGHLIGHT_TEXT', payload });\n};\n\n\n  return (\n    <Resizable\n      className=\"box\"\n      height={dimensions.height}\n      axis=\"x\"\n      width={dimensions.width}\n      onResize={(e, { size }) => {\n        setDimensions({\n          height: size.height,\n          width: size.width,\n        });\n      }}\n      resizeHandles={[\"e\"]}\n    >\n      <div\n        className=\"sidebarnew\"\n        style={{\n          width: dimensions.width + 'px' || \"25%\",\n          // minWidth: \"20%\",\n          height: dimensions.height + 'px' || \"calc(100vh - 70px)\",\n          overflowY: \"scroll\",\n        }}\n      >\n        <div className=\"description\" style={{ padding: \"1rem\" }}>\n          <h2 style={{ marginBottom: \"1rem\" }}>Highlights</h2>\n          <p>\n            <small>\n              To create area highlight hold âŒ¥ Option key (Alt), then click and\n              drag.\n            </small>\n          </p>\n        </div>\n\n        <ul className=\"sidebar__highlights\">\n          <li\n            className=\"sidebar__highlight h4 bg-secondary\"\n            onClick={() => setSelectPdf(true)}\n          >\n            Select Another File\n          </li>\n          {highlights.length > 0 ? (\n            highlights.map((highlight, index) => (\n              <li\n                key={index}\n                className=\"sidebar__highlight\"\n                onClick={() => {\n                  updateHash(highlight);\n                }}\n              >\n                <div>\n                  <div style={{ padding: \"4px\" }}>\n                    <button\n                      style={{ float: \"right\" }}\n                      onClick={() => deleteHighlight(index)}\n                      className=\"sidebar__btn\"\n                    >\n                      <i className=\"fa fa-close\"></i>\n                    </button>\n\n                                  <button\n                style={{ marginLeft: \"4px\" }}\n                onClick={(e) => {\n                  e.stopPropagation(); // Prevent the click from triggering the li's onClick\n                  handleSendToEditor(highlight);\n                }}\n      \n                className=\"sidebar__btn_send\"\n              >\n                <i className=\"mdi-note-check\"></i>\n              </button>\n\n                  </div>\n                  <strong>{processMd(highlight.comment.text)}</strong>\n                  {highlight.content.text ? (\n                    <blockquote style={{ marginTop: \"0.5rem\" }}>\n                      {`${highlight.content.text.slice(0, 90).trim()}â€¦`}\n                    </blockquote>\n                  ) : null}\n                  {highlight.content.image ? (\n                    <div\n                      className=\"highlight__image\"\n                      style={{ marginTop: \"0.5rem\" }}\n                    >\n                      <img src={highlight.content.image} alt={\"Screenshot\"} />\n                    </div>\n                  ) : null}\n                </div>\n                <div className=\"highlight__location\">\n                  Page {highlight.position.pageNumber}\n                </div>\n              </li>\n            ))\n          ) : (\n            <li className=\"sidebar__highlight\">\n              <div className=\"p-2\">\n                <p style={{ margin: 0 }}>\n                  No Highlights Available for Selected Pdf!\n                </p>\n              </div>\n            </li>\n          )}\n        </ul>\n        {highlights.length > 0 ? (\n          <div style={{ padding: \"1rem\" }}>\n            <button onClick={resetHighlights}>Reset highlights</button>\n          </div>\n        ) : null}\n        <Modal\n          style={{ color: \"#050505\" }}\n          show={selectPdf || state.isModalOpen}\n          onHide={() => hideModal()}\n          backdrop=\"static\"\n          size=\"xl\"\n          centered={true}\n        >\n          <Modal.Header closeButton>\n            <Modal.Title id=\"example-modal-sizes-title-sm\">\n              Select File\n            </Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n\n            <div className=\"card\">\n              <div className=\"card-body\" style={{ padding: '1.75rem 1.2rem' }}>\n                <div className=\"table-responsive\">\n                  <table className=\"table table-hover\">\n                    <thead>\n                      <tr>\n                        <th>PDF NAME</th>\n                        <th>CITATION</th>\n                        <th>PROVISION</th>\n                        <th>ACTION</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {state.files && state.files.length > 0 ? (\n                        state.files.map((pdf, index) => (\n                          state.currentFile && state.currentFile.name === pdf.name ? (\n                            <tr style={{ backgroundColor: \"rgba(0, 0, 0, 0.075)\", color: \"#212529\" }}>\n                              <td>{pdf.name}</td>\n\n                              <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n                              <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n\n                              <td className=\"text-danger\"><button type=\"button\" onClick={() => handleFileClick(index)} className=\"btn btn-info btn-sm\">View File</button></td>\n                              <td className=\"text-danger\"><button type=\"button\" onClick={() => handleRemove(pdf)} className=\"btn btn-danger btn-sm\">Delete File</button></td>\n                            </tr>\n                          ) : (\n                            <tr>\n                              <td>{pdf.name}</td>\n                              <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.CITATION && pdf.CITATION.length > 0 && pdf.CITATION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n                              <td style={{ lineHeight: 'inherit' }}><div style={{ overflowY: 'auto', maxHeight: '100px' }}>{pdf && pdf.PROVISION && pdf.PROVISION.length > 0 && pdf.PROVISION.map((listValue) => { return listValue.target }).join(' | ')}</div></td>\n                              <td className=\"text-danger\"><button type=\"button\" onClick={() => handleFileClick(index)} className=\"btn btn-info btn-sm\">View File</button></td>\n                              <td className=\"text-danger\"><button type=\"button\" onClick={() => handleRemove(pdf)} className=\"btn btn-danger btn-sm\">Delete File</button></td>\n                            </tr>\n                          )\n\n                        ))) : (\n                        <tr>\n                          <td colSpan=\"4\" align=\"center\"><p style={{ margin: \"5px\" }}>No Pdfs uploaded!</p></td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n            {console.log(state)}\n            {/* // <div\n                //   key={index}\n                //   className=\"btn btn-secondary w-100 rounded-0 py-3 my-1\"\n                //   onClick={() => handleFileClick(index)}\n                // >\n                //   {state.currentFile.name === pdf.name ? (\n                //     <strong>\n                //       <p style={{ margin: 0 }}>{pdf.name}</p>\n                //     </strong>\n                //   ) : (\n                //     <p style={{ margin: 0 }}>{pdf.name}</p>\n                //   )}\n                // </div>\n               */}\n\n          </Modal.Body>\n        </Modal>\n        <Modal\n          style={{ color: \"#050505\" }}\n          show={show}\n          onHide={() => handleClose()}\n          centered={true}>\n          <Modal.Header closeButton>\n            <Modal.Title>Deleting File</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>Are you sure you want to delete ?</Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={handleClose}>\n              Close\n            </Button>\n            <Button variant=\"danger\" onClick={() => handleRemoveFile(index)}>\n              Delete\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </div>\n    </Resizable>\n  );\n}\n\nexport default FileViewer;\n"]},"metadata":{},"sourceType":"module"}