(this["webpackJsonpreact-pdf-markdown-highlighter"]=this["webpackJsonpreact-pdf-markdown-highlighter"]||[]).push([[4],{396:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=396},441:function(e,t){},442:function(e,t){},443:function(e,t){},444:function(e,t){},445:function(e,t){},461:function(e,t,n){},475:function(e,t,n){"use strict";n.r(t);var a=n(6),o=n(66),c=n(8),i=n.n(c),r=n(17),l=n(7),u=n(0),h=n.n(u),s=n(24),f=n.n(s),m=(n(180),n(429)),g=n(100),d=n(37);n(461);var p=function(e){var t=Object(u.useState)({compact:!0,text:"",emoji:""}),n=Object(l.a)(t,2),a=n[0],o=n[1],c=e.onConfirm,i=e.onOpen,r=a.compact,s=a.text,f=a.emoji;return h.a.createElement("div",{className:"Tip"},r?h.a.createElement("div",{className:"Tip__compact",onClick:function(){i(),o({compact:!1})}},"Add highlight"):h.a.createElement("form",{className:"Tip__card",onSubmit:function(e){e.preventDefault(),c({text:s,emoji:f})}},h.a.createElement("div",null,h.a.createElement("textarea",{width:"100%",placeholder:"Your comment",autoFocus:!0,value:s,onChange:function(e){return o({text:e.target.value})},ref:function(e){e&&e.focus()}})),h.a.createElement("div",{id:"preview",width:"100%"},Object(d.a)(a.text)),h.a.createElement("div",null,h.a.createElement("input",{type:"submit",value:"Save"}))))},b=n(98),O=n(462);var v=function(e){var t,n=Object(u.useState)([]),a=Object(l.a)(n,2),o=a[0],c=a[1],s=Object(u.useState)(""),m=Object(l.a)(s,2),g=m[0],d=m[1];Object(u.useEffect)((function(){function e(){return(e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://127.0.0.1:5000/api/v1/graph").then((function(e){c(e.data)})).catch((function(e){d(e&&void 0!==e.response&&e.response.statusText)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var p=(t={nodeHighlightBehavior:!1,highlightDegree:1,highlightOpacity:1,linkHighlightBehavior:!1,maxZoom:5,minZoom:.1,focusZoom:1,focusAnimationDuration:.75},Object(b.a)(t,"nodeHighlightBehavior",!1),Object(b.a)(t,"panAndZoom",!1),Object(b.a)(t,"staticGraph",!1),Object(b.a)(t,"d3",{alphaTarget:.05,gravity:-100,linkLength:100,linkStrength:1}),Object(b.a)(t,"node",{color:"lightgreen",size:120,highlightStrokeColor:"blue"}),Object(b.a)(t,"link",{highlightColor:"lightblue"}),t);return h.a.createElement(u.Fragment,null,""===g&&h.a.createElement(O.Graph,{id:"graph-id",data:o,config:p,onClickGraph:function(e){},onClickNode:function(e,t){},onDoubleClickNode:function(e,t){},onRightClickNode:function(e,t,n){},onClickLink:function(e,t){},onRightClickLink:function(e,t,n){},onMouseOverNode:function(e,t){},onMouseOutNode:function(e,t){},onMouseOverLink:function(e,t){},onMouseOutLink:function(e,t){},onNodePositionChange:function(e,t,n){},onZoomChange:function(e,t){}}),""!==g&&h.a.createElement("div",{className:"error_text"},h.a.createElement("p",null,g)))},j=n(474),E=n(68),w=n(14),k=function(){document.location.hash=""},S=function(e){var t=e.comment;return t.text?h.a.createElement("div",{className:"Highlight__popup"},t.emoji," ",Object(d.a)(t.text)):null};var C=function(){var e=Object(u.useContext)(E.a),t=e.state,n=e.dispatch,c=Object(u.useState)(),i=Object(l.a)(c,2),r=i[0],s=i[1],f=Object(u.useState)([]),d=Object(l.a)(f,2),b=d[0],O=d[1];Object(u.useEffect)((function(){console.log(b),b&&b.length>0&&n({type:"SET_FILE_HIGHLIGHTS",payload:{highlights:b,name:t.currentFile&&t.currentFile.name}})}),[b]),Object(u.useEffect)((function(){if(s(null),console.log(t),t.currentFile&&t.currentFile.url)setTimeout((function(){return s("".concat(w.a,"/").concat(t.currentFile.url))}),100);else{var e=new FileReader,n=t.currentFile;e.onload=function(){console.log(n.name),s(e.result)},n&&e.readAsDataURL(n)}}),[t.currentFile]),Object(u.useEffect)((function(){if(t.currentFile){console.log(t);var e=!1;t.fileHighlights.forEach((function(n){n.name===t.currentFile.name&&(O(n.highlights),e=!0)})),e||O([])}}),[t.currentFile,t.fileHighlights]);var v=Object(u.useRef)(null),C=function(){var e,t=(e=document.location.hash.slice("#pdf-highlight-".length),b.find((function(t){return t.id===e})));console.log(t),t&&v.current.scrollTo(t)};return Object(u.useEffect)((function(){return window.addEventListener("hashchange",C,!1),function(){return window.removeEventListener("hashchange",C)}})),h.a.createElement("div",{style:{minHeight:"calc(100vh - 70px)",paddingLeft:"1rem",color:"#000000",width:"100%"},className:"pdf-viewer p-2"},r?h.a.createElement(m.d,{className:"my-pdf-viewer",url:r,beforeLoad:h.a.createElement(g.a,null)},(function(e){return h.a.createElement(m.c,{ref:v,pdfDocument:e,enableAreaSelection:function(e){return e.altKey},onScrollChange:k,scrollRef:function(e){},onSelectionFinished:function(e,t,n,c){return h.a.createElement(p,{onOpen:c,onConfirm:function(c){var i;i={content:t,position:e,comment:c},console.log(i),O([Object(a.a)(Object(a.a)({},i),{},{id:String(Math.random()).slice(2)})].concat(Object(o.a)(b))),n()}})},highlightTransform:function(e,t,n,o,c,i,r){var l=!Boolean(e.content&&e.content.image)?h.a.createElement(m.b,{isScrolledTo:r,position:e.position,comment:e.comment}):h.a.createElement(m.a,{highlight:e,onChange:function(t){var n,o,r;n=e.id,o={boundingRect:c(t)},r={image:i(t)},O(b.map((function(e){return e.id===n?Object(a.a)(Object(a.a)({},e),{},{position:Object(a.a)(Object(a.a)({},e.position),o),content:Object(a.a)(Object(a.a)({},e.content),r)}):e})))}});return h.a.createElement(m.e,{popupContent:h.a.createElement(S,e),onMouseOver:function(t){return n(e,(function(e){return t}))},onMouseOut:o,key:t,children:l})},highlights:b})})):t.files&&0===t.files.length?h.a.createElement(j.a,null,h.a.createElement("div",{className:"h3 text-center mt-5"},"No File Selected!!")):h.a.createElement(g.a,null))},x=n(181),F=function(){document.location.hash=""},N=function(e){var t=e.comment;return t.text?h.a.createElement("div",{className:"Highlight__popup"},t.emoji," ",Object(d.a)(t.text)):null};t.default=function(e){var t=e.showFileViewer,n=e.showDashboardView,c=e.showHighlight,s=Object(u.useState)([]),d=Object(l.a)(s,2),b=(d[0],d[1],Object(u.useState)({highlights:[]})),O=Object(l.a)(b,2),j=O[0],E=O[1],w=Object(u.useState)({url:""}),k=Object(l.a)(w,2),S=k[0],y=k[1];Object(u.useEffect)((function(){function e(){return(e=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()("http://127.0.0.1:5000/api/v1/json");case 2:t=e.sent,n=Object.keys(t.data)[0],y({url:"http://127.0.0.1:5000/api/v1/pdf/".concat(n)}),E({highlights:t.data[n]});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var L=Object(u.useRef)(null),T=function(){var e,t=(e=document.location.hash.slice("#highlight-".length),j.highlights.find((function(t){return t.id===e})));t&&L.current.scrollTo(t)};Object(u.useEffect)((function(){return window.addEventListener("hashchange",T,!1),function(){return window.removeEventListener("hashchange",T)}}));var _=j.highlights,H=S.url;return h.a.createElement(u.Fragment,null,c&&h.a.createElement(h.a.Fragment,null,h.a.createElement(v,null),H?h.a.createElement(m.d,{url:H,beforeLoad:h.a.createElement(g.a,null)},(function(e){return h.a.createElement(m.c,{ref:L,pdfDocument:e,enableAreaSelection:function(e){return e.altKey},onScrollChange:F,scrollRef:function(e){},onSelectionFinished:function(e,t,n,c){return h.a.createElement(p,{onOpen:c,onConfirm:function(c){!function(e){var t=j.highlights;E({highlights:[Object(a.a)(Object(a.a)({},e),{},{id:String(Math.random()).slice(2)})].concat(Object(o.a)(t))})}({content:t,position:e,comment:c}),n()}})},highlightTransform:function(e,t,n,o,c,i,r){var l=!Boolean(e.content&&e.content.image)?h.a.createElement(m.b,{isScrolledTo:r,position:e.position,comment:e.comment}):h.a.createElement(m.a,{highlight:e,onChange:function(t){var n,o,r;n=e.id,o={boundingRect:c(t)},r={image:i(t)},E({highlights:j.highlights.map((function(e){return e.id===n?Object(a.a)(Object(a.a)({},e),{},{position:Object(a.a)(Object(a.a)({},e.position),o),content:Object(a.a)(Object(a.a)({},e.content),r)}):e}))})}});return h.a.createElement(m.e,{popupContent:h.a.createElement(N,e),onMouseOver:function(t){return n(e,(function(e){return t}))},onMouseOut:o,key:t,children:l})},highlights:_})})):h.a.createElement(g.a,null)),t&&h.a.createElement(C,null),n&&h.a.createElement(x.a,null))}}}]);
//# sourceMappingURL=4.cf927f85.chunk.js.map