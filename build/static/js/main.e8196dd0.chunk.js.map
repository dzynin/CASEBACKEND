{"version":3,"sources":["utils.js","shared/Spinner.js","Dashboard/FileMetadataViewer.js","images/faces/face0.jpeg","shared/SocketContext.js","images/logo-mini.svg","serviceWorker.js","index.js","shared/Highlight.js","AppRoutes.js","shared/Utility.js","Reducer/InitialState.js","Reducer/Reducers.js","Dashboard/NodePreview.js","Dashboard/NodesList.js","Dashboard/Register.js","Dashboard/Login.js","shared/SideNav.js","shared/Profile.js","shared/Sidebar.js","Dashboard/HighlightButton.js","Dashboard/Search.js","shared/Navbar.js","shared/Chatbox.js","Dashboard/FileViewer.js","Dashboard/PdfGraphFunc.js","Dashboard/AccordionRenderer.js","Dashboard/PdfViewerSide.js","App.js","Dashboard/markdown.js","images/scaletransm2.png","TextEditor.js"],"names":["BASE_URL_DEV","fetchAuth","auth","JSON","parse","localStorage","getItem","userId","authToken","userPublicId","username","fname","lname","city","country","organisation","email","expiry","Date","auth_token","React","createElement","style","display","alignItems","height","className","FileMetadataViewer","_ref","files","onFileClick","Table","responsive","bordered","map","file","index","key","name","uploadDate","toLocaleDateString","summary","Button","color","onClick","module","exports","SocketContext","createContext","SocketProvider","children","socketRef","useRef","useEffect","socket","io","current","console","log","disconnect","Provider","value","useSocket","useContext","Boolean","window","location","hostname","match","ReactDOM","render","Fragment","App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","Highlight","props","state","setState","useState","highlights","PdfUrl","setPdfUrl","url","async","result_json","axios","concat","pdf_name","Object","keys","data","fetchData","width","padding","marginBottom","highlight","hash","id","updateHash","float","filter","idx","deleteHighlight","processMd","comment","text","content","marginTop","slice","trim","image","src","alt","position","pageNumber","length","resetHighlights","Dashboard","lazy","PdfViewer","AppRoutes","Suspense","fallback","Spinner","showHighlight","showFileViewer","showDashboardView","showProfileView","showFeedView","showTextAnonymizerView","showGptView","showLawsReader","updateState","updateValues","updateHighlightStatus","newState","highlightColors","setItem","stringify","InitialState","currentFile","fileHighlights","myPosts","allPosts","searchQuery","isModalOpen","nodeData","nodesData","graphData","default","legalTest","issue","conclusion","highlightTextsForEditor","accordionSections","showPdfViewer","showMetadataViewer","reducer","action","type","Array","isArray","payload","Allfiles","fileNames","includes","push","removeItem","fileUpdated","singleFile","highlightTextForEditor","newHighlight","updatedHighlights","UserContext","setNodeData","fontSize","dangerouslySetInnerHTML","__html","preview","join","dispatch","setGraphData","setTimeout","nodes","node","undefined","onMouseEnter","n","handleMouseEnter","onMouseLeave","handleMouseLeave","docket_number","Register","history","useHistory","userDetails","setUserDetails","password1","password2","require","onChange","e","target","placeholder","preventDefault","response","fetch","method","headers","body","json","ok","Link","to","Login","password","Form","Group","Control","size","SideNav","class","click","iconClass","Trans","transTitle","Profile","profileClick","authUser","authEmail","Dropdown","alignRight","Toggle","as","Menu","href","evt","Sidebar","fetchFilesAndGraphData","fetchHighlights","useSidebarLogic","result","allgraphs","Obj","_id","graphdata","x","fileName","links","source","fileNew","element","CITATION","PROVISION","showFileViewerHandler","itemClickHandler","viewState","showTextEditor","setShowTextEditor","TextEditor","HighlightButton","hightlightResponse","setHightlightResponse","Search","setSearchQuery","Navbar","setCreateNotes","setShowGraph","showGraph","setShowGraphModal","toggleButtonRef","setInterval","authChe","savedAuth","timer","clearTimeout","d","datestring","getDate","getHours","getMinutes","beforFiveTime","alert","ref","classList","toggle","Row","Col","lg","md","xs","sm","justifyContent","margin","gap","togglePdfViewer","toggleOffcanvas","querySelector","ChatUI","publicId","pdfDocumentName","messages","setMessages","nickName","inputText","setInputText","handleResponse","newMessage","recommendation","prevMessages","on","off","handleSend","sender","arguments","emit","query","sendMessage","msg","borderRadius","onKeyDown","viewBox","fill","xmlns","FileViewer","setHighlights","dimensions","setDimensions","selectPdf","setSelectPdf","show","setShow","setIndex","currentHighlightIndex","setCurrentHighlightIndex","setFilter","totalHighlights","setTotalHighlights","highlightProgress","setHighlightProgress","updateProgress","currentIndex","total","handlePreviousHighlight","filteredHighlights","h","toUpperCase","currentFilteredIndex","findIndex","prevHighlight","indexOf","scrollToActiveCard","handleNextHighlight","nextIndex","nextHighlight","handleFilterChange","newFilter","highlightUpdated","reduce","acc","item","validHighlights","activeCard","scrollIntoView","behavior","block","Resizable","onResize","resizeHandles","backgroundColor","stopPropagation","UncontrolledDropdown","DropdownToggle","caret","DropdownMenu","DropdownItem","header","divider","onWheel","event","delta","deltaY","overflowY","handleHighlightClick","PdfGraphFunc","obj","setObj","iframeUrl","setIframeUrl","currentFileName","Graph","Math","round","getTime","random","config","automaticRearrangeAfterDropNode","collapsible","directed","focusAnimationDuration","focusZoom","freezeAllDragEvents","highlightDegree","highlightOpacity","linkHighlightBehavior","maxZoom","minZoom","nodeHighlightBehavior","panAndZoom","staticGraph","staticGraphWithDragAndDrop","d3","alphaTarget","gravity","linkLength","linkStrength","disableLinkForce","fontColor","fontWeight","highlightColor","highlightFontSize","highlightFontWeight","highlightStrokeColor","highlightStrokeWidth","labelProperty","mouseCursor","opacity","renderLabel","strokeColor","strokeWidth","svg","symbolType","link","semanticStrokeWidth","markerHeight","markerWidth","strokeDasharray","strokeDashoffset","strokeLinecap","onClickGraph","onClickNode","post","nodeId","open","passive","onDoubleClickNode","onRightClickNode","onClickLink","onRightClickLink","onMouseOverNode","onMouseOutNode","onMouseOverLink","onMouseOutLink","onNodePositionChange","y","onZoomChange","previousZoom","newZoom","errorText","AccordionRenderer","searchInput","setSearchInput","activeKeys","setActiveKeys","active","setActive","count","setCount","accordionData","setAccordionData","myRef","ContextAwareToggle","_ref2","eventKey","callback","currentEventKey","AccordionContext","decoratedOnClick","useAccordionToggle","isCurrentEventKey","newData","accordionContainer","selectAccordion","querySelectorAll","currIndex","scrollTo","top","offsetTop","Accordion","activeKey","onSelect","accordionClickHandler","keyIndex","newActiveKeys","splice","Card","Header","clause","Collapse","Body","PdfViewerSide","createNotes","showGraphModal","axis","minWidth","Modal","onHide","backdrop","centered","closeButton","Title","useReducer","Router","Switch","Route","path","exact","NodesList","NodePreview","Redirect","unified","use","math","remark2rehype","katex","rehype2react","processSync","TOOLBAR_OPTIONS","font","list","background","script","align","documentId","quill","setQuill","isQuillReady","setIsQuillReady","openaiResponses","setOpenaiResponses","openaiRecommendations","setOpenaiRecommendations","setQuery","requestCounter","setRequestCounter","recommendations","caselaw","loadingRecommendations","setLoadingRecommendations","loadingCaselaw","setLoadingCaselaw","loadingClause","setLoadingClause","loadingSend","setLoadingSend","latestReceivedIndex","setLatestReceivedIndex","handleEditDocument","loadDocument","documentText","text_body","setText","enable","interval","getContents","clearInterval","handler","updateContents","getLength","insertText","wrapperRef","useCallback","wrapper","innerHTML","editor","append","q","Quill","theme","modules","toolbar","handleRequest","connected","quillContent","currentCount","requestData","filename","requestCount","recommendationHandler","currentRecommendations","currentResponses","setSelection","insertTextIntoQuill","textAlign","variant","handleNewDocument","FaFile","FaBriefcase","handleAppeal","dataToSend","FaRegPaperPlane","handleNoteSave","pdfAsBlob","pdfExporter","generatePdf","saveAs","exportAsPDF","marginRight","handleClose","lineHeight","aria-hidden","flexDirection","flex","paddingLeft","animation","role","highlightContent","insertHighlightIntoQuill","FormControl"],"mappings":"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","file":"static/js/main.e8196dd0.chunk.js","sourcesContent":["// const BASE_URL_DEV = \"http://localhost:3000\";\n// const BASE_URL_DEV = \"http://localhost:8000\";\nconst BASE_URL_DEV = \"https://back.casebk.com\";\n\nexport { BASE_URL_DEV };\n\nexport const fetchAuth = () => {\n\tconst auth = JSON.parse(localStorage.getItem(\"authDetails\"));\n\tif (\n\t\t!auth ||\n\t\t!auth.userId ||\n\t\t!auth.authToken ||\n\t\t!auth.userPublicId ||\n\t\t!auth.username ||\n\t\t!auth.fname ||\n\t\t!auth.lname ||\n\t\t!auth.city ||\n\t\t!auth.country ||\n\t\t!auth.organisation ||\n\t\t!auth.email ||\n\t\t!auth.expiry\n\t) {\n\t\treturn null;\n\t}\n\tif (auth.expiry < Date.parse(new Date())) return null;\n\treturn {\n\t\tauthToken: auth.authToken,\n\t\tauth_token: auth.authToken,\n\t\tuserId: auth.userId,\n\t\tuserPublicId: auth.userPublicId,\n\t\tusername: auth.username,\n\t\temail: auth.email,\n\t\texpiry: auth.expiry,\n\t\tfname: auth.fname,\n\t\tlname: auth.lname,\n\t\tcity: auth.city,\n\t\tcountry: auth.country,\n\t\torganisation: auth.organisation,\n\t};\n};\n","import React from \"react\";\n\nimport \"../style/Spinner.css\";\n\nexport default () => {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        height: \"100vh\"\n      }}\n    >\n      <div className=\"sk-fading-circle\">\n        <div className=\"sk-circle1 sk-circle\" />\n        <div className=\"sk-circle2 sk-circle\" />\n        <div className=\"sk-circle3 sk-circle\" />\n        <div className=\"sk-circle4 sk-circle\" />\n        <div className=\"sk-circle5 sk-circle\" />\n        <div className=\"sk-circle6 sk-circle\" />\n        <div className=\"sk-circle7 sk-circle\" />\n        <div className=\"sk-circle8 sk-circle\" />\n        <div className=\"sk-circle9 sk-circle\" />\n        <div className=\"sk-circle10 sk-circle\" />\n        <div className=\"sk-circle11 sk-circle\" />\n        <div className=\"sk-circle12 sk-circle\" />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Table, Button } from 'reactstrap';\n\nfunction FileMetadataViewer({ files, onFileClick }) {\n    return (\n        <div className=\"file-metadata-viewer\">\n            <h2>Uploaded Files</h2>\n            <Table responsive bordered className=\"custom-table\">\n                <thead>\n                    <tr>\n                        <th>File Name</th>\n                        {/* <th>File Size</th> */}\n                        <th>Upload Date</th>\n                        {/* <th>Category</th> */}\n                        <th>Summary</th>\n                        <th>View</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {files.map((file, index) => (\n                        <tr key={index}>\n                            <td>{file.name}</td>\n                            {/* <td>{(file.size / 1024).toFixed(2)} KB</td> */}\n                            <td>{new Date(file.uploadDate).toLocaleDateString()}</td>\n                            {/* <td>{file.category}</td> */}\n                            <td>{file.summary}</td>\n                            <td>\n                                <Button color=\"primary\" onClick={() => onFileClick(file)}>View</Button>\n                            </td>\n                        </tr>\n                    ))}\n                </tbody>\n            </Table>\n        </div>\n    );\n}\n\nexport default FileMetadataViewer;\n","module.exports = __webpack_public_path__ + \"static/media/face0.1f2c7e78.jpeg\";","// SocketContext.js\nimport React, { createContext, useContext, useEffect, useRef } from 'react';\nimport io from 'socket.io-client';\nimport { BASE_URL_DEV } from \"../utils\"; // Import the BASE_URL_DEV\n\nconst SocketContext = createContext();\n\nexport const SocketProvider = ({ children }) => {\n    const socketRef = useRef();\n\n    useEffect(() => {\n        // const socket = io(\"http://localhost:8000\");\n        const socket = io(BASE_URL_DEV); // Use BASE_URL_DEV here\n        socketRef.current = socket;\n        console.log(\"Socket connection established\");\n\n        return () => {\n            socket.disconnect();\n            console.log(\"Socket disconnected\");\n        };\n    }, []);\n\n    return (\n        <SocketContext.Provider value={socketRef.current}>\n            {children}\n        </SocketContext.Provider>\n    );\n};\n\nexport const useSocket = () => {\n    return useContext(SocketContext);\n};\n","module.exports = __webpack_public_path__ + \"static/media/logo-mini.c949e51e.svg\";","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n\t<React.Fragment>\r\n\t\t<App />\r\n\t</React.Fragment>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// @flow\r\nimport React, { useState, useEffect } from \"react\";\r\nimport processMd from \"../Dashboard/markdown\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL_DEV } from \"../utils\"; // Import the BASE_URL_DEV\r\n\r\nconst updateHash = (highlight) => {\r\n\tdocument.location.hash = `highlight-${highlight.id}`;\r\n};\r\n\r\nfunction Highlight(props) {\r\n\tconst [state, setState] = useState({ highlights: [] });\r\n\tconst [PdfUrl, setPdfUrl] = useState({ url: \"\" });\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function fetchData() {\r\n            const result_json = await axios(`${BASE_URL_DEV}/api/v1/json`);\r\n            const pdf_name = Object.keys(result_json.data)[0];\r\n            setPdfUrl({ url: `${BASE_URL_DEV}/api/v1/pdf/${pdf_name}` });\r\n\t\t\tsetState({ highlights: result_json.data[pdf_name] });\r\n\t\t}\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\tconst deleteHighlight = (index) => {\r\n\t\tconst highlights = state.highlights.filter((highlight, idx) => (\r\n\t\t\tindex !== idx ? highlight : null\r\n\t\t));\r\n\t\tsetState({ highlights });\r\n\t};\r\n\r\n\tconst { highlights } = state;\r\n\r\n\tconst resetHighlights = () => {\r\n\t\tsetState({\r\n\t\t\thighlights: [],\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"sidebarnew\" style={{ width: \"25vw\" }}>\r\n\t\t\t{/*  */}\r\n\t\t\t<div className=\"card-description\" style={{ padding: \"1rem\" }}>\r\n\t\t\t\t<h2 style={{ marginBottom: \"1rem\" }}>Highlights</h2>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\tTo create area highlight hold ⌥ Option key (Alt), then click and\r\n\t\t\t\t\t\tdrag.\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<ul className=\"sidebar__highlights\">\r\n\t\t\t\t{highlights.map((highlight, index) => (\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tclassName=\"sidebar__highlight\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tupdateHash(highlight);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div style={{ padding: \"4px\" }}>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\t\t\t\t\t\tonClick={() => deleteHighlight(index)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"sidebar__btn\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i className=\"fa fa-close\"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<strong>{processMd(highlight.comment.text)}</strong>\r\n\t\t\t\t\t\t\t{highlight.content.text ? (\r\n\t\t\t\t\t\t\t\t<blockquote style={{ marginTop: \"0.5rem\" }}>\r\n\t\t\t\t\t\t\t\t\t{`${highlight.content.text.slice(0, 90).trim()}…`}\r\n\t\t\t\t\t\t\t\t</blockquote>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t{highlight.content.image ? (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"highlight__image\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginTop: \"0.5rem\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<img src={highlight.content.image} alt={\"Screenshot\"} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"highlight__location\">\r\n\t\t\t\t\t\t\tPage {highlight.position.pageNumber}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t\t{highlights.length > 0 ? (\r\n\t\t\t\t<div style={{ padding: \"1rem\" }}>\r\n\t\t\t\t\t<button onClick={resetHighlights}>Reset highlights</button>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Highlight;\r\n","import React, { Suspense, lazy } from \"react\";\r\nimport Spinner from \"./shared/Spinner\";\r\nimport Highlight from \"./shared/Highlight\";\r\nconst Dashboard = lazy(() => import(\"./Dashboard/Index\"));\r\nconst PdfViewer = lazy(() => import(\"./Dashboard/PdfViewer\"));\r\n\r\nfunction AppRoutes(props) {\r\n    return (\r\n        <Suspense fallback={<Spinner />}>\r\n            {props.showHighlight && <Highlight />}\r\n            {props.showFileViewer && <PdfViewer />}\r\n            <Dashboard\r\n                showFileViewer={props.showFileViewer}\r\n                showDashboardView={props.showDashboardView}\r\n                showHighlight={props.showHighlight}\r\n                showProfileView={props.showProfileView}\r\n                showFeedView={props.showFeedView}\r\n                showTextAnonymizerView={props.showTextAnonymizerView}\r\n                showGptView={props.showGptView}\r\n                showLawsReader={props.showLawsReader}\r\n            />\r\n        </Suspense>\r\n    );\r\n}\r\n\r\nexport default AppRoutes;\r\n","export const updateState = (state, updateValues) => ({\n\t...state, ...updateValues,\n});\n\nexport const updateHighlightStatus = (state, updateValues) => {\n\tconst newState = { ...state, highlightColors: updateValues }\n\tlocalStorage.setItem(\"highlightColors\", JSON.stringify(newState.highlightColors))\n\treturn newState\n}\n\n","// src/Reducer/InitialState.js\n\nexport const InitialState = {\n    files: [],\n    currentFile: null,\n    fileHighlights: [],\n    myPosts: [],\n    allPosts: [],\n    error: null,\n    message: null,\n    searchQuery: \"\",\n    isModalOpen: false,\n    nodeData: {},\n    nodesData: {},\n    graphData: {},\n    showHighlight: false,\n    highlightColors: JSON.parse(localStorage.getItem(\"highlightColors\")) || { default: \"#F48FB1\", legalTest: \"#E1BEE7\", issue: \"#D1C4E9\", conclusion: \"#B2EBF2\" },\n    auth: {\n        userId: null,\n        authToken: null,\n        userPublicId: null,\n        username: null,\n        email: null,\n        expiry: null,\n        fname: null,\n        lname: null,\n        city: null,\n        country: null,\n        organisation: null,\n    },\n    highlightTextsForEditor: [],\n    showFileViewer: false,\n    showDashboardView: true,\n    showProfileView: false,\n    showFeedView: false,\n    showTextAnonymizerView: false,\n    showGptView: false,\n    showLawsReader: false,\n    accordionSections: [],\n    showPdfViewer: true, // default to true to show the PDF viewer initially\n    showMetadataViewer: false, // default to false to hide the metadata viewer initially\n\n};\n","import { updateState, updateHighlightStatus } from '../shared/Utility';\nimport { InitialState } from './InitialState';\n\nexport const reducer = (state, action) => {\n    switch (action.type) {\n        case 'ADD_FILE':\n            if (!Array.isArray(action.payload)) action.payload = [action.payload];\n            let Allfiles = [...state.files, ...action.payload];\n            let fileNames = [];\n            let files = Allfiles.filter((file) => {\n                if (fileNames.includes(file.name)) return false;\n                fileNames.push(file.name);\n                return true;\n            });\n            return {\n                ...state,\n                files,\n                currentFile: state.currentFile || action.payload[0],\n            };\n\n        case 'AUTH':\n            const auth = {\n                userId: action.payload.userId,\n                authToken: action.payload.auth_token,\n                userPublicId: action.payload.userPublicId,\n                username: action.payload.username,\n                email: action.payload.email,\n                expiry: action.payload.expiry || Date.parse(new Date()) + 60 * 60 * 1000,\n                fname: action.payload.fname,\n                lname: action.payload.lname,\n                city: action.payload.city,\n                country: action.payload.country,\n                organisation: action.payload.organisation,\n            };\n            localStorage.setItem(\"authDetails\", JSON.stringify(auth));\n            return updateState(state, { auth: auth });\n\n        case 'LOG_OUT':\n            localStorage.removeItem(\"authDetails\");\n            return InitialState;\n\n        case \"TOGGLE_HIGHLIGHT\":\n            return {\n                ...state,\n                showHighlight: action.payload,\n            };\n\n        case 'SET_CURR_FILE':\n            return updateState(state, { currentFile: action.payload });\n\n        case 'TOGGLE_VIEWER':\n            return {\n                ...state,\n                ...action.payload,\n            };\n        case 'SET_VIEW':\n                return {\n                    ...state,\n                    showHighlight: false,\n                    showFileViewer: false,\n                    showDashboardView: false,\n                    showProfileView: false,\n                    showFeedView: false,\n                    showTextAnonymizerView: false,\n                    showGptView: false,\n                    showLawsReader: false,\n                    ...action.payload\n                };\n    \n        case 'ALL_POSTS':\n            return updateState(state, { allPosts: action.payload });\n\n        case 'ADD_My_POSTS':\n            return updateState(state, { myPosts: [...state.myPosts, action.payload] });\n\n        case 'FETCH_FILE_HIGHLIGHTS':\n            return updateState(state, { fileHighlights: action.payload });\n\n        case 'SET_FILE_HIGHLIGHTS':\n            let highlights = [];\n            if (state.fileHighlights.length > 0) {\n                let fileUpdated = false;\n                highlights = state.fileHighlights.map((singleFile) => {\n                    if (singleFile.name === action.payload.name) {\n                        singleFile.highlights = action.payload.highlights;\n                        fileUpdated = true;\n                    }\n                    return singleFile;\n                });\n                if (!fileUpdated) {\n                    highlights = [...state.fileHighlights, action.payload];\n                }\n            } else {\n                highlights = [action.payload];\n            }\n            return updateState(state, { fileHighlights: highlights });\n\n        case 'ERROR':\n            return updateState(state, { error: action.payload });\n\n        case 'MESSAGE':\n            return updateState(state, { message: action.payload });\n\n        case 'SET_SEARCH_QUERY':\n            return updateState(state, { searchQuery: action.payload });\n\n        case 'SET_NODE_DATA':\n            return updateState(state, { nodeData: action.payload });\n\n        case 'SET_GRAPH_DATA':\n            return updateState(state, { graphData: action.payload });\n\n        case 'SET_NODES_DATA':\n            return updateState(state, { nodesData: action.payload });\n\n        case 'CHANGE_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, default: action.payload });\n        }\n        case 'CHANGE_LEGAL_TEST_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, legalTest: action.payload });\n        }\n        case 'CHANGE_ISSUE_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, issue: action.payload })\n        }\n        case 'CHANGE_CONCLUSION_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, conclusion: action.payload })\n        }\n        case 'SET_MODAL':\n            return updateState(state, { isModalOpen: action.payload });\n\n        case 'SET_HIGHLIGHT_TEXT':\n            return {\n                ...state,\n                highlightTextForEditor: action.payload,\n            };\n\n        case 'ADD_HIGHLIGHT_TEXT':\n            const newHighlight = action.payload;\n            const updatedHighlights = [...(state.highlightTextsForEditor || []), newHighlight]; // Fallback to empty array if not defined\n            return {\n                ...state,\n                highlightTextsForEditor: updatedHighlights,\n            };\n            \n        case 'SET_ACCORDION_SECTIONS':\n                return updateState(state, { accordionSections: action.payload });\n                // return { ...state, accordionSections: [{ test: 'data' }] };  // Test static data\n\n        case 'TOGGLE_PDF_VIEWER':\n            return {\n                ...state,\n                showPdfViewer: !state.showPdfViewer,\n            };\n\n        case 'SHOW_METADATA_VIEWER':\n            return {\n                ...state,\n                showMetadataViewer: true,\n            };\n\n        case 'HIDE_METADATA_VIEWER':\n            return {\n                ...state,\n                showMetadataViewer: false,\n            };        \n\n        case 'SHOW_PDF_VIEWER':\n                return {\n                    ...state,\n                    showPdfViewer: true,\n                };\n    \n        case 'SHOW_TEXT_EDITOR':\n                return {\n                    ...state,\n                    showPdfViewer: false,\n                };\n    \n\n\n        default:\n            return state;\n    }\n};\n","\nimport React, { useState, useEffect, useContext  } from \"react\";\nimport { UserContext } from \"../App\";\n\nfunction Highlight(props) {\n  const {state} = useContext(UserContext);\n  const [nodeData, setNodeData] = useState({})\n\nuseEffect(() => {\n  setNodeData(state.nodeData)\n}, [state.nodeData]);\n\n  return (\n    <div className=\"sidebarnew\"style={{ width: \"25vw\" }}>\n      {/*  */}\n      <div className=\"description\" style={{ padding: \"1rem\" }}>\n        <h2 style={{ marginBottom: \"1rem\" , fontSize:\"1.2rem\"}}>Name</h2>\n        <p>{nodeData.name}</p>\n        {/* <div dangerouslySetInnerHTML={{ __html: nodeData.preview && nodeData.preview.join(\"\") }} /> */}\n        \n      </div>\n\n      <div className=\"description\" style={{ padding: \"1rem\" }}>\n        <h2 style={{ marginBottom: \"1rem\" , fontSize:\"1.2rem\"}}>Preview</h2>\n\n        <div dangerouslySetInnerHTML={{ __html: nodeData.preview && nodeData.preview.join(\"\") }} />\n        \n      </div>\n    </div>\n  );\n}\n\nexport default Highlight;\n","import React, { useEffect, useContext, useState } from \"react\";\nimport { UserContext } from \"../App\";\n\nfunction Highlight(props) {\n\tconst { state, dispatch } = useContext(UserContext);\n\tconst [graphData, setGraphData] = useState({})\n\n\tuseEffect(() => {\n\t\tsetTimeout(() => setGraphData(state.graphData), 500)\n\t}, [state.graphData]);\n\n\tfunction handleMouseEnter(node) {\n\t\tconst nodeData = state.nodesData[node.id]\n\t\tif (nodeData) {\n\t\t\tlet nodes = state.graphData.nodes.map(n => {\n\t\t\t\tif (n.id === node.id) {\n\t\t\t\t\treturn { ...n, \"fontSize\": 16 }\n\t\t\t\t} else {\n\t\t\t\t\treturn { ...n, \"fontSize\": 8 }\n\t\t\t\t}\n\t\t\t})\n\t\t\tdispatch({ type: \"SET_GRAPH_DATA\", payload: { ...state.graphData, nodes } })\n\t\t}\n\t\tif (nodeData) {\n\t\t\tdispatch({ type: \"SET_NODE_DATA\", payload: nodeData })\n\t\t}\n\t}\n\n\tfunction handleMouseLeave(node) {\n\t\tconst nodeData = state.nodesData[node.id]\n\t\tif (nodeData) {\n\t\t\tlet nodes = state.graphData.nodes.map(n => {\n\t\t\t\treturn { ...n, \"fontSize\": 8 }\n\t\t\t})\n\n\t\t\tdispatch({ type: \"SET_GRAPH_DATA\", payload: { ...state.graphData, nodes } })\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"sidebarnew2\" style={{ width: \"25vw\" }}>\n\t\t\t<ul className=\"sidebar__highlights\" style={{ \"maxHeight\": \"96vh\", \"overflow\": \"scroll\" }}>\n\t\t\t\t{graphData.nodes && graphData.nodes.map((node, index) => (\n\t\t\t\t\tnode.id !== state.searchQuery && state.nodesData[node.id] !== undefined ?\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tonMouseEnter={() => handleMouseEnter(node)}\n\t\t\t\t\t\t\tonMouseLeave={() => handleMouseLeave(node)}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"sidebar__highlight\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p style={{ \"opacity\": \".5\" }}>{state.nodesData[node.id] ? state.nodesData[node.id].docket_number : null}</p>\n\t\t\t\t\t\t\t\t<p>{state.nodesData[node.id] ? state.nodesData[node.id].name : node.id}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li> : null\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\n\nexport default Highlight;\n","import React, { useEffect } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { BASE_URL_DEV, fetchAuth } from \"../utils\";\n\nconst Register = () => {\n\tconst history = useHistory();\n\n\tconst [userDetails, setUserDetails] = React.useState({\n\t\tusername: \"\",\n\t\temail: \"\",\n\t\tpassword1: \"\",\n\t\tpassword2: \"\",\n\t\tfname: \"\",\n\t\tlname: \"\",\n\t\tcity: \"\",\n\t\tcountry: \"\",\n\t\torganisation: \"\",\n\t});\n\n\tuseEffect(() => {\n\t\tconst auth = fetchAuth();\n\t\tif (auth && auth.authToken && auth.userPublicId) {\n\t\t\thistory.push(\"/dashboard\");\n\t\t\tconsole.log(auth);\n\t\t}\n\t}, [history]);\n\n\tconst registerUser = async (e) => {\n\t\te.preventDefault();\n\t\tif (\n\t\t\t!userDetails.username ||\n\t\t\t!userDetails.email ||\n\t\t\t!userDetails.password1 ||\n\t\t\t!userDetails.password2\n\t\t)\n\t\t\treturn null;\n\t\tif (userDetails.password1 !== userDetails.password2) return null;\n\t\tconsole.log(userDetails);\n\t\tconst response = await fetch(`${BASE_URL_DEV}/api/user/register`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify(userDetails),\n\t\t});\n\t\tconst json = await response.json();\n\t\tconsole.log(json);\n\t\tif (response.ok) {\n\t\t\thistory.push(\"/login\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"mb-2 auth-page\">\n\t\t\t<div className=\"d-flex align-items-center auth px-0 h-100\">\n\t\t\t\t<div className=\"row w-100 mx-0\">\n\t\t\t\t\t<div className=\"col-lg-5 mx-auto\">\n\t\t\t\t\t\t<div className=\"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5\">\n\t\t\t\t\t\t\t<div className=\"brand-logo\">\n\t\t\t\t\t\t\t\t<img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/* <h4>New here?</h4> */}\n\t\t\t\t\t\t\t{/* <h6 className=\"font-weight-light\">\n\t\t\t\t\t\t\t\tSigning up is easy. It only takes a few steps\n\t\t\t\t\t\t\t</h6> */}\n\t\t\t\t\t\t\t<form className=\"pt-3\">\n\t\t\t\t\t\t\t\t<div className=\"row form-group\">\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfname: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlname: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputUsername1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Username\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\tusername: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputEmail1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\temail: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputOrganisation1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Organisation\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\torganisation: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"row form-group\">\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcity: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"City\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountry: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Country\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputPassword1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\tpassword1: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputConfirmPassword1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Confirm Password\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\tpassword2: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-block btn-primary btn-lg font-weight-medium align-self-center\"\n\t\t\t\t\t\t\t\t\t\tonClick={registerUser}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSIGN UP\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-center mt-4 font-weight-light\">\n\t\t\t\t\t\t\t\t\tAlready have an account?{\" \"}\n\t\t\t\t\t\t\t\t\t<Link to=\"/login\" className=\"text-primary\">\n\t\t\t\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Register;\n","import React, { useState, useContext, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { BASE_URL_DEV, fetchAuth } from \"../utils\";\nimport { UserContext } from \"../App\";\n\nconst Login = () => {\n  const history = useHistory();\n  const { dispatch } = useContext(UserContext);\n\n  const [userDetails, setUserDetails] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  useEffect(() => {\n    const auth = fetchAuth();\n    if (auth && auth.authToken && auth.userPublicId) {\n      history.push(\"/dashboard\");\n      console.log(auth);\n    }\n  }, [history]);\n\n  const loginUser = async (e) => {\n    e.preventDefault();\n    if (!userDetails.username || !userDetails.password) return null;\n    const response = await fetch(`${BASE_URL_DEV}/api/user/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // Assume you handle authentication token here if needed\n      },\n      body: JSON.stringify(userDetails),\n    });\n    const json = await response.json();\n    console.log(json);\n    if (response.ok) {\n      dispatch({ type: \"AUTH\", payload: json });\n      history.push(\"/dashboard\");\n    } else {\n      // Handle errors, e.g., unauthorized access\n      console.error('Login failed:', json);\n    }\n  };\n  \n  return (\n    <div className=\"mt-5 auth-page\" style={{ height: \"85vh\" }}>\n      <div className=\"d-flex align-items-center auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-5 mx-auto\">\n            <div className=\"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5\">\n              <div className=\"brand-logo\">\n                <img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n              </div>\n              <h4>Copilot for Lawyers</h4>\n              {/* <h6 className=\"font-weight-light\">Please Sign in to continue.</h6> */}\n              <Form className=\"pt-3\">\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"text\"\n                    placeholder=\"Username\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                    onChange={(e) =>\n                      setUserDetails({\n                        ...userDetails,\n                        username: e.target.value,\n                      })\n                    }\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                    onChange={(e) =>\n                      setUserDetails({\n                        ...userDetails,\n                        password: e.target.value,\n                      })\n                    }\n                  />\n                </Form.Group>\n                <div className=\"mt-3\">\n                  <Button\n                    className=\"btn btn-block btn-primary btn font-weight-medium auth-form-btn btn btn-primary align-self-center\"\n                    onClick={loginUser}\n                  >\n                    SIGN IN\n                  </Button>\n                </div>\n                <div className=\"text-center mt-4 font-weight-light\">\n                  Don't have an account?{\" \"} <br></br>\n                  <Link to=\"/register\" className=\"text-primary\">\n                    Create your account\n                  </Link>\n                </div>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React from 'react'\nimport { Trans } from \"react-i18next\";\nimport { Link } from 'react-router-dom';\n\nconst SideNav = (props) => (\n\t<li\n\t\tclassName={props.class ? \"nav-item menu-items active\" : \"nav-item menu-items\"}\n\t>\n\t\t<Link\n\t\t\tto='#'\n\t\t\tstyle={{ position: \"relative\" }}\n\t\t\tclassName=\"nav-link\"\n\t\t\tonClick={props.click}\n\t\t>\n\t\t\t<span className=\"menu-icon\">\n\t\t\t\t<i className={props.iconClass}></i>\n\t\t\t</span>\n\t\t\t<span className=\"menu-title\">\n\t\t\t\t<Trans>{props.transTitle}</Trans>\n\t\t\t</span>\n\t\t\t<i className=\"fa fa-angle-right\"></i>\n\t\t</Link>\n\t</li>\n);\n\nexport default SideNav;","import React from 'react'\nimport { Trans } from \"react-i18next\";\nimport { Dropdown } from \"react-bootstrap\";\n\nconst Profile = (props) => (\n\t<li className=\"nav-item profile\">\n\t\t<div className=\"profile-desc\">\n\t\t\t<div onClick={props.profileClick} className=\"cursor-pointer profile-pic\">\n\t\t\t\t<div className=\"count-indicator\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"img-xs rounded-circle \"\n\t\t\t\t\t\tsrc={require(\"../images/faces/face0.jpeg\")}\n\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"count bg-success\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"profile-name\">\n\t\t\t\t\t<h5 className=\"mb-0 font-weight-normal\">\n\t\t\t\t\t\t<Trans>{props.authUser}</Trans>\n\t\t\t\t\t</h5>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans>{props.authEmail}</Trans>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Dropdown alignRight>\n\t\t\t\t<Dropdown.Toggle as=\"a\" className=\"cursor-pointer no-caret\">\n\t\t\t\t\t<i className=\"mdi mdi-dots-vertical\"></i>\n\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t<Dropdown.Menu className=\"sidebar-dropdown preview-list\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"!#\"\n\t\t\t\t\t\tclassName=\"dropdown-item preview-item\"\n\t\t\t\t\t\tonClick={(evt) => evt.preventDefault()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"preview-thumbnail\">\n\t\t\t\t\t\t\t<div className=\"preview-icon bg-dark2 rounded-circle\">\n\t\t\t\t\t\t\t\t<i className=\"mdi mdi-settings text-primary\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"preview-item-content\">\n\t\t\t\t\t\t\t<p className=\"preview-subject ellipsis mb-1 text-small\">\n\t\t\t\t\t\t\t\t<Trans>Account settings</Trans>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div className=\"dropdown-divider\"></div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"!#\"\n\t\t\t\t\t\tclassName=\"dropdown-item preview-item\"\n\t\t\t\t\t\tonClick={(evt) => evt.preventDefault()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"preview-thumbnail\">\n\t\t\t\t\t\t\t<div className=\"preview-icon bg-dark2 rounded-circle\">\n\t\t\t\t\t\t\t\t<i className=\"mdi mdi-onepassword  text-info\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"preview-item-content\">\n\t\t\t\t\t\t\t<p className=\"preview-subject ellipsis mb-1 text-small\">\n\t\t\t\t\t\t\t\t<Trans>Change Password</Trans>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div className=\"dropdown-divider\"></div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"!#\"\n\t\t\t\t\t\tclassName=\"dropdown-item preview-item\"\n\t\t\t\t\t\tonClick={(evt) => evt.preventDefault()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"preview-thumbnail\">\n\t\t\t\t\t\t\t<div className=\"preview-icon bg-dark2 rounded-circle\">\n\t\t\t\t\t\t\t\t<i className=\"mdi mdi-calendar-today text-success\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"preview-item-content\">\n\t\t\t\t\t\t\t<p className=\"preview-subject ellipsis mb-1 text-small\">\n\t\t\t\t\t\t\t\t<Trans>To-do list</Trans>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</Dropdown.Menu>\n\t\t\t</Dropdown>\n\t\t</div>\n\t</li>\n);\n\nexport default Profile;","// src/shared/Sidebar.js\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { Trans } from \"react-i18next\";\nimport TextEditor from \"../TextEditor\";\nimport { UserContext } from \"../App\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport SideNav from \"./SideNav\";\nimport Profile from \"./Profile\";\n\nexport const useSidebarLogic = () => {\n    const { state, dispatch } = useContext(UserContext);\n\n    const fetchFilesAndGraphData = async () => {\n        if (!state.auth || !state.auth.authToken) return;\n        const result = await axios(`${BASE_URL_DEV}/get/files`, {\n            headers: {\n                \"x-access-token\": state.auth && state.auth.authToken,\n            },\n        });\n        const files = result.data && result.data.files;\n        if (files && files.length > 0) {\n            const results = await axios(`${BASE_URL_DEV}/get-graphdata`, {\n                headers: {\n                    \"x-access-token\": state.auth && state.auth.authToken,\n                },\n            });\n            const allgraphs = results.data;\n            let Obj = {};\n            let _id = \"\";\n\n            allgraphs && allgraphs.graphdata && allgraphs.graphdata.length && allgraphs.graphdata.filter(x => {\n                _id = x.fileName;\n                Obj[_id] = x.links.filter(e => e.source == \"CITATION\" || e.source == \"PROVISION\");\n            });\n            const fileNew = files.map(element => ({\n                ...element,\n                CITATION: Obj && Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source == \"CITATION\") : [\"N/A\"],\n                PROVISION: Obj && Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source == \"PROVISION\") : [\"N/A\"],\n            }));\n            dispatch({ type: \"ADD_FILE\", payload: fileNew });\n        }\n    };\n\n    const fetchHighlights = async () => {\n        if (state.fileHighlights && state.fileHighlights.length === 0) {\n            const result = await axios(`${BASE_URL_DEV}/get-highlights`, {\n                headers: {\n                    \"x-access-token\": state.auth && state.auth.authToken,\n                },\n            });\n            const fileHighlights = result.data;\n            if (!state.currentFile && fileHighlights && fileHighlights.highlights && fileHighlights.highlights.length) {\n                const data = {\n                    name: fileHighlights.highlights[0][\"name\"],\n                    url: `uploads/${state.auth.userPublicId}/${fileHighlights.highlights[0][\"name\"]}`\n                };\n                dispatch({ type: \"SET_CURR_FILE\", payload: data });\n            }\n            if (fileHighlights && fileHighlights.highlights && fileHighlights.highlights.length > 0) {\n                dispatch({\n                    type: \"FETCH_FILE_HIGHLIGHTS\",\n                    payload: fileHighlights.highlights,\n                });\n            }\n        }\n    };\n\n    const showFileViewerHandler = () => {\n        dispatch({ type: \"SET_VIEW\", payload: { showFileViewer: true } });\n    }\n\n    return {\n        fetchFilesAndGraphData,\n        fetchHighlights,\n        showFileViewerHandler,\n    };\n}\n\nfunction Sidebar() {\n    const { state, dispatch } = useContext(UserContext);\n    const { fetchFilesAndGraphData, fetchHighlights } = useSidebarLogic();\n\n    useEffect(() => {\n        fetchFilesAndGraphData();\n        fetchHighlights();\n    }, [state.auth.authToken]);\n\n    const itemClickHandler = (viewState) => {\n        dispatch({ type: \"SET_VIEW\", payload: viewState });\n    }\n\n    const [showTextEditor, setShowTextEditor] = useState(false);\n\n    const handleTextEditor = (e) => {\n        e.preventDefault();\n        setShowTextEditor(true);\n    };\n\n    return (\n        <nav className=\"sidebar sidebar-offcanvas\" id=\"sidebar\">\n            <div className=\"sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top\">\n                <a className=\"sidebar-brand brand-logo\" href=\"index.html\">\n                    <img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n                </a>\n                <a className=\"sidebar-brand brand-logo-mini\" href=\"index.html\">\n                    <img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n                </a>\n            </div>\n            <ul className=\"nav\">\n                <Profile profileClick={() => itemClickHandler({ showProfileView: true })}\n                    authUser={state.auth && state.auth.username}\n                    authEmail={state.auth && state.auth.email} />\n\n                <li className=\"nav-item nav-category\">\n                    <span className=\"nav-link\">\n                    </span>\n                </li>\n                <SideNav class={state.showDashboardView} click={() => itemClickHandler({ showDashboardView: true })}\n                    iconClass='mdi mdi-speedometer' transTitle='Dashboard' />\n\n                <SideNav class={state.showFileViewer} click={() => itemClickHandler({ showFileViewer: true })}\n                    iconClass='mdi mdi-file' transTitle='Copilot' />\n\n                <SideNav class={false} click={handleTextEditor}\n                    iconClass='mdi mdi-text' transTitle='Notes' />\n\n                <SideNav class={state.showTextAnonymizerView} click={() => itemClickHandler({ showTextAnonymizerView: true })}\n                    iconClass='mdi mdi-text' transTitle='Anonymizer' />\n\n                {/* <SideNav class={state.showLawsReader} click={() => itemClickHandler({ showLawsReader: true })}\n                    iconClass='mdi mdi-scale-balance' transTitle='Easy-Reader' /> */}\n\n            </ul>\n            {showTextEditor && (\n                <TextEditor\n                    id={state.auth && state.auth.userPublicId}\n                    fileName={'index'}\n                    showTextEditor={showTextEditor}\n                    setShowTextEditor={setShowTextEditor}\n                />\n            )}\n        </nav>\n    );\n}\n\nexport default Sidebar;\n","import React, { useState, useContext } from \"react\";\r\nimport { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../App\";\r\nimport { BASE_URL_DEV } from \"../utils\";\r\n\r\nfunction HighlightButton(props) {\r\n  const { state, dispatch } = useContext(UserContext);\r\n  const [hightlightResponse, setHightlightResponse] = useState(\"\");\r\n\r\n  async function saveHighlightData() {\r\n    await axios\r\n      .post(`${BASE_URL_DEV}/save-highlights`, state.fileHighlights, {\r\n        headers: {\r\n          \"x-access-token\": state.auth && state.auth.authToken,\r\n        },\r\n      })\r\n      .then(function (response) {\r\n        if (response.data) {\r\n          dispatch({ type: \"MESSAGE\", payload: response.data.message });\r\n          setHightlightResponse(response.data.message);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        if (error.response) {\r\n          dispatch({ type: \"ERROR\", payload: error.response.statusText });\r\n          setHightlightResponse(\r\n            error && error.response && error.response.statusText\r\n          );\r\n        }\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <div className=\"highlight_btn\">\r\n        <Button\r\n          className=\"btn btn-md\"\r\n          outline\r\n          color=\"light\"\r\n          onClick={saveHighlightData}\r\n        >\r\n          Save Highlights\r\n        </Button>\r\n        <p>{hightlightResponse}</p>\r\n      </div> */}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default HighlightButton;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Fragment } from \"react\";\r\nimport { Input } from \"reactstrap\";\r\n\r\nimport { UserContext } from \"../App\";\r\n\r\nfunction Search(props) {\r\n\tconst { dispatch } = useContext(UserContext);\r\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n\tfunction handleFormSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tdispatch({ type: \"SET_SEARCH_QUERY\", payload: searchQuery });\r\n\t}\r\n\r\n\tfunction handleChange(e) {\r\n\t\tsetSearchQuery(e.target.value);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{/* <form className=\"nav-link mt-2 mt-md-0 d-none d-lg-flex search\" onSubmit={handleFormSubmit}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\tplaceholder=\"Search for caselaw or statue \"\r\n\t\t\t\t\tvalue={searchQuery}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t/>\r\n\t\t\t</form> */}\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default Search;\r\n","import React, { useRef, useContext, useEffect } from 'react';\nimport { Link, useHistory } from \"react-router-dom\";\nimport HighlightButton from '../Dashboard/HighlightButton';\nimport Search from '../Dashboard/Search';\nimport { Col, Row } from 'reactstrap';\n\nimport { UserContext } from \"../App\";\nimport { fetchAuth } from '../utils';\n\nconst Navbar = ({ setCreateNotes, setShowGraph, showGraph, setShowGraphModal }) => {\n    const history = useHistory();\n    const { state, dispatch } = useContext(UserContext);\n    const toggleButtonRef = useRef(null);\n\n    useEffect(() => {\n        setInterval(function () { authChe(); }, 60000);\n\n        if (state && state.auth) {\n            const auth = state.auth;\n            console.log('Auth Expiry Time', new Date(auth.expiry));\n            if (!auth.authToken || !auth.userPublicId || !auth.username || !auth.email) {\n                const savedAuth = fetchAuth();\n                if (!savedAuth) {\n                    history.push(\"/login\");\n                } else {\n                    dispatch({ type: \"AUTH\", payload: savedAuth });\n                }\n            }\n        }\n\n        const timer = setTimeout(() => {\n            if (toggleButtonRef.current) {\n                toggleButtonRef.current.click();\n            }\n        }, 3000);\n        return () => clearTimeout(timer);\n\n    }, [state.auth]);\n\n    const authChe = () => {\n        var d = new Date();\n\n        var datestring = d.getDate() + \"-\" +\n            d.getHours() + \"-\" + d.getMinutes();\n\n        let beforFiveTime = state.auth.expiry - 60000 * 5\n        var beforeFiveDateString = new Date(beforFiveTime).getDate() + \"-\" +\n            new Date(beforFiveTime).getHours() + \"-\" + new Date(beforFiveTime).getMinutes();\n\n        if (beforeFiveDateString === datestring) {\n            alert(\"Auth Signature about to expire in 5 minutes\")\n        }\n        var authExpiry = new Date(state.auth.expiry).getDate() + \"-\" +\n            new Date(state.auth.expiry).getHours() + \"-\" + new Date(state.auth.expiry).getMinutes();\n        if (authExpiry === datestring) {\n            history.push(\"/login\");\n        }\n    }\n\n    const toggleOffcanvas = () => {\n        document.querySelector('.sidebar-offcanvas').classList.toggle('active');\n    }\n\n    const togglePdfViewer = () => {\n        if (state.showFileViewer) {\n            dispatch({ type: 'TOGGLE_PDF_VIEWER' });\n        }\n    }\n\n    return (\n        <nav className=\"navbar p-0 fixed-top d-flex flex-row\">\n            <div className=\"navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center\">\n                <Link className=\"navbar-brand brand-logo-mini\" to=\"/\">\n                    <img src={require(\"../images/logo-mini.svg\")} alt=\"logo\" />\n                </Link>\n            </div>\n            <div className=\"navbar-menu-wrapper flex-grow d-flex align-items-stretch\">\n                <button\n                    ref={toggleButtonRef}\n                    className=\"navbar-toggler align-self-center hamburger\"\n                    type=\"button\"\n                    onClick={() => document.body.classList.toggle(\"sidebar-icon-only\")}\n                >\n                    <span className=\"mdi mdi-menu\"></span>\n                </button>\n                <Row\n                    style={{ alignItems: \"center\", width: \"100%\" }}\n                    className=\"nav_items_upload\"\n                >\n                    <Col lg={3} md={4} xs={12} sm={12}>\n                        <Search />\n                    </Col>\n                    <Col lg={6} md={6} xs={12} sm={12}>\n                        {/* <FileUploadComponent /> */}\n                    </Col>\n                    <Col lg={3} md={2} xs={12} sm={12}>\n                        <HighlightButton />\n                    </Col>\n                </Row>\n                <div className=\"button-container\" style={{ display: 'flex', justifyContent: 'space-between', margin: '20px auto', width: 'fit-content',gap:'10px' }}>\n                    {state.showFileViewer && (\n                        <>\n                            <div\n                                onClick={() => setShowGraph(!showGraph)}\n                                className=\"btn btn-lg btn-secondary text-center cursor-pointer p-2\"\n                            > {showGraph ? \"Hide\" : \"Graph\"}\n                            </div>\n                            <div\n                                onClick={togglePdfViewer}\n                                className=\"btn btn-lg btn-secondary text-center cursor-pointer p-2\"\n                            > {state.showPdfViewer ? \"Show Text Editor\" : \"Show PDF\"}\n                            </div>\n                        </>\n                    )}\n                </div>\n                <button\n                    className=\"navbar-toggler navbar-toggler-right d-lg-none align-self-center\"\n                    type=\"button\"\n                    onClick={toggleOffcanvas}\n                >\n                    <span className=\"mdi mdi-format-line-spacing\"></span>\n                </button>\n                <button\n                    className=\"btn btn-md bg-danger text-center cursor-pointer p-2 text-white align-self-center log-out-button\"\n                    type=\"button\"\n                    onClick={() => dispatch({ type: \"LOG_OUT\" })}\n                >\n                    Log Out\n                </button>\n\n\n            </div>\n        </nav>\n    );\n}\n\nexport default Navbar;\n","import React, { useState, useEffect, useRef } from 'react';\n// import io from 'socket.io-client'; // Import socket.io-client\nimport '../style/theme-styles/components/Chatstyles.css';\nimport { useSocket } from './SocketContext'; // Use the context\n\n\nconst ChatUI = ({ publicId, pdfDocumentName }) => {\n    const [messages, setMessages] = useState([\n        { id: 1, nickName: '', message: 'Hello there!', type: 'me' }\n    ]);\n    const [inputText, setInputText] = useState('');\n    const socket = useSocket();\n\n    const sendMessage = (text, sender = 'Yahya') => {\n        if (text.trim()) {\n            console.log('Sending message:', text);\n            const newMessage = {\n                id: messages.length + 1,\n                nickName: sender,\n                message: text,\n                type: sender === 'Yahya' ? 'user' : 'me',\n                publicId: publicId,\n                pdfDocumentName: pdfDocumentName\n            };\n            setMessages(prevMessages => [...prevMessages, newMessage]);\n            if (sender === 'Yahya' && socket) {\n                console.log('Emitting to socket:', text);\n                socket.emit('openai-chat', { query: newMessage });\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (socket) {\n            const handleResponse = (response) => {\n                console.log('Received response:', response);\n                const newMessage = {\n                    id: messages.length + 1,\n                    nickName: '',\n                    message: response.recommendation,\n                    type: 'me'\n                };\n                setMessages(prevMessages => [...prevMessages, newMessage]);\n            };\n\n            socket.on('openai-query-response', handleResponse);\n\n            return () => {\n                socket.off('openai-query-response', handleResponse);\n            };\n        }\n    }, [socket]);\n\n    const handleSend = () => {\n        sendMessage(inputText);\n        setInputText(''); // Clear the input after sending the message\n    };\n\n    return (\n        <div id=\"chat\" className=\"--dark-theme\">\n            <div className=\"chat__conversation-board\">\n                {messages.map((msg, index) => (\n                    <div key={index} className={`chat__conversation-board__message-container ${msg.type === 'me' ? 'me' : 'user'}`}>\n                        <div className=\"chat__conversation-board__message__person\">\n                            {msg.type === 'me' &&\n                                <img src=\"/static/media/scaletransm2.5eb52ef8.png\" alt={msg.nickName} style={{ width: '35px', height: '35px', borderRadius: '50%' }} />\n                            }\n                            <span className=\"chat__conversation-board__message__person__nickname\">{msg.nickName}</span>\n                        </div>\n                        <div className=\"chat__conversation-board__message__context\">\n                            <p className={`chat__conversation-board__message__bubble ${msg.type === 'user' ? 'user-message' : ''}`}>{msg.message}</p>\n                        </div>\n                    </div>\n                ))}\n            </div>\n            <div className=\"chat__conversation-panel\">\n                <input\n                    className=\"chat__conversation-panel__input\"\n                    placeholder=\"Ask Casebook AI a question about this document...\"\n                    value={inputText}\n                    onChange={(e) => setInputText(e.target.value)}\n                    onKeyDown={(e) => {\n                        if (e.key === 'Enter') {\n                            handleSend();\n                        }\n                    }}\n                />\n                <button className=\"chat__conversation-panel__button\" onClick={handleSend}>\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M2 21l21-9L2 3v7l15 2-15 2v7z\" fill=\"currentColor\"/>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default ChatUI;\n","// @flow\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { UserContext } from \"../App\";\nimport { Resizable } from \"react-resizable\";\nimport processMd from \"./markdown\";\nimport axios from \"axios\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport ChatUI from '../shared/Chatbox';\n\nimport \"../style/resizable.css\";\n\nconst updateHash = (highlight) => {\n  document.location.hash = `pdf-highlight-${highlight.id}`;\n};\n\nfunction FileViewer() {\n  const { state, dispatch } = useContext(UserContext);\n\n  const [highlights, setHighlights] = useState([]);\n  const [dimensions, setDimensions] = useState({\n    height: 720,\n    width: 300,\n  });\n  const [selectPdf, setSelectPdf] = useState(false);\n\n  const [show, setShow] = useState(false);\n  const [index, setIndex] = useState();\n  const [currentHighlightIndex, setCurrentHighlightIndex] = useState(0);\n  const [filter, setFilter] = useState(\"\");\n  const [totalHighlights, setTotalHighlights] = useState(0);\n  const [highlightProgress, setHighlightProgress] = useState(0);\n\n  const updateProgress = (currentIndex, total) => {\n    setHighlightProgress(((currentIndex + 1) / total) * 100);\n  };\n  \n  const handlePreviousHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      alert(`No highlights available for '${filter}'`);\n      return; // Early return to prevent further execution\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const prevIndex = (currentFilteredIndex - 1 + filteredHighlights.length) % filteredHighlights.length;\n    const prevHighlight = filteredHighlights[prevIndex];\n    setCurrentHighlightIndex(highlights.indexOf(prevHighlight));\n    updateHash(prevHighlight);\n    updateProgress(highlights.indexOf(prevHighlight), filteredHighlights.length);\n    scrollToActiveCard(); // Ensuring the card scrolls into view\n};\n\nconst handleNextHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      return; // Early return to prevent further execution\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const nextIndex = (currentFilteredIndex + 1) % filteredHighlights.length;\n    if (nextIndex === 0 && currentFilteredIndex === filteredHighlights.length - 1) {\n      return;\n    }\n    const nextHighlight = filteredHighlights[nextIndex];\n    setCurrentHighlightIndex(highlights.indexOf(nextHighlight));\n    updateHash(nextHighlight);\n    updateProgress(highlights.indexOf(nextHighlight), filteredHighlights.length);\n    scrollToActiveCard(); // Ensuring the card scrolls into view\n};\n\n  const handleFilterChange = (newFilter) => {\n    setFilter(newFilter);\n  \n    // Apply the new filter and get filtered highlights\n    const filteredHighlights = highlights.filter(h =>\n      newFilter === \"\" || h.comment.text.toUpperCase().includes(newFilter.toUpperCase())\n    );\n  \n    // Set the total number of highlights which helps in calculating the progress\n    setTotalHighlights(filteredHighlights.length);\n  \n    // Check if there are any highlights that match the new filter\n    if (filteredHighlights.length > 0) {\n      // Reset the index to start at the first highlight of the filtered list\n      setCurrentHighlightIndex(highlights.indexOf(filteredHighlights[0]));\n      // Update the progress for the new filtered list\n      updateProgress(0, filteredHighlights.length);\n      // Update the hash to jump to the first highlight of the new filter\n      updateHash(filteredHighlights[0]);\n    } else {\n      // No highlights available for this filter\n      setCurrentHighlightIndex(-1); // Indicates no selection\n      setHighlightProgress(0); // Reset progress bar\n      // Optionally revert to the first available highlight if no filter matches\n      if (highlights.length > 0) {\n        setCurrentHighlightIndex(0);\n        updateHash(highlights[0]);\n        updateProgress(0, highlights.length);\n      } else {\n        document.location.hash = \"\"; // Clear the hash as no valid highlight\n        // alert(`No highlights available for '${newFilter}'`);\n      }\n    }\n  };\n  \n\n\n\n  const handleClose = () => setShow(false);\n  useEffect(() => {\n    if (state.currentFile) {\n      let highlightUpdated = false;\n      const filteredHighlights = state.fileHighlights.reduce((acc, item) => {\n        if (item.name === state.currentFile.name) {\n          // Include only highlights that do not have the label \"OTHER\" and match the current filter (if any)\n          const validHighlights = item.highlights.filter(highlight => \n            highlight.comment.text !== \"OTHER\" &&\n            (!filter || highlight.comment.text.toUpperCase().includes(filter))\n          );\n          acc.push(...validHighlights);\n          highlightUpdated = true;\n        }\n        return acc;\n      }, []);\n  \n      setHighlights(filteredHighlights);\n      if (!highlightUpdated || filteredHighlights.length === 0) {\n        setHighlights([]); // Clear highlights if none match or file changes\n      }\n      setCurrentHighlightIndex(0); // Reset index to start at first of new filtered list or if file changes\n    }\n  }, [state.currentFile, state.fileHighlights, filter]);  // Dependency on filter ensures index reset on filter change\n  \n  const handleFileClick = async (index) => {\n    dispatch({ type: \"SET_CURR_FILE\", payload: state.files[index] });\n    dispatch({ type: \"SET_MODAL\", payload: false });\n\n    setSelectPdf(false);\n  };\n\n  const handleRemove = (index) => {\n    setShow(true);\n    setIndex(index);\n  }\n\n  const handleRemoveFile = (data) => {\n    console.log(data, \"File Remove....\")\n\n\n\n    if (state.files.length > 0) {\n      let arr = state.files\n      arr.splice(arr.findIndex(a => a.name === data.name), 1)\n      dispatch({ type: \"ADD_FILE\", payload: arr });\n      dispatch({ type: \"SET_CURR_FILE\", payload: state.files[0] });\n    } else {\n      dispatch({ type: \"ADD_FILE\", payload: [] });\n      dispatch({\n        type: \"SET_FILE_HIGHLIGHTS\",\n        payload: [],\n      });\n      dispatch({ type: \"SET_CURR_FILE\", payload: null });\n    }\n\n\n    setShow(false);\n\n\n    axios.post(`${BASE_URL_DEV}/deletePdfAndGraphData`, { fileName: data.name }, {\n      headers: {\n        'x-access-token': state.auth && state.auth.authToken,\n      }\n    })\n      .then(function (response) {\n        console.log(\"delete api response\", response)\n\n      })\n\n  }\n\n  const deleteHighlight = (index) => {\n    const updatedHighlights = highlights.filter((highlight, idx) => {\n      if (index !== idx) {\n        return highlight;\n      }\n    });\n    setHighlights(updatedHighlights);\n  };\n  const hideModal = () => {\n    setSelectPdf(false);\n    dispatch({ type: \"SET_MODAL\", payload: false });\n\n  }\n  const resetHighlights = () => {\n    setHighlights([]);\n  };\n\n  const handleSendToEditor = (highlight) => {\n    if (!highlight.comment || !highlight.content) {\n        console.error(\"Highlight structure is not as expected\", highlight);\n        return;\n    }\n\n    const payload = {\n        commentText: highlight.comment.text,\n        contentText: highlight.content.text,\n    };\n    dispatch({ type: 'ADD_HIGHLIGHT_TEXT', payload });\n};\n\nconst handleWheel = (event) => {\n  const delta = event.deltaY;\n  event.preventDefault(); // Prevent default scrolling\n\n  if (delta < 0) {\n    handlePreviousHighlight();\n  } else if (delta > 0) {\n    handleNextHighlight();\n  }\n  scrollToActiveCard(); // Ensure the new active card is scrolled to view\n};\n\n\n\nconst handleHighlightClick = (index) => {\n  setCurrentHighlightIndex(index);\n  updateHash(highlights[index]);\n};\n\n\nconst scrollToActiveCard = () => {\n  setTimeout(() => {\n      const activeCard = document.querySelector('.newcard.active');\n      if (activeCard) {\n          activeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n      }\n  }, 0);\n};\n\n// Call this function after updating the current highlight index\n// setCurrentHighlightIndex(newIndex);\nscrollToActiveCard();\n\nreturn (\n  <Resizable className=\"box\" width={dimensions.width} onResize={(e, { size }) => setDimensions({ width: size.width })} resizeHandles={[\"e\"]}>\n      <div className=\"sidebarnew\" style={{ width: \"36vw\" }}>\n\n          {/* Progress Bar */}\n          <div className=\"progress-container\" style={{ width: '100%', backgroundColor: '#222d37', height: '1vh', margin: '1vh 0' }}>\n              <div className=\"progress-bar\" style={{ width: `${highlightProgress}%`, height: '5px', backgroundColor: '#2e5f8a' }}></div>\n          </div>\n\n          {/* Navigation and Filtering */}\n          <div className=\"highlight-actions\">\n              <button className=\"btn btn-secondary\" onClick={(e) => {\n                  e.stopPropagation();\n                  handlePreviousHighlight();\n              }}>Previous</button>\n\n              <UncontrolledDropdown>\n                  <DropdownToggle caret color=\"warning\">\n                      Category\n                  </DropdownToggle>\n                  <DropdownMenu>\n                      <DropdownItem header>Jump to</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"AXIOM\")}>Axiom</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"ISSUE\")}>Issue</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"LEGAL_TEST\")}>Legal Test</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"CONCLUSION\")}>Conclusion</DropdownItem>\n                      <DropdownItem divider />\n                  </DropdownMenu>\n              </UncontrolledDropdown>\n\n              <button className=\"btn btn-primary\" onClick={(e) => {\n                  e.stopPropagation();\n                  handleNextHighlight();\n              }}>Next</button>\n          </div>\n\n          {/* Highlight cards within a scrollable container */}\n          <div className=\"sidebar__highlights\" onWheel={handleWheel} style={{ overflowY: \"scroll\", height: \"calc(17vh)\", position: \"relative\" }}>\n              {highlights.length > 0 ? highlights.map((highlight, idx) => (\n                  <div className={`newcard ${idx === currentHighlightIndex ? 'active' : ''}`} key={idx} onClick={() => handleHighlightClick(idx)}>\n                      <div>\n                          <strong>{processMd(highlight.comment.text)}</strong>\n                          {highlight.content.text && (\n                              <blockquote>{`${highlight.content.text.slice(0, 90).trim()}…`}</blockquote>\n                          )}\n                          {highlight.content.image && (\n                              <div className=\"highlight__image\" style={{ marginTop: \"0.5rem\" }}>\n                                  <img src={highlight.content.image} alt=\"Screenshot\" />\n                              </div>\n                          )}\n                      </div>\n                  </div>\n              )) : (\n                  <div className=\"no-highlights\">No Highlights!</div>\n              )}\n          </div>\n\n          {/* Summary Card Section */}\n          {/* <div className=\"description\" style={{ padding: \"1rem\" }}> */}\n          <div className=\"description\">\n\n              {/* <div className=\"summary-section\"><h2>Summary</h2></div>\n              <div className=\"highlight-card\" key={currentHighlightIndex}>\n                  <div className=\"card-body\">\n                      <strong> Details Here</strong>\n                      <blockquote>This is an example of some summary text that could be here.</blockquote>\n                  </div>\n              </div> */}\n\n\n        {/* <ChatUI /> */}\n        <ChatUI publicId={state.auth.userPublicId} pdfDocumentName={state.currentFile && state.currentFile.name} />\n\n          </div>\n\n      </div>\n  </Resizable>\n);\n\n}\n\nexport default FileViewer;","// PdfGraphFunc.js\nimport React, { useEffect, useState, useContext, useRef } from \"react\";\nimport { Graph } from \"react-d3-graph\";\nimport axios from \"axios\";\nimport { Fragment } from \"react\";\nimport { UserContext } from \"../App\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport { useSocket } from '../shared/SocketContext'; // Use the context\nimport GraphIframeView from './GraphIframeView';\n\nfunction PdfGraphFunc(props) {\n    const [obj, setObj] = useState([]);\n    const { state, dispatch } = useContext(UserContext);\n    const errorText = \"\";\n    const socket = useSocket();\n    const [iframeUrl, setIframeUrl] = useState(null);\n\n    useEffect(() => {\n        if (state.graphData.length !== 0) {\n            (async () => {\n                const result = await axios(`${BASE_URL_DEV}/get-graphdata`, {\n                    headers: {\n                        \"x-access-token\": state.auth && state.auth.authToken,\n                    },\n                });\n                const allgraphs = result.data;\n\n                let currentFileName = state.currentFile && state.currentFile.name ? state.currentFile.name : '';\n                allgraphs && allgraphs.graphdata && allgraphs.graphdata.length && allgraphs.graphdata.filter(x => {\n                    if (x.fileName == currentFileName) {\n                        delete x.fileName\n                        setObj(x);\n                        return x;\n                    }\n                });\n\n                if (allgraphs && allgraphs.length > 0) {\n                    dispatch({\n                        type: \"FETCH_FILE_HIGHLIGHTS\",\n                        payload: allgraphs.highlights,\n                    });\n                }\n            })();\n        }\n\n        if (socket) {\n            socket.on('new-graph-nodes-reciever', (data) => {\n                console.log('Received new Graph data:', data);\n                setObj(data);\n            });\n\n            return () => {\n                socket.off('new-graph-nodes-reciever');\n            };\n        }\n    }, [state, socket]);\n\n    const myConfig = {\n        automaticRearrangeAfterDropNode: true,\n        collapsible: false,\n        directed: false,\n        focusAnimationDuration: 10,\n        focusZoom: 1,\n        freezeAllDragEvents: false,\n        height: 710,\n        highlightDegree: 0.1,\n        highlightOpacity: 1,\n        linkHighlightBehavior: true,\n        maxZoom: 8,\n        minZoom: 0.1,\n        nodeHighlightBehavior: true,\n        panAndZoom: false,\n        staticGraph: false,\n        staticGraphWithDragAndDrop: false,\n        width: 50,\n        d3: {\n            alphaTarget: 0.05,\n            gravity: -150,\n            linkLength: 90,\n            linkStrength: 2,\n            disableLinkForce: false,\n        },\n        node: {\n            color: \"#d3d3d3\",\n            fontColor: \"#d3d3d3\",\n            fontSize: 12,\n            fontWeight: \"normal\",\n            highlightColor: \"lightgreen\",\n            highlightFontSize: 17,\n            highlightFontWeight: \"Bold\",\n            highlightStrokeColor: \"SAME\",\n            highlightStrokeWidth: \"SAME\",\n            labelProperty: \"id\",\n            mouseCursor: \"pointer\",\n            opacity: 1,\n            renderLabel: true,\n            size: 200,\n            strokeColor: \"none\",\n            strokeWidth: 1.5,\n            svg: \"\",\n            symbolType: \"circle\",\n        },\n        link: {\n            color: \"#d3d3d3\",\n            fontColor: \"black\",\n            fontSize: 8,\n            fontWeight: \"normal\",\n            highlightColor: \"SAME\",\n            highlightFontSize: 8,\n            highlightFontWeight: \"normal\",\n            labelProperty: \"label\",\n            mouseCursor: \"pointer\",\n            opacity: 1,\n            renderLabel: false,\n            semanticStrokeWidth: false,\n            strokeWidth: 1.5,\n            markerHeight: 6,\n            markerWidth: 6,\n            strokeDasharray: 0,\n            strokeDashoffset: 0,\n            strokeLinecap: \"butt\",\n        },\n    };\n\n    const onClickGraph = function (event) {\n        //  window.alert('Clicked the graph background');\n    };\n    /* standard */\n\n    // const onClickNode = function (nodeId, node) {\n    //     window.alert(`Clicked node ${nodeId} in position (${node.x}, ${node.y})`);\n    // };\n    \n    /* iframe attempt */\n\n    // const onClickNode = async (nodeId) => {\n    //     try {\n    //         const response = await axios.post(`${BASE_URL_DEV}/get-node-url`, { nodeId }, {\n    //             headers: {\n    //                 \"x-access-token\": state.auth && state.auth.authToken,\n    //             },\n    //         });\n\n    //         if (response.data && response.data.url) {\n    //             setIframeUrl(response.data.url);\n    //         } else {\n    //             setIframeUrl(null);\n    //         }\n    //     } catch (error) {\n    //         console.error('Error fetching node URL:', error);\n    //         setIframeUrl(null);\n    //     }\n    // };\n\n    /* open link outside */\n\n    const onClickNode = async (nodeId) => {\n        try {\n            const response = await axios.post(`${BASE_URL_DEV}/get-node-url`, { nodeId }, {\n                headers: {\n                    \"x-access-token\": state.auth && state.auth.authToken,\n                },\n            });\n\n            if (response.data && response.data.url) {\n                window.open(response.data.url, \"_blank\");\n            } else {\n                console.error('No URL found for the given Node ID');\n            }\n        } catch (error) {\n            console.error('Error fetching node URL:', error);\n        }\n    };\n\n\n    const onDoubleClickNode = function (nodeId, node) {\n        const nodeData = state.nodesData[nodeId];\n        if (nodeData) {\n            window.open(nodeData[\"frontend_url\"], \"_blank\");\n        }\n    };\n\n    const onRightClickNode = function (event, nodeId, node) {\n        //  window.alert('Right clicked node ${nodeId} in position (${node.x}, ${node.y})');\n    };\n\n    const onMouseOverNode = function (nodeId, node) {\n        const nodeData = state.nodesData[node.id];\n        if (nodeData) {\n            dispatch({ type: \"SET_NODE_DATA\", payload: nodeData });\n            let nodes = state.graphData.nodes.map((n) => {\n                if (n.id === node.id) {\n                    return { ...n, fontSize: 16 };\n                } else {\n                    return { ...n, fontSize: 8 };\n                }\n            });\n            dispatch({\n                type: \"SET_GRAPH_DATA\",\n                payload: { ...state.graphData, nodes },\n            });\n        }\n    };\n\n    const onMouseOutNode = function (nodeId, node) {\n        //  window.alert(`Mouse out node ${nodeId} in position (${node.x}, ${node.y})`);\n    };\n\n    const onClickLink = function (source, target) {\n        //  window.alert(`Clicked link between ${source} and ${target}`);\n    };\n\n    const onRightClickLink = function (event, source, target) {\n        //  window.alert('Right clicked link between ${source} and ${target}');\n    };\n\n    const onMouseOverLink = function (source, target) {\n        //  window.alert(`Mouse over in link between ${source} and ${target}`);\n    };\n\n    const onMouseOutLink = function (source, target) {\n        //  window.alert(`Mouse out link between ${source} and ${target}`);\n    };\n\n    const onNodePositionChange = function (nodeId, x, y) {\n        //  window.alert(`Node ${nodeId} moved to new position x= ${x} y= ${y}`);\n    };\n\n    const onZoomChange = function (previousZoom, newZoom) {\n        //  window.alert(`Graph is now zoomed at ${newZoom} from ${previousZoom}`);\n    };\n\n    return (\n        <Fragment>\n            {errorText === \"\" && !Array.isArray(obj) && (\n                <div className=\"graph__container\">\n                    {obj && (\n                        <Graph\n                            id=\"graph-id\"\n                            data={obj}\n                            key={Math.round((new Date()).getTime() + Math.random())}\n                            config={myConfig}\n                            onClickGraph={onClickGraph}\n                            onClickNode={onClickNode}\n                            passive={true}\n                            onDoubleClickNode={onDoubleClickNode}\n                            onRightClickNode={onRightClickNode}\n                            onClickLink={onClickLink}\n                            onRightClickLink={onRightClickLink}\n                            onMouseOverNode={onMouseOverNode}\n                            onMouseOutNode={onMouseOutNode}\n                            onMouseOverLink={onMouseOverLink}\n                            onMouseOutLink={onMouseOutLink}\n                            onNodePositionChange={onNodePositionChange}\n                            onZoomChange={onZoomChange}\n                        />\n                    )}\n                </div>\n            )}\n            {errorText !== \"\" && (\n                <div className=\"error_text\">\n                    <p>{errorText}</p>\n                </div>\n            )}\n\n        {/* {iframeUrl && <GraphIframeView url={iframeUrl} />} */}\n\n        </Fragment>\n    );\n}\n\nexport default PdfGraphFunc;\n","import React, { useContext, useState, useRef, useEffect } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Accordion from 'react-bootstrap/Accordion';\nimport AccordionContext from 'react-bootstrap/AccordionContext';\nimport { useAccordionToggle } from 'react-bootstrap/AccordionToggle';\nimport './accordion.css'; // Import the new CSS file\nimport { UserContext } from '../App';  // Import UserContext\nimport { useSocket } from '../shared/SocketContext'; // Import the socket context\n\n\nfunction AccordionRenderer({ data }) {\n    console.log('Accordion Renderer Data:', data); // Ensure this is logged\n    const [searchInput, setSearchInput] = useState('');\n    const [activeKeys, setActiveKeys] = useState([]);\n    const [active, setActive] = useState('');\n    const [count, setCount] = useState(0);\n    const { state, dispatch } = useContext(UserContext);\n    const [accordionData, setAccordionData] = useState(data);  // Local state to manage accordion data\n    const socket = useSocket(); // Get the socket instance from context\n\n    const myRef = useRef();\n    // Update local accordion data if props data is empty and state has accordionSections\n    useEffect(() => {\n        if (data.length === 0 && state.accordionSections && state.accordionSections.length > 0) {\n            setAccordionData(state.accordionSections);\n        } else {\n            setAccordionData(data);\n        }\n    }, [data, state.accordionSections]);\n\n    // Listen for socket updates\n    useEffect(() => {\n        if (socket) {\n            socket.on('accordion-response', (newData) => {\n                console.log('Received accordion-response:', newData);\n                setAccordionData(newData);\n            });\n\n            return () => {\n                socket.off('accordion-response');\n            };\n        }\n    }, [socket]);\n\n    // Logging to monitor the data updates\n    useEffect(() => {\n        console.log('Accordion Renderer Data:', accordionData);\n    }, [accordionData]);\n\n    useEffect(() => {\n        let accordionContainer = myRef.current;\n        let selectAccordion = accordionContainer.querySelectorAll('.accordion');\n        let currIndex = activeKeys[count];\n        if (selectAccordion[currIndex]) {\n            accordionContainer.scrollTo({ behavior: 'smooth', top: selectAccordion[currIndex].offsetTop });\n        }\n    }, [count]);\n\n    function ContextAwareToggle({ children, eventKey, callback }) {\n        const currentEventKey = useContext(AccordionContext);\n\n        const decoratedOnClick = useAccordionToggle(\n            eventKey,\n            () => callback && callback(eventKey),\n        );\n        const isCurrentEventKey = currentEventKey === eventKey;\n\n        return (\n            <div className=\"accordion-card__header-items\">\n                <div className=\"accordion-card__active-tab\">\n                    {\n                        isCurrentEventKey ?\n                            <span className=\"online\"><i className=\"mdi mdi-checkbox-blank-circle\"></i></span> :\n                            <span className=\"offline\"><i className=\"mdi mdi-checkbox-blank-circle\"></i></span>\n                    }\n                </div>\n                <button\n                    type=\"button\"\n                    className={'header-button'}\n                    onClick={decoratedOnClick}\n                >\n                    {children}\n                </button>\n                <div className=\"accordion-card__active-tab\">\n                    {\n                        isCurrentEventKey ?\n                            <i className=\"mdi mdi-chevron-up\"></i> :\n                            <i className=\"mdi mdi-chevron-down\"></i>\n                    }\n                </div>\n            </div>\n        );\n    }\n\n    const scroller = (activeKeys) => {\n        let accordionContainer = myRef.current;\n        let selectAccordion = accordionContainer.querySelectorAll('.accordion');\n        let currIndex = activeKeys[count];\n        if (selectAccordion[currIndex]) {\n            accordionContainer.scrollTo({ behavior: 'smooth', top: selectAccordion[currIndex].offsetTop });\n        }\n    }\n\n    const searchHandler = (event) => {\n        let matchedTextIndexArray = [];\n        accordionData.forEach((d, index) => {\n            if (d.text.toLowerCase().includes(searchInput.toLowerCase())) {\n                matchedTextIndexArray.push(index);\n            }\n        });\n        setActiveKeys(matchedTextIndexArray);\n        scroller(matchedTextIndexArray);\n        event.preventDefault();\n    }\n\n    const accordionClickHandler = (e, keyIndex) => {\n        let newActiveKeys = [...activeKeys];\n        if (activeKeys.includes(keyIndex)) {\n            let index = activeKeys.indexOf(keyIndex);\n            newActiveKeys.splice(index, 1);\n            setActiveKeys(newActiveKeys);\n        }\n        else {\n            setActive(e === 0 ? '0' : e);\n        }\n    }\n\n    const prevClickHandler = () => {\n        if (count < 0) {\n            return;\n        }\n        setCount(c => c - 1);\n    }\n\n    const nextClickHandler = () => {\n        if (count > activeKeys.length - 1) {\n            return;\n        }\n        setCount(c => c + 1);\n    }\n\n    return (\n        <div>\n            <div className=\"accordion-container\" ref={myRef}>\n                {Array.isArray(accordionData) && accordionData.map((d, index) => (\n                    <Accordion key={index} activeKey={activeKeys.includes(index) ? (index === 0 ? '0' : index) : (active === 0 ? '0' : active)} onSelect={(e) => accordionClickHandler(e, index === 0 ? '0' : index)}>\n                        <Card className=\"accordion-card\">\n                            <Card.Header className=\"accordion-card__header\">\n                                <ContextAwareToggle eventKey={index === 0 ? '0' : index}>{d.clause}</ContextAwareToggle>\n                            </Card.Header>\n                            <Accordion.Collapse eventKey={index === 0 ? '0' : index}>\n                                <Card.Body className=\"accordion-card__body\">{d.text}</Card.Body>\n                            </Accordion.Collapse>\n                        </Card>\n                    </Accordion>\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default AccordionRenderer;\n","import React, { useState, useContext, useEffect } from 'react';\nimport { Resizable } from \"react-resizable\";\nimport TextEditor from \"../TextEditor\";\nimport { UserContext } from \"../App\";\nimport PdfGraphFunc from \"./PdfGraphFunc\";\nimport { Modal } from \"react-bootstrap\";\nimport AccordionRenderer from '../Dashboard/AccordionRenderer';\n\nconst PdfViewerSide = ({ createNotes, showGraph, showGraphModal, setShowGraphModal, setCreateNotes, setShowGraph }) => {\n    const { state } = useContext(UserContext);\n    const [dimensions, setDimensions] = useState({\n        height: 720,\n        width: 250\n    });\n\n    // useEffect to log and act on changes in accordionSections\n    useEffect(() => {\n        console.log('Accordion Sections Updated:', state.accordionSections);\n        // Here you can also perform actions based on the updated accordionSections\n        // For example, checking for empty sections, handling errors, etc.\n    }, [state.accordionSections]); // Dependency array includes only accordionSections to react specifically to its changes\n// // \n// useEffect(() => {\n//     return () => console.log('Unmounting PdfViewer, current accordionSections:', state.accordionSections);\n// }, []);  // Logs on unmount to see what state is at that time\n\n    return (\n        <Resizable\n            className=\"box\"\n            height={720}\n            axis=\"x\"\n            width={250}\n            onResize={(e, { size }) => {\n                setDimensions({\n                    height: size.height,\n                    width: size.width,\n                });\n            }}\n            resizeHandles={[\"w\"]}\n        >\n            <div\n                className=\"sidebarnew\"\n                style={{\n                    minWidth: \"20%\",\n                    width: \"250px\" || \"25%\",\n                    height: '100vh',\n                }}\n            >\n                <div>\n                    {createNotes && (\n                        <TextEditor\n                            id={state.auth && state.auth.userPublicId}\n                            fileName={state.currentFile && state.currentFile.name}\n                            showTextEditor={createNotes}\n                            setShowTextEditor={setCreateNotes}\n                        />\n                    )}\n                    {!showGraphModal && showGraph && <PdfGraphFunc />}\n                    {showGraphModal && (\n                        <Modal\n                            style={{ color: \"#050505\" }}\n                            show={showGraphModal}\n                            onHide={() => setShowGraphModal(false)}\n                            backdrop=\"static\"\n                            size=\"lg\"\n                            centered={true}\n                        >\n                            <Modal.Header closeButton>\n                                <Modal.Title id=\"example-modal-sizes-title-sm\">\n                                    Graph\n                                </Modal.Title>\n                            </Modal.Header>\n                            <Modal.Body>\n                                <PdfGraphFunc />\n                            </Modal.Body>\n                        </Modal>\n                    )}\n                    {state.accordionSections && <AccordionRenderer data={state.accordionSections} />}\n                </div>\n            </div>\n        </Resizable>\n    );\n};\n\nexport default PdfViewerSide;\n","import React, { useState, useReducer, createContext, useEffect } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport AppRoutes from \"./AppRoutes\";\r\nimport { reducer } from \"./Reducer/Reducers\";\r\nimport { InitialState } from \"./Reducer/InitialState\";\r\nimport { Route, Redirect, Switch, BrowserRouter as Router } from \"react-router-dom\";\r\nimport NodePreview from \"./Dashboard/NodePreview\";\r\nimport NodesList from \"./Dashboard/NodesList\";\r\nimport Register from \"./Dashboard/Register\";\r\nimport Login from \"./Dashboard/Login\";\r\nimport Sidebar from \"./shared/Sidebar\";\r\nimport \"./App.scss\";\r\nimport \"./style/App.css\";\r\nimport Navbar from \"./shared/Navbar\";\r\nimport FileViewer from \"./Dashboard/FileViewer\";\r\nimport FileMetadataViewer from \"./Dashboard/FileMetadataViewer\";\r\nimport PdfViewerSide from \"./Dashboard/PdfViewerSide\";\r\nimport { SocketProvider } from './shared/SocketContext';\r\n\r\nexport const UserContext = createContext();\r\n\r\nfunction App() {\r\n    const [state, dispatch] = useReducer(reducer, InitialState);\r\n\r\n    const [createNotes, setCreateNotes] = useState(false);\r\n    const [showGraph, setShowGraph] = useState(false);\r\n    const [showGraphModal, setShowGraphModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch({ type: 'HIDE_METADATA_VIEWER' });\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <UserContext.Provider value={{ state, dispatch }}>\r\n            <SocketProvider>\r\n                <Router>\r\n                    <Switch>\r\n                        <Route path=\"/login\">\r\n                            <Login />\r\n                        </Route>\r\n                        <Route path=\"/register\">\r\n                            <Register />\r\n                        </Route>\r\n                        <Route exact path=\"/dashboard\">\r\n                            <div className=\"container-scroller\">\r\n                                <Sidebar />\r\n                                <div className=\"container-fluid page-body-wrapper\">\r\n                                    <Navbar \r\n                                        setCreateNotes={setCreateNotes}\r\n                                        setShowGraph={setShowGraph}\r\n                                        showGraph={showGraph}\r\n                                        setShowGraphModal={setShowGraphModal}\r\n                                    />\r\n                                    <div className=\"main-panel\">\r\n                                        <div className=\"show_side\" style={{ display: \"flex\" }}>\r\n                                            {state.showHighlight === true && state.searchQuery !== \"\" && <NodesList />}\r\n                                            {state.showFileViewer === true && <FileViewer />}\r\n                                            <div className=\"content-wrapper\">\r\n                                                <AppRoutes\r\n                                                    showFileViewer={state.showFileViewer}\r\n                                                    showDashboardView={state.showDashboardView}\r\n                                                    showHighlight={state.showHighlight}\r\n                                                    showProfileView={state.showProfileView}\r\n                                                    showFeedView={state.showFeedView}\r\n                                                    showTextAnonymizerView={state.showTextAnonymizerView}\r\n                                                    showLawsReader={state.showLawsReader}\r\n                                                    showGptView={state.showGptView}\r\n                                                />\r\n                                                {state.showDashboardView && state.showMetadataViewer && (\r\n                                                    <FileMetadataViewer files={state.files} />\r\n                                                )}\r\n                                            </div>\r\n                                            {state.showHighlight === true && state.searchQuery !== \"\" && <NodePreview />}\r\n                                            {state.showFileViewer && (\r\n                                                <PdfViewerSide\r\n                                                    createNotes={createNotes}\r\n                                                    showGraph={showGraph}\r\n                                                    showGraphModal={showGraphModal}\r\n                                                    setShowGraphModal={setShowGraphModal}\r\n                                                    setCreateNotes={setCreateNotes}\r\n                                                    setShowGraph={setShowGraph}\r\n                                                />\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Route>\r\n                        <Redirect to=\"/login\" />\r\n                    </Switch>\r\n                </Router>\r\n            </SocketProvider>\r\n        </UserContext.Provider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\n\r\nimport unified from 'unified'\r\nimport parse from 'remark-parse'\r\nimport remark2rehype from 'remark-rehype'\r\nimport rehype2react from 'rehype-react'\r\nimport math from 'remark-math'\r\nimport katex from 'rehype-katex'\r\n\r\nfunction processMd(text) {\r\n  return (\r\n    unified()\r\n    .use(parse)\r\n    .use(math)\r\n    .use(remark2rehype)\r\n    .use(katex)\r\n    .use(rehype2react, {createElement: React.createElement})\r\n    .processSync(text).result\r\n  )\r\n}\r\n\r\nexport default processMd;\r\n","module.exports = __webpack_public_path__ + \"static/media/scaletransm2.5eb52ef8.png\";","// TextEditor.js\nimport React, { useContext, useCallback, useEffect, useState } from \"react\";\nimport Quill from \"quill\";\nimport { Button, Spinner, FormControl } from \"react-bootstrap\";\nimport \"quill/dist/quill.snow.css\";\nimport { UserContext } from \"./App\";\nimport { FaRegPaperPlane, FaBriefcase, FaFile } from 'react-icons/fa';\nimport { pdfExporter } from \"quill-to-pdf\";\nimport { saveAs } from \"file-saver\";\nimport { useSocket } from './shared/SocketContext'; // Use the context\n\nconst SAVE_INTERVAL_MS = 15000;\n\nconst TOOLBAR_OPTIONS = [\n    [{ header: [1, 2, 3, 4, 5, 6, false] }],\n    [{ font: [] }],\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\n    [\"bold\", \"italic\", \"underline\"],\n    [{ color: [] }, { background: [] }],\n    [{ script: \"sub\" }, { script: \"super\" }],\n    [{ align: [] }],\n    [\"blockquote\", \"code-block\"],\n    [\"clean\"],\n];\n\nexport default function TextEditor({ id, fileName, showTextEditor, setShowTextEditor }) {\n    const documentId = id;\n    const [quill, setQuill] = useState();\n    const { state } = useContext(UserContext);\n    const [isQuillReady, setIsQuillReady] = useState(false);\n    const [openaiResponses, setOpenaiResponses] = useState([]);\n    const [openaiRecommendations, setOpenaiRecommendations] = useState([]);\n    const [query, setQuery] = useState('');\n    const [requestCounter, setRequestCounter] = useState({ recommendations: 0, caselaw: 0, clause: 0 });\n    const [loadingRecommendations, setLoadingRecommendations] = useState(false);\n    const [loadingCaselaw, setLoadingCaselaw] = useState(false);\n    const [loadingClause, setLoadingClause] = useState(false);\n    const [loadingSend, setLoadingSend] = useState(false);\n    const [latestReceivedIndex, setLatestReceivedIndex] = useState(-1);\n    const socket = useSocket();\n\n    const exportAsPDF = async () => {\n        const delta = quill.getContents();\n        const pdfAsBlob = await pdfExporter.generatePdf(delta);\n        saveAs(pdfAsBlob, \"current-draft-on-case.pdf\");\n    };\n\n    useEffect(() => {\n        if (showTextEditor) {\n            setRequestCounter({ recommendations: 0, caselaw: 0, clause: 0 });\n        }\n    }, [showTextEditor]);\n\n    useEffect(() => {\n        if (!socket || !quill) return;\n        handleEditDocument();\n\n        const loadDocument = (document) => {\n            let documentText = '';\n\n            if (document.text_body) {\n                documentText = document.text_body;\n            }\n\n            if (documentText) {\n                quill.setText(documentText);\n            } else {\n                quill.setText('Document not found or is empty.');\n            }\n\n            quill.enable();\n        };\n\n        socket.on(\"document-loaded\", loadDocument);\n\n        return () => {\n            socket.off(\"document-loaded\", loadDocument);\n        };\n    }, [socket, quill]);\n\n    useEffect(() => {\n        if (socket == null || quill == null) return;\n\n        const interval = setInterval(() => {\n            socket.emit(\"save-document\", quill.getContents());\n        }, SAVE_INTERVAL_MS);\n\n        return () => {\n            clearInterval(interval);\n        };\n    }, [socket, quill]);\n\n    useEffect(() => {\n        if (socket == null || quill == null) return;\n\n        const handler = (delta) => {\n            quill.updateContents(delta);\n        };\n        socket.on(\"receive-changes\", handler);\n\n        return () => {\n            socket.off(\"receive-changes\", handler);\n        };\n    }, [socket, quill]);\n\n    useEffect(() => {\n        if (quill != null && state.highlightTextForEditor) {\n            const length = quill.getLength();\n            quill.insertText(length, \"\\n\" + state.highlightTextForEditor);\n        }\n    }, [quill, state.highlightTextForEditor]);\n\n    const wrapperRef = useCallback((wrapper) => {\n        if (wrapper == null) return;\n\n        wrapper.innerHTML = \"\";\n        const editor = document.createElement(\"div\");\n        wrapper.append(editor);\n        const q = new Quill(editor, {\n            theme: \"snow\",\n            modules: { toolbar: TOOLBAR_OPTIONS },\n        });\n\n        q.enable();\n        setQuill(q);\n        setIsQuillReady(true);\n    }, []);\n\n    const handleAppeal = () => {\n        if (socket && socket.connected) {\n            const dataToSend = { \n                content: 'Your input data here',\n                documentId: documentId,\n                filename: fileName,\n            };\n            console.log('Appeal clicked. Emitting openai_appeal_call with data:', dataToSend);\n            socket.emit(\"openai_appeal_call\", dataToSend);\n        } else {\n            console.log(\"Socket is not connected.\");\n        }\n    };\n\n    const insertTextIntoQuill = (text) => {\n        const length = quill.getLength();\n        quill.insertText(length, \"\\n\" + text + \"\\n\\n\");\n        quill.setSelection(length + text.length + 2);\n    };\n\n    const insertHighlightIntoQuill = (highlightContent) => {\n        const position = quill.getLength();\n        quill.insertText(position, \"\\n\" + highlightContent + \"\\n\\n\");\n        quill.setSelection(position + highlightContent.length + 2);\n    };\n\n    const handleEditDocument = () => {\n        socket.emit(\"get-document\", JSON.stringify({ documentId, fileName }));\n    };\n\n    const handleNewDocument = () => {\n        quill.setText('');\n    };\n\n    const handleClose = () => {\n        setShowTextEditor(false);\n        // socket.disconnect();\n    };\n\n    const handleNoteSave = () => {\n        if (socket == null || quill == null) return;\n        socket.emit(\"save-document\", quill.getContents());\n        exportAsPDF();\n    };\n\n    const handleRequest = (type) => {\n        console.log(`Attempting to request ${type}...`);\n        if (socket && socket.connected && quill) {\n            console.log(`Socket is connected, sending ${type} request.`);\n            const quillContent = quill.getContents();\n            const currentCount = requestCounter[type] + 1;\n            console.log(`counter number is ${currentCount} request.`);\n\n            const requestData = { \n                content: quillContent,\n                documentId: documentId,\n                filename: fileName,\n                requestCount: currentCount,\n            };\n\n            switch (type) {\n                case \"recommendations\":\n                    socket.emit(\"openai-get-recommendation\", requestData);\n                    setLoadingRecommendations(true);\n                    break;\n                case \"caselaw\":\n                    socket.emit(\"openai-get-caselaw\", requestData);\n                    setLoadingCaselaw(true);\n                    break;\n                case \"clause\":\n                    socket.emit(\"openai-get-clause\", requestData);\n                    setLoadingClause(true);\n                    break;\n                default:\n                    console.log(\"Unknown request type\");\n            }\n            setRequestCounter({\n                ...requestCounter,\n                [type]: currentCount,\n            });\n        } else {\n            console.log(\"Socket is not connected or Quill is not initialized.\");\n        }\n    };\n\n    useEffect(() => {\n        if (!socket || !isQuillReady) return;\n\n        const recommendationHandler = (data) => {\n            setOpenaiRecommendations(currentRecommendations => [...currentRecommendations, data.recommendation]);\n            setLoadingRecommendations(false);\n            setLoadingCaselaw(false);\n            setLoadingSend(false);\n            setLoadingClause(false);\n        };\n\n        socket.on(\"openai-recommendations\", recommendationHandler);\n        socket.on(\"openai-caselaw\", recommendationHandler);\n        socket.on(\"openai-clause\", recommendationHandler);\n        socket.on(\"openai-query-response\", recommendationHandler);\n\n        return () => {\n            socket.off(\"openai-recommendations\", recommendationHandler);\n            socket.off(\"openai-caselaw\", recommendationHandler);\n            socket.off(\"openai-clause\", recommendationHandler);\n            socket.off(\"openai-query-response\", recommendationHandler);\n        };\n    }, [socket, isQuillReady, setLoadingRecommendations, setLoadingCaselaw, setLoadingSend, setLoadingClause]);\n\n    useEffect(() => {\n        if (!socket || !isQuillReady) return;\n\n        const handler = (data) => {\n            setOpenaiResponses(currentResponses => [data.message, ...currentResponses]);\n            setLoadingRecommendations(false);\n            setLoadingCaselaw(false);\n            setLoadingSend(false);\n            setLoadingClause(false);\n            insertTextIntoQuill(data.message);\n        };\n\n        socket.on(\"openai_response\", handler);\n\n        return () => {\n            socket.off(\"openai_response\", handler);\n        };\n    }, [socket, isQuillReady, setLoadingRecommendations, setLoadingCaselaw, setLoadingSend, setLoadingClause]);\n\n    const handleSend = () => {\n        if (!socket || !quill || !query) return;\n\n        const quillContent = quill.getContents();\n        const dataToSend = { \n            query: query,\n            content: quillContent,\n            documentId: documentId,\n            filename: fileName\n        };\n\n        socket.emit(\"openai-query\", dataToSend);\n        setLoadingSend(true);\n        setQuery('');\n    };\n\n    return (\n        <React.Fragment>\n            <div style={{ padding: \"10px\", backgroundColor: '#191c24', textAlign: 'center' }}>\n                <Button variant=\"outline-info\" onClick={handleNewDocument} style={{ margin: '10px' }}>\n                    <FaFile /> New Document\n                </Button>\n                <Button variant=\"outline-success\" onClick={handleEditDocument} style={{ margin: '10px' }}>\n                    <FaBriefcase /> Edit Document\n                </Button>\n                <Button variant=\"outline-primary\" onClick={handleAppeal} style={{ margin: '10px' }}>\n                    <FaRegPaperPlane /> Appeal\n                </Button>\n            </div>\n            <div style={{ color: \"white\", background: '#191c24', padding: '20px'}}>\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <h2>Notepad</h2>\n                    <div>\n                        <Button variant=\"primary\" onClick={handleNoteSave} style={{ marginRight: '10px' }}>Save</Button>\n                        <Button variant=\"secondary\" onClick={handleClose} style={{ fontSize: '16px', lineHeight: '1', padding: '0.375rem 0.75rem' }}>\n                            <span aria-hidden=\"true\">&times;</span>\n                        </Button>\n                    </div>\n                </div>\n                <div style={{ display: 'flex', flexDirection: 'row', height: '76vh' }}>\n                    <div style={{ flex: 7, marginRight: '20px', background: '#2a3038', borderRadius: '8px', padding: '10px' }} ref={wrapperRef}></div>\n                    <div style={{ flex: 3, paddingLeft: '2px', overflowY: 'auto', background: '#2A3038', borderRadius: '8px', padding: '10px' }}>\n                        <Button variant=\"outline-primary\" onClick={() => handleRequest('recommendations')}>\n                            {loadingRecommendations ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Insights'}\n                        </Button>\n                        <Button variant=\"outline-success\" onClick={() => handleRequest('caselaw')}>\n                            {loadingCaselaw ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Caselaw'}\n                        </Button>\n                        <Button variant=\"outline-info\" onClick={() => handleRequest('clause')}>\n                            {loadingClause ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Clause'}\n                        </Button>\n                        <div style={{ display: 'flex', flexDirection: 'column-reverse' }}>\n                            {openaiRecommendations.map((recommendation, index) => (\n                                <div \n                                    key={index} \n                                    className=\"sidebar__highlight\"  \n                                    style={{\n                                        padding: '10px', \n                                        margin: '5px 0', \n                                        display: 'flex', \n                                        justifyContent: 'space-between', \n                                        alignItems: 'center',\n                                        backgroundColor: index === latestReceivedIndex ? '2A3038' : '2A3038', \n                                        animation: index === latestReceivedIndex ? 'flash 1s infinite alternate' : 'none'\n                                    }}\n                                    onMouseEnter={() => setLatestReceivedIndex(index)}\n                                    onMouseLeave={() => setLatestReceivedIndex(-1)}\n                                >\n                                    <span style={{ fontSize: '10px' }}>{recommendation}</span>\n                                    <Button variant=\"outline-secondary\" onClick={() => insertHighlightIntoQuill(recommendation)}>Insert</Button>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"w-100 d-flex justify-content-between align-items-center\" style={{ marginTop: '10px' }}>\n                    <FormControl\n                        type=\"text\"\n                        placeholder=\"Ask Casebook AI a question\"\n                        value={query}\n                        onChange={(e) => setQuery(e.target.value)}\n                        className=\"nav-link mt-2 mt-md-0 d-none d-lg-flex search mx-3\"\n                    />\n                    <Button variant=\"info\" onClick={handleSend}>\n                        {loadingSend ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Send'}\n                    </Button>\n                </div>\n                <style>\n                    {`\n                        @keyframes flash {\n                            from {\n                                background-color: #2A3038;\n                            }\n                            to {\n                                background-color: #32435a;\n                            }\n                        }\n                    `}\n                </style>\n            </div>\n        </React.Fragment>\n    );\n}\n"],"sourceRoot":""}