(this["webpackJsonpreact-pdf-markdown-highlighter"]=this["webpackJsonpreact-pdf-markdown-highlighter"]||[]).push([[1],{107:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(1),l=a.n(n),c=a(265),r=a.n(c),s=a(44),o=a(28),i=a(119),m=a(147),d=(a(446),a(83)),u=a(32),h=a(118),g=a(266),p=a(267);const E=[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],["blockquote","code-block"],["clean"]];function f(e){let{id:t,fileName:a,showTextEditor:c,setShowTextEditor:f}=e;const b=t,[w,y]=Object(n.useState)(),[v,N]=Object(n.useState)(),[k,x]=Object(n.useState)([]),{state:S}=Object(n.useContext)(u.a),[O,C]=Object(n.useState)(null),[_,T]=Object(n.useState)(!1),[j,D]=Object(n.useState)([]),[I,H]=Object(n.useState)(""),[A,F]=Object(n.useState)({recommendations:0,caselaw:0,clause:0}),[L,G]=Object(n.useState)(!1),[V,P]=Object(n.useState)(!1),[R,z]=Object(n.useState)(!1),[M,U]=Object(n.useState)(!1),[q,B]=Object(n.useState)(!1),[W,J]=Object(n.useState)(-1);Object(n.useEffect)(()=>{c&&F({recommendations:0,caselaw:0,clause:0})},[c]),Object(n.useEffect)(()=>{const e=Object(d.io)("https://back.casebk.com");return y(e),()=>{e.disconnect()}},[]),Object(n.useEffect)(()=>{if(!w||!v||"edit_document"!==O&&"appeal"!==O)return;const e=e=>{let t="";e.text_body&&(t=e.text_body),t?v.setText(t):v.setText("Document not found or is empty."),v.enable()};return w.on("document-loaded",e),()=>{w.off("document-loaded",e)}},[w,v,O]),Object(n.useEffect)(()=>{if(null==w||null==v)return;const e=setInterval(()=>{w.emit("save-document",v.getContents())},15e3);return()=>{clearInterval(e)}},[w,v]),Object(n.useEffect)(()=>{if(null==w||null==v)return;const e=e=>{v.updateContents(e)};return w.on("receive-changes",e),()=>{w.off("receive-changes",e)}},[w,v]),Object(n.useEffect)(()=>{if(null!=v&&S.highlightTextForEditor){const e=v.getLength();v.insertText(e,"\n"+S.highlightTextForEditor)}},[v,S.highlightTextForEditor]);const Y=Object(n.useCallback)(e=>{if(null==e)return;e.innerHTML="";const t=document.createElement("div");e.append(t);const a=new r.a(t,{theme:"snow",modules:{toolbar:E}});a.enable(),N(a),T(!0)},[O]);Object(n.useEffect)(()=>{"edit_document"===O&&w&&w.emit("get-document",JSON.stringify({documentId:b,fileName:a}))},[O,w,b,a]);const Q=()=>{f(!1),w.disconnect()},K=e=>{if(console.log("Attempting to request ".concat(e,"...")),w&&w.connected&&v){console.log("Socket is connected, sending ".concat(e," request."));const t=v.getContents(),n=A[e]+1;console.log("counter number is ".concat(n," request."));const l={content:t,documentId:b,filename:a,requestCount:n};switch(e){case"recommendations":w.emit("openai-get-recommendation",l),P(!0);break;case"caselaw":w.emit("openai-get-caselaw",l),z(!0);break;case"clause":w.emit("openai-get-clause",l),U(!0);break;default:console.log("Unknown request type")}F({...A,[e]:n})}else console.log("Socket is not connected or Quill is not initialized.")};Object(n.useEffect)(()=>{const e=Object(d.io)("https://back.casebk.com");return y(e),console.log("Socket connection established"),()=>{e.disconnect(),console.log("Socket disconnected")}},[]),Object(n.useEffect)(()=>{"edit_document"===O&&w&&(console.log("Requesting document: ".concat(b,", FileName: ").concat(a)),w.emit("get-document",{documentId:b,fileName:a}))},[O,w,b,a]),Object(n.useEffect)(()=>{if(!w||!_)return;const e=e=>{D(t=>[...t,e.recommendation]),P(!1),z(!1),B(!1),U(!1)};return w.on("openai-recommendations",e),w.on("openai-caselaw",e),w.on("openai-clause",e),w.on("openai-query-response",e),()=>{w.off("openai-recommendations",e),w.off("openai-caselaw",e),w.off("openai-clause",e),w.off("openai-query-response",e)}},[w,_,P,z,B,U]),Object(n.useEffect)(()=>{if(!w||!_)return;const e=e=>{x(t=>[e.message,...t]),P(!1),z(!1),B(!1),U(!1),(e=>{const t=v.getLength();v.insertText(t,"\n"+e+"\n\n"),v.setSelection(t+e.length+2)})(e.message)};return w.on("openai_response",e),()=>{w.off("openai_response",e)}},[w,_,P,z,B,U]);return l.a.createElement(l.a.Fragment,null,O?l.a.createElement(s.a,{style:{color:"white"},show:c,onHide:Q,backdrop:"static",size:"xl",centered:!0},l.a.createElement(s.a.Header,{closeButton:!1,style:{backgroundColor:"#191c24",textAlign:"center",display:"flex",justifyContent:"space-between",alignItems:"center"}},l.a.createElement(s.a.Title,null,"Notepad"),l.a.createElement("div",null,l.a.createElement(o.a,{variant:"primary",onClick:()=>{null!=w&&null!=v&&(w.emit("save-document",v.getContents()),(async()=>{const e=v.getContents(),t=await g.pdfExporter.generatePdf(e);Object(p.saveAs)(t,"current-draft-on-case.pdf")})())},style:{marginRight:"10px"}},"Save"),l.a.createElement(o.a,{variant:"secondary",onClick:Q,style:{fontSize:"16px",lineHeight:"1",padding:"0.375rem 0.75rem"}},l.a.createElement("span",{"aria-hidden":"true"},"\xd7")))),l.a.createElement(s.a.Body,{style:{height:"76vh",background:"#191c24"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"100%"}},l.a.createElement("div",{style:{flex:7,marginRight:"20px"},ref:Y}),l.a.createElement("div",{style:{flex:3,paddingLeft:"2px",overflowY:"auto"}},l.a.createElement("div",{style:{flex:3,paddingLeft:"2px",overflowY:"auto"}},l.a.createElement(o.a,{variant:"outline-primary",onClick:()=>K("recommendations")},V?l.a.createElement(i.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Insights"),l.a.createElement(o.a,{variant:"outline-success",onClick:()=>K("caselaw")},R?l.a.createElement(i.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Caselaw"),l.a.createElement(o.a,{variant:"outline-info",onClick:()=>K("clause")},M?l.a.createElement(i.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Clause"),l.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},j.map((e,t)=>l.a.createElement("div",{key:t,className:"sidebar__highlight",style:{padding:"10px",margin:"5px 0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"2A3038",animation:t===W?"flash 1s infinite alternate":"none"},onMouseEnter:()=>J(t),onMouseLeave:()=>J(-1)},l.a.createElement("span",{style:{fontSize:"10px"}},e),l.a.createElement(o.a,{variant:"outline-secondary",onClick:()=>(e=>{const t=v.getLength();v.insertText(t,"\n"+e+"\n\n"),v.setSelection(t+e.length+2)})(e)},"Insert")))))))),l.a.createElement(s.a.Footer,{className:"custom-modal-footer",style:{background:"#191c24",justifyContent:"center"}},l.a.createElement("div",{className:"w-100 d-flex justify-content-between align-items-center"},l.a.createElement(m.a,{type:"text",placeholder:"Ask Casebook AI a question",value:I,onChange:e=>H(e.target.value),className:"nav-link mt-2 mt-md-0 d-none d-lg-flex search mx-3"}),l.a.createElement(o.a,{variant:"info",onClick:()=>{if(!w||!v||!I)return;const e=v.getContents(),t={query:I,content:e,documentId:b,filename:a};w.emit("openai-query",t),B(!0),H("")}},q?l.a.createElement(i.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Send"))),l.a.createElement("style",null,"\n            @keyframes flash {\n                from {\n                    background-color: #2A3038; // Initial background color\n                }\n                to {\n                    background-color: #32435a; // Flashing background color\n                }\n            }\n        ")):l.a.createElement(s.a,{show:c,onHide:Q,backdrop:"static",centered:!0},l.a.createElement(s.a.Header,{closeButton:!0,style:{backgroundColor:"#191c24",textAlign:"center"}},l.a.createElement(s.a.Title,null,"Notepad")),l.a.createElement(s.a.Body,{style:{textAlign:"center",background:"#191c24"}},l.a.createElement(o.a,{variant:"outline-info",onClick:()=>{C("new_document")},style:{margin:"10px"}},l.a.createElement(h.b,null)," New Document"),l.a.createElement(o.a,{variant:"outline-success",onClick:()=>{C("edit_document")},style:{margin:"10px"}},l.a.createElement(h.a,null)," Edit Document"),l.a.createElement(o.a,{variant:"outline-primary",onClick:()=>{if(w&&w.connected){const e={content:"Your input data here",documentId:b,filename:a};console.log("Appeal clicked. Emitting openai_appeal_call with data:",e),w.emit("openai_appeal_call",e),C("appeal")}else console.log("Socket is not connected.")},style:{margin:"10px"}},l.a.createElement(h.c,null)," Appeal"))))}},12:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l}));const n="https://back.casebk.com",l=()=>{const e=JSON.parse(localStorage.getItem("authDetails"));return e&&e.userId&&e.authToken&&e.userPublicId&&e.username&&e.fname&&e.lname&&e.city&&e.country&&e.organisation&&e.email&&e.expiry?e.expiry<Date.parse(new Date)?null:{authToken:e.authToken,auth_token:e.authToken,userId:e.userId,userPublicId:e.userPublicId,username:e.username,email:e.email,expiry:e.expiry,fname:e.fname,lname:e.lname,city:e.city,country:e.country,organisation:e.organisation}:null}},153:function(e,t,a){"use strict";var n=a(1),l=a.n(n);a(289);t.a=()=>l.a.createElement("div",{style:{display:"flex",alignItems:"center",height:"100vh"}},l.a.createElement("div",{className:"sk-fading-circle"},l.a.createElement("div",{className:"sk-circle1 sk-circle"}),l.a.createElement("div",{className:"sk-circle2 sk-circle"}),l.a.createElement("div",{className:"sk-circle3 sk-circle"}),l.a.createElement("div",{className:"sk-circle4 sk-circle"}),l.a.createElement("div",{className:"sk-circle5 sk-circle"}),l.a.createElement("div",{className:"sk-circle6 sk-circle"}),l.a.createElement("div",{className:"sk-circle7 sk-circle"}),l.a.createElement("div",{className:"sk-circle8 sk-circle"}),l.a.createElement("div",{className:"sk-circle9 sk-circle"}),l.a.createElement("div",{className:"sk-circle10 sk-circle"}),l.a.createElement("div",{className:"sk-circle11 sk-circle"}),l.a.createElement("div",{className:"sk-circle12 sk-circle"})))},157:function(e,t,a){"use strict";var n=a(1),l=a.n(n),c=a(113),r=a(107),s=a(32),o=a(242),i=a(16),m=a.n(i),d=a(12);var u=function(e){const[t,a]=Object(n.useState)([]),{state:c,dispatch:r}=Object(n.useContext)(s.a);return Object(n.useEffect)(()=>{0!==c.graphData.length&&(async()=>{const e=(await m()("".concat(d.a,"/get-graphdata"),{headers:{"x-access-token":c.auth&&c.auth.authToken}})).data;let t=c.currentFile&&c.currentFile.name?c.currentFile.name:"";e&&e.graphdata&&e.graphdata.length&&e.graphdata.filter(e=>{if(e.fileName==t)return delete e.fileName,a(e),e}),e&&e.length>0&&r({type:"FETCH_FILE_HIGHLIGHTS",payload:e.highlights})})()},[c]),l.a.createElement(n.Fragment,null,!Array.isArray(t)&&l.a.createElement("div",{className:"graph__container"},t&&l.a.createElement(o.Graph,{id:"graph-id",data:t,key:Math.round((new Date).getTime()+Math.random()),config:{automaticRearrangeAfterDropNode:!0,collapsible:!1,directed:!1,focusAnimationDuration:10,focusZoom:1,freezeAllDragEvents:!1,height:710,highlightDegree:.1,highlightOpacity:1,linkHighlightBehavior:!0,maxZoom:8,minZoom:.1,nodeHighlightBehavior:!0,panAndZoom:!1,staticGraph:!1,staticGraphWithDragAndDrop:!1,width:50,d3:{alphaTarget:.05,gravity:-150,linkLength:90,linkStrength:2,disableLinkForce:!1},node:{color:"#d3d3d3",fontColor:"#d3d3d3",fontSize:12,fontWeight:"normal",highlightColor:"lightgreen",highlightFontSize:17,highlightFontWeight:"Bold",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",labelProperty:"id",mouseCursor:"pointer",opacity:1,renderLabel:!0,size:200,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle"},link:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",labelProperty:"label",mouseCursor:"pointer",opacity:1,renderLabel:!1,semanticStrokeWidth:!1,strokeWidth:1.5,markerHeight:6,markerWidth:6,strokeDasharray:0,strokeDashoffset:0,strokeLinecap:"butt"}},onClickGraph:function(e){},onClickNode:function(e,t){},passive:!0,onDoubleClickNode:function(e,t){const a=c.nodesData[e];a&&window.open(a.frontend_url,"_blank")},onRightClickNode:function(e,t,a){},onClickLink:function(e,t){},onRightClickLink:function(e,t,a){},onMouseOverNode:function(e,t){const a=c.nodesData[t.id];if(a){r({type:"SET_NODE_DATA",payload:a});let e=c.graphData.nodes.map(e=>e.id===t.id?{...e,fontSize:16}:{...e,fontSize:8});r({type:"SET_GRAPH_DATA",payload:{...c.graphData,nodes:e}})}},onMouseOutNode:function(e,t){},onMouseOverLink:function(e,t){},onMouseOutLink:function(e,t){},onNodePositionChange:function(e,t,a){},onZoomChange:function(e,t){}})),!1)},h=a(44),g=a(115),p=a(144),E=a(47),f=a(106);a(509);var b=function(e){let{data:t}=e;console.log("Accordion Renderer Data:",t);const[a,c]=Object(n.useState)(""),[r,o]=Object(n.useState)([]),[i,m]=Object(n.useState)(""),[d,u]=Object(n.useState)(0),{state:h,dispatch:b}=Object(n.useContext)(s.a),[w,y]=Object(n.useState)(t),v=Object(n.useRef)();function N(e){let{children:t,eventKey:a,callback:c}=e;const r=Object(n.useContext)(E.a),s=Object(f.b)(a,()=>c&&c(a)),o=r===a;return l.a.createElement("div",{className:"accordion-card__header-items"},l.a.createElement("div",{className:"accordion-card__active-tab"},o?l.a.createElement("span",{className:"online"},l.a.createElement("i",{className:"mdi mdi-checkbox-blank-circle"})):l.a.createElement("span",{className:"offline"},l.a.createElement("i",{className:"mdi mdi-checkbox-blank-circle"}))),l.a.createElement("button",{type:"button",className:"header-button",onClick:s},t),l.a.createElement("div",{className:"accordion-card__active-tab"},o?l.a.createElement("i",{className:"mdi mdi-chevron-up"}):l.a.createElement("i",{className:"mdi mdi-chevron-down"})))}return Object(n.useEffect)(()=>{0===t.length&&h.accordionSections&&h.accordionSections.length>0?y(h.accordionSections):y(t)},[t,h.accordionSections]),Object(n.useEffect)(()=>{console.log("Accordion Renderer Data:",w)},[w]),Object(n.useEffect)(()=>{let e=v.current,t=e.querySelectorAll(".accordion"),a=r[d];t[a]&&e.scrollTo({behavior:"smooth",top:t[a].offsetTop})},[d]),l.a.createElement("div",null,l.a.createElement("div",{className:"accordion-container",ref:v},Array.isArray(t)&&t.map((e,t)=>l.a.createElement(p.a,{key:t,activeKey:r.includes(t)?0===t?"0":t:0===i?"0":i,onSelect:e=>((e,t)=>{let a=[...r];if(r.includes(t)){let e=r.indexOf(t);a.splice(e,1),o(a)}else m(0===e?"0":e)})(e,0===t?"0":t)},l.a.createElement(g.a,{className:"accordion-card"},l.a.createElement(g.a.Header,{className:"accordion-card__header"},l.a.createElement(N,{eventKey:0===t?"0":t},e.clause)),l.a.createElement(p.a.Collapse,{eventKey:0===t?"0":t},l.a.createElement(g.a.Body,{className:"accordion-card__body"},e.text)))))))};t.a=e=>{let{createNotes:t,showGraph:a,showGraphModal:o,setShowGraphModal:i,setCreateNotes:m,setShowGraph:d}=e;const{state:g}=Object(n.useContext)(s.a),[p,E]=Object(n.useState)({height:720,width:250});return Object(n.useEffect)(()=>{console.log("Accordion Sections Updated:",g.accordionSections)},[g.accordionSections]),l.a.createElement(c.Resizable,{className:"box",height:720,axis:"x",width:250,onResize:(e,t)=>{let{size:a}=t;E({height:a.height,width:a.width})},resizeHandles:["w"]},l.a.createElement("div",{className:"sidebarnew",style:{minWidth:"20%",width:"250px",height:"100vh"}},l.a.createElement("div",null,t&&l.a.createElement(r.a,{id:g.auth&&g.auth.userPublicId,fileName:g.currentFile&&g.currentFile.name,showTextEditor:t,setShowTextEditor:m}),!o&&a&&l.a.createElement(u,null),o&&l.a.createElement(h.a,{style:{color:"#050505"},show:o,onHide:()=>i(!1),backdrop:"static",size:"lg",centered:!0},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,{id:"example-modal-sizes-title-sm"},"Graph")),l.a.createElement(h.a.Body,null,l.a.createElement(u,null))),g.accordionSections&&l.a.createElement(b,{data:g.accordionSections}))))}},241:function(e,t,a){"use strict";var n=a(1),l=a.n(n),c=a(512),r=a(149);t.a=function(e){let{files:t,onFileClick:a}=e;return l.a.createElement("div",{className:"file-metadata-viewer"},l.a.createElement("h2",null,"Uploaded Files"),l.a.createElement(c.a,{responsive:!0,bordered:!0,className:"custom-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"File Name"),l.a.createElement("th",null,"Upload Date"),l.a.createElement("th",null,"Summary"),l.a.createElement("th",null,"View"))),l.a.createElement("tbody",null,t.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,new Date(e.uploadDate).toLocaleDateString()),l.a.createElement("td",null,e.summary),l.a.createElement("td",null,l.a.createElement(r.a,{color:"primary",onClick:()=>a(e)},"View")))))))}},276:function(e,t,a){e.exports=a.p+"static/media/face0.1f2c7e78.jpeg"},283:function(e,t,a){e.exports=a(511)},288:function(e,t,a){},289:function(e,t,a){},32:function(e,t,a){"use strict";a.d(t,"a",(function(){return Q}));var n=a(1),l=a.n(n),c=(a(275),a(153)),r=a(87),s=a(16),o=a.n(s);var i=function(e){const[t,a]=Object(n.useState)({highlights:[]}),[c,s]=Object(n.useState)({url:""});Object(n.useEffect)(()=>{!async function(){const e=await o()("http://127.0.0.1:8000/api/v1/json"),t=Object.keys(e.data)[0];s({url:"http://127.0.0.1:8000/api/v1/pdf/".concat(t)}),a({highlights:e.data[t]})}()},[]);const{highlights:i}=t;return l.a.createElement("div",{className:"sidebarnew",style:{width:"25vw"}},l.a.createElement("div",{className:"card-description",style:{padding:"1rem"}},l.a.createElement("h2",{style:{marginBottom:"1rem"}},"Highlights"),l.a.createElement("p",null,l.a.createElement("small",null,"To create area highlight hold \u2325 Option key (Alt), then click and drag."))),l.a.createElement("ul",{className:"sidebar__highlights"},i.map((e,n)=>l.a.createElement("li",{key:n,className:"sidebar__highlight",onClick:()=>{(e=>{document.location.hash="highlight-".concat(e.id)})(e)}},l.a.createElement("div",null,l.a.createElement("div",{style:{padding:"4px"}},l.a.createElement("button",{style:{float:"right"},onClick:()=>(e=>{const n=t.highlights.filter((t,a)=>e!==a?t:null);a({highlights:n})})(n),className:"sidebar__btn"},l.a.createElement("i",{className:"fa fa-close"}))),l.a.createElement("strong",null,Object(r.a)(e.comment.text)),e.content.text?l.a.createElement("blockquote",{style:{marginTop:"0.5rem"}},"".concat(e.content.text.slice(0,90).trim(),"\u2026")):null,e.content.image?l.a.createElement("div",{className:"highlight__image",style:{marginTop:"0.5rem"}},l.a.createElement("img",{src:e.content.image,alt:"Screenshot"})):null),l.a.createElement("div",{className:"highlight__location"},"Page ",e.position.pageNumber)))),i.length>0?l.a.createElement("div",{style:{padding:"1rem"}},l.a.createElement("button",{onClick:()=>{a({highlights:[]})}},"Reset highlights")):null)};const m=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(4),a.e(5)]).then(a.bind(null,662))),d=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(6)]).then(a.bind(null,575)));var u=function(e){return l.a.createElement(n.Suspense,{fallback:l.a.createElement(c.a,null)},e.showHighlight&&l.a.createElement(i,null),e.showFileViewer&&l.a.createElement(d,null),l.a.createElement(m,{showFileViewer:e.showFileViewer,showDashboardView:e.showDashboardView,showHighlight:e.showHighlight,showProfileView:e.showProfileView,showFeedView:e.showFeedView,showTextAnonymizerView:e.showTextAnonymizerView,showGptView:e.showGptView,showLawsReader:e.showLawsReader}))};const h=(e,t)=>({...e,...t}),g=(e,t)=>{const a={...e,highlightColors:t};return localStorage.setItem("highlightColors",JSON.stringify(a.highlightColors)),a},p={files:[],currentFile:null,fileHighlights:[],myPosts:[],allPosts:[],error:null,message:null,searchQuery:"",isModalOpen:!1,nodeData:{},nodesData:{},graphData:{},showHighlight:!1,highlightColors:JSON.parse(localStorage.getItem("highlightColors"))||{default:"#F48FB1",legalTest:"#E1BEE7",issue:"#D1C4E9",conclusion:"#B2EBF2"},auth:{userId:null,authToken:null,userPublicId:null,username:null,email:null,expiry:null,fname:null,lname:null,city:null,country:null,organisation:null},highlightTextsForEditor:[],showFileViewer:!1,showDashboardView:!0,showProfileView:!1,showFeedView:!1,showTextAnonymizerView:!1,showGptView:!1,showLawsReader:!1,accordionSections:[]},E=(e,t)=>{switch(t.type){case"ADD_FILE":Array.isArray(t.payload)||(t.payload=[t.payload]);let a=[...e.files,...t.payload],n=[],l=a.filter(e=>!n.includes(e.name)&&(n.push(e.name),!0));return{...e,files:l,currentFile:e.currentFile||t.payload[0]};case"AUTH":const c={userId:t.payload.userId,authToken:t.payload.auth_token,userPublicId:t.payload.userPublicId,username:t.payload.username,email:t.payload.email,expiry:t.payload.expiry||Date.parse(new Date)+36e5,fname:t.payload.fname,lname:t.payload.lname,city:t.payload.city,country:t.payload.country,organisation:t.payload.organisation};return localStorage.setItem("authDetails",JSON.stringify(c)),h(e,{auth:c});case"LOG_OUT":return localStorage.removeItem("authDetails"),p;case"TOGGLE_HIGHLIGHT":return{...e,showHighlight:t.payload};case"SET_CURR_FILE":return h(e,{currentFile:t.payload});case"TOGGLE_VIEWER":return{...e,...t.payload};case"SET_VIEW":return{...e,showHighlight:!1,showFileViewer:!1,showDashboardView:!1,showProfileView:!1,showFeedView:!1,showTextAnonymizerView:!1,showGptView:!1,showLawsReader:!1,...t.payload};case"ALL_POSTS":return h(e,{allPosts:t.payload});case"ADD_My_POSTS":return h(e,{myPosts:[...e.myPosts,t.payload]});case"FETCH_FILE_HIGHLIGHTS":return h(e,{fileHighlights:t.payload});case"SET_FILE_HIGHLIGHTS":let r=[];if(e.fileHighlights.length>0){let a=!1;r=e.fileHighlights.map(e=>(e.name===t.payload.name&&(e.highlights=t.payload.highlights,a=!0),e)),a||(r=[...e.fileHighlights,t.payload])}else r=[t.payload];return h(e,{fileHighlights:r});case"ERROR":return h(e,{error:t.payload});case"MESSAGE":return h(e,{message:t.payload});case"SET_SEARCH_QUERY":return h(e,{searchQuery:t.payload});case"SET_NODE_DATA":return h(e,{nodeData:t.payload});case"SET_GRAPH_DATA":return h(e,{graphData:t.payload});case"SET_NODES_DATA":return h(e,{nodesData:t.payload});case"CHANGE_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,default:t.payload});case"CHANGE_LEGAL_TEST_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,legalTest:t.payload});case"CHANGE_ISSUE_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,issue:t.payload});case"CHANGE_CONCLUSION_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,conclusion:t.payload});case"SET_MODAL":return h(e,{isModalOpen:t.payload});case"SET_HIGHLIGHT_TEXT":return{...e,highlightTextForEditor:t.payload};case"ADD_HIGHLIGHT_TEXT":const s=t.payload,o=[...e.highlightTextsForEditor||[],s];return{...e,highlightTextsForEditor:o};case"SET_ACCORDION_SECTIONS":return h(e,{accordionSections:t.payload});default:return e}};var f=a(34),b=a(13);var w=function(e){const{state:t}=Object(n.useContext)(Q),[a,c]=Object(n.useState)({});return Object(n.useEffect)(()=>{c(t.nodeData)},[t.nodeData]),l.a.createElement("div",{className:"sidebarnew",style:{width:"25vw"}},l.a.createElement("div",{className:"description",style:{padding:"1rem"}},l.a.createElement("h2",{style:{marginBottom:"1rem",fontSize:"1.2rem"}},"Name"),l.a.createElement("p",null,a.name)),l.a.createElement("div",{className:"description",style:{padding:"1rem"}},l.a.createElement("h2",{style:{marginBottom:"1rem",fontSize:"1.2rem"}},"Preview"),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.preview&&a.preview.join("")}})))};var y=function(e){const{state:t,dispatch:a}=Object(n.useContext)(Q),[c,r]=Object(n.useState)({});return Object(n.useEffect)(()=>{setTimeout(()=>r(t.graphData),500)},[t.graphData]),l.a.createElement("div",{className:"sidebarnew2",style:{width:"25vw"}},l.a.createElement("ul",{className:"sidebar__highlights",style:{maxHeight:"96vh",overflow:"scroll"}},c.nodes&&c.nodes.map((e,n)=>e.id!==t.searchQuery&&void 0!==t.nodesData[e.id]?l.a.createElement("li",{onMouseEnter:()=>function(e){const n=t.nodesData[e.id];if(n){let n=t.graphData.nodes.map(t=>t.id===e.id?{...t,fontSize:16}:{...t,fontSize:8});a({type:"SET_GRAPH_DATA",payload:{...t.graphData,nodes:n}})}n&&a({type:"SET_NODE_DATA",payload:n})}(e),onMouseLeave:()=>function(e){if(t.nodesData[e.id]){let e=t.graphData.nodes.map(e=>({...e,fontSize:8}));a({type:"SET_GRAPH_DATA",payload:{...t.graphData,nodes:e}})}}(e),key:n,className:"sidebar__highlight"},l.a.createElement("div",null,l.a.createElement("p",{style:{opacity:".5"}},t.nodesData[e.id]?t.nodesData[e.id].docket_number:null),l.a.createElement("p",null,t.nodesData[e.id]?t.nodesData[e.id].name:e.id))):null)))},v=a(28),N=a(12);var k=()=>{const e=Object(b.g)(),[t,c]=l.a.useState({username:"",email:"",password1:"",password2:"",fname:"",lname:"",city:"",country:"",organisation:""});Object(n.useEffect)(()=>{const t=Object(N.b)();t&&t.authToken&&t.userPublicId&&(e.push("/dashboard"),console.log(t))},[e]);return l.a.createElement("div",{className:"mb-2 auth-page"},l.a.createElement("div",{className:"d-flex align-items-center auth px-0 h-100"},l.a.createElement("div",{className:"row w-100 mx-0"},l.a.createElement("div",{className:"col-lg-5 mx-auto"},l.a.createElement("div",{className:"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5"},l.a.createElement("div",{className:"brand-logo"},l.a.createElement("img",{src:a(97),alt:"logo"})),l.a.createElement("h4",null,"New here?"),l.a.createElement("h6",{className:"font-weight-light"},"Signing up is easy. It only takes a few steps"),l.a.createElement("form",{className:"pt-3"},l.a.createElement("div",{className:"row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>c({...t,fname:e.target.value}),placeholder:"First name"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>c({...t,lname:e.target.value}),placeholder:"Last name"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control form-control-lg",id:"inputUsername1",placeholder:"Username",onChange:e=>c({...t,username:e.target.value})})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"email",className:"form-control form-control-lg",id:"inputEmail1",placeholder:"Email",onChange:e=>c({...t,email:e.target.value})})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control form-control-lg",id:"inputOrganisation1",placeholder:"Organisation",onChange:e=>c({...t,organisation:e.target.value})})),l.a.createElement("div",{className:"row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>c({...t,city:e.target.value}),placeholder:"City"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>c({...t,country:e.target.value}),placeholder:"Country"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control form-control-lg",id:"inputPassword1",placeholder:"Password",onChange:e=>c({...t,password1:e.target.value})})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control form-control-lg",id:"inputConfirmPassword1",placeholder:"Confirm Password",onChange:e=>c({...t,password2:e.target.value})})),l.a.createElement("div",{className:"mt-3"},l.a.createElement(v.a,{className:"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn",onClick:async a=>{if(a.preventDefault(),!t.username||!t.email||!t.password1||!t.password2)return null;if(t.password1!==t.password2)return null;console.log(t);const n=await fetch("".concat(N.a,"/api/user/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),l=await n.json();console.log(l),n.ok&&e.push("/login")}},"SIGN UP")),l.a.createElement("div",{className:"text-center mt-4 font-weight-light"},"Already have an account?"," ",l.a.createElement(f.b,{to:"/login",className:"text-primary"},"Login"))))))))},x=a(513);var S=()=>{const e=Object(b.g)(),{dispatch:t}=Object(n.useContext)(Q),[c,r]=Object(n.useState)({username:"",password:""});Object(n.useEffect)(()=>{const t=Object(N.b)();t&&t.authToken&&t.userPublicId&&(e.push("/dashboard"),console.log(t))},[e]);return l.a.createElement("div",{className:"mt-5 auth-page",style:{height:"85vh"}},l.a.createElement("div",{className:"d-flex align-items-center auth px-0"},l.a.createElement("div",{className:"row w-100 mx-0"},l.a.createElement("div",{className:"col-lg-5 mx-auto"},l.a.createElement("div",{className:"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5"},l.a.createElement("div",{className:"brand-logo"},l.a.createElement("img",{src:a(97),alt:"logo"})),l.a.createElement("h4",null,"Copilot for Lawyers"),l.a.createElement(x.a,{className:"pt-3"},l.a.createElement(x.a.Group,{className:"d-flex search-field"},l.a.createElement(x.a.Control,{type:"text",placeholder:"Username",size:"lg",className:"h-auto",onChange:e=>r({...c,username:e.target.value})})),l.a.createElement(x.a.Group,{className:"d-flex search-field"},l.a.createElement(x.a.Control,{type:"password",placeholder:"Password",size:"lg",className:"h-auto",onChange:e=>r({...c,password:e.target.value})})),l.a.createElement("div",{className:"mt-3"},l.a.createElement(v.a,{className:"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn",onClick:async a=>{if(a.preventDefault(),!c.username||!c.password)return null;const n=await fetch("".concat(N.a,"/api/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),l=await n.json();console.log(l),n.ok?(t({type:"AUTH",payload:l}),e.push("/dashboard")):console.error("Login failed:",l)}},"SIGN IN")),l.a.createElement("div",{className:"text-center mt-4 font-weight-light"},"Don't have an account?"," "," ",l.a.createElement("br",null),l.a.createElement(f.b,{to:"/register",className:"text-primary"},"Create your account"))))))))},O=a(107),C=a(522);var _=e=>l.a.createElement("li",{className:e.class?"nav-item menu-items active":"nav-item menu-items"},l.a.createElement(f.b,{to:"#",style:{position:"relative"},className:"nav-link",onClick:e.click},l.a.createElement("span",{className:"menu-icon"},l.a.createElement("i",{className:e.iconClass})),l.a.createElement("span",{className:"menu-title"},l.a.createElement(C.a,null,e.transTitle)),l.a.createElement("i",{className:"fa fa-angle-right"}))),T=a(521);var j=e=>l.a.createElement("li",{className:"nav-item profile"},l.a.createElement("div",{className:"profile-desc"},l.a.createElement("div",{onClick:e.profileClick,className:"cursor-pointer profile-pic"},l.a.createElement("div",{className:"count-indicator"},l.a.createElement("img",{className:"img-xs rounded-circle ",src:a(276),alt:"profile"}),l.a.createElement("span",{className:"count bg-success"})),l.a.createElement("div",{className:"profile-name"},l.a.createElement("h5",{className:"mb-0 font-weight-normal"},l.a.createElement(C.a,null,e.authUser)),l.a.createElement("span",null,l.a.createElement(C.a,null,e.authEmail)))),l.a.createElement(T.a,{alignRight:!0},l.a.createElement(T.a.Toggle,{as:"a",className:"cursor-pointer no-caret"},l.a.createElement("i",{className:"mdi mdi-dots-vertical"})),l.a.createElement(T.a.Menu,{className:"sidebar-dropdown preview-list"},l.a.createElement("a",{href:"!#",className:"dropdown-item preview-item",onClick:e=>e.preventDefault()},l.a.createElement("div",{className:"preview-thumbnail"},l.a.createElement("div",{className:"preview-icon bg-dark2 rounded-circle"},l.a.createElement("i",{className:"mdi mdi-settings text-primary"}))),l.a.createElement("div",{className:"preview-item-content"},l.a.createElement("p",{className:"preview-subject ellipsis mb-1 text-small"},l.a.createElement(C.a,null,"Account settings")))),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("a",{href:"!#",className:"dropdown-item preview-item",onClick:e=>e.preventDefault()},l.a.createElement("div",{className:"preview-thumbnail"},l.a.createElement("div",{className:"preview-icon bg-dark2 rounded-circle"},l.a.createElement("i",{className:"mdi mdi-onepassword  text-info"}))),l.a.createElement("div",{className:"preview-item-content"},l.a.createElement("p",{className:"preview-subject ellipsis mb-1 text-small"},l.a.createElement(C.a,null,"Change Password")))),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("a",{href:"!#",className:"dropdown-item preview-item",onClick:e=>e.preventDefault()},l.a.createElement("div",{className:"preview-thumbnail"},l.a.createElement("div",{className:"preview-icon bg-dark2 rounded-circle"},l.a.createElement("i",{className:"mdi mdi-calendar-today text-success"}))),l.a.createElement("div",{className:"preview-item-content"},l.a.createElement("p",{className:"preview-subject ellipsis mb-1 text-small"},l.a.createElement(C.a,null,"To-do list"))))))));var D=function(){const{state:e,dispatch:t}=Object(n.useContext)(Q),{fetchFilesAndGraphData:c,fetchHighlights:r}=(()=>{const{state:e,dispatch:t}=Object(n.useContext)(Q);return{fetchFilesAndGraphData:async()=>{if(!e.auth||!e.auth.authToken)return;const a=await o()("".concat(N.a,"/get/files"),{headers:{"x-access-token":e.auth&&e.auth.authToken}}),n=a.data&&a.data.files;if(n&&n.length>0){const a=(await o()("".concat(N.a,"/get-graphdata"),{headers:{"x-access-token":e.auth&&e.auth.authToken}})).data;let l={},c="";a&&a.graphdata&&a.graphdata.length&&a.graphdata.filter(e=>{c=e.fileName,l[c]=e.links.filter(e=>"CITATION"==e.source||"PROVISION"==e.source)});const r=n.map(e=>({...e,CITATION:l&&l[e.name]&&l[e.name].length>0?l[e.name].filter(e=>"CITATION"==e.source):["N/A"],PROVISION:l&&l[e.name]&&l[e.name].length>0?l[e.name].filter(e=>"PROVISION"==e.source):["N/A"]}));t({type:"ADD_FILE",payload:r})}},fetchHighlights:async()=>{if(e.fileHighlights&&0===e.fileHighlights.length){const a=(await o()("".concat(N.a,"/get-highlights"),{headers:{"x-access-token":e.auth&&e.auth.authToken}})).data;if(!e.currentFile&&a&&a.highlights&&a.highlights.length){const n={name:a.highlights[0].name,url:"uploads/".concat(e.auth.userPublicId,"/").concat(a.highlights[0].name)};t({type:"SET_CURR_FILE",payload:n})}a&&a.highlights&&a.highlights.length>0&&t({type:"FETCH_FILE_HIGHLIGHTS",payload:a.highlights})}},showFileViewerHandler:()=>{t({type:"SET_VIEW",payload:{showFileViewer:!0}})}}})();Object(n.useEffect)(()=>{c(),r()},[e.auth.authToken]);const s=e=>{t({type:"SET_VIEW",payload:e})},[i,m]=Object(n.useState)(!1);return l.a.createElement("nav",{className:"sidebar sidebar-offcanvas",id:"sidebar"},l.a.createElement("div",{className:"sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top"},l.a.createElement("a",{className:"sidebar-brand brand-logo",href:"index.html"},l.a.createElement("img",{src:a(97),alt:"logo"})),l.a.createElement("a",{className:"sidebar-brand brand-logo-mini",href:"index.html"},l.a.createElement("img",{src:a(97),alt:"logo"}))),l.a.createElement("ul",{className:"nav"},l.a.createElement(j,{profileClick:()=>s({showProfileView:!0}),authUser:e.auth&&e.auth.username,authEmail:e.auth&&e.auth.email}),l.a.createElement("li",{className:"nav-item nav-category"},l.a.createElement("span",{className:"nav-link"})),l.a.createElement(_,{class:e.showDashboardView,click:()=>s({showDashboardView:!0}),iconClass:"mdi mdi-speedometer",transTitle:"Dashboard"}),l.a.createElement(_,{class:e.showFileViewer,click:()=>s({showFileViewer:!0}),iconClass:"mdi mdi-file",transTitle:"Copilot"}),l.a.createElement(_,{class:!1,click:e=>{e.preventDefault(),m(!0)},iconClass:"mdi mdi-text",transTitle:"Notes"}),l.a.createElement(_,{class:e.showTextAnonymizerView,click:()=>s({showTextAnonymizerView:!0}),iconClass:"mdi mdi-text",transTitle:"Anonymizer"})),i&&l.a.createElement(O.a,{id:e.auth&&e.auth.userPublicId,fileName:"index",showTextEditor:i,setShowTextEditor:m}))};a(463),a(464);var I=function(e){const{state:t,dispatch:a}=Object(n.useContext)(Q),[c,r]=Object(n.useState)("");return l.a.createElement(n.Fragment,null)};a(149);a(278);var H=function(e){const{dispatch:t}=Object(n.useContext)(Q),[a,c]=Object(n.useState)("");return l.a.createElement(n.Fragment,null)},A=a(517),F=a(518);var L=e=>{let{setCreateNotes:t,setShowGraph:c,showGraph:r,setShowGraphModal:s}=e;const o=Object(b.g)(),{state:i,dispatch:m}=Object(n.useContext)(Q),d=Object(n.useRef)(null);Object(n.useEffect)(()=>{if(setInterval((function(){u()}),6e4),i&&i.auth){const e=i.auth;if(console.log("Auth Expiry Time",new Date(e.expiry)),!e.authToken||!e.userPublicId||!e.username||!e.email){const e=Object(N.b)();e?m({type:"AUTH",payload:e}):o.push("/login")}}const e=setTimeout(()=>{d.current&&d.current.click()},3e3);return()=>clearTimeout(e)},[i.auth]);const u=()=>{var e=new Date,t=e.getDate()+"-"+e.getHours()+"-"+e.getMinutes();let a=i.auth.expiry-3e5;new Date(a).getDate()+"-"+new Date(a).getHours()+"-"+new Date(a).getMinutes()===t&&alert("Auth Signature about to expire in 5 minutes"),new Date(i.auth.expiry).getDate()+"-"+new Date(i.auth.expiry).getHours()+"-"+new Date(i.auth.expiry).getMinutes()===t&&o.push("/login")};return l.a.createElement("nav",{className:"navbar p-0 fixed-top d-flex flex-row"},l.a.createElement("div",{className:"navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center"},l.a.createElement(f.b,{className:"navbar-brand brand-logo-mini",to:"/"},l.a.createElement("img",{src:a(466),alt:"logo"}))),l.a.createElement("div",{className:"navbar-menu-wrapper flex-grow d-flex align-items-stretch"},l.a.createElement("button",{ref:d,className:"navbar-toggler align-self-center hamburger",type:"button",onClick:()=>document.body.classList.toggle("sidebar-icon-only")},l.a.createElement("span",{className:"mdi mdi-menu"})),l.a.createElement(A.a,{style:{alignItems:"center",width:"100%"},className:"nav_items_upload"},l.a.createElement(F.a,{lg:3,md:4,xs:12,sm:12},l.a.createElement(H,null)),l.a.createElement(F.a,{lg:6,md:6,xs:12,sm:12}),l.a.createElement(F.a,{lg:3,md:2,xs:12,sm:12},l.a.createElement(I,null))),l.a.createElement("div",{className:"button-container",style:{display:"flex",justifyContent:"space-between",margin:"20px auto",width:"fit-content"}},l.a.createElement("div",{onClick:()=>t(!0),className:"btn btn-md btn-primary text-center cursor-pointer p-2"},"Notes"),l.a.createElement("div",{onClick:()=>c(!r),className:"btn btn-lg btn-secondary text-center cursor-pointer p-2"}," ",r?"Hide":"Graph")),l.a.createElement("button",{className:"navbar-toggler navbar-toggler-right d-lg-none align-self-center",type:"button",onClick:()=>{document.querySelector(".sidebar-offcanvas").classList.toggle("active")}},l.a.createElement("span",{className:"mdi mdi-format-line-spacing"})),l.a.createElement("button",{style:{height:"35px"},className:"navbar-toggler bg-danger align-self-center text-white btn btn-danger",type:"button",onClick:()=>m({type:"LOG_OUT"})},"LogOut")))},G=a(113),V=(a(472),a(523)),P=a(524),R=a(525),z=a(519),M=a(83),U=a.n(M);a(473);var q=e=>{let{socket:t,publicId:a,pdfDocumentName:c}=e;const[r,s]=Object(n.useState)([{id:1,nickName:"",message:"Hello there!",type:"me"}]),[o,i]=Object(n.useState)(""),m=Object(n.useRef)();Object(n.useEffect)(()=>{if(!t){const e=U()("https://back.casebk.com");return m.current=e,console.log("Socket connection established"),()=>{e.disconnect(),console.log("Socket disconnected")}}m.current=t},[t]);Object(n.useEffect)(()=>{if(m.current){const e=e=>{console.log("Received response:",e);const t={id:r.length+1,nickName:"",message:e.recommendation,type:"me"};s(e=>[...e,t])};return m.current.on("openai-query-response",e),()=>{m.current.off("openai-query-response",e)}}},[]);const d=()=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Yahya";if(e.trim()){console.log("Sending message:",e);const n={id:r.length+1,nickName:t,message:e,type:"Yahya"===t?"user":"me",publicId:a,pdfDocumentName:c};s(e=>[...e,n]),"Yahya"===t&&m.current&&(console.log("Emitting to socket:",e),m.current.emit("openai-chat",{query:n}))}}(o),i("")};return l.a.createElement("div",{id:"chat",className:"--dark-theme"},l.a.createElement("div",{className:"chat__conversation-board"},r.map((e,t)=>l.a.createElement("div",{key:t,className:"chat__conversation-board__message-container ".concat("me"===e.type?"me":"user")},l.a.createElement("div",{className:"chat__conversation-board__message__person"},"me"===e.type&&l.a.createElement("img",{src:"/static/media/scaletransm2.5eb52ef8.png",alt:e.nickName,style:{width:"35px",height:"35px",borderRadius:"50%"}}),l.a.createElement("span",{className:"chat__conversation-board__message__person__nickname"},e.nickName)),l.a.createElement("div",{className:"chat__conversation-board__message__context"},l.a.createElement("p",{className:"chat__conversation-board__message__bubble ".concat("user"===e.type?"user-message":"")},e.message))))),l.a.createElement("div",{className:"chat__conversation-panel"},l.a.createElement("input",{className:"chat__conversation-panel__input",placeholder:"Ask Casebook AI a question about this document...",value:o,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d()}}),l.a.createElement("button",{className:"chat__conversation-panel__button",onClick:d},l.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M2 21l21-9L2 3v7l15 2-15 2v7z",fill:"currentColor"})))))};a(474);const B=e=>{document.location.hash="pdf-highlight-".concat(e.id)};var W=function(){const{state:e,dispatch:t}=Object(n.useContext)(Q),[a,c]=Object(n.useState)([]),[s,o]=Object(n.useState)({height:720,width:300}),[i,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!1),[h,g]=Object(n.useState)(),[p,E]=Object(n.useState)(0),[f,b]=Object(n.useState)(""),[w,y]=Object(n.useState)(0),[v,N]=Object(n.useState)(0),k=(e,t)=>{N((e+1)/t*100)},x=()=>{const e=a.filter(e=>e.comment.text.toUpperCase().includes(f));if(0===e.length)return void alert("No highlights available for '".concat(f,"'"));const t=e.findIndex(e=>e===a[p]),n=e[(t-1+e.length)%e.length];E(a.indexOf(n)),B(n),k(a.indexOf(n),e.length),C()},S=()=>{const e=a.filter(e=>e.comment.text.toUpperCase().includes(f));if(0===e.length)return;const t=e.findIndex(e=>e===a[p]),n=(t+1)%e.length;if(0===n&&t===e.length-1)return;const l=e[n];E(a.indexOf(l)),B(l),k(a.indexOf(l),e.length),C()},O=e=>{b(e);const t=a.filter(t=>""===e||t.comment.text.toUpperCase().includes(e.toUpperCase()));y(t.length),t.length>0?(E(a.indexOf(t[0])),k(0,t.length),B(t[0])):(E(-1),N(0),a.length>0?(E(0),B(a[0]),k(0,a.length)):document.location.hash="")};Object(n.useEffect)(()=>{if(e.currentFile){let t=!1;const a=e.fileHighlights.reduce((a,n)=>{if(n.name===e.currentFile.name){const e=n.highlights.filter(e=>"OTHER"!==e.comment.text&&(!f||e.comment.text.toUpperCase().includes(f)));a.push(...e),t=!0}return a},[]);c(a),t&&0!==a.length||c([]),E(0)}},[e.currentFile,e.fileHighlights,f]);const C=()=>{setTimeout(()=>{const e=document.querySelector(".newcard.active");e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},0)};return C(),l.a.createElement(G.Resizable,{className:"box",width:s.width,onResize:(e,t)=>{let{size:a}=t;return o({width:a.width})},resizeHandles:["e"]},l.a.createElement("div",{className:"sidebarnew",style:{width:"36vw"}},l.a.createElement("div",{className:"progress-container",style:{width:"100%",backgroundColor:"#222d37",height:"1vh",margin:"1vh 0"}},l.a.createElement("div",{className:"progress-bar",style:{width:"".concat(v,"%"),height:"5px",backgroundColor:"#2e5f8a"}})),l.a.createElement("div",{className:"highlight-actions"},l.a.createElement("button",{className:"btn btn-secondary",onClick:e=>{e.stopPropagation(),x()}},"Previous"),l.a.createElement(V.a,null,l.a.createElement(P.a,{caret:!0,color:"warning"},"Category"),l.a.createElement(R.a,null,l.a.createElement(z.a,{header:!0},"Jump to"),l.a.createElement(z.a,{onClick:()=>O("AXIOM")},"Axiom"),l.a.createElement(z.a,{onClick:()=>O("ISSUE")},"Issue"),l.a.createElement(z.a,{onClick:()=>O("LEGAL_TEST")},"Legal Test"),l.a.createElement(z.a,{onClick:()=>O("CONCLUSION")},"Conclusion"),l.a.createElement(z.a,{divider:!0}))),l.a.createElement("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),S()}},"Next")),l.a.createElement("div",{className:"sidebar__highlights",onWheel:e=>{const t=e.deltaY;e.preventDefault(),t<0?x():t>0&&S(),C()},style:{overflowY:"scroll",height:"calc(17vh)",position:"relative"}},a.length>0?a.map((e,t)=>l.a.createElement("div",{className:"newcard ".concat(t===p?"active":""),key:t,onClick:()=>(e=>{E(e),B(a[e])})(t)},l.a.createElement("div",null,l.a.createElement("strong",null,Object(r.a)(e.comment.text)),e.content.text&&l.a.createElement("blockquote",null,"".concat(e.content.text.slice(0,90).trim(),"\u2026")),e.content.image&&l.a.createElement("div",{className:"highlight__image",style:{marginTop:"0.5rem"}},l.a.createElement("img",{src:e.content.image,alt:"Screenshot"}))))):l.a.createElement("div",{className:"no-highlights"},"No Highlights Available for Selected Pdf!")),l.a.createElement("div",{className:"description"},l.a.createElement(q,{publicId:e.auth.userPublicId,pdfDocumentName:e.currentFile&&e.currentFile.name}))))},J=a(241),Y=a(157);const Q=Object(n.createContext)();t.b=function(){const[e,t]=Object(n.useReducer)(E,p),[a,c]=Object(n.useState)(!1),[r,s]=Object(n.useState)(!1),[o,i]=Object(n.useState)(!1);return l.a.createElement(Q.Provider,{value:{state:e,dispatch:t}},l.a.createElement(f.a,null,l.a.createElement(b.d,null,l.a.createElement(b.b,{path:"/login"},l.a.createElement(S,null)),l.a.createElement(b.b,{path:"/register"},l.a.createElement(k,null)),l.a.createElement(b.b,{exact:!0,path:"/dashboard"},l.a.createElement("div",{className:"container-scroller"},l.a.createElement(D,null),l.a.createElement("div",{className:"container-fluid page-body-wrapper"},l.a.createElement(L,{setCreateNotes:c,setShowGraph:s,showGraph:r,setShowGraphModal:i}),l.a.createElement("div",{className:"main-panel"},l.a.createElement("div",{className:"show_side",style:{display:"flex"}},!0===e.showHighlight&&""!==e.searchQuery&&l.a.createElement(y,null),!0===e.showFileViewer&&l.a.createElement(W,null),l.a.createElement("div",{className:"content-wrapper"},l.a.createElement(u,{showFileViewer:e.showFileViewer,showDashboardView:e.showDashboardView,showHighlight:e.showHighlight,showProfileView:e.showProfileView,showFeedView:e.showFeedView,showTextAnonymizerView:e.showTextAnonymizerView,showLawsReader:e.showLawsReader,showGptView:e.showGptView}),l.a.createElement(J.a,{files:e.files})),!0===e.showHighlight&&""!==e.searchQuery&&l.a.createElement(w,null),e.showFileViewer&&l.a.createElement(Y.a,{createNotes:a,showGraph:r,showGraphModal:o,setShowGraphModal:i,setCreateNotes:c,setShowGraph:s})))))),l.a.createElement(b.a,{to:"/login"}))))}},463:function(e,t,a){},464:function(e,t,a){},466:function(e,t,a){e.exports=a.p+"static/media/logo-mini.c949e51e.svg"},473:function(e,t,a){},474:function(e,t,a){},509:function(e,t,a){},511:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(19),r=a.n(c),s=(a(288),a(32));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},87:function(e,t,a){"use strict";var n=a(1),l=a.n(n),c=a(257),r=a.n(c),s=a(258),o=a.n(s),i=a(259),m=a.n(i),d=a(260),u=a.n(d),h=a(261),g=a.n(h),p=a(262),E=a.n(p);t.a=function(e){return r()().use(o.a).use(g.a).use(m.a).use(E.a).use(u.a,{createElement:l.a.createElement}).processSync(e).result}},97:function(e,t,a){e.exports=a.p+"static/media/scaletransm2.5eb52ef8.png"}},[[283,2,3]]]);
//# sourceMappingURL=main.517836c0.chunk.js.map