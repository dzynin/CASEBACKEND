(this["webpackJsonpreact-pdf-markdown-highlighter"]=this["webpackJsonpreact-pdf-markdown-highlighter"]||[]).push([[1],{15:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l}));const n="https://back.casebk.com",l=()=>{const e=JSON.parse(localStorage.getItem("authDetails"));return e&&e.userId&&e.authToken&&e.userPublicId&&e.username&&e.fname&&e.lname&&e.city&&e.country&&e.organisation&&e.email&&e.expiry?e.expiry<Date.parse(new Date)?null:{authToken:e.authToken,auth_token:e.authToken,userId:e.userId,userPublicId:e.userPublicId,username:e.username,email:e.email,expiry:e.expiry,fname:e.fname,lname:e.lname,city:e.city,country:e.country,organisation:e.organisation}:null}},152:function(e,t,a){"use strict";var n=a(1),l=a.n(n);a(286);t.a=()=>l.a.createElement("div",{style:{display:"flex",alignItems:"center",height:"100vh"}},l.a.createElement("div",{className:"sk-fading-circle"},l.a.createElement("div",{className:"sk-circle1 sk-circle"}),l.a.createElement("div",{className:"sk-circle2 sk-circle"}),l.a.createElement("div",{className:"sk-circle3 sk-circle"}),l.a.createElement("div",{className:"sk-circle4 sk-circle"}),l.a.createElement("div",{className:"sk-circle5 sk-circle"}),l.a.createElement("div",{className:"sk-circle6 sk-circle"}),l.a.createElement("div",{className:"sk-circle7 sk-circle"}),l.a.createElement("div",{className:"sk-circle8 sk-circle"}),l.a.createElement("div",{className:"sk-circle9 sk-circle"}),l.a.createElement("div",{className:"sk-circle10 sk-circle"}),l.a.createElement("div",{className:"sk-circle11 sk-circle"}),l.a.createElement("div",{className:"sk-circle12 sk-circle"})))},237:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=a(509),c=a(149);t.a=function(e){let{files:t,onFileClick:a}=e;return l.a.createElement("div",{className:"file-metadata-viewer"},l.a.createElement("h2",null,"Uploaded Files"),l.a.createElement(r.a,{responsive:!0,bordered:!0,className:"custom-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"File Name"),l.a.createElement("th",null,"Upload Date"),l.a.createElement("th",null,"Summary"),l.a.createElement("th",null,"View"))),l.a.createElement("tbody",null,t.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,new Date(e.uploadDate).toLocaleDateString()),l.a.createElement("td",null,e.summary),l.a.createElement("td",null,l.a.createElement(c.a,{color:"primary",onClick:()=>a(e)},"View")))))))}},273:function(e,t,a){e.exports=a.p+"static/media/face0.1f2c7e78.jpeg"},280:function(e,t,a){e.exports=a(508)},285:function(e,t,a){},286:function(e,t,a){},32:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a(1),l=a.n(n),r=a(265),c=a.n(r);const s=Object(n.createContext)(),o=e=>{let{children:t}=e;const a=Object(n.useRef)();return Object(n.useEffect)(()=>{const e=c()("http://localhost:8000");return a.current=e,console.log("Socket connection established"),()=>{e.disconnect(),console.log("Socket disconnected")}},[]),l.a.createElement(s.Provider,{value:a.current},t)},i=()=>Object(n.useContext)(s)},460:function(e,t,a){},461:function(e,t,a){},462:function(e,t,a){e.exports=a.p+"static/media/logo-mini.c949e51e.svg"},470:function(e,t,a){},471:function(e,t,a){},506:function(e,t,a){},508:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(18),c=a.n(r),s=(a(285),a(84));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},84:function(e,t,a){"use strict";a.d(t,"a",(function(){return ae}));var n=a(1),l=a.n(n),r=(a(272),a(152)),c=a(85),s=a(21),o=a.n(s);var i=function(e){const[t,a]=Object(n.useState)({highlights:[]}),[r,s]=Object(n.useState)({url:""});Object(n.useEffect)(()=>{!async function(){const e=await o()("http://127.0.0.1:8000/api/v1/json"),t=Object.keys(e.data)[0];s({url:"http://127.0.0.1:8000/api/v1/pdf/".concat(t)}),a({highlights:e.data[t]})}()},[]);const{highlights:i}=t;return l.a.createElement("div",{className:"sidebarnew",style:{width:"25vw"}},l.a.createElement("div",{className:"card-description",style:{padding:"1rem"}},l.a.createElement("h2",{style:{marginBottom:"1rem"}},"Highlights"),l.a.createElement("p",null,l.a.createElement("small",null,"To create area highlight hold \u2325 Option key (Alt), then click and drag."))),l.a.createElement("ul",{className:"sidebar__highlights"},i.map((e,n)=>l.a.createElement("li",{key:n,className:"sidebar__highlight",onClick:()=>{(e=>{document.location.hash="highlight-".concat(e.id)})(e)}},l.a.createElement("div",null,l.a.createElement("div",{style:{padding:"4px"}},l.a.createElement("button",{style:{float:"right"},onClick:()=>(e=>{const n=t.highlights.filter((t,a)=>e!==a?t:null);a({highlights:n})})(n),className:"sidebar__btn"},l.a.createElement("i",{className:"fa fa-close"}))),l.a.createElement("strong",null,Object(c.a)(e.comment.text)),e.content.text?l.a.createElement("blockquote",{style:{marginTop:"0.5rem"}},"".concat(e.content.text.slice(0,90).trim(),"\u2026")):null,e.content.image?l.a.createElement("div",{className:"highlight__image",style:{marginTop:"0.5rem"}},l.a.createElement("img",{src:e.content.image,alt:"Screenshot"})):null),l.a.createElement("div",{className:"highlight__location"},"Page ",e.position.pageNumber)))),i.length>0?l.a.createElement("div",{style:{padding:"1rem"}},l.a.createElement("button",{onClick:()=>{a({highlights:[]})}},"Reset highlights")):null)};const m=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(4),a.e(5)]).then(a.bind(null,662))),d=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(6)]).then(a.bind(null,574)));var u=function(e){return l.a.createElement(n.Suspense,{fallback:l.a.createElement(r.a,null)},e.showHighlight&&l.a.createElement(i,null),e.showFileViewer&&l.a.createElement(d,null),l.a.createElement(m,{showFileViewer:e.showFileViewer,showDashboardView:e.showDashboardView,showHighlight:e.showHighlight,showProfileView:e.showProfileView,showFeedView:e.showFeedView,showTextAnonymizerView:e.showTextAnonymizerView,showGptView:e.showGptView,showLawsReader:e.showLawsReader}))};const h=(e,t)=>({...e,...t}),g=(e,t)=>{const a={...e,highlightColors:t};return localStorage.setItem("highlightColors",JSON.stringify(a.highlightColors)),a},p={files:[],currentFile:null,fileHighlights:[],myPosts:[],allPosts:[],error:null,message:null,searchQuery:"",isModalOpen:!1,nodeData:{},nodesData:{},graphData:{},showHighlight:!1,highlightColors:JSON.parse(localStorage.getItem("highlightColors"))||{default:"#F48FB1",legalTest:"#E1BEE7",issue:"#D1C4E9",conclusion:"#B2EBF2"},auth:{userId:null,authToken:null,userPublicId:null,username:null,email:null,expiry:null,fname:null,lname:null,city:null,country:null,organisation:null},highlightTextsForEditor:[],showFileViewer:!1,showDashboardView:!0,showProfileView:!1,showFeedView:!1,showTextAnonymizerView:!1,showGptView:!1,showLawsReader:!1,accordionSections:[],showPdfViewer:!0,showMetadataViewer:!1},E=(e,t)=>{switch(t.type){case"ADD_FILE":Array.isArray(t.payload)||(t.payload=[t.payload]);let a=[...e.files,...t.payload],n=[],l=a.filter(e=>!n.includes(e.name)&&(n.push(e.name),!0));return{...e,files:l,currentFile:e.currentFile||t.payload[0]};case"AUTH":const r={userId:t.payload.userId,authToken:t.payload.auth_token,userPublicId:t.payload.userPublicId,username:t.payload.username,email:t.payload.email,expiry:t.payload.expiry||Date.parse(new Date)+36e5,fname:t.payload.fname,lname:t.payload.lname,city:t.payload.city,country:t.payload.country,organisation:t.payload.organisation};return localStorage.setItem("authDetails",JSON.stringify(r)),h(e,{auth:r});case"LOG_OUT":return localStorage.removeItem("authDetails"),p;case"TOGGLE_HIGHLIGHT":return{...e,showHighlight:t.payload};case"SET_CURR_FILE":return h(e,{currentFile:t.payload});case"TOGGLE_VIEWER":return{...e,...t.payload};case"SET_VIEW":return{...e,showHighlight:!1,showFileViewer:!1,showDashboardView:!1,showProfileView:!1,showFeedView:!1,showTextAnonymizerView:!1,showGptView:!1,showLawsReader:!1,...t.payload};case"ALL_POSTS":return h(e,{allPosts:t.payload});case"ADD_My_POSTS":return h(e,{myPosts:[...e.myPosts,t.payload]});case"FETCH_FILE_HIGHLIGHTS":return h(e,{fileHighlights:t.payload});case"SET_FILE_HIGHLIGHTS":let c=[];if(e.fileHighlights.length>0){let a=!1;c=e.fileHighlights.map(e=>(e.name===t.payload.name&&(e.highlights=t.payload.highlights,a=!0),e)),a||(c=[...e.fileHighlights,t.payload])}else c=[t.payload];return h(e,{fileHighlights:c});case"ERROR":return h(e,{error:t.payload});case"MESSAGE":return h(e,{message:t.payload});case"SET_SEARCH_QUERY":return h(e,{searchQuery:t.payload});case"SET_NODE_DATA":return h(e,{nodeData:t.payload});case"SET_GRAPH_DATA":return h(e,{graphData:t.payload});case"SET_NODES_DATA":return h(e,{nodesData:t.payload});case"CHANGE_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,default:t.payload});case"CHANGE_LEGAL_TEST_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,legalTest:t.payload});case"CHANGE_ISSUE_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,issue:t.payload});case"CHANGE_CONCLUSION_HIGHLIGHT_COLOR":return g(e,{...e.highlightColors,conclusion:t.payload});case"SET_MODAL":return h(e,{isModalOpen:t.payload});case"SET_HIGHLIGHT_TEXT":return{...e,highlightTextForEditor:t.payload};case"ADD_HIGHLIGHT_TEXT":const s=t.payload,o=[...e.highlightTextsForEditor||[],s];return{...e,highlightTextsForEditor:o};case"SET_ACCORDION_SECTIONS":return h(e,{accordionSections:t.payload});case"TOGGLE_PDF_VIEWER":return{...e,showPdfViewer:!e.showPdfViewer};case"SHOW_METADATA_VIEWER":return{...e,showMetadataViewer:!0};case"HIDE_METADATA_VIEWER":return{...e,showMetadataViewer:!1};case"SHOW_PDF_VIEWER":return{...e,showPdfViewer:!0};case"SHOW_TEXT_EDITOR":return{...e,showPdfViewer:!1};default:return e}};var f=a(33),b=a(12);var w=function(e){const{state:t}=Object(n.useContext)(ae),[a,r]=Object(n.useState)({});return Object(n.useEffect)(()=>{r(t.nodeData)},[t.nodeData]),l.a.createElement("div",{className:"sidebarnew",style:{width:"25vw"}},l.a.createElement("div",{className:"description",style:{padding:"1rem"}},l.a.createElement("h2",{style:{marginBottom:"1rem",fontSize:"1.2rem"}},"Name"),l.a.createElement("p",null,a.name)),l.a.createElement("div",{className:"description",style:{padding:"1rem"}},l.a.createElement("h2",{style:{marginBottom:"1rem",fontSize:"1.2rem"}},"Preview"),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.preview&&a.preview.join("")}})))};var y=function(e){const{state:t,dispatch:a}=Object(n.useContext)(ae),[r,c]=Object(n.useState)({});return Object(n.useEffect)(()=>{setTimeout(()=>c(t.graphData),500)},[t.graphData]),l.a.createElement("div",{className:"sidebarnew2",style:{width:"25vw"}},l.a.createElement("ul",{className:"sidebar__highlights",style:{maxHeight:"96vh",overflow:"scroll"}},r.nodes&&r.nodes.map((e,n)=>e.id!==t.searchQuery&&void 0!==t.nodesData[e.id]?l.a.createElement("li",{onMouseEnter:()=>function(e){const n=t.nodesData[e.id];if(n){let n=t.graphData.nodes.map(t=>t.id===e.id?{...t,fontSize:16}:{...t,fontSize:8});a({type:"SET_GRAPH_DATA",payload:{...t.graphData,nodes:n}})}n&&a({type:"SET_NODE_DATA",payload:n})}(e),onMouseLeave:()=>function(e){if(t.nodesData[e.id]){let e=t.graphData.nodes.map(e=>({...e,fontSize:8}));a({type:"SET_GRAPH_DATA",payload:{...t.graphData,nodes:e}})}}(e),key:n,className:"sidebar__highlight"},l.a.createElement("div",null,l.a.createElement("p",{style:{opacity:".5"}},t.nodesData[e.id]?t.nodesData[e.id].docket_number:null),l.a.createElement("p",null,t.nodesData[e.id]?t.nodesData[e.id].name:e.id))):null)))},v=a(28),N=a(15);var k=()=>{const e=Object(b.g)(),[t,r]=l.a.useState({username:"",email:"",password1:"",password2:"",fname:"",lname:"",city:"",country:"",organisation:""});Object(n.useEffect)(()=>{const t=Object(N.b)();t&&t.authToken&&t.userPublicId&&(e.push("/dashboard"),console.log(t))},[e]);return l.a.createElement("div",{className:"mb-2 auth-page"},l.a.createElement("div",{className:"d-flex align-items-center auth px-0 h-100"},l.a.createElement("div",{className:"row w-100 mx-0"},l.a.createElement("div",{className:"col-lg-5 mx-auto"},l.a.createElement("div",{className:"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5"},l.a.createElement("div",{className:"brand-logo"},l.a.createElement("img",{src:a(95),alt:"logo"})),l.a.createElement("form",{className:"pt-3"},l.a.createElement("div",{className:"row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>r({...t,fname:e.target.value}),placeholder:"First name"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>r({...t,lname:e.target.value}),placeholder:"Last name"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control form-control-lg",id:"inputUsername1",placeholder:"Username",onChange:e=>r({...t,username:e.target.value})})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"email",className:"form-control form-control-lg",id:"inputEmail1",placeholder:"Email",onChange:e=>r({...t,email:e.target.value})})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control form-control-lg",id:"inputOrganisation1",placeholder:"Organisation",onChange:e=>r({...t,organisation:e.target.value})})),l.a.createElement("div",{className:"row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>r({...t,city:e.target.value}),placeholder:"City"})),l.a.createElement("div",{className:"col"},l.a.createElement("input",{type:"text",className:"form-control",onChange:e=>r({...t,country:e.target.value}),placeholder:"Country"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control form-control-lg",id:"inputPassword1",placeholder:"Password",onChange:e=>r({...t,password1:e.target.value})})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control form-control-lg",id:"inputConfirmPassword1",placeholder:"Confirm Password",onChange:e=>r({...t,password2:e.target.value})})),l.a.createElement("div",{className:"mt-3"},l.a.createElement(v.a,{className:"btn btn-block btn-primary btn-lg font-weight-medium align-self-center",onClick:async a=>{if(a.preventDefault(),!t.username||!t.email||!t.password1||!t.password2)return null;if(t.password1!==t.password2)return null;console.log(t);const n=await fetch("".concat(N.a,"/api/user/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),l=await n.json();console.log(l),n.ok&&e.push("/login")}},"SIGN UP")),l.a.createElement("div",{className:"text-center mt-4 font-weight-light"},"Already have an account?"," ",l.a.createElement(f.b,{to:"/login",className:"text-primary"},"Login"))))))))},x=a(510);var O=()=>{const e=Object(b.g)(),{dispatch:t}=Object(n.useContext)(ae),[r,c]=Object(n.useState)({username:"",password:""});Object(n.useEffect)(()=>{const t=Object(N.b)();t&&t.authToken&&t.userPublicId&&(e.push("/dashboard"),console.log(t))},[e]);return l.a.createElement("div",{className:"mt-5 auth-page",style:{height:"85vh"}},l.a.createElement("div",{className:"d-flex align-items-center auth px-0"},l.a.createElement("div",{className:"row w-100 mx-0"},l.a.createElement("div",{className:"col-lg-5 mx-auto"},l.a.createElement("div",{className:"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5"},l.a.createElement("div",{className:"brand-logo"},l.a.createElement("img",{src:a(95),alt:"logo"})),l.a.createElement("h4",null,"Copilot for Lawyers"),l.a.createElement(x.a,{className:"pt-3"},l.a.createElement(x.a.Group,{className:"d-flex search-field"},l.a.createElement(x.a.Control,{type:"text",placeholder:"Username",size:"lg",className:"h-auto",onChange:e=>c({...r,username:e.target.value})})),l.a.createElement(x.a.Group,{className:"d-flex search-field"},l.a.createElement(x.a.Control,{type:"password",placeholder:"Password",size:"lg",className:"h-auto",onChange:e=>c({...r,password:e.target.value})})),l.a.createElement("div",{className:"mt-3"},l.a.createElement(v.a,{className:"btn btn-block btn-primary btn font-weight-medium auth-form-btn btn btn-primary align-self-center",onClick:async a=>{if(a.preventDefault(),!r.username||!r.password)return null;const n=await fetch("".concat(N.a,"/api/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),l=await n.json();console.log(l),n.ok?(t({type:"AUTH",payload:l}),e.push("/dashboard")):console.error("Login failed:",l)}},"SIGN IN")),l.a.createElement("div",{className:"text-center mt-4 font-weight-light"},"Don't have an account?"," "," ",l.a.createElement("br",null),l.a.createElement(f.b,{to:"/register",className:"text-primary"},"Create your account"))))))))},S=a(97),_=a(520);var C=e=>l.a.createElement("li",{className:e.class?"nav-item menu-items active":"nav-item menu-items"},l.a.createElement(f.b,{to:"#",style:{position:"relative"},className:"nav-link",onClick:e.click},l.a.createElement("span",{className:"menu-icon"},l.a.createElement("i",{className:e.iconClass})),l.a.createElement("span",{className:"menu-title"},l.a.createElement(_.a,null,e.transTitle)),l.a.createElement("i",{className:"fa fa-angle-right"}))),T=a(518);var D=e=>l.a.createElement("li",{className:"nav-item profile"},l.a.createElement("div",{className:"profile-desc"},l.a.createElement("div",{onClick:e.profileClick,className:"cursor-pointer profile-pic"},l.a.createElement("div",{className:"count-indicator"},l.a.createElement("img",{className:"img-xs rounded-circle ",src:a(273),alt:"profile"}),l.a.createElement("span",{className:"count bg-success"})),l.a.createElement("div",{className:"profile-name"},l.a.createElement("h5",{className:"mb-0 font-weight-normal"},l.a.createElement(_.a,null,e.authUser)),l.a.createElement("span",null,l.a.createElement(_.a,null,e.authEmail)))),l.a.createElement(T.a,{alignRight:!0},l.a.createElement(T.a.Toggle,{as:"a",className:"cursor-pointer no-caret"},l.a.createElement("i",{className:"mdi mdi-dots-vertical"})),l.a.createElement(T.a.Menu,{className:"sidebar-dropdown preview-list"},l.a.createElement("a",{href:"!#",className:"dropdown-item preview-item",onClick:e=>e.preventDefault()},l.a.createElement("div",{className:"preview-thumbnail"},l.a.createElement("div",{className:"preview-icon bg-dark2 rounded-circle"},l.a.createElement("i",{className:"mdi mdi-settings text-primary"}))),l.a.createElement("div",{className:"preview-item-content"},l.a.createElement("p",{className:"preview-subject ellipsis mb-1 text-small"},l.a.createElement(_.a,null,"Account settings")))),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("a",{href:"!#",className:"dropdown-item preview-item",onClick:e=>e.preventDefault()},l.a.createElement("div",{className:"preview-thumbnail"},l.a.createElement("div",{className:"preview-icon bg-dark2 rounded-circle"},l.a.createElement("i",{className:"mdi mdi-onepassword  text-info"}))),l.a.createElement("div",{className:"preview-item-content"},l.a.createElement("p",{className:"preview-subject ellipsis mb-1 text-small"},l.a.createElement(_.a,null,"Change Password")))),l.a.createElement("div",{className:"dropdown-divider"}),l.a.createElement("a",{href:"!#",className:"dropdown-item preview-item",onClick:e=>e.preventDefault()},l.a.createElement("div",{className:"preview-thumbnail"},l.a.createElement("div",{className:"preview-icon bg-dark2 rounded-circle"},l.a.createElement("i",{className:"mdi mdi-calendar-today text-success"}))),l.a.createElement("div",{className:"preview-item-content"},l.a.createElement("p",{className:"preview-subject ellipsis mb-1 text-small"},l.a.createElement(_.a,null,"To-do list"))))))));var j=function(){const{state:e,dispatch:t}=Object(n.useContext)(ae),{fetchFilesAndGraphData:r,fetchHighlights:c}=(()=>{const{state:e,dispatch:t}=Object(n.useContext)(ae);return{fetchFilesAndGraphData:async()=>{if(!e.auth||!e.auth.authToken)return;const a=await o()("".concat(N.a,"/get/files"),{headers:{"x-access-token":e.auth&&e.auth.authToken}}),n=a.data&&a.data.files;if(n&&n.length>0){const a=(await o()("".concat(N.a,"/get-graphdata"),{headers:{"x-access-token":e.auth&&e.auth.authToken}})).data;let l={},r="";a&&a.graphdata&&a.graphdata.length&&a.graphdata.filter(e=>{r=e.fileName,l[r]=e.links.filter(e=>"CITATION"==e.source||"PROVISION"==e.source)});const c=n.map(e=>({...e,CITATION:l&&l[e.name]&&l[e.name].length>0?l[e.name].filter(e=>"CITATION"==e.source):["N/A"],PROVISION:l&&l[e.name]&&l[e.name].length>0?l[e.name].filter(e=>"PROVISION"==e.source):["N/A"]}));t({type:"ADD_FILE",payload:c})}},fetchHighlights:async()=>{if(e.fileHighlights&&0===e.fileHighlights.length){const a=(await o()("".concat(N.a,"/get-highlights"),{headers:{"x-access-token":e.auth&&e.auth.authToken}})).data;if(!e.currentFile&&a&&a.highlights&&a.highlights.length){const n={name:a.highlights[0].name,url:"uploads/".concat(e.auth.userPublicId,"/").concat(a.highlights[0].name)};t({type:"SET_CURR_FILE",payload:n})}a&&a.highlights&&a.highlights.length>0&&t({type:"FETCH_FILE_HIGHLIGHTS",payload:a.highlights})}},showFileViewerHandler:()=>{t({type:"SET_VIEW",payload:{showFileViewer:!0}})}}})();Object(n.useEffect)(()=>{r(),c()},[e.auth.authToken]);const s=e=>{t({type:"SET_VIEW",payload:e})},[i,m]=Object(n.useState)(!1);return l.a.createElement("nav",{className:"sidebar sidebar-offcanvas",id:"sidebar"},l.a.createElement("div",{className:"sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top"},l.a.createElement("a",{className:"sidebar-brand brand-logo",href:"index.html"},l.a.createElement("img",{src:a(95),alt:"logo"})),l.a.createElement("a",{className:"sidebar-brand brand-logo-mini",href:"index.html"},l.a.createElement("img",{src:a(95),alt:"logo"}))),l.a.createElement("ul",{className:"nav"},l.a.createElement(D,{profileClick:()=>s({showProfileView:!0}),authUser:e.auth&&e.auth.username,authEmail:e.auth&&e.auth.email}),l.a.createElement("li",{className:"nav-item nav-category"},l.a.createElement("span",{className:"nav-link"})),l.a.createElement(C,{class:e.showDashboardView,click:()=>s({showDashboardView:!0}),iconClass:"mdi mdi-speedometer",transTitle:"Dashboard"}),l.a.createElement(C,{class:e.showFileViewer,click:()=>s({showFileViewer:!0}),iconClass:"mdi mdi-file",transTitle:"Copilot"}),l.a.createElement(C,{class:!1,click:e=>{e.preventDefault(),m(!0)},iconClass:"mdi mdi-text",transTitle:"Notes"}),l.a.createElement(C,{class:e.showTextAnonymizerView,click:()=>s({showTextAnonymizerView:!0}),iconClass:"mdi mdi-text",transTitle:"Anonymizer"})),i&&l.a.createElement(S.a,{id:e.auth&&e.auth.userPublicId,fileName:"index",showTextEditor:i,setShowTextEditor:m}))};a(460),a(461);var I=function(e){const{state:t,dispatch:a}=Object(n.useContext)(ae),[r,c]=Object(n.useState)("");return l.a.createElement(n.Fragment,null)};var A=function(e){const{dispatch:t}=Object(n.useContext)(ae),[a,r]=Object(n.useState)("");return l.a.createElement(n.Fragment,null)},H=a(514),F=a(515);var L=e=>{let{setCreateNotes:t,setShowGraph:r,showGraph:c,setShowGraphModal:s}=e;const o=Object(b.g)(),{state:i,dispatch:m}=Object(n.useContext)(ae),d=Object(n.useRef)(null);Object(n.useEffect)(()=>{if(setInterval((function(){u()}),6e4),i&&i.auth){const e=i.auth;if(console.log("Auth Expiry Time",new Date(e.expiry)),!e.authToken||!e.userPublicId||!e.username||!e.email){const e=Object(N.b)();e?m({type:"AUTH",payload:e}):o.push("/login")}}const e=setTimeout(()=>{d.current&&d.current.click()},3e3);return()=>clearTimeout(e)},[i.auth]);const u=()=>{var e=new Date,t=e.getDate()+"-"+e.getHours()+"-"+e.getMinutes();let a=i.auth.expiry-3e5;new Date(a).getDate()+"-"+new Date(a).getHours()+"-"+new Date(a).getMinutes()===t&&alert("Auth Signature about to expire in 5 minutes"),new Date(i.auth.expiry).getDate()+"-"+new Date(i.auth.expiry).getHours()+"-"+new Date(i.auth.expiry).getMinutes()===t&&o.push("/login")};return l.a.createElement("nav",{className:"navbar p-0 fixed-top d-flex flex-row"},l.a.createElement("div",{className:"navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center"},l.a.createElement(f.b,{className:"navbar-brand brand-logo-mini",to:"/"},l.a.createElement("img",{src:a(462),alt:"logo"}))),l.a.createElement("div",{className:"navbar-menu-wrapper flex-grow d-flex align-items-stretch"},l.a.createElement("button",{ref:d,className:"navbar-toggler align-self-center hamburger",type:"button",onClick:()=>document.body.classList.toggle("sidebar-icon-only")},l.a.createElement("span",{className:"mdi mdi-menu"})),l.a.createElement(H.a,{style:{alignItems:"center",width:"100%"},className:"nav_items_upload"},l.a.createElement(F.a,{lg:3,md:4,xs:12,sm:12},l.a.createElement(A,null)),l.a.createElement(F.a,{lg:6,md:6,xs:12,sm:12}),l.a.createElement(F.a,{lg:3,md:2,xs:12,sm:12},l.a.createElement(I,null))),l.a.createElement("div",{className:"button-container",style:{display:"flex",justifyContent:"space-between",margin:"20px auto",width:"fit-content"}},i.showFileViewer&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:()=>r(!c),className:"btn btn-lg btn-secondary text-center cursor-pointer p-2"}," ",c?"Hide":"Graph"),l.a.createElement("div",{onClick:()=>{i.showFileViewer&&m({type:"TOGGLE_PDF_VIEWER"})},className:"btn btn-lg btn-secondary text-center cursor-pointer p-2"}," ",i.showPdfViewer?"Show Text Editor":"Show PDF"))),l.a.createElement("button",{className:"navbar-toggler navbar-toggler-right d-lg-none align-self-center",type:"button",onClick:()=>{document.querySelector(".sidebar-offcanvas").classList.toggle("active")}},l.a.createElement("span",{className:"mdi mdi-format-line-spacing"})),l.a.createElement("button",{className:"btn btn-md bg-danger text-center cursor-pointer p-2 text-white align-self-center log-out-button",type:"button",onClick:()=>m({type:"LOG_OUT"})},"Log Out")))},V=a(109),G=(a(468),a(521)),P=a(522),R=a(523),z=a(516),M=(a(470),a(32));var U=e=>{let{publicId:t,pdfDocumentName:a}=e;const[r,c]=Object(n.useState)([{id:1,nickName:"",message:"Hello there!",type:"me"}]),[s,o]=Object(n.useState)(""),i=Object(M.b)();Object(n.useEffect)(()=>{if(i){const e=e=>{console.log("Received response:",e);const t={id:r.length+1,nickName:"",message:e.recommendation,type:"me"};c(e=>[...e,t])};return i.on("openai-query-response",e),()=>{i.off("openai-query-response",e)}}},[i]);const m=()=>{!function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Yahya";if(e.trim()){console.log("Sending message:",e);const l={id:r.length+1,nickName:n,message:e,type:"Yahya"===n?"user":"me",publicId:t,pdfDocumentName:a};c(e=>[...e,l]),"Yahya"===n&&i&&(console.log("Emitting to socket:",e),i.emit("openai-chat",{query:l}))}}(s),o("")};return l.a.createElement("div",{id:"chat",className:"--dark-theme"},l.a.createElement("div",{className:"chat__conversation-board"},r.map((e,t)=>l.a.createElement("div",{key:t,className:"chat__conversation-board__message-container ".concat("me"===e.type?"me":"user")},l.a.createElement("div",{className:"chat__conversation-board__message__person"},"me"===e.type&&l.a.createElement("img",{src:"/static/media/scaletransm2.5eb52ef8.png",alt:e.nickName,style:{width:"35px",height:"35px",borderRadius:"50%"}}),l.a.createElement("span",{className:"chat__conversation-board__message__person__nickname"},e.nickName)),l.a.createElement("div",{className:"chat__conversation-board__message__context"},l.a.createElement("p",{className:"chat__conversation-board__message__bubble ".concat("user"===e.type?"user-message":"")},e.message))))),l.a.createElement("div",{className:"chat__conversation-panel"},l.a.createElement("input",{className:"chat__conversation-panel__input",placeholder:"Ask Casebook AI a question about this document...",value:s,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()}}),l.a.createElement("button",{className:"chat__conversation-panel__button",onClick:m},l.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M2 21l21-9L2 3v7l15 2-15 2v7z",fill:"currentColor"})))))};a(471);const W=e=>{document.location.hash="pdf-highlight-".concat(e.id)};var q=function(){const{state:e,dispatch:t}=Object(n.useContext)(ae),[a,r]=Object(n.useState)([]),[s,o]=Object(n.useState)({height:720,width:300}),[i,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!1),[h,g]=Object(n.useState)(),[p,E]=Object(n.useState)(0),[f,b]=Object(n.useState)(""),[w,y]=Object(n.useState)(0),[v,N]=Object(n.useState)(0),k=(e,t)=>{N((e+1)/t*100)},x=()=>{const e=a.filter(e=>e.comment.text.toUpperCase().includes(f));if(0===e.length)return void alert("No highlights available for '".concat(f,"'"));const t=e.findIndex(e=>e===a[p]),n=e[(t-1+e.length)%e.length];E(a.indexOf(n)),W(n),k(a.indexOf(n),e.length),_()},O=()=>{const e=a.filter(e=>e.comment.text.toUpperCase().includes(f));if(0===e.length)return;const t=e.findIndex(e=>e===a[p]),n=(t+1)%e.length;if(0===n&&t===e.length-1)return;const l=e[n];E(a.indexOf(l)),W(l),k(a.indexOf(l),e.length),_()},S=e=>{b(e);const t=a.filter(t=>""===e||t.comment.text.toUpperCase().includes(e.toUpperCase()));y(t.length),t.length>0?(E(a.indexOf(t[0])),k(0,t.length),W(t[0])):(E(-1),N(0),a.length>0?(E(0),W(a[0]),k(0,a.length)):document.location.hash="")};Object(n.useEffect)(()=>{if(e.currentFile){let t=!1;const a=e.fileHighlights.reduce((a,n)=>{if(n.name===e.currentFile.name){const e=n.highlights.filter(e=>"OTHER"!==e.comment.text&&(!f||e.comment.text.toUpperCase().includes(f)));a.push(...e),t=!0}return a},[]);r(a),t&&0!==a.length||r([]),E(0)}},[e.currentFile,e.fileHighlights,f]);const _=()=>{setTimeout(()=>{const e=document.querySelector(".newcard.active");e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},0)};return _(),l.a.createElement(V.Resizable,{className:"box",width:s.width,onResize:(e,t)=>{let{size:a}=t;return o({width:a.width})},resizeHandles:["e"]},l.a.createElement("div",{className:"sidebarnew",style:{width:"36vw"}},l.a.createElement("div",{className:"progress-container",style:{width:"100%",backgroundColor:"#222d37",height:"1vh",margin:"1vh 0"}},l.a.createElement("div",{className:"progress-bar",style:{width:"".concat(v,"%"),height:"5px",backgroundColor:"#2e5f8a"}})),l.a.createElement("div",{className:"highlight-actions"},l.a.createElement("button",{className:"btn btn-secondary",onClick:e=>{e.stopPropagation(),x()}},"Previous"),l.a.createElement(G.a,null,l.a.createElement(P.a,{caret:!0,color:"warning"},"Category"),l.a.createElement(R.a,null,l.a.createElement(z.a,{header:!0},"Jump to"),l.a.createElement(z.a,{onClick:()=>S("AXIOM")},"Axiom"),l.a.createElement(z.a,{onClick:()=>S("ISSUE")},"Issue"),l.a.createElement(z.a,{onClick:()=>S("LEGAL_TEST")},"Legal Test"),l.a.createElement(z.a,{onClick:()=>S("CONCLUSION")},"Conclusion"),l.a.createElement(z.a,{divider:!0}))),l.a.createElement("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),O()}},"Next")),l.a.createElement("div",{className:"sidebar__highlights",onWheel:e=>{const t=e.deltaY;e.preventDefault(),t<0?x():t>0&&O(),_()},style:{overflowY:"scroll",height:"calc(17vh)",position:"relative"}},a.length>0?a.map((e,t)=>l.a.createElement("div",{className:"newcard ".concat(t===p?"active":""),key:t,onClick:()=>(e=>{E(e),W(a[e])})(t)},l.a.createElement("div",null,l.a.createElement("strong",null,Object(c.a)(e.comment.text)),e.content.text&&l.a.createElement("blockquote",null,"".concat(e.content.text.slice(0,90).trim(),"\u2026")),e.content.image&&l.a.createElement("div",{className:"highlight__image",style:{marginTop:"0.5rem"}},l.a.createElement("img",{src:e.content.image,alt:"Screenshot"}))))):l.a.createElement("div",{className:"no-highlights"},"No Highlights!")),l.a.createElement("div",{className:"description"},l.a.createElement(U,{publicId:e.auth.userPublicId,pdfDocumentName:e.currentFile&&e.currentFile.name}))))},B=a(237),J=a(238);var Y=function(e){const[t,a]=Object(n.useState)([]),{state:r,dispatch:c}=Object(n.useContext)(ae),s=Object(M.b)(),[i,m]=Object(n.useState)(null);return Object(n.useEffect)(()=>{if(0!==r.graphData.length&&(async()=>{const e=(await o()("".concat(N.a,"/get-graphdata"),{headers:{"x-access-token":r.auth&&r.auth.authToken}})).data;let t=r.currentFile&&r.currentFile.name?r.currentFile.name:"";e&&e.graphdata&&e.graphdata.length&&e.graphdata.filter(e=>{if(e.fileName==t)return delete e.fileName,a(e),e}),e&&e.length>0&&c({type:"FETCH_FILE_HIGHLIGHTS",payload:e.highlights})})(),s)return s.on("new-graph-nodes-reciever",e=>{console.log("Received new Graph data:",e),a(e)}),()=>{s.off("new-graph-nodes-reciever")}},[r,s]),l.a.createElement(n.Fragment,null,!Array.isArray(t)&&l.a.createElement("div",{className:"graph__container"},t&&l.a.createElement(J.Graph,{id:"graph-id",data:t,key:Math.round((new Date).getTime()+Math.random()),config:{automaticRearrangeAfterDropNode:!0,collapsible:!1,directed:!1,focusAnimationDuration:10,focusZoom:1,freezeAllDragEvents:!1,height:710,highlightDegree:.1,highlightOpacity:1,linkHighlightBehavior:!0,maxZoom:8,minZoom:.1,nodeHighlightBehavior:!0,panAndZoom:!1,staticGraph:!1,staticGraphWithDragAndDrop:!1,width:50,d3:{alphaTarget:.05,gravity:-150,linkLength:90,linkStrength:2,disableLinkForce:!1},node:{color:"#d3d3d3",fontColor:"#d3d3d3",fontSize:12,fontWeight:"normal",highlightColor:"lightgreen",highlightFontSize:17,highlightFontWeight:"Bold",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",labelProperty:"id",mouseCursor:"pointer",opacity:1,renderLabel:!0,size:200,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle"},link:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",labelProperty:"label",mouseCursor:"pointer",opacity:1,renderLabel:!1,semanticStrokeWidth:!1,strokeWidth:1.5,markerHeight:6,markerWidth:6,strokeDasharray:0,strokeDashoffset:0,strokeLinecap:"butt"}},onClickGraph:function(e){},onClickNode:async e=>{try{const t=await o.a.post("".concat(N.a,"/get-node-url"),{nodeId:e},{headers:{"x-access-token":r.auth&&r.auth.authToken}});t.data&&t.data.url?window.open(t.data.url,"_blank"):console.error("No URL found for the given Node ID")}catch(t){console.error("Error fetching node URL:",t)}},passive:!0,onDoubleClickNode:function(e,t){const a=r.nodesData[e];a&&window.open(a.frontend_url,"_blank")},onRightClickNode:function(e,t,a){},onClickLink:function(e,t){},onRightClickLink:function(e,t,a){},onMouseOverNode:function(e,t){const a=r.nodesData[t.id];if(a){c({type:"SET_NODE_DATA",payload:a});let e=r.graphData.nodes.map(e=>e.id===t.id?{...e,fontSize:16}:{...e,fontSize:8});c({type:"SET_GRAPH_DATA",payload:{...r.graphData,nodes:e}})}},onMouseOutNode:function(e,t){},onMouseOverLink:function(e,t){},onMouseOutLink:function(e,t){},onNodePositionChange:function(e,t,a){},onZoomChange:function(e,t){}})),!1)},Q=a(519),K=a(113),Z=a(143),X=a(46),$=a(105);a(506);var ee=function(e){let{data:t}=e;console.log("Accordion Renderer Data:",t);const[a,r]=Object(n.useState)(""),[c,s]=Object(n.useState)([]),[o,i]=Object(n.useState)(""),[m,d]=Object(n.useState)(0),{state:u,dispatch:h}=Object(n.useContext)(ae),[g,p]=Object(n.useState)(t),E=Object(M.b)(),f=Object(n.useRef)();function b(e){let{children:t,eventKey:a,callback:r}=e;const c=Object(n.useContext)(X.a),s=Object($.b)(a,()=>r&&r(a)),o=c===a;return l.a.createElement("div",{className:"accordion-card__header-items"},l.a.createElement("div",{className:"accordion-card__active-tab"},o?l.a.createElement("span",{className:"online"},l.a.createElement("i",{className:"mdi mdi-checkbox-blank-circle"})):l.a.createElement("span",{className:"offline"},l.a.createElement("i",{className:"mdi mdi-checkbox-blank-circle"}))),l.a.createElement("button",{type:"button",className:"header-button",onClick:s},t),l.a.createElement("div",{className:"accordion-card__active-tab"},o?l.a.createElement("i",{className:"mdi mdi-chevron-up"}):l.a.createElement("i",{className:"mdi mdi-chevron-down"})))}return Object(n.useEffect)(()=>{0===t.length&&u.accordionSections&&u.accordionSections.length>0?p(u.accordionSections):p(t)},[t,u.accordionSections]),Object(n.useEffect)(()=>{if(E)return E.on("accordion-response",e=>{console.log("Received accordion-response:",e),p(e)}),()=>{E.off("accordion-response")}},[E]),Object(n.useEffect)(()=>{console.log("Accordion Renderer Data:",g)},[g]),Object(n.useEffect)(()=>{let e=f.current,t=e.querySelectorAll(".accordion"),a=c[m];t[a]&&e.scrollTo({behavior:"smooth",top:t[a].offsetTop})},[m]),l.a.createElement("div",null,l.a.createElement("div",{className:"accordion-container",ref:f},Array.isArray(g)&&g.map((e,t)=>l.a.createElement(Z.a,{key:t,activeKey:c.includes(t)?0===t?"0":t:0===o?"0":o,onSelect:e=>((e,t)=>{let a=[...c];if(c.includes(t)){let e=c.indexOf(t);a.splice(e,1),s(a)}else i(0===e?"0":e)})(e,0===t?"0":t)},l.a.createElement(K.a,{className:"accordion-card"},l.a.createElement(K.a.Header,{className:"accordion-card__header"},l.a.createElement(b,{eventKey:0===t?"0":t},e.clause)),l.a.createElement(Z.a.Collapse,{eventKey:0===t?"0":t},l.a.createElement(K.a.Body,{className:"accordion-card__body"},e.text)))))))};var te=e=>{let{createNotes:t,showGraph:a,showGraphModal:r,setShowGraphModal:c,setCreateNotes:s,setShowGraph:o}=e;const{state:i}=Object(n.useContext)(ae),[m,d]=Object(n.useState)({height:720,width:250});return Object(n.useEffect)(()=>{console.log("Accordion Sections Updated:",i.accordionSections)},[i.accordionSections]),l.a.createElement(V.Resizable,{className:"box",height:720,axis:"x",width:250,onResize:(e,t)=>{let{size:a}=t;d({height:a.height,width:a.width})},resizeHandles:["w"]},l.a.createElement("div",{className:"sidebarnew",style:{minWidth:"20%",width:"250px",height:"100vh"}},l.a.createElement("div",null,t&&l.a.createElement(S.a,{id:i.auth&&i.auth.userPublicId,fileName:i.currentFile&&i.currentFile.name,showTextEditor:t,setShowTextEditor:s}),!r&&a&&l.a.createElement(Y,null),r&&l.a.createElement(Q.a,{style:{color:"#050505"},show:r,onHide:()=>c(!1),backdrop:"static",size:"lg",centered:!0},l.a.createElement(Q.a.Header,{closeButton:!0},l.a.createElement(Q.a.Title,{id:"example-modal-sizes-title-sm"},"Graph")),l.a.createElement(Q.a.Body,null,l.a.createElement(Y,null))),i.accordionSections&&l.a.createElement(ee,{data:i.accordionSections}))))};const ae=Object(n.createContext)();t.b=function(){const[e,t]=Object(n.useReducer)(E,p),[a,r]=Object(n.useState)(!1),[c,s]=Object(n.useState)(!1),[o,i]=Object(n.useState)(!1);return Object(n.useEffect)(()=>()=>{t({type:"HIDE_METADATA_VIEWER"})},[]),l.a.createElement(ae.Provider,{value:{state:e,dispatch:t}},l.a.createElement(M.a,null,l.a.createElement(f.a,null,l.a.createElement(b.d,null,l.a.createElement(b.b,{path:"/login"},l.a.createElement(O,null)),l.a.createElement(b.b,{path:"/register"},l.a.createElement(k,null)),l.a.createElement(b.b,{exact:!0,path:"/dashboard"},l.a.createElement("div",{className:"container-scroller"},l.a.createElement(j,null),l.a.createElement("div",{className:"container-fluid page-body-wrapper"},l.a.createElement(L,{setCreateNotes:r,setShowGraph:s,showGraph:c,setShowGraphModal:i}),l.a.createElement("div",{className:"main-panel"},l.a.createElement("div",{className:"show_side",style:{display:"flex"}},!0===e.showHighlight&&""!==e.searchQuery&&l.a.createElement(y,null),!0===e.showFileViewer&&l.a.createElement(q,null),l.a.createElement("div",{className:"content-wrapper"},l.a.createElement(u,{showFileViewer:e.showFileViewer,showDashboardView:e.showDashboardView,showHighlight:e.showHighlight,showProfileView:e.showProfileView,showFeedView:e.showFeedView,showTextAnonymizerView:e.showTextAnonymizerView,showLawsReader:e.showLawsReader,showGptView:e.showGptView}),e.showDashboardView&&e.showMetadataViewer&&l.a.createElement(B.a,{files:e.files})),!0===e.showHighlight&&""!==e.searchQuery&&l.a.createElement(w,null),e.showFileViewer&&l.a.createElement(te,{createNotes:a,showGraph:c,showGraphModal:o,setShowGraphModal:i,setCreateNotes:r,setShowGraph:s})))))),l.a.createElement(b.a,{to:"/login"})))))}},85:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=a(254),c=a.n(r),s=a(255),o=a.n(s),i=a(256),m=a.n(i),d=a(257),u=a.n(d),h=a(258),g=a.n(h),p=a(259),E=a.n(p);t.a=function(e){return c()().use(o.a).use(g.a).use(m.a).use(E.a).use(u.a,{createElement:l.a.createElement}).processSync(e).result}},95:function(e,t,a){e.exports=a.p+"static/media/scaletransm2.5eb52ef8.png"},97:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(1),l=a.n(n),r=a(262),c=a.n(r),s=a(28),o=a(117),i=a(146),m=(a(443),a(84)),d=a(116),u=a(263),h=a(264),g=a(32);const p=[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],["blockquote","code-block"],["clean"]];function E(e){let{id:t,fileName:a,showTextEditor:r,setShowTextEditor:E}=e;const f=t,[b,w]=Object(n.useState)(),{state:y}=Object(n.useContext)(m.a),[v,N]=Object(n.useState)(!1),[k,x]=Object(n.useState)([]),[O,S]=Object(n.useState)([]),[_,C]=Object(n.useState)(""),[T,D]=Object(n.useState)({recommendations:0,caselaw:0,clause:0}),[j,I]=Object(n.useState)(!1),[A,H]=Object(n.useState)(!1),[F,L]=Object(n.useState)(!1),[V,G]=Object(n.useState)(!1),[P,R]=Object(n.useState)(-1),z=Object(g.b)();Object(n.useEffect)(()=>{r&&D({recommendations:0,caselaw:0,clause:0})},[r]),Object(n.useEffect)(()=>{if(!z||!b)return;U();const e=e=>{let t="";e.text_body&&(t=e.text_body),t?b.setText(t):b.setText("Document not found or is empty."),b.enable()};return z.on("document-loaded",e),()=>{z.off("document-loaded",e)}},[z,b]),Object(n.useEffect)(()=>{if(null==z||null==b)return;const e=setInterval(()=>{z.emit("save-document",b.getContents())},15e3);return()=>{clearInterval(e)}},[z,b]),Object(n.useEffect)(()=>{if(null==z||null==b)return;const e=e=>{b.updateContents(e)};return z.on("receive-changes",e),()=>{z.off("receive-changes",e)}},[z,b]),Object(n.useEffect)(()=>{if(null!=b&&y.highlightTextForEditor){const e=b.getLength();b.insertText(e,"\n"+y.highlightTextForEditor)}},[b,y.highlightTextForEditor]);const M=Object(n.useCallback)(e=>{if(null==e)return;e.innerHTML="";const t=document.createElement("div");e.append(t);const a=new c.a(t,{theme:"snow",modules:{toolbar:p}});a.enable(),w(a),N(!0)},[]),U=()=>{z.emit("get-document",JSON.stringify({documentId:f,fileName:a}))},W=e=>{if(console.log("Attempting to request ".concat(e,"...")),z&&z.connected&&b){console.log("Socket is connected, sending ".concat(e," request."));const t=b.getContents(),n=T[e]+1;console.log("counter number is ".concat(n," request."));const l={content:t,documentId:f,filename:a,requestCount:n};switch(e){case"recommendations":z.emit("openai-get-recommendation",l),I(!0);break;case"caselaw":z.emit("openai-get-caselaw",l),H(!0);break;case"clause":z.emit("openai-get-clause",l),L(!0);break;default:console.log("Unknown request type")}D({...T,[e]:n})}else console.log("Socket is not connected or Quill is not initialized.")};Object(n.useEffect)(()=>{if(!z||!v)return;const e=e=>{S(t=>[...t,e.recommendation]),I(!1),H(!1),G(!1),L(!1)};return z.on("openai-recommendations",e),z.on("openai-caselaw",e),z.on("openai-clause",e),z.on("openai-query-response",e),()=>{z.off("openai-recommendations",e),z.off("openai-caselaw",e),z.off("openai-clause",e),z.off("openai-query-response",e)}},[z,v,I,H,G,L]),Object(n.useEffect)(()=>{if(!z||!v)return;const e=e=>{x(t=>[e.message,...t]),I(!1),H(!1),G(!1),L(!1),(e=>{const t=b.getLength();b.insertText(t,"\n"+e+"\n\n"),b.setSelection(t+e.length+2)})(e.message)};return z.on("openai_response",e),()=>{z.off("openai_response",e)}},[z,v,I,H,G,L]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{padding:"10px",backgroundColor:"#191c24",textAlign:"center"}},l.a.createElement(s.a,{variant:"outline-info",onClick:()=>{b.setText("")},style:{margin:"10px"}},l.a.createElement(d.b,null)," New Document"),l.a.createElement(s.a,{variant:"outline-success",onClick:U,style:{margin:"10px"}},l.a.createElement(d.a,null)," Edit Document"),l.a.createElement(s.a,{variant:"outline-primary",onClick:()=>{if(z&&z.connected){const e={content:"Your input data here",documentId:f,filename:a};console.log("Appeal clicked. Emitting openai_appeal_call with data:",e),z.emit("openai_appeal_call",e)}else console.log("Socket is not connected.")},style:{margin:"10px"}},l.a.createElement(d.c,null)," Appeal")),l.a.createElement("div",{style:{color:"white",background:"#191c24",padding:"20px"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},l.a.createElement("h2",null,"Notepad"),l.a.createElement("div",null,l.a.createElement(s.a,{variant:"primary",onClick:()=>{null!=z&&null!=b&&(z.emit("save-document",b.getContents()),(async()=>{const e=b.getContents(),t=await u.pdfExporter.generatePdf(e);Object(h.saveAs)(t,"current-draft-on-case.pdf")})())},style:{marginRight:"10px"}},"Save"),l.a.createElement(s.a,{variant:"secondary",onClick:()=>{E(!1)},style:{fontSize:"16px",lineHeight:"1",padding:"0.375rem 0.75rem"}},l.a.createElement("span",{"aria-hidden":"true"},"\xd7")))),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"76vh"}},l.a.createElement("div",{style:{flex:7,marginRight:"20px",background:"#2a3038",borderRadius:"8px",padding:"10px"},ref:M}),l.a.createElement("div",{style:{flex:3,paddingLeft:"2px",overflowY:"auto",background:"#2A3038",borderRadius:"8px",padding:"10px"}},l.a.createElement(s.a,{variant:"outline-primary",onClick:()=>W("recommendations")},j?l.a.createElement(o.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Insights"),l.a.createElement(s.a,{variant:"outline-success",onClick:()=>W("caselaw")},A?l.a.createElement(o.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Caselaw"),l.a.createElement(s.a,{variant:"outline-info",onClick:()=>W("clause")},F?l.a.createElement(o.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Clause"),l.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse"}},O.map((e,t)=>l.a.createElement("div",{key:t,className:"sidebar__highlight",style:{padding:"10px",margin:"5px 0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"2A3038",animation:t===P?"flash 1s infinite alternate":"none"},onMouseEnter:()=>R(t),onMouseLeave:()=>R(-1)},l.a.createElement("span",{style:{fontSize:"10px"}},e),l.a.createElement(s.a,{variant:"outline-secondary",onClick:()=>(e=>{const t=b.getLength();b.insertText(t,"\n"+e+"\n\n"),b.setSelection(t+e.length+2)})(e)},"Insert")))))),l.a.createElement("div",{className:"w-100 d-flex justify-content-between align-items-center",style:{marginTop:"10px"}},l.a.createElement(i.a,{type:"text",placeholder:"Ask Casebook AI a question",value:_,onChange:e=>C(e.target.value),className:"nav-link mt-2 mt-md-0 d-none d-lg-flex search mx-3"}),l.a.createElement(s.a,{variant:"info",onClick:()=>{if(!z||!b||!_)return;const e=b.getContents(),t={query:_,content:e,documentId:f,filename:a};z.emit("openai-query",t),G(!0),C("")}},V?l.a.createElement(o.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")):"Send")),l.a.createElement("style",null,"\n                        @keyframes flash {\n                            from {\n                                background-color: #2A3038;\n                            }\n                            to {\n                                background-color: #32435a;\n                            }\n                        }\n                    ")))}}},[[280,2,3]]]);
//# sourceMappingURL=main.a4177074.chunk.js.map