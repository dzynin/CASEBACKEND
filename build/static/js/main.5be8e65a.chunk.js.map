{"version":3,"sources":["TextEditor.js","utils.js","shared/Spinner.js","Dashboard/PdfGraphFunc.js","Dashboard/AccordionRenderer.js","Dashboard/PdfViewerSide.js","Dashboard/FileMetadataViewer.js","images/faces/face0.jpeg","shared/Highlight.js","AppRoutes.js","shared/Utility.js","Reducer/InitialState.js","Reducer/Reducers.js","Dashboard/NodePreview.js","Dashboard/NodesList.js","Dashboard/Register.js","Dashboard/Login.js","shared/SideNav.js","shared/Profile.js","shared/Sidebar.js","Dashboard/HighlightButton.js","Dashboard/FileUploadComponent.js","Dashboard/Search.js","shared/Navbar.js","shared/Chatbox.js","Dashboard/FileViewer.js","App.js","images/logo-mini.svg","serviceWorker.js","index.js","Dashboard/markdown.js","images/scaletransm2.png"],"names":["TOOLBAR_OPTIONS","header","font","list","color","background","script","align","TextEditor","_ref","id","fileName","showTextEditor","setShowTextEditor","documentId","socket","setSocket","useState","quill","setQuill","openaiResponses","setOpenaiResponses","state","useContext","UserContext","editorMode","setEditorMode","isQuillReady","setIsQuillReady","openaiRecommendations","setOpenaiRecommendations","query","setQuery","requestCounter","setRequestCounter","recommendations","caselaw","clause","responseReceived","setResponseReceived","loadingRecommendations","setLoadingRecommendations","loadingCaselaw","setLoadingCaselaw","loadingClause","setLoadingClause","loadingSend","setLoadingSend","latestReceivedIndex","setLatestReceivedIndex","useEffect","s","io","disconnect","loadDocument","document","documentText","text_body","setText","enable","on","off","interval","setInterval","emit","getContents","clearInterval","handler","delta","updateContents","highlightTextForEditor","length","getLength","insertText","wrapperRef","useCallback","wrapper","innerHTML","editor","createElement","append","q","Quill","theme","modules","toolbar","JSON","stringify","handleClose","handleRequest","type","console","log","concat","connected","quillContent","currentCount","requestData","content","filename","requestCount","newSocket","recommendationHandler","data","currentRecommendations","recommendation","currentResponses","message","text","setSelection","insertTextIntoQuill","React","Fragment","Modal","style","show","onHide","backdrop","size","centered","Header","closeButton","backgroundColor","textAlign","display","justifyContent","alignItems","Title","Button","variant","onClick","handleNoteSave","async","pdfAsBlob","pdfExporter","generatePdf","saveAs","exportAsPDF","marginRight","fontSize","lineHeight","padding","aria-hidden","Body","height","flexDirection","flex","ref","paddingLeft","overflowY","Spinner","animation","role","className","map","index","key","margin","onMouseEnter","onMouseLeave","highlightContent","position","insertHighlightIntoQuill","Footer","FormControl","placeholder","value","onChange","e","target","handleSend","dataToSend","handleNewDocument","FaFile","handleEditDocument","FaBriefcase","handleAppeal","FaRegPaperPlane","BASE_URL_DEV","fetchAuth","auth","parse","localStorage","getItem","userId","authToken","userPublicId","username","fname","lname","city","country","organisation","email","expiry","Date","auth_token","PdfGraphFunc","props","obj","setObj","dispatch","graphData","allgraphs","axios","headers","currentFileName","currentFile","name","graphdata","filter","x","payload","highlights","Array","isArray","Graph","Math","round","getTime","random","config","automaticRearrangeAfterDropNode","collapsible","directed","focusAnimationDuration","focusZoom","freezeAllDragEvents","highlightDegree","highlightOpacity","linkHighlightBehavior","maxZoom","minZoom","nodeHighlightBehavior","panAndZoom","staticGraph","staticGraphWithDragAndDrop","width","d3","alphaTarget","gravity","linkLength","linkStrength","disableLinkForce","node","fontColor","fontWeight","highlightColor","highlightFontSize","highlightFontWeight","highlightStrokeColor","highlightStrokeWidth","labelProperty","mouseCursor","opacity","renderLabel","strokeColor","strokeWidth","svg","symbolType","link","semanticStrokeWidth","markerHeight","markerWidth","strokeDasharray","strokeDashoffset","strokeLinecap","onClickGraph","event","onClickNode","nodeId","passive","onDoubleClickNode","nodeData","nodesData","window","open","onRightClickNode","onClickLink","source","onRightClickLink","onMouseOverNode","nodes","n","onMouseOutNode","onMouseOverLink","onMouseOutLink","onNodePositionChange","y","onZoomChange","previousZoom","newZoom","errorText","AccordionRenderer","searchInput","setSearchInput","activeKeys","setActiveKeys","active","setActive","count","setCount","accordionData","setAccordionData","myRef","useRef","ContextAwareToggle","_ref2","children","eventKey","callback","currentEventKey","AccordionContext","decoratedOnClick","useAccordionToggle","isCurrentEventKey","accordionSections","accordionContainer","current","selectAccordion","querySelectorAll","currIndex","scrollTo","behavior","top","offsetTop","d","Accordion","activeKey","includes","onSelect","accordionClickHandler","keyIndex","newActiveKeys","indexOf","splice","Card","Collapse","PdfViewerSide","createNotes","showGraph","showGraphModal","setShowGraphModal","setCreateNotes","setShowGraph","dimensions","setDimensions","Resizable","axis","onResize","resizeHandles","minWidth","FileMetadataViewer","files","onFileClick","Table","responsive","bordered","file","uploadDate","toLocaleDateString","summary","module","exports","Highlight","setState","PdfUrl","setPdfUrl","url","result_json","pdf_name","Object","keys","fetchData","marginBottom","highlight","location","hash","updateHash","float","idx","deleteHighlight","processMd","comment","marginTop","slice","trim","image","src","alt","pageNumber","resetHighlights","Dashboard","lazy","PdfViewer","AppRoutes","Suspense","fallback","showHighlight","showFileViewer","showDashboardView","showProfileView","showFeedView","showTextAnonymizerView","showGptView","showLawsReader","updateState","updateValues","updateHighlightStatus","newState","highlightColors","setItem","InitialState","fileHighlights","myPosts","allPosts","error","searchQuery","isModalOpen","default","legalTest","issue","conclusion","highlightTextsForEditor","reducer","action","Allfiles","fileNames","push","removeItem","fileUpdated","singleFile","newHighlight","updatedHighlights","setNodeData","dangerouslySetInnerHTML","__html","preview","join","setGraphData","setTimeout","undefined","handleMouseEnter","handleMouseLeave","docket_number","Register","history","useHistory","userDetails","setUserDetails","password1","password2","require","preventDefault","response","fetch","method","body","json","ok","Link","to","Login","password","Form","Group","Control","SideNav","class","click","iconClass","Trans","transTitle","Profile","profileClick","authUser","authEmail","Dropdown","alignRight","Toggle","as","Menu","href","evt","Sidebar","fetchFilesAndGraphData","fetchHighlights","useSidebarLogic","result","Obj","_id","links","fileNew","element","CITATION","PROVISION","showFileViewerHandler","itemClickHandler","viewState","HighlightButton","hightlightResponse","setHightlightResponse","Search","setSearchQuery","Navbar","toggleButtonRef","authChe","savedAuth","timer","clearTimeout","datestring","getDate","getHours","getMinutes","beforFiveTime","alert","classList","toggle","Row","Col","lg","md","xs","sm","toggleOffcanvas","querySelector","ChatUI","propSocket","publicId","pdfDocumentName","messages","setMessages","nickName","inputText","setInputText","socketRef","handleResponse","newMessage","prevMessages","sender","arguments","sendMessage","msg","borderRadius","onKeyDown","viewBox","fill","xmlns","FileViewer","setHighlights","selectPdf","setSelectPdf","setShow","setIndex","currentHighlightIndex","setCurrentHighlightIndex","setFilter","totalHighlights","setTotalHighlights","highlightProgress","setHighlightProgress","updateProgress","currentIndex","total","handlePreviousHighlight","filteredHighlights","h","toUpperCase","currentFilteredIndex","findIndex","prevHighlight","scrollToActiveCard","handleNextHighlight","nextIndex","nextHighlight","handleFilterChange","newFilter","highlightUpdated","reduce","acc","item","validHighlights","activeCard","scrollIntoView","block","stopPropagation","UncontrolledDropdown","DropdownToggle","caret","DropdownMenu","DropdownItem","divider","onWheel","deltaY","handleHighlightClick","createContext","App","useReducer","Provider","Router","Switch","Route","path","exact","NodesList","NodePreview","Redirect","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","unified","use","math","remark2rehype","katex","rehype2react","processSync"],"mappings":"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","file":"static/js/main.5be8e65a.chunk.js","sourcesContent":["import React from \"react\";\nimport { useContext,useCallback, useEffect, useState } from \"react\";\nimport Quill from \"quill\";\nimport { FormControl, Modal, Button, Spinner } from \"react-bootstrap\"; // Import Spinner component\nimport \"quill/dist/quill.snow.css\";\nimport { io } from \"socket.io-client\";\nimport { UserContext } from \"./App\";\nimport { FaRegPaperPlane, FaBriefcase, FaFile } from 'react-icons/fa'; // Importing icons\nimport { pdfExporter } from \"quill-to-pdf\";\nimport { saveAs } from \"file-saver\";\n\n// Time in milliseconds to auto save the document\nconst SAVE_INTERVAL_MS = 15000;\n\n\n\n// Options available in toolbar\nconst TOOLBAR_OPTIONS = [\n\t[{ header: [1, 2, 3, 4, 5, 6, false] }],\n\t[{ font: [] }],\n\t[{ list: \"ordered\" }, { list: \"bullet\" }],\n\t[\"bold\", \"italic\", \"underline\"],\n\t[{ color: [] }, { background: [] }],\n\t[{ script: \"sub\" }, { script: \"super\" }],\n\t[{ align: [] }],\n\t[\"blockquote\", \"code-block\"],\n\t[\"clean\"],\n];\n\nexport default function TextEditor({\n\tid,\n\tfileName,\n\tshowTextEditor,\n\tsetShowTextEditor,\n}) {\n\tconst documentId = id;\n\tconst [socket, setSocket] = useState();\n\tconst [quill, setQuill] = useState();\n\t// const [openaiResponse, setOpenaiResponse] = useState(\"\");\n\tconst [openaiResponses, setOpenaiResponses] = useState([]);\n    const { state } = useContext(UserContext);\n\tconst [editorMode, setEditorMode] = useState(null); // New state for tracking the editor mode\n\tconst [isQuillReady, setIsQuillReady] = useState(false);\n\tconst [openaiRecommendations, setOpenaiRecommendations] = useState([]);\n\tconst [query, setQuery] = useState('');\n\tconst [requestCounter, setRequestCounter] = useState({ recommendations: 0, caselaw: 0, clause: 0 });\n\tconst [responseReceived, setResponseReceived] = useState(false);\n\t// Add state variables to track loading status\n\tconst [loadingRecommendations, setLoadingRecommendations] = useState(false);\n\tconst [loadingCaselaw, setLoadingCaselaw] = useState(false);\n\tconst [loadingClause, setLoadingClause] = useState(false);\n\tconst [loadingSend, setLoadingSend] = useState(false);\n\tconst [latestReceivedIndex, setLatestReceivedIndex] = useState(-1);\n\n\n\n\tconst exportAsPDF = async () => {\n\t\tconst delta = quill.getContents(); // gets the Quill delta\n\t\tconst pdfAsBlob = await pdfExporter.generatePdf(delta); // converts to PDF\n\t\tsaveAs(pdfAsBlob, \"current-draft-on-case.pdf\"); // downloads from the browser\n\t  };\n\n\n\tuseEffect(() => {\n\t\t// Reset the request counter whenever the text editor is shown\n\t\tif (showTextEditor) {\n\t\t  setRequestCounter({ recommendations: 0, caselaw: 0, clause: 0 });\n\t\t}\n\t  }, [showTextEditor]);\n\t\n\t  \n\tuseEffect(() => {\n\t\t// const s = io(\"http://localhost:8000\");\n\t\tconst s = io(\"https://back.casebk.com\");  // Update the URL here\n\n\t\tsetSocket(s);\n\n\t\treturn () => {\n\t\t\ts.disconnect();\n\t\t};\n\t}, []);\n\n\t// To load Initial document\n\t// Assuming this useEffect hook handles loading the document.\n\tuseEffect(() => {\n\t\tif (!socket || !quill || editorMode !== 'edit_document' && editorMode !== 'appeal') return;\n\t  \n\t\tconst loadDocument = (document) => {\n\t\t  let documentText = '';\n\t  \n\t\t\n\t\t   if (document.text_body) {\n\t\t\tdocumentText = document.text_body;\n\t\t  }\n\t  \n\t\t  // Set the loaded text into Quill editor\n\t\t  if (documentText) {\n\t\t\tquill.setText(documentText);\n\t\t  } else {\n\t\t\tquill.setText('Document not found or is empty.');\n\t\t  }\n\t  \n\t\t  quill.enable(); // Enable the editor for editing\n\t\t};\n\t  \n\t\tsocket.on(\"document-loaded\", loadDocument);\n\t  \n\t\treturn () => {\n\t\t  socket.off(\"document-loaded\", loadDocument);\n\t\t};\n\t  }, [socket, quill, editorMode]);\n\t  \n  // To auto save document according to SAVE_INTERVAL_MS\n\tuseEffect(() => {\n\t\tif (socket == null || quill == null) return;\n\n\t\tconst interval = setInterval(() => {\n\t\t\tsocket.emit(\"save-document\", quill.getContents());\n\t\t}, SAVE_INTERVAL_MS);\n\n\t\treturn () => {\n\t\t\tclearInterval(interval);\n\t\t};\n\t}, [socket, quill]);\n\n\t// to revieve the changes done somewhere else in the same document\n\tuseEffect(() => {\n\t\tif (socket == null || quill == null) return;\n\n\t\tconst handler = (delta) => {\n\t\t\tquill.updateContents(delta);\n\t\t};\n\t\tsocket.on(\"receive-changes\", handler);\n\n\t\treturn () => {\n\t\t\tsocket.off(\"receive-changes\", handler);\n\t\t};\n\t}, [socket, quill]);\n\n    useEffect(() => {\n        if (quill != null && state.highlightTextForEditor) {\n            // Assuming you want to append the text at the end of the current document\n            const length = quill.getLength();\n            quill.insertText(length, \"\\n\" + state.highlightTextForEditor);\n            // Optionally, clear the highlight text from global state if not needed anymore\n            // dispatch({ type: 'SET_HIGHLIGHT_TEXT', payload: null });\n        }\n    }, [quill, state.highlightTextForEditor]);\n\n\n\tconst wrapperRef = useCallback((wrapper) => {\n\t\tif (wrapper == null) return;\n\t  \n\t\twrapper.innerHTML = \"\"; // Clear the wrapper\n\t\tconst editor = document.createElement(\"div\");\n\t\twrapper.append(editor);\n\t\tconst q = new Quill(editor, {\n\t\t  theme: \"snow\",\n\t\t  modules: { toolbar: TOOLBAR_OPTIONS },\n\t\t});\n\t  \n\t\tq.enable();\n\t\tsetQuill(q); // Set the Quill instance\n\t\tsetIsQuillReady(true); // Indicate that Quill is now ready\n\t  }, [editorMode]);\n\t\t  \n\t  const handleAppeal = () => {\n\t\tif (socket && socket.connected) {\n\t\t\t// Include documentId in the data being sent\n\t\t\tconst dataToSend = { \n\t\t\t\tcontent: 'Your input data here', // This can be any content you wish to send\n\t\t\t\tdocumentId: documentId, // Adding documentId to the payload\n\t\t\t\tfilename:fileName,\n\t\t\t\t\n\t\t\t};\n\t\t\tconsole.log('Appeal clicked. Emitting openai_appeal_call with data:', dataToSend);\n\t\t\tsocket.emit(\"openai_appeal_call\", dataToSend); // Emit the openai_appeal_call event with documentId\n\t\t\tsetEditorMode('appeal'); // Update editorMode to 'appeal'\n\t\t} else {\n\t\t\tconsole.log(\"Socket is not connected.\");\n\t\t}\n\t};\n\t\n\t\t\t\n\tconst insertTextIntoQuill = (text) => {\n\n\t\tconst length = quill.getLength();\n\t\tquill.insertText(length, \"\\n\" + text + \"\\n\\n\"); // Inserting text at the end\n\t\tquill.setSelection(length + text.length + 2); // Moving cursor to the end\n\t\t\n\n\t  };\n\t  \n\n\tconst insertHighlightIntoQuill = (highlightContent) => {\n\t\tconst position = quill.getLength(); // Get the position to insert at the end of the document\n\t\tquill.insertText(position, \"\\n\" + highlightContent + \"\\n\\n\"); // Insert the content with padding newlines\n\t\tquill.setSelection(position + highlightContent.length + 2); // Move cursor to the end of the inserted text\n\t};\n\t\n\t// Function to handle when the \"Edit Document\" option is selected\n\tconst handleEditDocument = () => {\n\t\tsetEditorMode('edit_document');\n\t\t// Emit the request only after ensuring 'editorMode' is updated and socket is available\n\t\t// Note: Moved to useEffect to ensure dependencies are correctly tracked\n\t};\n\n\tuseEffect(() => {\n\t\tif (editorMode === 'edit_document' && socket) {\n\t\t\tsocket.emit(\"get-document\", JSON.stringify({ documentId, fileName }));\n\t\t}\n\t}, [editorMode, socket, documentId, fileName]); // Dependencies ensure this runs only when editorMode changes to 'edit_document'\n\n\t\n\t// Function to handle when the \"New Document\" option is selected\n\tconst handleNewDocument = () => {\n\t\tsetEditorMode('new_document');\n\t\t// Setup for creating a new document\n\t};\n\n\n\t// to close note editor\n\tconst handleClose = () => {\n\t\tsetShowTextEditor(false);\n\t\tsocket.disconnect();\n\t};\n\n\t// called when save button in clicked\n\tconst handleNoteSave = () => {\n\t\tif (socket == null || quill == null) return;\n\t\tsocket.emit(\"save-document\", quill.getContents());\n\t\texportAsPDF();\n\t\t// handleClose();\n\t};\n\n\tconst handleRequest = (type) => {\n\t\tconsole.log(`Attempting to request ${type}...`);\n\t\tif (socket && socket.connected && quill) { // Ensure socket is connected and Quill is initialized\n\t\t  console.log(`Socket is connected, sending ${type} request.`);\n\t\t  const quillContent = quill.getContents(); // Get Quill content\n\t\t  const currentCount = requestCounter[type] + 1; // Increment the specific request count\n\t\t  console.log(`counter number is ${currentCount} request.`);\n\n\t\t  const requestData = { \n\t\t\tcontent: quillContent, // This can be any content you wish to send\n\t\t\tdocumentId: documentId, // Adding documentId to the payload\n\t\t\tfilename:fileName,\n\t\t\trequestCount: currentCount, // Include the incremented count in the request\n\n\t\t\t }; // Include Quill content in the request data\n\t\t  \n\t\t  // Emitting different events based on the type of request\n\t\t  switch (type) {\n\t\t\tcase \"recommendations\":\n\t\t\t  socket.emit(\"openai-get-recommendation\", requestData);\n\t\t\t  setLoadingRecommendations(true);\n\t\t\t  break;\n\t\t\tcase \"caselaw\":\n\t\t\t// console.log(`Emitting ${type} with data:`, requestData);\n\t\t\t  socket.emit(\"openai-get-caselaw\", requestData);\n\t\t\t  setLoadingCaselaw(true);\n\n\t\t\t  break;\n\t\t\tcase \"clause\":\n\t\t\t  socket.emit(\"openai-get-clause\", requestData);\n\t\t\t  setLoadingClause(true);\n\n\t\t\t  break;\n\t\t\tdefault:\n\t\t\t  console.log(\"Unknown request type\");\n\t\t  }\n\t\t  setRequestCounter({\n\t\t\t...requestCounter,\n\t\t\t[type]: currentCount, // Update the state with the new count\n\t\t  });\n\t\n\t\t} else {\n\t\t  console.log(\"Socket is not connected or Quill is not initialized.\");\n\t\t}\n\t  };\n\t  \n\n\tuseEffect(() => {\n\t\t// const newSocket = io(\"http://localhost:8000\");\n\t\tconst newSocket = io(\"https://back.casebk.com\");  // Update the URL here\n\n\t\tsetSocket(newSocket);\n\t\tconsole.log(\"Socket connection established\");\n\t\n\t\treturn () => {\n\t\t\tnewSocket.disconnect();\n\t\t\tconsole.log(\"Socket disconnected\");\n\t\t};\n\t}, []);\n\t\n\tuseEffect(() => {\n\t\tif (editorMode === 'edit_document' && socket) {\n\t\t\tconsole.log(`Requesting document: ${documentId}, FileName: ${fileName}`);\n\t\t\tsocket.emit(\"get-document\", { documentId, fileName });\n\t\t}\n\t}, [editorMode, socket, documentId, fileName]);\n\t\n\tuseEffect(() => {\n\t\tif (!socket || !isQuillReady) return; // Check if quill is ready\n\t  \n\t\tconst recommendationHandler = (data) => {\n\t\t//   setOpenaiRecommendations(currentRecommendations => [data.recommendation, ...currentRecommendations]);\n\t\t  setOpenaiRecommendations(currentRecommendations => [...currentRecommendations, data.recommendation]);\n\t\t  setLoadingRecommendations(false); // Update loading state to false when recommendation is received\n\t\t  setLoadingCaselaw(false);\n\t\t  setLoadingSend(false);\n\t\t  setLoadingClause(false);\n\n\t\t};\n\t  \n\t\tsocket.on(\"openai-recommendations\", recommendationHandler);\n\t\tsocket.on(\"openai-caselaw\", recommendationHandler); // Listen for caselaw responses\n\t\tsocket.on(\"openai-clause\", recommendationHandler); // Listen for clause responses\n\t\tsocket.on(\"openai-query-response\", recommendationHandler);\n\n\t\treturn () => {\n\t\t  socket.off(\"openai-recommendations\", recommendationHandler);\n\t\t  socket.off(\"openai-caselaw\", recommendationHandler);\n\t\t  socket.off(\"openai-clause\", recommendationHandler);\n\t\t  socket.off(\"openai-query-response\", recommendationHandler);\n\n\t\t};\n\t  }, [socket, isQuillReady,setLoadingRecommendations,setLoadingCaselaw,setLoadingSend,setLoadingClause]); // Ensure dependencies are correctly managed\n\t  \n\n\tuseEffect(() => {\n\t\tif (!socket || !isQuillReady) return; // Check if quill is ready\n\t  \n\t\tconst handler = (data) => {\n\t\t  setOpenaiResponses(currentResponses => [data.message, ...currentResponses]);\n\t\t//   setOpenaiResponses(currentResponses => [ ...currentResponses,data.message]);\n\t\t\tsetLoadingRecommendations(false); // Update loading state to false when recommendation is received\n\t\t\tsetLoadingCaselaw(false);\n\t\t\tsetLoadingSend(false);\n\t\t\tsetLoadingClause(false);\n\n\t\t  insertTextIntoQuill(data.message); // Automatically insert the response into Quill\n\t\t};\n\t  \n\t\tsocket.on(\"openai_response\", handler);\n\n\t\treturn () => {\n\t\t  socket.off(\"openai_response\", handler);\n\n\t\t};\n\t  }, [socket, isQuillReady,setLoadingRecommendations,setLoadingCaselaw,setLoadingSend,setLoadingClause]); // Add `isQuillReady` as a dependency\n\t  \n\tconst handleSend = () => {\n\t\tif (!socket || !quill || !query) return; // Check if socket and Quill are initialized, and query is not empty\n\t\n\t\tconst quillContent = quill.getContents(); // Get Quill content\n\t\tconst dataToSend = { \n\t\t\tquery: query,\n\t\t\tcontent: quillContent,\n\t\t\tdocumentId: documentId,\n\t\t\tfilename: fileName\n\t\t};\n\t\n\t\t// socket.emit(\"openai-query\", dataToSend); // Emit the openai-query event with the data\n\t\tsocket.emit(\"openai-query\", dataToSend); // Emit the openai-query event with the data\n\t\t\n\t\tsetLoadingSend(true);\n\n\t\t// Optionally clear the query box after sending the query\n\t\tsetQuery('');\n\t\n\t\t// You might also want to handle any UI changes or feedback upon sending the query\n\t};\n\t\n\n\t  \n\treturn (\n\t\t<React.Fragment>\n\t\t  {!editorMode ? (\n\t\t\t<Modal show={showTextEditor} onHide={handleClose} backdrop=\"static\" centered\n\t\t\t\n\t\t>\n\t\t<Modal.Header closeButton style={{ backgroundColor: '#191c24', textAlign: 'center' }}>\n\t\t\t  <Modal.Title >Notepad</Modal.Title>\n\t\t\t  </Modal.Header >\n\t\t\t  <Modal.Body style={{ textAlign: 'center',background:'#191c24' }}>\n\t\t\t  <Button variant=\"outline-info\" onClick={handleNewDocument} style={{ margin: '10px' }}>\n\t\t\t\t  <FaFile /> New Document\n\t\t\t\t</Button>\n\n\t\t\t\t<Button variant=\"outline-success\" onClick={handleEditDocument} style={{ margin: '10px' }}>\n\t\t\t\t  <FaBriefcase /> Edit Document\n\t\t\t\t</Button>\n\n\t\t\t\t<Button variant=\"outline-primary\" onClick={handleAppeal} style={{ margin: '10px' }}>\n\t\t\t\t  <FaRegPaperPlane /> Appeal\n\t\t\t\t</Button>\n\n\t\t\t\t\n\t\t\n\t\t\t  </Modal.Body>\n\t\t\t</Modal>\n\t\t  ) : (\n\t\t\t<Modal\n\t\t\t  style={{ color: \"white\" }}\n\t\t\t  show={showTextEditor}\n\t\t\t  onHide={handleClose}\n\t\t\t  backdrop=\"static\"\n\t\t\t  size=\"xl\"\n\t\t\t  centered\n\t\t\t><Modal.Header closeButton={false} style={{ backgroundColor: '#191c24', textAlign: 'center', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n\t\t\t<Modal.Title>Notepad</Modal.Title>\n\t\t\t<div>\n\t\t\t  <Button variant=\"primary\" onClick={handleNoteSave} style={{ marginRight: '10px' }}>Save</Button>\n\t\t\t  <Button variant=\"secondary\" onClick={handleClose} style={{ fontSize: '16px', lineHeight: '1', padding: '0.375rem 0.75rem' }}>\n\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t  </Button>\n\t\t\t</div>\n\t\t  </Modal.Header>\n\t\t  \n\t\t\t\t<Modal.Body style={{ height: '76vh', background:'#191c24' }}>\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', height: '100%' }}>\n\t\t\t\t{/* <div style={{ flex: 2, paddingRight: '20px', overflowY: 'auto' }}>\n\t\t\t\t\t\t{state.highlightTextsForEditor && state.highlightTextsForEditor.length > 0 ? (\n\t\t\t\t\t\t\tstate.highlightTextsForEditor.map((highlight, index) => (\n\t\t\t\t\t\t\t\t<div key={index} className=\"sidebar__highlight\" style={{ \n\t\t\t\t\t\t\t\t\t// padding: '10px', \n\t\t\t\t\t\t\t\t\tmargin: '5px 0', \n\t\t\t\t\t\t\t\t\tdisplay: 'flex', \n\t\t\t\t\t\t\t\t\tflexDirection: 'column', // Stack content and button vertically\n\t\t\t\t\t\t\t\t\tjustifyContent: 'space-between', // Space between content and button\n\t\t\t\t\t\t\t\t\t// height: '100%' // Ensure the div takes full height to push the button to the bottom\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<strong style={{ fontSize: '10px' }}>{highlight.commentText}</strong>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: '10px' }}>{highlight.contentText}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-end', // Align button to the right\n\t\t\t\t\t\t\t\t\t\t// paddingTop: '10px' // Add some space between the text and the button\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t<Button variant=\"outline-secondary\" onClick={() => insertHighlightIntoQuill(highlight.contentText)}>Insert</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div> */}\n\n\t\t\t\t\t\n\t\t\t\t  <div style={{ flex: 7, marginRight: '20px' }} ref={wrapperRef}></div>\n\n\n\t\t\t\t  <div style={{ flex: 3, paddingLeft: '2px', overflowY: 'auto' }}>\n\t\t\t\t  <div style={{ flex: 3, paddingLeft: '2px', overflowY: 'auto' }}>\n\t\t\t\t  <Button variant=\"outline-primary\" onClick={() => handleRequest('recommendations')}>\n\t\t\t\t{loadingRecommendations ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Insights'}\n\t\t\t</Button>\n\t\t\t<Button variant=\"outline-success\" onClick={() => handleRequest('caselaw')}>\n\t\t\t\t{loadingCaselaw ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Caselaw'}\n\t\t\t</Button>\n\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<Button variant=\"outline-info\" onClick={() => handleRequest('clause')}>\n\t\t\t\t{loadingClause ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Clause'}\n\t\t\t</Button>\n\t\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column-reverse' }}>\n\t\t\t\t\t\t{openaiRecommendations.map((recommendation, index) => (\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\t\tclassName=\"sidebar__highlight\"  \n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tpadding: '10px', \n\t\t\t\t\t\t\t\t\t\tmargin: '5px 0', \n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex', \n\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-between', \n\t\t\t\t\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: index === latestReceivedIndex ? '2A3038' : '2A3038', // Apply flashing effect to the latest received recommendation\n\t\t\t\t\t\t\t\t\t\tanimation: index === latestReceivedIndex ? 'flash 1s infinite alternate' : 'none' // Apply flashing animation\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonMouseEnter={() => setLatestReceivedIndex(index)} // Update the index of the latest received recommendation on hover\n\t\t\t\t\t\t\t\t\tonMouseLeave={() => setLatestReceivedIndex(-1)} // Reset the index when mouse leaves\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span style={{ fontSize: '10px' }}>{recommendation}</span>\n\t\t\t\t\t\t\t\t\t<Button variant=\"outline-secondary\" onClick={() => insertHighlightIntoQuill(recommendation)}>Insert</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\t\t\t  </Modal.Body>\n\t\t\t  <Modal.Footer className=\"custom-modal-footer\" style={{ background:'#191c24', justifyContent: 'center' }}>\n\t\t\t\t<div className=\"w-100 d-flex justify-content-between align-items-center\">\n\t\t\t\t\t{/* <Button variant=\"secondary\" onClick={handleClose}>Close</Button> */}\n\t\t\t\t\t{/* Query Text Box */}\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Ask Casebook AI a question\"\n\t\t\t\t\t\tvalue={query} // Bind the input value to state\n\t\t\t\t\t\tonChange={(e) => setQuery(e.target.value)} // Update state on input change\n\t\t\t\t\t\tclassName=\"nav-link mt-2 mt-md-0 d-none d-lg-flex search mx-3\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* Send Button */}\n\t\t\t\t\t{/* <Button variant=\"info\" onClick={handleSend}>Send</Button> */}\n\t\t\t\t\t<Button variant=\"info\" onClick={handleSend}>\n\t\t\t\t{loadingSend ? <Spinner animation=\"border\" role=\"status\"><span className=\"sr-only\">Loading...</span></Spinner> : 'Send'}\n\t\t\t</Button>\n\n\t\t\t\t\t{/* <Button variant=\"primary\" onClick={handleNoteSave}>Save</Button> */}\n\t\t\t\t</div>\n\n\t\t\t</Modal.Footer>\n\t\t\t<style>\n        {`\n            @keyframes flash {\n                from {\n                    background-color: #2A3038; // Initial background color\n                }\n                to {\n                    background-color: #32435a; // Flashing background color\n                }\n            }\n        `}\n    </style>\n\n\n\t\t\t</Modal>\n\t\t  )}\n\t\t</React.Fragment>\n\t  );\n\t\t\t\t\t  }","// const BASE_URL_DEV = \"http://localhost:3000\";\n\nconst BASE_URL_DEV = \"https://back.casebk.com\";\n\nexport { BASE_URL_DEV };\n\nexport const fetchAuth = () => {\n\tconst auth = JSON.parse(localStorage.getItem(\"authDetails\"));\n\tif (\n\t\t!auth ||\n\t\t!auth.userId ||\n\t\t!auth.authToken ||\n\t\t!auth.userPublicId ||\n\t\t!auth.username ||\n\t\t!auth.fname ||\n\t\t!auth.lname ||\n\t\t!auth.city ||\n\t\t!auth.country ||\n\t\t!auth.organisation ||\n\t\t!auth.email ||\n\t\t!auth.expiry\n\t) {\n\t\treturn null;\n\t}\n\tif (auth.expiry < Date.parse(new Date())) return null;\n\treturn {\n\t\tauthToken: auth.authToken,\n\t\tauth_token: auth.authToken,\n\t\tuserId: auth.userId,\n\t\tuserPublicId: auth.userPublicId,\n\t\tusername: auth.username,\n\t\temail: auth.email,\n\t\texpiry: auth.expiry,\n\t\tfname: auth.fname,\n\t\tlname: auth.lname,\n\t\tcity: auth.city,\n\t\tcountry: auth.country,\n\t\torganisation: auth.organisation,\n\t};\n};\n","import React from \"react\";\n\nimport \"../style/Spinner.css\";\n\nexport default () => {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        height: \"100vh\"\n      }}\n    >\n      <div className=\"sk-fading-circle\">\n        <div className=\"sk-circle1 sk-circle\" />\n        <div className=\"sk-circle2 sk-circle\" />\n        <div className=\"sk-circle3 sk-circle\" />\n        <div className=\"sk-circle4 sk-circle\" />\n        <div className=\"sk-circle5 sk-circle\" />\n        <div className=\"sk-circle6 sk-circle\" />\n        <div className=\"sk-circle7 sk-circle\" />\n        <div className=\"sk-circle8 sk-circle\" />\n        <div className=\"sk-circle9 sk-circle\" />\n        <div className=\"sk-circle10 sk-circle\" />\n        <div className=\"sk-circle11 sk-circle\" />\n        <div className=\"sk-circle12 sk-circle\" />\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useState, useContext } from \"react\";\nimport { Graph } from \"react-d3-graph\";\nimport axios from \"axios\";\nimport { Fragment } from \"react\";\nimport { UserContext } from \"../App\";\nimport { BASE_URL_DEV } from \"../utils\";\n\nfunction PdfGraphFunc(props) {\n\tconst [obj, setObj] = useState([]);\n\tconst { state, dispatch } = useContext(UserContext);\n\tconst errorText = \"\";\n\tuseEffect(() => {\n\t\tif (state.graphData.length !== 0) {\n\t\t\t(async () => {\n\t\t\t\tconst result = await axios(`${BASE_URL_DEV}/get-graphdata`, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"x-access-token\": state.auth && state.auth.authToken,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst allgraphs = result.data;\n\n\t\t\t\tlet currentFileName = state.currentFile && state.currentFile.name ? state.currentFile.name : '';\n\t\t\t\tallgraphs && allgraphs.graphdata && allgraphs.graphdata.length && allgraphs.graphdata.filter(x => {\n\n\t\t\t\t\tif (x.fileName == currentFileName) {\n\t\t\t\t\t\tdelete x.fileName\n\t\t\t\t\t\tsetObj(x);\n\t\t\t\t\t\treturn x;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\n\t\t\t\tif (allgraphs && allgraphs.length > 0) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: \"FETCH_FILE_HIGHLIGHTS\",\n\t\t\t\t\t\tpayload: allgraphs.highlights,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t}, [state]);\n\n\tconst myConfig = {\n\t\tautomaticRearrangeAfterDropNode: true,\n\t\tcollapsible: false,\n\t\tdirected: false,\n\t\tfocusAnimationDuration: 10,\n\t\tfocusZoom: 1,\n\t\tfreezeAllDragEvents: false,\n\t\theight: 710,\n\t\thighlightDegree: 0.1,\n\t\thighlightOpacity: 1,\n\t\tlinkHighlightBehavior: true,\n\t\tmaxZoom: 8,\n\t\tminZoom: 0.1,\n\t\tnodeHighlightBehavior: true,\n\t\tpanAndZoom: false,\n\t\tstaticGraph: false,\n\t\tstaticGraphWithDragAndDrop: false,\n\t\twidth: 50,\n\t\td3: {\n\t\t\talphaTarget: 0.05,\n\t\t\tgravity: -150,\n\t\t\tlinkLength: 90,\n\t\t\tlinkStrength: 2,\n\t\t\tdisableLinkForce: false,\n\t\t},\n\t\tnode: {\n\t\t\tcolor: \"#d3d3d3\",\n\t\t\tfontColor: \"#d3d3d3\",\n\t\t\tfontSize: 12,\n\t\t\tfontWeight: \"normal\",\n\t\t\thighlightColor: \"lightgreen\",\n\t\t\thighlightFontSize: 17,\n\t\t\thighlightFontWeight: \"Bold\",\n\t\t\thighlightStrokeColor: \"SAME\",\n\t\t\thighlightStrokeWidth: \"SAME\",\n\t\t\tlabelProperty: \"id\",\n\t\t\tmouseCursor: \"pointer\",\n\t\t\topacity: 1,\n\t\t\trenderLabel: true,\n\t\t\tsize: 200,\n\t\t\tstrokeColor: \"none\",\n\t\t\tstrokeWidth: 1.5,\n\t\t\tsvg: \"\",\n\t\t\tsymbolType: \"circle\",\n\t\t},\n\t\tlink: {\n\t\t\tcolor: \"#d3d3d3\",\n\t\t\tfontColor: \"black\",\n\t\t\tfontSize: 8,\n\t\t\tfontWeight: \"normal\",\n\t\t\thighlightColor: \"SAME\",\n\t\t\thighlightFontSize: 8,\n\t\t\thighlightFontWeight: \"normal\",\n\t\t\tlabelProperty: \"label\",\n\t\t\tmouseCursor: \"pointer\",\n\t\t\topacity: 1,\n\t\t\trenderLabel: false,\n\t\t\tsemanticStrokeWidth: false,\n\t\t\tstrokeWidth: 1.5,\n\t\t\tmarkerHeight: 6,\n\t\t\tmarkerWidth: 6,\n\t\t\tstrokeDasharray: 0,\n\t\t\tstrokeDashoffset: 0,\n\t\t\tstrokeLinecap: \"butt\",\n\t\t},\n\t};\n\n\tconst onClickGraph = function (event) {\n\t\t//  window.alert('Clicked the graph background');\n\t};\n\n\tconst onClickNode = function (nodeId, node) {\n\t\t// window.alert(`Clicked node ${nodeId} in position (${node.x}, ${node.y})`);\n\t};\n\n\tconst onDoubleClickNode = function (nodeId, node) {\n\t\t//  window.alert('Double clicked node ${nodeId} in position (${node.x}, ${node.y})');\n\t\tconst nodeData = state.nodesData[nodeId];\n\t\tif (nodeData) {\n\t\t\twindow.open(nodeData[\"frontend_url\"], \"_blank\");\n\t\t}\n\t};\n\n\tconst onRightClickNode = function (event, nodeId, node) {\n\t\t//  window.alert('Right clicked node ${nodeId} in position (${node.x}, ${node.y})');\n\t};\n\n\tconst onMouseOverNode = function (nodeId, node) {\n\t\t//  window.alert(`Mouse over node ${nodeId} in position (${node.x}, ${node.y})`);\n\t\tconst nodeData = state.nodesData[node.id];\n\t\tif (nodeData) {\n\t\t\tdispatch({ type: \"SET_NODE_DATA\", payload: nodeData });\n\t\t\tlet nodes = state.graphData.nodes.map((n) => {\n\t\t\t\tif (n.id === node.id) {\n\t\t\t\t\treturn { ...n, fontSize: 16 };\n\t\t\t\t} else {\n\t\t\t\t\treturn { ...n, fontSize: 8 };\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch({\n\t\t\t\ttype: \"SET_GRAPH_DATA\",\n\t\t\t\tpayload: { ...state.graphData, nodes },\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onMouseOutNode = function (nodeId, node) {\n\t\t//  window.alert(`Mouse out node ${nodeId} in position (${node.x}, ${node.y})`);\n\t};\n\n\tconst onClickLink = function (source, target) {\n\t\t//  window.alert(`Clicked link between ${source} and ${target}`);\n\t};\n\n\tconst onRightClickLink = function (event, source, target) {\n\t\t//  window.alert('Right clicked link between ${source} and ${target}');\n\t};\n\n\tconst onMouseOverLink = function (source, target) {\n\t\t//  window.alert(`Mouse over in link between ${source} and ${target}`);\n\t};\n\n\tconst onMouseOutLink = function (source, target) {\n\t\t//  window.alert(`Mouse out link between ${source} and ${target}`);\n\t};\n\n\tconst onNodePositionChange = function (nodeId, x, y) {\n\t\t//  window.alert(`Node ${nodeId} moved to new position x= ${x} y= ${y}`);\n\t};\n\n\tconst onZoomChange = function (previousZoom, newZoom) {\n\t\t//  window.alert(`Graph is now zoomed at ${newZoom} from ${previousZoom}`);\n\t};\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{errorText === \"\" && !Array.isArray(obj) && (\n\t\t\t\t<div className=\"graph__container\">\n\t\t\t\t\t{obj && (\n\t\t\t\t\t\t<Graph\n\t\t\t\t\t\t\tid=\"graph-id\"\n\t\t\t\t\t\t\tdata={obj}\n\t\t\t\t\t\t\tkey={Math.round((new Date()).getTime() + Math.random())}\n\t\t\t\t\t\t\tconfig={myConfig}\n\t\t\t\t\t\t\tonClickGraph={onClickGraph}\n\t\t\t\t\t\t\tonClickNode={onClickNode}\n\t\t\t\t\t\t\tpassive={true}\n\t\t\t\t\t\t\tonDoubleClickNode={onDoubleClickNode}\n\t\t\t\t\t\t\tonRightClickNode={onRightClickNode}\n\t\t\t\t\t\t\tonClickLink={onClickLink}\n\t\t\t\t\t\t\tonRightClickLink={onRightClickLink}\n\t\t\t\t\t\t\tonMouseOverNode={onMouseOverNode}\n\t\t\t\t\t\t\tonMouseOutNode={onMouseOutNode}\n\t\t\t\t\t\t\tonMouseOverLink={onMouseOverLink}\n\t\t\t\t\t\t\tonMouseOutLink={onMouseOutLink}\n\t\t\t\t\t\t\tonNodePositionChange={onNodePositionChange}\n\t\t\t\t\t\t\tonZoomChange={onZoomChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{errorText !== \"\" && (\n\t\t\t\t<div className=\"error_text\">\n\t\t\t\t\t<p>{errorText}</p>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\nexport default PdfGraphFunc;\n","import React, { useContext, useState, useRef, useEffect } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Accordion from 'react-bootstrap/Accordion';\nimport AccordionContext from 'react-bootstrap/AccordionContext';\nimport { useAccordionToggle } from 'react-bootstrap/AccordionToggle';\nimport './accordion.css'; // Import the new CSS file\nimport { UserContext } from '../App';  // Import UserContext\n\n\nfunction AccordionRenderer({ data }) {\n    console.log('Accordion Renderer Data:', data); // Ensure this is logged\n    const [searchInput, setSearchInput] = useState('');\n    const [activeKeys, setActiveKeys] = useState([]);\n    const [active, setActive] = useState('');\n    const [count, setCount] = useState(0);\n    const { state, dispatch } = useContext(UserContext);\n    const [accordionData, setAccordionData] = useState(data);  // Local state to manage accordion data\n\n    const myRef = useRef();\n    // Update local accordion data if props data is empty and state has accordionSections\n    useEffect(() => {\n        if (data.length === 0 && state.accordionSections && state.accordionSections.length > 0) {\n            setAccordionData(state.accordionSections);\n        } else {\n            setAccordionData(data);\n        }\n    }, [data, state.accordionSections]);\n\n    // Logging to monitor the data updates\n    useEffect(() => {\n        console.log('Accordion Renderer Data:', accordionData);\n    }, [accordionData]);\n\n\n    useEffect(() => {\n        let accordionContainer = myRef.current;\n        let selectAccordion = accordionContainer.querySelectorAll('.accordion');\n        let currIndex = activeKeys[count];\n        if (selectAccordion[currIndex]) {\n            accordionContainer.scrollTo({ behavior: 'smooth', top: selectAccordion[currIndex].offsetTop });\n        }\n    }, [count]);\n\n    function ContextAwareToggle({ children, eventKey, callback }) {\n        const currentEventKey = useContext(AccordionContext);\n\n        const decoratedOnClick = useAccordionToggle(\n            eventKey,\n            () => callback && callback(eventKey),\n        );\n        const isCurrentEventKey = currentEventKey === eventKey;\n\n        return (\n            <div className=\"accordion-card__header-items\">\n                <div className=\"accordion-card__active-tab\">\n                    {\n                        isCurrentEventKey ?\n                            <span className=\"online\"><i className=\"mdi mdi-checkbox-blank-circle\"></i></span> :\n                            <span className=\"offline\"><i className=\"mdi mdi-checkbox-blank-circle\"></i></span>\n                    }\n                </div>\n                <button\n                    type=\"button\"\n                    className={'header-button'}\n                    onClick={decoratedOnClick}\n                >\n                    {children}\n                </button>\n                <div className=\"accordion-card__active-tab\">\n                    {\n                        isCurrentEventKey ?\n                            <i className=\"mdi mdi-chevron-up\"></i> :\n                            <i className=\"mdi mdi-chevron-down\"></i>\n                    }\n                </div>\n            </div>\n        );\n    }\n\n    const scroller = (activeKeys) => {\n        let accordionContainer = myRef.current;\n        let selectAccordion = accordionContainer.querySelectorAll('.accordion');\n        let currIndex = activeKeys[count];\n        if (selectAccordion[currIndex]) {\n            accordionContainer.scrollTo({ behavior: 'smooth', top: selectAccordion[currIndex].offsetTop });\n        }\n    }\n\n    const searchHandler = (event) => {\n        let matchedTextIndexArray = [];\n        data.forEach((d, index) => {\n            if (d.text.toLowerCase().includes(searchInput.toLowerCase())) {\n                matchedTextIndexArray.push(index);\n            }\n        });\n        setActiveKeys(matchedTextIndexArray);\n        scroller(matchedTextIndexArray);\n        event.preventDefault();\n    }\n\n    const accordionClickHandler = (e, keyIndex) => {\n        let newActiveKeys = [...activeKeys];\n        if (activeKeys.includes(keyIndex)) {\n            let index = activeKeys.indexOf(keyIndex);\n            newActiveKeys.splice(index, 1);\n            setActiveKeys(newActiveKeys);\n        }\n        else {\n            setActive(e === 0 ? '0' : e);\n        }\n    }\n\n    const prevClickHandler = () => {\n        if (count < 0) {\n            return;\n        }\n        setCount(c => c - 1);\n    }\n\n    const nextClickHandler = () => {\n        if (count > activeKeys.length - 1) {\n            return;\n        }\n        setCount(c => c + 1);\n    }\n\n    return (\n        <div>\n            <div className=\"accordion-container\" ref={myRef}>\n                {Array.isArray(data) && data.map((d, index) => (\n                    <Accordion key={index} activeKey={activeKeys.includes(index) ? (index === 0 ? '0' : index) : (active === 0 ? '0' : active)} onSelect={(e) => accordionClickHandler(e, index === 0 ? '0' : index)}>\n                        <Card className=\"accordion-card\">\n                            <Card.Header className=\"accordion-card__header\">\n                                <ContextAwareToggle eventKey={index === 0 ? '0' : index}>{d.clause}</ContextAwareToggle>\n                            </Card.Header>\n                            <Accordion.Collapse eventKey={index === 0 ? '0' : index}>\n                                <Card.Body className=\"accordion-card__body\">{d.text}</Card.Body>\n                            </Accordion.Collapse>\n                        </Card>\n                    </Accordion>\n                ))}\n            </div>\n            {/* <form className=\"accordion-search\" onSubmit={searchHandler}>\n                <button type=\"button\" onClick={prevClickHandler} disabled={count <= 0}>{`<<`}</button>\n                <button type=\"button\" onClick={prevClickHandler} disabled={count <= 0}>prev</button>\n                <input type=\"text\" placeholder=\"Search\"\n                    onChange={(e) => setSearchInput(e.target.value)} />\n                <button type=\"button\" onClick={nextClickHandler} disabled={count >= activeKeys.length - 1}>Next</button>\n                <button type=\"button\" onClick={nextClickHandler} disabled={count >= activeKeys.length - 1}>{`>>`}</button>\n            </form> */}\n        </div>\n    );\n}\n\nexport default AccordionRenderer;\n","import React, { useState, useContext, useEffect } from 'react';\nimport { Resizable } from \"react-resizable\";\nimport TextEditor from \"../TextEditor\";\nimport { UserContext } from \"../App\";\nimport PdfGraphFunc from \"./PdfGraphFunc\";\nimport { Modal } from \"react-bootstrap\";\nimport AccordionRenderer from '../Dashboard/AccordionRenderer';\n\nconst PdfViewerSide = ({ createNotes, showGraph, showGraphModal, setShowGraphModal, setCreateNotes, setShowGraph }) => {\n    const { state } = useContext(UserContext);\n    const [dimensions, setDimensions] = useState({\n        height: 720,\n        width: 250\n    });\n\n    // useEffect to log and act on changes in accordionSections\n    useEffect(() => {\n        console.log('Accordion Sections Updated:', state.accordionSections);\n        // Here you can also perform actions based on the updated accordionSections\n        // For example, checking for empty sections, handling errors, etc.\n    }, [state.accordionSections]); // Dependency array includes only accordionSections to react specifically to its changes\n// // \n// useEffect(() => {\n//     return () => console.log('Unmounting PdfViewer, current accordionSections:', state.accordionSections);\n// }, []);  // Logs on unmount to see what state is at that time\n\n    return (\n        <Resizable\n            className=\"box\"\n            height={720}\n            axis=\"x\"\n            width={250}\n            onResize={(e, { size }) => {\n                setDimensions({\n                    height: size.height,\n                    width: size.width,\n                });\n            }}\n            resizeHandles={[\"w\"]}\n        >\n            <div\n                className=\"sidebarnew\"\n                style={{\n                    minWidth: \"20%\",\n                    width: \"250px\" || \"25%\",\n                    height: '100vh',\n                }}\n            >\n                <div>\n                    {createNotes && (\n                        <TextEditor\n                            id={state.auth && state.auth.userPublicId}\n                            fileName={state.currentFile && state.currentFile.name}\n                            showTextEditor={createNotes}\n                            setShowTextEditor={setCreateNotes}\n                        />\n                    )}\n                    {!showGraphModal && showGraph && <PdfGraphFunc />}\n                    {showGraphModal && (\n                        <Modal\n                            style={{ color: \"#050505\" }}\n                            show={showGraphModal}\n                            onHide={() => setShowGraphModal(false)}\n                            backdrop=\"static\"\n                            size=\"lg\"\n                            centered={true}\n                        >\n                            <Modal.Header closeButton>\n                                <Modal.Title id=\"example-modal-sizes-title-sm\">\n                                    Graph\n                                </Modal.Title>\n                            </Modal.Header>\n                            <Modal.Body>\n                                <PdfGraphFunc />\n                            </Modal.Body>\n                        </Modal>\n                    )}\n                    {state.accordionSections && <AccordionRenderer data={state.accordionSections} />}\n                </div>\n            </div>\n        </Resizable>\n    );\n};\n\nexport default PdfViewerSide;\n","import React from 'react';\nimport { Table, Button } from 'reactstrap';\n\nfunction FileMetadataViewer({ files, onFileClick }) {\n    return (\n        <div className=\"file-metadata-viewer\">\n            <h2>Uploaded Files</h2>\n            <Table responsive bordered className=\"custom-table\">\n                <thead>\n                    <tr>\n                        <th>File Name</th>\n                        {/* <th>File Size</th> */}\n                        <th>Upload Date</th>\n                        {/* <th>Category</th> */}\n                        <th>Summary</th>\n                        <th>View</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {files.map((file, index) => (\n                        <tr key={index}>\n                            <td>{file.name}</td>\n                            {/* <td>{(file.size / 1024).toFixed(2)} KB</td> */}\n                            <td>{new Date(file.uploadDate).toLocaleDateString()}</td>\n                            {/* <td>{file.category}</td> */}\n                            <td>{file.summary}</td>\n                            <td>\n                                <Button color=\"primary\" onClick={() => onFileClick(file)}>View</Button>\n                            </td>\n                        </tr>\n                    ))}\n                </tbody>\n            </Table>\n        </div>\n    );\n}\n\nexport default FileMetadataViewer;\n","module.exports = __webpack_public_path__ + \"static/media/face0.1f2c7e78.jpeg\";","// @flow\r\nimport React, { useState, useEffect } from \"react\";\r\nimport processMd from \"../Dashboard/markdown\";\r\nimport axios from \"axios\";\r\n\r\nconst updateHash = (highlight) => {\r\n\tdocument.location.hash = `highlight-${highlight.id}`;\r\n};\r\n\r\nfunction Highlight(props) {\r\n\tconst [state, setState] = useState({ highlights: [] });\r\n\tconst [PdfUrl, setPdfUrl] = useState({ url: \"\" });\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function fetchData() {\r\n\t\t\tconst result_json = await axios(\"http://127.0.0.1:8000/api/v1/json\");\r\n\t\t\tconst pdf_name = Object.keys(result_json.data)[0];\r\n\t\t\tsetPdfUrl({ url: `http://127.0.0.1:8000/api/v1/pdf/${pdf_name}` });\r\n\t\t\tsetState({ highlights: result_json.data[pdf_name] });\r\n\t\t}\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\tconst deleteHighlight = (index) => {\r\n\t\tconst highlights = state.highlights.filter((highlight, idx) => (\r\n\t\t\tindex !== idx ? highlight : null\r\n\t\t));\r\n\t\tsetState({ highlights });\r\n\t};\r\n\r\n\tconst { highlights } = state;\r\n\r\n\tconst resetHighlights = () => {\r\n\t\tsetState({\r\n\t\t\thighlights: [],\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"sidebarnew\" style={{ width: \"25vw\" }}>\r\n\t\t\t{/*  */}\r\n\t\t\t<div className=\"card-description\" style={{ padding: \"1rem\" }}>\r\n\t\t\t\t<h2 style={{ marginBottom: \"1rem\" }}>Highlights</h2>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<small>\r\n\t\t\t\t\t\tTo create area highlight hold ⌥ Option key (Alt), then click and\r\n\t\t\t\t\t\tdrag.\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<ul className=\"sidebar__highlights\">\r\n\t\t\t\t{highlights.map((highlight, index) => (\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tclassName=\"sidebar__highlight\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tupdateHash(highlight);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div style={{ padding: \"4px\" }}>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t\t\t\t\t\t\tonClick={() => deleteHighlight(index)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"sidebar__btn\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i className=\"fa fa-close\"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<strong>{processMd(highlight.comment.text)}</strong>\r\n\t\t\t\t\t\t\t{highlight.content.text ? (\r\n\t\t\t\t\t\t\t\t<blockquote style={{ marginTop: \"0.5rem\" }}>\r\n\t\t\t\t\t\t\t\t\t{`${highlight.content.text.slice(0, 90).trim()}…`}\r\n\t\t\t\t\t\t\t\t</blockquote>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t{highlight.content.image ? (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"highlight__image\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginTop: \"0.5rem\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<img src={highlight.content.image} alt={\"Screenshot\"} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"highlight__location\">\r\n\t\t\t\t\t\t\tPage {highlight.position.pageNumber}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t\t{highlights.length > 0 ? (\r\n\t\t\t\t<div style={{ padding: \"1rem\" }}>\r\n\t\t\t\t\t<button onClick={resetHighlights}>Reset highlights</button>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Highlight;\r\n","import React, { Suspense, lazy } from \"react\";\r\nimport Spinner from \"./shared/Spinner\";\r\nimport Highlight from \"./shared/Highlight\";\r\nconst Dashboard = lazy(() => import(\"./Dashboard/Index\"));\r\nconst PdfViewer = lazy(() => import(\"./Dashboard/PdfViewer\"));\r\n\r\nfunction AppRoutes(props) {\r\n    return (\r\n        <Suspense fallback={<Spinner />}>\r\n            {props.showHighlight && <Highlight />}\r\n            {props.showFileViewer && <PdfViewer />}\r\n            <Dashboard\r\n                showFileViewer={props.showFileViewer}\r\n                showDashboardView={props.showDashboardView}\r\n                showHighlight={props.showHighlight}\r\n                showProfileView={props.showProfileView}\r\n                showFeedView={props.showFeedView}\r\n                showTextAnonymizerView={props.showTextAnonymizerView}\r\n                showGptView={props.showGptView}\r\n                showLawsReader={props.showLawsReader}\r\n            />\r\n        </Suspense>\r\n    );\r\n}\r\n\r\nexport default AppRoutes;\r\n","export const updateState = (state, updateValues) => ({\n\t...state, ...updateValues,\n});\n\nexport const updateHighlightStatus = (state, updateValues) => {\n\tconst newState = { ...state, highlightColors: updateValues }\n\tlocalStorage.setItem(\"highlightColors\", JSON.stringify(newState.highlightColors))\n\treturn newState\n}\n\n","// src/Reducer/InitialState.js\n\nexport const InitialState = {\n    files: [],\n    currentFile: null,\n    fileHighlights: [],\n    myPosts: [],\n    allPosts: [],\n    error: null,\n    message: null,\n    searchQuery: \"\",\n    isModalOpen: false,\n    nodeData: {},\n    nodesData: {},\n    graphData: {},\n    showHighlight: false,\n    highlightColors: JSON.parse(localStorage.getItem(\"highlightColors\")) || { default: \"#F48FB1\", legalTest: \"#E1BEE7\", issue: \"#D1C4E9\", conclusion: \"#B2EBF2\" },\n    auth: {\n        userId: null,\n        authToken: null,\n        userPublicId: null,\n        username: null,\n        email: null,\n        expiry: null,\n        fname: null,\n        lname: null,\n        city: null,\n        country: null,\n        organisation: null,\n    },\n    highlightTextsForEditor: [],\n    showFileViewer: false,\n    showDashboardView: true,\n    showProfileView: false,\n    showFeedView: false,\n    showTextAnonymizerView: false,\n    showGptView: false,\n    showLawsReader: false,\n    accordionSections: [],\n};\n","import { updateState, updateHighlightStatus } from '../shared/Utility';\nimport { InitialState } from './InitialState';\n\nexport const reducer = (state, action) => {\n    switch (action.type) {\n        case 'ADD_FILE':\n            if (!Array.isArray(action.payload)) action.payload = [action.payload];\n            let Allfiles = [...state.files, ...action.payload];\n            let fileNames = [];\n            let files = Allfiles.filter((file) => {\n                if (fileNames.includes(file.name)) return false;\n                fileNames.push(file.name);\n                return true;\n            });\n            return {\n                ...state,\n                files,\n                currentFile: state.currentFile || action.payload[0],\n            };\n\n        case 'AUTH':\n            const auth = {\n                userId: action.payload.userId,\n                authToken: action.payload.auth_token,\n                userPublicId: action.payload.userPublicId,\n                username: action.payload.username,\n                email: action.payload.email,\n                expiry: action.payload.expiry || Date.parse(new Date()) + 60 * 60 * 1000,\n                fname: action.payload.fname,\n                lname: action.payload.lname,\n                city: action.payload.city,\n                country: action.payload.country,\n                organisation: action.payload.organisation,\n            };\n            localStorage.setItem(\"authDetails\", JSON.stringify(auth));\n            return updateState(state, { auth: auth });\n\n        case 'LOG_OUT':\n            localStorage.removeItem(\"authDetails\");\n            return InitialState;\n\n        case \"TOGGLE_HIGHLIGHT\":\n            return {\n                ...state,\n                showHighlight: action.payload,\n            };\n\n        case 'SET_CURR_FILE':\n            return updateState(state, { currentFile: action.payload });\n\n        case 'TOGGLE_VIEWER':\n            return {\n                ...state,\n                ...action.payload,\n            };\n        case 'SET_VIEW':\n                return {\n                    ...state,\n                    showHighlight: false,\n                    showFileViewer: false,\n                    showDashboardView: false,\n                    showProfileView: false,\n                    showFeedView: false,\n                    showTextAnonymizerView: false,\n                    showGptView: false,\n                    showLawsReader: false,\n                    ...action.payload\n                };\n    \n        case 'ALL_POSTS':\n            return updateState(state, { allPosts: action.payload });\n\n        case 'ADD_My_POSTS':\n            return updateState(state, { myPosts: [...state.myPosts, action.payload] });\n\n        case 'FETCH_FILE_HIGHLIGHTS':\n            return updateState(state, { fileHighlights: action.payload });\n\n        case 'SET_FILE_HIGHLIGHTS':\n            let highlights = [];\n            if (state.fileHighlights.length > 0) {\n                let fileUpdated = false;\n                highlights = state.fileHighlights.map((singleFile) => {\n                    if (singleFile.name === action.payload.name) {\n                        singleFile.highlights = action.payload.highlights;\n                        fileUpdated = true;\n                    }\n                    return singleFile;\n                });\n                if (!fileUpdated) {\n                    highlights = [...state.fileHighlights, action.payload];\n                }\n            } else {\n                highlights = [action.payload];\n            }\n            return updateState(state, { fileHighlights: highlights });\n\n        case 'ERROR':\n            return updateState(state, { error: action.payload });\n\n        case 'MESSAGE':\n            return updateState(state, { message: action.payload });\n\n        case 'SET_SEARCH_QUERY':\n            return updateState(state, { searchQuery: action.payload });\n\n        case 'SET_NODE_DATA':\n            return updateState(state, { nodeData: action.payload });\n\n        case 'SET_GRAPH_DATA':\n            return updateState(state, { graphData: action.payload });\n\n        case 'SET_NODES_DATA':\n            return updateState(state, { nodesData: action.payload });\n\n        case 'CHANGE_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, default: action.payload });\n        }\n        case 'CHANGE_LEGAL_TEST_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, legalTest: action.payload });\n        }\n        case 'CHANGE_ISSUE_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, issue: action.payload })\n        }\n        case 'CHANGE_CONCLUSION_HIGHLIGHT_COLOR': {\n            return updateHighlightStatus(state, { ...state.highlightColors, conclusion: action.payload })\n        }\n        case 'SET_MODAL':\n            return updateState(state, { isModalOpen: action.payload });\n\n        case 'SET_HIGHLIGHT_TEXT':\n            return {\n                ...state,\n                highlightTextForEditor: action.payload,\n            };\n\n        case 'ADD_HIGHLIGHT_TEXT':\n            const newHighlight = action.payload;\n            const updatedHighlights = [...(state.highlightTextsForEditor || []), newHighlight]; // Fallback to empty array if not defined\n            return {\n                ...state,\n                highlightTextsForEditor: updatedHighlights,\n            };\n            \n        case 'SET_ACCORDION_SECTIONS':\n                return updateState(state, { accordionSections: action.payload });\n                // return { ...state, accordionSections: [{ test: 'data' }] };  // Test static data\n\n    \n        default:\n            return state;\n    }\n};\n","\nimport React, { useState, useEffect, useContext  } from \"react\";\nimport { UserContext } from \"../App\";\n\nfunction Highlight(props) {\n  const {state} = useContext(UserContext);\n  const [nodeData, setNodeData] = useState({})\n\nuseEffect(() => {\n  setNodeData(state.nodeData)\n}, [state.nodeData]);\n\n  return (\n    <div className=\"sidebarnew\"style={{ width: \"25vw\" }}>\n      {/*  */}\n      <div className=\"description\" style={{ padding: \"1rem\" }}>\n        <h2 style={{ marginBottom: \"1rem\" , fontSize:\"1.2rem\"}}>Name</h2>\n        <p>{nodeData.name}</p>\n        {/* <div dangerouslySetInnerHTML={{ __html: nodeData.preview && nodeData.preview.join(\"\") }} /> */}\n        \n      </div>\n\n      <div className=\"description\" style={{ padding: \"1rem\" }}>\n        <h2 style={{ marginBottom: \"1rem\" , fontSize:\"1.2rem\"}}>Preview</h2>\n\n        <div dangerouslySetInnerHTML={{ __html: nodeData.preview && nodeData.preview.join(\"\") }} />\n        \n      </div>\n    </div>\n  );\n}\n\nexport default Highlight;\n","import React, { useEffect, useContext, useState } from \"react\";\nimport { UserContext } from \"../App\";\n\nfunction Highlight(props) {\n\tconst { state, dispatch } = useContext(UserContext);\n\tconst [graphData, setGraphData] = useState({})\n\n\tuseEffect(() => {\n\t\tsetTimeout(() => setGraphData(state.graphData), 500)\n\t}, [state.graphData]);\n\n\tfunction handleMouseEnter(node) {\n\t\tconst nodeData = state.nodesData[node.id]\n\t\tif (nodeData) {\n\t\t\tlet nodes = state.graphData.nodes.map(n => {\n\t\t\t\tif (n.id === node.id) {\n\t\t\t\t\treturn { ...n, \"fontSize\": 16 }\n\t\t\t\t} else {\n\t\t\t\t\treturn { ...n, \"fontSize\": 8 }\n\t\t\t\t}\n\t\t\t})\n\t\t\tdispatch({ type: \"SET_GRAPH_DATA\", payload: { ...state.graphData, nodes } })\n\t\t}\n\t\tif (nodeData) {\n\t\t\tdispatch({ type: \"SET_NODE_DATA\", payload: nodeData })\n\t\t}\n\t}\n\n\tfunction handleMouseLeave(node) {\n\t\tconst nodeData = state.nodesData[node.id]\n\t\tif (nodeData) {\n\t\t\tlet nodes = state.graphData.nodes.map(n => {\n\t\t\t\treturn { ...n, \"fontSize\": 8 }\n\t\t\t})\n\n\t\t\tdispatch({ type: \"SET_GRAPH_DATA\", payload: { ...state.graphData, nodes } })\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"sidebarnew2\" style={{ width: \"25vw\" }}>\n\t\t\t<ul className=\"sidebar__highlights\" style={{ \"maxHeight\": \"96vh\", \"overflow\": \"scroll\" }}>\n\t\t\t\t{graphData.nodes && graphData.nodes.map((node, index) => (\n\t\t\t\t\tnode.id !== state.searchQuery && state.nodesData[node.id] !== undefined ?\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tonMouseEnter={() => handleMouseEnter(node)}\n\t\t\t\t\t\t\tonMouseLeave={() => handleMouseLeave(node)}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tclassName=\"sidebar__highlight\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p style={{ \"opacity\": \".5\" }}>{state.nodesData[node.id] ? state.nodesData[node.id].docket_number : null}</p>\n\t\t\t\t\t\t\t\t<p>{state.nodesData[node.id] ? state.nodesData[node.id].name : node.id}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li> : null\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\n\nexport default Highlight;\n","import React, { useEffect } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { BASE_URL_DEV, fetchAuth } from \"../utils\";\n\nconst Register = () => {\n\tconst history = useHistory();\n\n\tconst [userDetails, setUserDetails] = React.useState({\n\t\tusername: \"\",\n\t\temail: \"\",\n\t\tpassword1: \"\",\n\t\tpassword2: \"\",\n\t\tfname: \"\",\n\t\tlname: \"\",\n\t\tcity: \"\",\n\t\tcountry: \"\",\n\t\torganisation: \"\",\n\t});\n\n\tuseEffect(() => {\n\t\tconst auth = fetchAuth();\n\t\tif (auth && auth.authToken && auth.userPublicId) {\n\t\t\thistory.push(\"/dashboard\");\n\t\t\tconsole.log(auth);\n\t\t}\n\t}, [history]);\n\n\tconst registerUser = async (e) => {\n\t\te.preventDefault();\n\t\tif (\n\t\t\t!userDetails.username ||\n\t\t\t!userDetails.email ||\n\t\t\t!userDetails.password1 ||\n\t\t\t!userDetails.password2\n\t\t)\n\t\t\treturn null;\n\t\tif (userDetails.password1 !== userDetails.password2) return null;\n\t\tconsole.log(userDetails);\n\t\tconst response = await fetch(`${BASE_URL_DEV}/api/user/register`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify(userDetails),\n\t\t});\n\t\tconst json = await response.json();\n\t\tconsole.log(json);\n\t\tif (response.ok) {\n\t\t\thistory.push(\"/login\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"mb-2 auth-page\">\n\t\t\t<div className=\"d-flex align-items-center auth px-0 h-100\">\n\t\t\t\t<div className=\"row w-100 mx-0\">\n\t\t\t\t\t<div className=\"col-lg-5 mx-auto\">\n\t\t\t\t\t\t<div className=\"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5\">\n\t\t\t\t\t\t\t<div className=\"brand-logo\">\n\t\t\t\t\t\t\t\t<img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h4>New here?</h4>\n\t\t\t\t\t\t\t<h6 className=\"font-weight-light\">\n\t\t\t\t\t\t\t\tSigning up is easy. It only takes a few steps\n\t\t\t\t\t\t\t</h6>\n\t\t\t\t\t\t\t<form className=\"pt-3\">\n\t\t\t\t\t\t\t\t<div className=\"row form-group\">\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfname: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlname: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputUsername1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Username\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\tusername: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputEmail1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\temail: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputOrganisation1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Organisation\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\torganisation: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"row form-group\">\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcity: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"City\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcountry: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Country\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputPassword1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\tpassword1: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\t\t\t\tid=\"inputConfirmPassword1\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Confirm Password\"\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetUserDetails({\n\t\t\t\t\t\t\t\t\t\t\t\t...userDetails,\n\t\t\t\t\t\t\t\t\t\t\t\tpassword2: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"mt-3\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n\t\t\t\t\t\t\t\t\t\tonClick={registerUser}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSIGN UP\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"text-center mt-4 font-weight-light\">\n\t\t\t\t\t\t\t\t\tAlready have an account?{\" \"}\n\t\t\t\t\t\t\t\t\t<Link to=\"/login\" className=\"text-primary\">\n\t\t\t\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Register;\n","import React, { useState, useContext, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { BASE_URL_DEV, fetchAuth } from \"../utils\";\nimport { UserContext } from \"../App\";\n\nconst Login = () => {\n  const history = useHistory();\n  const { dispatch } = useContext(UserContext);\n\n  const [userDetails, setUserDetails] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  useEffect(() => {\n    const auth = fetchAuth();\n    if (auth && auth.authToken && auth.userPublicId) {\n      history.push(\"/dashboard\");\n      console.log(auth);\n    }\n  }, [history]);\n\n  const loginUser = async (e) => {\n    e.preventDefault();\n    if (!userDetails.username || !userDetails.password) return null;\n    const response = await fetch(`${BASE_URL_DEV}/api/user/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"Authorization\",\n        \n      },\n      body: JSON.stringify(userDetails),\n    });\n    const json = await response.json();\n    console.log(json);\n    if (response.ok) {\n      dispatch({ type: \"AUTH\", payload: json });\n      history.push(\"/dashboard\");\n    }\n  };\n\n  return (\n    <div className=\"mt-5 auth-page\" style={{ height: \"85vh\" }}>\n      <div className=\"d-flex align-items-center auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-5 mx-auto\">\n            <div className=\"card text-center py-3 mt-3 bg-dark2 px-3 px-sm-5\">\n              <div className=\"brand-logo\">\n                <img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n              </div>\n              <h4>Copilot for Lawyers</h4>\n              {/* <h6 className=\"font-weight-light\">Please Sign in to continue.</h6> */}\n              <Form className=\"pt-3\">\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"text\"\n                    placeholder=\"Username\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                    onChange={(e) =>\n                      setUserDetails({\n                        ...userDetails,\n                        username: e.target.value,\n                      })\n                    }\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                    onChange={(e) =>\n                      setUserDetails({\n                        ...userDetails,\n                        password: e.target.value,\n                      })\n                    }\n                  />\n                </Form.Group>\n                <div className=\"mt-3\">\n                  <Button\n                    className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                    onClick={loginUser}\n                  >\n                    SIGN IN\n                  </Button>\n                </div>\n                <div className=\"text-center mt-4 font-weight-light\">\n                  Don't have an account?{\" \"} <br></br>\n                  <Link to=\"/register\" className=\"text-primary\">\n                    Create your account\n                  </Link>\n                </div>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React from 'react'\nimport { Trans } from \"react-i18next\";\nimport { Link } from 'react-router-dom';\n\nconst SideNav = (props) => (\n\t<li\n\t\tclassName={props.class ? \"nav-item menu-items active\" : \"nav-item menu-items\"}\n\t>\n\t\t<Link\n\t\t\tto='#'\n\t\t\tstyle={{ position: \"relative\" }}\n\t\t\tclassName=\"nav-link\"\n\t\t\tonClick={props.click}\n\t\t>\n\t\t\t<span className=\"menu-icon\">\n\t\t\t\t<i className={props.iconClass}></i>\n\t\t\t</span>\n\t\t\t<span className=\"menu-title\">\n\t\t\t\t<Trans>{props.transTitle}</Trans>\n\t\t\t</span>\n\t\t\t<i className=\"fa fa-angle-right\"></i>\n\t\t</Link>\n\t</li>\n);\n\nexport default SideNav;","import React from 'react'\nimport { Trans } from \"react-i18next\";\nimport { Dropdown } from \"react-bootstrap\";\n\nconst Profile = (props) => (\n\t<li className=\"nav-item profile\">\n\t\t<div className=\"profile-desc\">\n\t\t\t<div onClick={props.profileClick} className=\"cursor-pointer profile-pic\">\n\t\t\t\t<div className=\"count-indicator\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"img-xs rounded-circle \"\n\t\t\t\t\t\tsrc={require(\"../images/faces/face0.jpeg\")}\n\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"count bg-success\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"profile-name\">\n\t\t\t\t\t<h5 className=\"mb-0 font-weight-normal\">\n\t\t\t\t\t\t<Trans>{props.authUser}</Trans>\n\t\t\t\t\t</h5>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<Trans>{props.authEmail}</Trans>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Dropdown alignRight>\n\t\t\t\t<Dropdown.Toggle as=\"a\" className=\"cursor-pointer no-caret\">\n\t\t\t\t\t<i className=\"mdi mdi-dots-vertical\"></i>\n\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t<Dropdown.Menu className=\"sidebar-dropdown preview-list\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"!#\"\n\t\t\t\t\t\tclassName=\"dropdown-item preview-item\"\n\t\t\t\t\t\tonClick={(evt) => evt.preventDefault()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"preview-thumbnail\">\n\t\t\t\t\t\t\t<div className=\"preview-icon bg-dark2 rounded-circle\">\n\t\t\t\t\t\t\t\t<i className=\"mdi mdi-settings text-primary\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"preview-item-content\">\n\t\t\t\t\t\t\t<p className=\"preview-subject ellipsis mb-1 text-small\">\n\t\t\t\t\t\t\t\t<Trans>Account settings</Trans>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div className=\"dropdown-divider\"></div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"!#\"\n\t\t\t\t\t\tclassName=\"dropdown-item preview-item\"\n\t\t\t\t\t\tonClick={(evt) => evt.preventDefault()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"preview-thumbnail\">\n\t\t\t\t\t\t\t<div className=\"preview-icon bg-dark2 rounded-circle\">\n\t\t\t\t\t\t\t\t<i className=\"mdi mdi-onepassword  text-info\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"preview-item-content\">\n\t\t\t\t\t\t\t<p className=\"preview-subject ellipsis mb-1 text-small\">\n\t\t\t\t\t\t\t\t<Trans>Change Password</Trans>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div className=\"dropdown-divider\"></div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"!#\"\n\t\t\t\t\t\tclassName=\"dropdown-item preview-item\"\n\t\t\t\t\t\tonClick={(evt) => evt.preventDefault()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"preview-thumbnail\">\n\t\t\t\t\t\t\t<div className=\"preview-icon bg-dark2 rounded-circle\">\n\t\t\t\t\t\t\t\t<i className=\"mdi mdi-calendar-today text-success\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"preview-item-content\">\n\t\t\t\t\t\t\t<p className=\"preview-subject ellipsis mb-1 text-small\">\n\t\t\t\t\t\t\t\t<Trans>To-do list</Trans>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</Dropdown.Menu>\n\t\t\t</Dropdown>\n\t\t</div>\n\t</li>\n);\n\nexport default Profile;","// src/shared/Sidebar.js\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { Trans } from \"react-i18next\";\nimport TextEditor from \"../TextEditor\";\nimport { UserContext } from \"../App\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport SideNav from \"./SideNav\";\nimport Profile from \"./Profile\";\n\nexport const useSidebarLogic = () => {\n    const { state, dispatch } = useContext(UserContext);\n\n    const fetchFilesAndGraphData = async () => {\n        if (!state.auth || !state.auth.authToken) return;\n        const result = await axios(`${BASE_URL_DEV}/get/files`, {\n            headers: {\n                \"x-access-token\": state.auth && state.auth.authToken,\n            },\n        });\n        const files = result.data && result.data.files;\n        if (files && files.length > 0) {\n            const results = await axios(`${BASE_URL_DEV}/get-graphdata`, {\n                headers: {\n                    \"x-access-token\": state.auth && state.auth.authToken,\n                },\n            });\n            const allgraphs = results.data;\n            let Obj = {};\n            let _id = \"\";\n\n            allgraphs && allgraphs.graphdata && allgraphs.graphdata.length && allgraphs.graphdata.filter(x => {\n                _id = x.fileName;\n                Obj[_id] = x.links.filter(e => e.source == \"CITATION\" || e.source == \"PROVISION\");\n            });\n            const fileNew = files.map(element => ({\n                ...element,\n                CITATION: Obj && Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source == \"CITATION\") : [\"N/A\"],\n                PROVISION: Obj && Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source == \"PROVISION\") : [\"N/A\"],\n            }));\n            dispatch({ type: \"ADD_FILE\", payload: fileNew });\n        }\n    };\n\n    const fetchHighlights = async () => {\n        if (state.fileHighlights && state.fileHighlights.length === 0) {\n            const result = await axios(`${BASE_URL_DEV}/get-highlights`, {\n                headers: {\n                    \"x-access-token\": state.auth && state.auth.authToken,\n                },\n            });\n            const fileHighlights = result.data;\n            if (!state.currentFile && fileHighlights && fileHighlights.highlights && fileHighlights.highlights.length) {\n                const data = {\n                    name: fileHighlights.highlights[0][\"name\"],\n                    url: `uploads/${state.auth.userPublicId}/${fileHighlights.highlights[0][\"name\"]}`\n                };\n                dispatch({ type: \"SET_CURR_FILE\", payload: data });\n            }\n            if (fileHighlights && fileHighlights.highlights && fileHighlights.highlights.length > 0) {\n                dispatch({\n                    type: \"FETCH_FILE_HIGHLIGHTS\",\n                    payload: fileHighlights.highlights,\n                });\n            }\n        }\n    };\n\n    const showFileViewerHandler = () => {\n        dispatch({ type: \"SET_VIEW\", payload: { showFileViewer: true } });\n    }\n\n    return {\n        fetchFilesAndGraphData,\n        fetchHighlights,\n        showFileViewerHandler,\n    };\n}\n\nfunction Sidebar() {\n    const { state, dispatch } = useContext(UserContext);\n    const { fetchFilesAndGraphData, fetchHighlights } = useSidebarLogic();\n\n    useEffect(() => {\n        fetchFilesAndGraphData();\n        fetchHighlights();\n    }, [state.auth.authToken]);\n\n    const itemClickHandler = (viewState) => {\n        dispatch({ type: \"SET_VIEW\", payload: viewState });\n    }\n\n    const [showTextEditor, setShowTextEditor] = useState(false);\n\n    const handleTextEditor = (e) => {\n        e.preventDefault();\n        setShowTextEditor(true);\n    };\n\n    return (\n        <nav className=\"sidebar sidebar-offcanvas\" id=\"sidebar\">\n            <div className=\"sidebar-brand-wrapper d-none d-lg-flex align-items-center justify-content-center fixed-top\">\n                <a className=\"sidebar-brand brand-logo\" href=\"index.html\">\n                    <img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n                </a>\n                <a className=\"sidebar-brand brand-logo-mini\" href=\"index.html\">\n                    <img src={require(\"../images/scaletransm2.png\")} alt=\"logo\" />\n                </a>\n            </div>\n            <ul className=\"nav\">\n                <Profile profileClick={() => itemClickHandler({ showProfileView: true })}\n                    authUser={state.auth && state.auth.username}\n                    authEmail={state.auth && state.auth.email} />\n\n                <li className=\"nav-item nav-category\">\n                    <span className=\"nav-link\">\n                    </span>\n                </li>\n                <SideNav class={state.showDashboardView} click={() => itemClickHandler({ showDashboardView: true })}\n                    iconClass='mdi mdi-speedometer' transTitle='Dashboard' />\n\n                <SideNav class={state.showFileViewer} click={() => itemClickHandler({ showFileViewer: true })}\n                    iconClass='mdi mdi-file' transTitle='Copilot' />\n\n                <SideNav class={false} click={handleTextEditor}\n                    iconClass='mdi mdi-text' transTitle='Notes' />\n\n                <SideNav class={state.showTextAnonymizerView} click={() => itemClickHandler({ showTextAnonymizerView: true })}\n                    iconClass='mdi mdi-text' transTitle='Anonymizer' />\n\n                {/* <SideNav class={state.showLawsReader} click={() => itemClickHandler({ showLawsReader: true })}\n                    iconClass='mdi mdi-scale-balance' transTitle='Easy-Reader' /> */}\n\n            </ul>\n            {showTextEditor && (\n                <TextEditor\n                    id={state.auth && state.auth.userPublicId}\n                    fileName={'index'}\n                    showTextEditor={showTextEditor}\n                    setShowTextEditor={setShowTextEditor}\n                />\n            )}\n        </nav>\n    );\n}\n\nexport default Sidebar;\n","import React, { useState, useContext } from \"react\";\r\nimport { Fragment } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../App\";\r\nimport { BASE_URL_DEV } from \"../utils\";\r\n\r\nfunction HighlightButton(props) {\r\n  const { state, dispatch } = useContext(UserContext);\r\n  const [hightlightResponse, setHightlightResponse] = useState(\"\");\r\n\r\n  async function saveHighlightData() {\r\n    await axios\r\n      .post(`${BASE_URL_DEV}/save-highlights`, state.fileHighlights, {\r\n        headers: {\r\n          \"x-access-token\": state.auth && state.auth.authToken,\r\n        },\r\n      })\r\n      .then(function (response) {\r\n        if (response.data) {\r\n          dispatch({ type: \"MESSAGE\", payload: response.data.message });\r\n          setHightlightResponse(response.data.message);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        if (error.response) {\r\n          dispatch({ type: \"ERROR\", payload: error.response.statusText });\r\n          setHightlightResponse(\r\n            error && error.response && error.response.statusText\r\n          );\r\n        }\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <div className=\"highlight_btn\">\r\n        <Button\r\n          className=\"btn btn-md\"\r\n          outline\r\n          color=\"light\"\r\n          onClick={saveHighlightData}\r\n        >\r\n          Save Highlights\r\n        </Button>\r\n        <p>{hightlightResponse}</p>\r\n      </div> */}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default HighlightButton;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { Fragment } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"reactstrap\";\r\nimport { UserContext } from \"../App\";\r\nimport { BASE_URL_DEV } from \"../utils\";\r\nconst async = require('async');\r\n\r\nfunction FileUploadComponent(props) {\r\n    const { state, dispatch } = useContext(UserContext);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [file, setFile] = useState([]);\r\n\r\n    async function _handleSubmit(e) {\r\n        e.preventDefault();\r\n        if (!file) return null;\r\n\r\n        const data = new FormData();\r\n        for (const key of Object.keys(file)) {\r\n            data.append('file', file[key]);\r\n        }\r\n        setIsLoading(true);\r\n        await axios\r\n            .post(`${BASE_URL_DEV}/upload/file`, data, {\r\n                headers: {\r\n                    'x-access-token': state.auth && state.auth.authToken,\r\n                }\r\n            })\r\n            .then(function (response) {\r\n                if (response.data) {\r\n                    var data = file;\r\n                    dispatch({ type: \"MESSAGE\", payload: response.data.message });\r\n                    try {\r\n                        async.eachSeries(data, function (element, cbBatch) {\r\n                            axios.get(`${BASE_URL_DEV}/highlights-json/${state.auth && state.auth.userPublicId}/${element.name}`, {\r\n                                headers: {\r\n                                    'x-access-token': state.auth && state.auth.authToken,\r\n                                }\r\n                            })\r\n                                .then(function (result) {\r\n                                    const fileHighlights = result.data;\r\n                                    dispatch({ type: \"SET_CURR_FILE\", payload: file[0] });\r\n                                    console.log(\"Dispatched SET_CURR_FILE with payload:\", file[0]);\r\n\r\n                                    setFile([]);\r\n                                    if (fileHighlights && fileHighlights.highlights) {\r\n                                        dispatch({\r\n                                            type: \"SET_FILE_HIGHLIGHTS\",\r\n                                            payload: fileHighlights.highlights,\r\n                                        });\r\n                                    }\r\n                                    cbBatch(null);\r\n                                });\r\n\r\n                        }, (loopErrBatch) => {\r\n                            console.log(loopErrBatch);\r\n                            (async () => {\r\n                                const result = await axios(`${BASE_URL_DEV}/get/files`, {\r\n                                    headers: {\r\n                                        \"x-access-token\": state.auth && state.auth.authToken,\r\n                                    },\r\n                                });\r\n                                const files = result.data && result.data.files;\r\n                                console.log(\"Fetched files response:\", result);\r\n                                if (result && files && files.length > 0) {\r\n                                    const results = await axios(`${BASE_URL_DEV}/get-graphdata`, {\r\n                                        headers: {\r\n                                            \"x-access-token\": state.auth && state.auth.authToken,\r\n                                        },\r\n                                    });\r\n                                    const allgraphs = results.data;\r\n                                    let Obj = {};\r\n                                    let _id = \"\";\r\n\r\n                                    results && allgraphs && allgraphs.graphdata && allgraphs.graphdata.length > 0 && allgraphs.graphdata.filter(x => {\r\n                                        _id = x.fileName;\r\n                                        Obj[_id] = x.links.filter(e => e.source == \"CITATION\" || e.source == \"PROVISION\");\r\n                                    });\r\n                                    var fileNew = files;\r\n                                    fileNew.forEach(element => {\r\n                                        element[\"CITATION\"] = Obj && Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source == \"CITATION\") : [\"N/A\"];\r\n                                        element[\"PROVISION\"] = Obj && Obj[element.name] && Obj[element.name].length > 0 ? Obj[element.name].filter(e => e.source == \"PROVISION\") : [\"N/A\"];\r\n                                    });\r\n                                    setIsLoading(false);\r\n                                    dispatch({ type: \"ADD_FILE\", payload: fileNew });\r\n                                    dispatch({ type: \"SET_MODAL\", payload: true });\r\n                                }\r\n                            })();\r\n                            console.log(\"All Batch Completed\");\r\n                        });\r\n                    } catch (error) {\r\n                        console.log(\"Error:\", error);\r\n                    }\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n                if (error && error.response) {\r\n                    dispatch({ type: \"ERROR\", payload: error.response.statusText || 'File Upload Failed!!' });\r\n                }\r\n            });\r\n    }\r\n\r\n    function _handleImageChange(e) {\r\n        e.preventDefault();\r\n        let newfile = [];\r\n        let file = e.target.files;\r\n        for (let i = 0; i < file.length; i++) {\r\n            let reader = new FileReader();\r\n            newfile.push(file[i]);\r\n            reader.readAsDataURL(file[i]);\r\n            reader.onload = () => {\r\n                setFile(newfile);\r\n            };\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <div className=\"previewComponent\">\r\n                <form onSubmit={(e) => _handleSubmit(e)} encType=\"multipart/form-data\">\r\n                    <div className=\"input-group\">\r\n                        <div className=\"custom-file\">\r\n                            <input\r\n                                type=\"file\"\r\n                                name=\"file\"\r\n                                className=\"custom-file-input\"\r\n                                multiple=\"multiple\"\r\n                                onChange={(e) => _handleImageChange(e)}\r\n                                aria-describedby=\"inputGroupFileAddon01\"\r\n                            />\r\n                            <label style={{ color: '#c7c7c7' }} className=\"custom-file-label\">\r\n                                {file.length === 0 ? 'Choose file' : file.length + ' files selected'}\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                    <Button\r\n                        className=\"btn btn-md submitButton\"\r\n                        color=\"success\"\r\n                        type=\"submit\"\r\n                        onClick={(e) => _handleSubmit(e)}\r\n                    >\r\n                        Upload\r\n                    </Button>\r\n                    {isLoading ? (\r\n                        <div className=\"loading\"></div>\r\n                    ) : null}\r\n                </form>\r\n            </div>\r\n        </Fragment>\r\n    );\r\n}\r\n\r\nexport default FileUploadComponent;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Fragment } from \"react\";\r\nimport { Input } from \"reactstrap\";\r\n\r\nimport { UserContext } from \"../App\";\r\n\r\nfunction Search(props) {\r\n\tconst { dispatch } = useContext(UserContext);\r\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n\tfunction handleFormSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tdispatch({ type: \"SET_SEARCH_QUERY\", payload: searchQuery });\r\n\t}\r\n\r\n\tfunction handleChange(e) {\r\n\t\tsetSearchQuery(e.target.value);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{/* <form className=\"nav-link mt-2 mt-md-0 d-none d-lg-flex search\" onSubmit={handleFormSubmit}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\tplaceholder=\"Search for caselaw or statue \"\r\n\t\t\t\t\tvalue={searchQuery}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t/>\r\n\t\t\t</form> */}\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default Search;\r\n","import React, { useRef, useContext, useEffect } from 'react';\nimport { Link, useHistory } from \"react-router-dom\";\nimport HighlightButton from '../Dashboard/HighlightButton';\nimport FileUploadComponent from '../Dashboard/FileUploadComponent';\nimport Search from '../Dashboard/Search';\nimport { Col, Row } from 'reactstrap';\n\nimport { UserContext } from \"../App\";\nimport { fetchAuth } from '../utils';\n\nconst Navbar = ({ setCreateNotes, setShowGraph, showGraph, setShowGraphModal }) => {\n    const history = useHistory();\n    const { state, dispatch } = useContext(UserContext);\n    const toggleButtonRef = useRef(null);\n\n    useEffect(() => {\n        setInterval(function () { authChe(); }, 60000);\n\n        if (state && state.auth) {\n            const auth = state.auth;\n            console.log('Auth Expiry Time', new Date(auth.expiry));\n            if (!auth.authToken || !auth.userPublicId || !auth.username || !auth.email) {\n                const savedAuth = fetchAuth();\n                if (!savedAuth) {\n                    history.push(\"/login\");\n                } else {\n                    dispatch({ type: \"AUTH\", payload: savedAuth });\n                }\n            }\n        }\n\n        const timer = setTimeout(() => {\n            if (toggleButtonRef.current) {\n                toggleButtonRef.current.click();\n            }\n        }, 3000);\n        return () => clearTimeout(timer);\n\n    }, [state.auth]);\n\n    const authChe = () => {\n        var d = new Date();\n\n        var datestring = d.getDate() + \"-\" +\n            d.getHours() + \"-\" + d.getMinutes();\n\n        let beforFiveTime = state.auth.expiry - 60000 * 5\n        var beforeFiveDateString = new Date(beforFiveTime).getDate() + \"-\" +\n            new Date(beforFiveTime).getHours() + \"-\" + new Date(beforFiveTime).getMinutes();\n\n        if (beforeFiveDateString === datestring) {\n            alert(\"Auth Signature about to expire in 5 minutes\")\n        }\n        var authExpiry = new Date(state.auth.expiry).getDate() + \"-\" +\n            new Date(state.auth.expiry).getHours() + \"-\" + new Date(state.auth.expiry).getMinutes();\n        if (authExpiry === datestring) {\n            history.push(\"/login\");\n        }\n    }\n\n    const toggleOffcanvas = () => {\n        document.querySelector('.sidebar-offcanvas').classList.toggle('active');\n    }\n\n    return (\n        <nav className=\"navbar p-0 fixed-top d-flex flex-row\">\n            <div className=\"navbar-brand-wrapper d-flex d-lg-none align-items-center justify-content-center\">\n                <Link className=\"navbar-brand brand-logo-mini\" to=\"/\">\n                    <img src={require(\"../images/logo-mini.svg\")} alt=\"logo\" />\n                </Link>\n            </div>\n            <div className=\"navbar-menu-wrapper flex-grow d-flex align-items-stretch\">\n                <button\n                    ref={toggleButtonRef}\n                    className=\"navbar-toggler align-self-center hamburger\"\n                    type=\"button\"\n                    onClick={() => document.body.classList.toggle(\"sidebar-icon-only\")}\n                >\n                    <span className=\"mdi mdi-menu\"></span>\n                </button>\n                <Row\n                    style={{ alignItems: \"center\", width: \"100%\" }}\n                    className=\"nav_items_upload\"\n                >\n                    <Col lg={3} md={4} xs={12} sm={12}>\n                        <Search />\n                    </Col>\n                    <Col lg={6} md={6} xs={12} sm={12}>\n                        {/* <FileUploadComponent /> */}\n                    </Col>\n                    <Col lg={3} md={2} xs={12} sm={12}>\n                        <HighlightButton />\n                    </Col>\n                </Row>\n                <div className=\"button-container\" style={{ display: 'flex', justifyContent: 'space-between', margin: '20px auto', width: 'fit-content' }}>\n                    <div\n                        onClick={() => setCreateNotes(true)}\n                        className=\"btn btn-md btn-primary text-center cursor-pointer p-2\"\n                    >Notes\n                    </div>\n                    <div\n                        onClick={() => setShowGraph(!showGraph)}\n                        className=\"btn btn-lg btn-secondary text-center cursor-pointer p-2\"\n                    > {showGraph ? \"Hide\" : \"Graph\"}\n                    </div>\n                </div>\n                <button\n                    className=\"navbar-toggler navbar-toggler-right d-lg-none align-self-center\"\n                    type=\"button\"\n                    onClick={toggleOffcanvas}\n                >\n                    <span className=\"mdi mdi-format-line-spacing\"></span>\n                </button>\n                <button\n                    style={{ height: '35px' }}\n                    className=\"navbar-toggler bg-danger align-self-center text-white btn btn-danger\"\n                    type=\"button\"\n                    onClick={() => dispatch({ type: \"LOG_OUT\" })}\n                >\n                    LogOut\n                </button>\n            </div>\n        </nav>\n    );\n}\n\nexport default Navbar;\n","import React, { useState, useEffect, useRef } from 'react';\nimport io from 'socket.io-client'; // Import socket.io-client\nimport '../style/theme-styles/components/Chatstyles.css';\n\nconst ChatUI = ({ socket: propSocket, publicId, pdfDocumentName }) => {\n    const [messages, setMessages] = useState([\n        { id: 1, nickName: '', message: 'Hello there!', type: 'me' }\n    ]);\n    const [inputText, setInputText] = useState('');\n    const socketRef = useRef();\n\n    useEffect(() => {\n        if (propSocket) {\n            socketRef.current = propSocket;\n        } else {\n            // const newSocket = io(\"http://localhost:8000\");\n            const newSocket = io(\"https://back.casebk.com\");  // Update the URL here\n\n            socketRef.current = newSocket;\n            console.log(\"Socket connection established\");\n\n            return () => {\n                newSocket.disconnect();\n                console.log(\"Socket disconnected\");\n            };\n        }\n    }, [propSocket]);\n\n    const sendMessage = (text, sender = 'Yahya') => {\n        if (text.trim()) {\n            console.log('Sending message:', text);\n            const newMessage = {\n                id: messages.length + 1,\n                nickName: sender,\n                message: text,\n                type: sender === 'Yahya' ? 'user' : 'me',\n                publicId: publicId,\n                pdfDocumentName: pdfDocumentName\n            };\n            setMessages(prevMessages => [...prevMessages, newMessage]);\n            if (sender === 'Yahya' && socketRef.current) {\n                console.log('Emitting to socket:', text);\n                socketRef.current.emit('openai-chat', { query: newMessage });\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (socketRef.current) {\n            const handleResponse = (response) => {\n                console.log('Received response:', response);\n                const newMessage = {\n                    id: messages.length + 1,\n                    nickName: '',\n                    message: response.recommendation,\n                    type: 'me'\n                };\n                setMessages(prevMessages => [...prevMessages, newMessage]);\n            };\n\n            socketRef.current.on('openai-query-response', handleResponse);\n\n            return () => {\n                socketRef.current.off('openai-query-response', handleResponse);\n            };\n        }\n    }, []);\n\n    const handleSend = () => {\n        sendMessage(inputText);\n        setInputText(''); // Clear the input after sending the message\n    };\n\n    return (\n        <div id=\"chat\" className=\"--dark-theme\">\n            <div className=\"chat__conversation-board\">\n                {messages.map((msg, index) => (\n                    <div key={index} className={`chat__conversation-board__message-container ${msg.type === 'me' ? 'me' : 'user'}`}>\n                        <div className=\"chat__conversation-board__message__person\">\n                            {msg.type === 'me' &&\n                                <img src=\"/static/media/scaletransm2.5eb52ef8.png\" alt={msg.nickName} style={{ width: '35px', height: '35px', borderRadius: '50%' }} />\n                            }\n                            <span className=\"chat__conversation-board__message__person__nickname\">{msg.nickName}</span>\n                        </div>\n                        <div className=\"chat__conversation-board__message__context\">\n                            <p className={`chat__conversation-board__message__bubble ${msg.type === 'user' ? 'user-message' : ''}`}>{msg.message}</p>\n                        </div>\n                    </div>\n                ))}\n            </div>\n            <div className=\"chat__conversation-panel\">\n                <input\n                    className=\"chat__conversation-panel__input\"\n                    placeholder=\"Ask Casebook AI a question about this document...\"\n                    value={inputText}\n                    onChange={(e) => setInputText(e.target.value)}\n                    onKeyDown={(e) => {\n                        if (e.key === 'Enter') {\n                            handleSend();\n                        }\n                    }}\n                />\n                <button className=\"chat__conversation-panel__button\" onClick={handleSend}>\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M2 21l21-9L2 3v7l15 2-15 2v7z\" fill=\"currentColor\"/>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default ChatUI;\n","// @flow\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { UserContext } from \"../App\";\nimport { Resizable } from \"react-resizable\";\nimport processMd from \"./markdown\";\nimport axios from \"axios\";\nimport { BASE_URL_DEV } from \"../utils\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExclamationCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport ChatUI from '../shared/Chatbox';\n\nimport \"../style/resizable.css\";\n\nconst updateHash = (highlight) => {\n  document.location.hash = `pdf-highlight-${highlight.id}`;\n};\n\nfunction FileViewer() {\n  const { state, dispatch } = useContext(UserContext);\n\n  const [highlights, setHighlights] = useState([]);\n  const [dimensions, setDimensions] = useState({\n    height: 720,\n    width: 300,\n  });\n  const [selectPdf, setSelectPdf] = useState(false);\n\n  const [show, setShow] = useState(false);\n  const [index, setIndex] = useState();\n  const [currentHighlightIndex, setCurrentHighlightIndex] = useState(0);\n  const [filter, setFilter] = useState(\"\");\n  const [totalHighlights, setTotalHighlights] = useState(0);\n  const [highlightProgress, setHighlightProgress] = useState(0);\n\n  const updateProgress = (currentIndex, total) => {\n    setHighlightProgress(((currentIndex + 1) / total) * 100);\n  };\n  \n  const handlePreviousHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      alert(`No highlights available for '${filter}'`);\n      return; // Early return to prevent further execution\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const prevIndex = (currentFilteredIndex - 1 + filteredHighlights.length) % filteredHighlights.length;\n    const prevHighlight = filteredHighlights[prevIndex];\n    setCurrentHighlightIndex(highlights.indexOf(prevHighlight));\n    updateHash(prevHighlight);\n    updateProgress(highlights.indexOf(prevHighlight), filteredHighlights.length);\n    scrollToActiveCard(); // Ensuring the card scrolls into view\n};\n\nconst handleNextHighlight = () => {\n    const filteredHighlights = highlights.filter(h => h.comment.text.toUpperCase().includes(filter));\n    if (filteredHighlights.length === 0) {\n      return; // Early return to prevent further execution\n    }\n    const currentFilteredIndex = filteredHighlights.findIndex(h => h === highlights[currentHighlightIndex]);\n    const nextIndex = (currentFilteredIndex + 1) % filteredHighlights.length;\n    if (nextIndex === 0 && currentFilteredIndex === filteredHighlights.length - 1) {\n      return;\n    }\n    const nextHighlight = filteredHighlights[nextIndex];\n    setCurrentHighlightIndex(highlights.indexOf(nextHighlight));\n    updateHash(nextHighlight);\n    updateProgress(highlights.indexOf(nextHighlight), filteredHighlights.length);\n    scrollToActiveCard(); // Ensuring the card scrolls into view\n};\n\n  const handleFilterChange = (newFilter) => {\n    setFilter(newFilter);\n  \n    // Apply the new filter and get filtered highlights\n    const filteredHighlights = highlights.filter(h =>\n      newFilter === \"\" || h.comment.text.toUpperCase().includes(newFilter.toUpperCase())\n    );\n  \n    // Set the total number of highlights which helps in calculating the progress\n    setTotalHighlights(filteredHighlights.length);\n  \n    // Check if there are any highlights that match the new filter\n    if (filteredHighlights.length > 0) {\n      // Reset the index to start at the first highlight of the filtered list\n      setCurrentHighlightIndex(highlights.indexOf(filteredHighlights[0]));\n      // Update the progress for the new filtered list\n      updateProgress(0, filteredHighlights.length);\n      // Update the hash to jump to the first highlight of the new filter\n      updateHash(filteredHighlights[0]);\n    } else {\n      // No highlights available for this filter\n      setCurrentHighlightIndex(-1); // Indicates no selection\n      setHighlightProgress(0); // Reset progress bar\n      // Optionally revert to the first available highlight if no filter matches\n      if (highlights.length > 0) {\n        setCurrentHighlightIndex(0);\n        updateHash(highlights[0]);\n        updateProgress(0, highlights.length);\n      } else {\n        document.location.hash = \"\"; // Clear the hash as no valid highlight\n        // alert(`No highlights available for '${newFilter}'`);\n      }\n    }\n  };\n  \n\n\n\n  const handleClose = () => setShow(false);\n  useEffect(() => {\n    if (state.currentFile) {\n      let highlightUpdated = false;\n      const filteredHighlights = state.fileHighlights.reduce((acc, item) => {\n        if (item.name === state.currentFile.name) {\n          // Include only highlights that do not have the label \"OTHER\" and match the current filter (if any)\n          const validHighlights = item.highlights.filter(highlight => \n            highlight.comment.text !== \"OTHER\" &&\n            (!filter || highlight.comment.text.toUpperCase().includes(filter))\n          );\n          acc.push(...validHighlights);\n          highlightUpdated = true;\n        }\n        return acc;\n      }, []);\n  \n      setHighlights(filteredHighlights);\n      if (!highlightUpdated || filteredHighlights.length === 0) {\n        setHighlights([]); // Clear highlights if none match or file changes\n      }\n      setCurrentHighlightIndex(0); // Reset index to start at first of new filtered list or if file changes\n    }\n  }, [state.currentFile, state.fileHighlights, filter]);  // Dependency on filter ensures index reset on filter change\n  \n  const handleFileClick = async (index) => {\n    dispatch({ type: \"SET_CURR_FILE\", payload: state.files[index] });\n    dispatch({ type: \"SET_MODAL\", payload: false });\n\n    setSelectPdf(false);\n  };\n\n  const handleRemove = (index) => {\n    setShow(true);\n    setIndex(index);\n  }\n\n  const handleRemoveFile = (data) => {\n    console.log(data, \"File Remove....\")\n\n\n\n    if (state.files.length > 0) {\n      let arr = state.files\n      arr.splice(arr.findIndex(a => a.name === data.name), 1)\n      dispatch({ type: \"ADD_FILE\", payload: arr });\n      dispatch({ type: \"SET_CURR_FILE\", payload: state.files[0] });\n    } else {\n      dispatch({ type: \"ADD_FILE\", payload: [] });\n      dispatch({\n        type: \"SET_FILE_HIGHLIGHTS\",\n        payload: [],\n      });\n      dispatch({ type: \"SET_CURR_FILE\", payload: null });\n    }\n\n\n    setShow(false);\n\n\n    axios.post(`${BASE_URL_DEV}/deletePdfAndGraphData`, { fileName: data.name }, {\n      headers: {\n        'x-access-token': state.auth && state.auth.authToken,\n      }\n    })\n      .then(function (response) {\n        console.log(\"delete api response\", response)\n\n      })\n\n  }\n\n  const deleteHighlight = (index) => {\n    const updatedHighlights = highlights.filter((highlight, idx) => {\n      if (index !== idx) {\n        return highlight;\n      }\n    });\n    setHighlights(updatedHighlights);\n  };\n  const hideModal = () => {\n    setSelectPdf(false);\n    dispatch({ type: \"SET_MODAL\", payload: false });\n\n  }\n  const resetHighlights = () => {\n    setHighlights([]);\n  };\n\n  const handleSendToEditor = (highlight) => {\n    if (!highlight.comment || !highlight.content) {\n        console.error(\"Highlight structure is not as expected\", highlight);\n        return;\n    }\n\n    const payload = {\n        commentText: highlight.comment.text,\n        contentText: highlight.content.text,\n    };\n    dispatch({ type: 'ADD_HIGHLIGHT_TEXT', payload });\n};\n\nconst handleWheel = (event) => {\n  const delta = event.deltaY;\n  event.preventDefault(); // Prevent default scrolling\n\n  if (delta < 0) {\n    handlePreviousHighlight();\n  } else if (delta > 0) {\n    handleNextHighlight();\n  }\n  scrollToActiveCard(); // Ensure the new active card is scrolled to view\n};\n\n\n\nconst handleHighlightClick = (index) => {\n  setCurrentHighlightIndex(index);\n  updateHash(highlights[index]);\n};\n\n\nconst scrollToActiveCard = () => {\n  setTimeout(() => {\n      const activeCard = document.querySelector('.newcard.active');\n      if (activeCard) {\n          activeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n      }\n  }, 0);\n};\n\n// Call this function after updating the current highlight index\n// setCurrentHighlightIndex(newIndex);\nscrollToActiveCard();\n\nreturn (\n  <Resizable className=\"box\" width={dimensions.width} onResize={(e, { size }) => setDimensions({ width: size.width })} resizeHandles={[\"e\"]}>\n      <div className=\"sidebarnew\" style={{ width: \"36vw\" }}>\n\n          {/* Progress Bar */}\n          <div className=\"progress-container\" style={{ width: '100%', backgroundColor: '#222d37', height: '1vh', margin: '1vh 0' }}>\n              <div className=\"progress-bar\" style={{ width: `${highlightProgress}%`, height: '5px', backgroundColor: '#2e5f8a' }}></div>\n          </div>\n\n          {/* Navigation and Filtering */}\n          <div className=\"highlight-actions\">\n              <button className=\"btn btn-secondary\" onClick={(e) => {\n                  e.stopPropagation();\n                  handlePreviousHighlight();\n              }}>Previous</button>\n\n              <UncontrolledDropdown>\n                  <DropdownToggle caret color=\"warning\">\n                      Category\n                  </DropdownToggle>\n                  <DropdownMenu>\n                      <DropdownItem header>Jump to</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"AXIOM\")}>Axiom</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"ISSUE\")}>Issue</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"LEGAL_TEST\")}>Legal Test</DropdownItem>\n                      <DropdownItem onClick={() => handleFilterChange(\"CONCLUSION\")}>Conclusion</DropdownItem>\n                      <DropdownItem divider />\n                  </DropdownMenu>\n              </UncontrolledDropdown>\n\n              <button className=\"btn btn-primary\" onClick={(e) => {\n                  e.stopPropagation();\n                  handleNextHighlight();\n              }}>Next</button>\n          </div>\n\n          {/* Highlight cards within a scrollable container */}\n          <div className=\"sidebar__highlights\" onWheel={handleWheel} style={{ overflowY: \"scroll\", height: \"calc(17vh)\", position: \"relative\" }}>\n              {highlights.length > 0 ? highlights.map((highlight, idx) => (\n                  <div className={`newcard ${idx === currentHighlightIndex ? 'active' : ''}`} key={idx} onClick={() => handleHighlightClick(idx)}>\n                      <div>\n                          <strong>{processMd(highlight.comment.text)}</strong>\n                          {highlight.content.text && (\n                              <blockquote>{`${highlight.content.text.slice(0, 90).trim()}…`}</blockquote>\n                          )}\n                          {highlight.content.image && (\n                              <div className=\"highlight__image\" style={{ marginTop: \"0.5rem\" }}>\n                                  <img src={highlight.content.image} alt=\"Screenshot\" />\n                              </div>\n                          )}\n                      </div>\n                  </div>\n              )) : (\n                  <div className=\"no-highlights\">No Highlights Available for Selected Pdf!</div>\n              )}\n          </div>\n\n          {/* Summary Card Section */}\n          {/* <div className=\"description\" style={{ padding: \"1rem\" }}> */}\n          <div className=\"description\">\n\n              {/* <div className=\"summary-section\"><h2>Summary</h2></div>\n              <div className=\"highlight-card\" key={currentHighlightIndex}>\n                  <div className=\"card-body\">\n                      <strong> Details Here</strong>\n                      <blockquote>This is an example of some summary text that could be here.</blockquote>\n                  </div>\n              </div> */}\n\n\n        {/* <ChatUI /> */}\n        <ChatUI publicId={state.auth.userPublicId} pdfDocumentName={state.currentFile && state.currentFile.name} />\n\n          </div>\n\n      </div>\n  </Resizable>\n);\n\n}\n\nexport default FileViewer;","import React, { useState, useReducer, createContext } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport AppRoutes from \"./AppRoutes\";\r\nimport { reducer } from \"./Reducer/Reducers\";\r\nimport { InitialState } from \"./Reducer/InitialState\";\r\nimport { Route, Redirect, Switch, BrowserRouter as Router } from \"react-router-dom\";\r\nimport NodePreview from \"./Dashboard/NodePreview\";\r\nimport NodesList from \"./Dashboard/NodesList\";\r\nimport Register from \"./Dashboard/Register\";\r\nimport Login from \"./Dashboard/Login\";\r\nimport Sidebar from \"./shared/Sidebar\";\r\nimport \"./App.scss\";\r\nimport \"./style/App.css\";\r\nimport Navbar from \"./shared/Navbar\";\r\nimport FileViewer from \"./Dashboard/FileViewer\";\r\nimport FileMetadataViewer from \"./Dashboard/FileMetadataViewer\";\r\nimport PdfViewerSide from \"./Dashboard/PdfViewerSide\";\r\nexport const UserContext = createContext();\r\n\r\nfunction App() {\r\n    const [state, dispatch] = useReducer(reducer, InitialState);\r\n\r\n    const [createNotes, setCreateNotes] = useState(false);\r\n    const [showGraph, setShowGraph] = useState(false);\r\n    const [showGraphModal, setShowGraphModal] = useState(false);\r\n\r\n    return (\r\n        <UserContext.Provider value={{ state, dispatch }}>\r\n            <Router>\r\n                <Switch>\r\n                    <Route path=\"/login\">\r\n                        <Login />\r\n                    </Route>\r\n                    <Route path=\"/register\">\r\n                        <Register />\r\n                    </Route>\r\n                    <Route exact path=\"/dashboard\">\r\n                        <div className=\"container-scroller\">\r\n                            <Sidebar />\r\n                            <div className=\"container-fluid page-body-wrapper\">\r\n                                <Navbar \r\n                                    setCreateNotes={setCreateNotes}\r\n                                    setShowGraph={setShowGraph}\r\n                                    showGraph={showGraph}\r\n                                    setShowGraphModal={setShowGraphModal}\r\n                                />\r\n                                <div className=\"main-panel\">\r\n                                    <div className=\"show_side\" style={{ display: \"flex\" }}>\r\n                                        {state.showHighlight === true && state.searchQuery !== \"\" && <NodesList />}\r\n                                        {state.showFileViewer === true && <FileViewer />}\r\n                                        <div className=\"content-wrapper\">\r\n                                            <AppRoutes\r\n                                                showFileViewer={state.showFileViewer}\r\n                                                showDashboardView={state.showDashboardView}\r\n                                                showHighlight={state.showHighlight}\r\n                                                showProfileView={state.showProfileView}\r\n                                                showFeedView={state.showFeedView}\r\n                                                showTextAnonymizerView={state.showTextAnonymizerView}\r\n                                                showLawsReader={state.showLawsReader}\r\n                                                showGptView={state.showGptView}\r\n                                            />\r\n                                            <FileMetadataViewer files={state.files} />\r\n                                        </div>\r\n                                        {state.showHighlight === true && state.searchQuery !== \"\" && <NodePreview />}\r\n                                        {state.showFileViewer && (\r\n                                            <PdfViewerSide\r\n                                                createNotes={createNotes}\r\n                                                showGraph={showGraph}\r\n                                                showGraphModal={showGraphModal}\r\n                                                setShowGraphModal={setShowGraphModal}\r\n                                                setCreateNotes={setCreateNotes}\r\n                                                setShowGraph={setShowGraph}\r\n                                            />\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Route>\r\n                    <Redirect to=\"/login\" />\r\n                </Switch>\r\n            </Router>\r\n        </UserContext.Provider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","module.exports = __webpack_public_path__ + \"static/media/logo-mini.c949e51e.svg\";","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n\t<React.Fragment>\r\n\t\t<App />\r\n\t</React.Fragment>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React from \"react\";\r\n\r\nimport unified from 'unified'\r\nimport parse from 'remark-parse'\r\nimport remark2rehype from 'remark-rehype'\r\nimport rehype2react from 'rehype-react'\r\nimport math from 'remark-math'\r\nimport katex from 'rehype-katex'\r\n\r\nfunction processMd(text) {\r\n  return (\r\n    unified()\r\n    .use(parse)\r\n    .use(math)\r\n    .use(remark2rehype)\r\n    .use(katex)\r\n    .use(rehype2react, {createElement: React.createElement})\r\n    .processSync(text).result\r\n  )\r\n}\r\n\r\nexport default processMd;\r\n","module.exports = __webpack_public_path__ + \"static/media/scaletransm2.5eb52ef8.png\";"],"sourceRoot":""}